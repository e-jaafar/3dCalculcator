(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function g3(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var m0={exports:{}},Uh={},g0={exports:{}},sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1;function v3(){if(n1)return sn;n1=1;var o=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=g&&N[g]||N["@@iterator"],typeof N=="function"?N:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,w={};function S(N,O,re){this.props=N,this.context=O,this.refs=w,this.updater=re||x}S.prototype.isReactComponent={},S.prototype.setState=function(N,O){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,O,"setState")},S.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function C(){}C.prototype=S.prototype;function E(N,O,re){this.props=N,this.context=O,this.refs=w,this.updater=re||x}var A=E.prototype=new C;A.constructor=E,M(A,S.prototype),A.isPureReactComponent=!0;var L=Array.isArray,D=Object.prototype.hasOwnProperty,F={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function I(N,O,re){var se,Z={},he=null,ue=null;if(O!=null)for(se in O.ref!==void 0&&(ue=O.ref),O.key!==void 0&&(he=""+O.key),O)D.call(O,se)&&!B.hasOwnProperty(se)&&(Z[se]=O[se]);var me=arguments.length-2;if(me===1)Z.children=re;else if(1<me){for(var we=Array(me),Oe=0;Oe<me;Oe++)we[Oe]=arguments[Oe+2];Z.children=we}if(N&&N.defaultProps)for(se in me=N.defaultProps,me)Z[se]===void 0&&(Z[se]=me[se]);return{$$typeof:o,type:N,key:he,ref:ue,props:Z,_owner:F.current}}function z(N,O){return{$$typeof:o,type:N.type,key:O,ref:N.ref,props:N.props,_owner:N._owner}}function V(N){return typeof N=="object"&&N!==null&&N.$$typeof===o}function te(N){var O={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(re){return O[re]})}var X=/\/+/g;function K(N,O){return typeof N=="object"&&N!==null&&N.key!=null?te(""+N.key):O.toString(36)}function q(N,O,re,se,Z){var he=typeof N;(he==="undefined"||he==="boolean")&&(N=null);var ue=!1;if(N===null)ue=!0;else switch(he){case"string":case"number":ue=!0;break;case"object":switch(N.$$typeof){case o:case e:ue=!0}}if(ue)return ue=N,Z=Z(ue),N=se===""?"."+K(ue,0):se,L(Z)?(re="",N!=null&&(re=N.replace(X,"$&/")+"/"),q(Z,O,re,"",function(Oe){return Oe})):Z!=null&&(V(Z)&&(Z=z(Z,re+(!Z.key||ue&&ue.key===Z.key?"":(""+Z.key).replace(X,"$&/")+"/")+N)),O.push(Z)),1;if(ue=0,se=se===""?".":se+":",L(N))for(var me=0;me<N.length;me++){he=N[me];var we=se+K(he,me);ue+=q(he,O,re,we,Z)}else if(we=v(N),typeof we=="function")for(N=we.call(N),me=0;!(he=N.next()).done;)he=he.value,we=se+K(he,me++),ue+=q(he,O,re,we,Z);else if(he==="object")throw O=String(N),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ue}function oe(N,O,re){if(N==null)return N;var se=[],Z=0;return q(N,se,"","",function(he){return O.call(re,he,Z++)}),se}function ce(N){if(N._status===-1){var O=N._result;O=O(),O.then(function(re){(N._status===0||N._status===-1)&&(N._status=1,N._result=re)},function(re){(N._status===0||N._status===-1)&&(N._status=2,N._result=re)}),N._status===-1&&(N._status=0,N._result=O)}if(N._status===1)return N._result.default;throw N._result}var ye={current:null},H={transition:null},Q={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:H,ReactCurrentOwner:F};function Y(){throw Error("act(...) is not supported in production builds of React.")}return sn.Children={map:oe,forEach:function(N,O,re){oe(N,function(){O.apply(this,arguments)},re)},count:function(N){var O=0;return oe(N,function(){O++}),O},toArray:function(N){return oe(N,function(O){return O})||[]},only:function(N){if(!V(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},sn.Component=S,sn.Fragment=t,sn.Profiler=i,sn.PureComponent=E,sn.StrictMode=n,sn.Suspense=f,sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,sn.act=Y,sn.cloneElement=function(N,O,re){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var se=M({},N.props),Z=N.key,he=N.ref,ue=N._owner;if(O!=null){if(O.ref!==void 0&&(he=O.ref,ue=F.current),O.key!==void 0&&(Z=""+O.key),N.type&&N.type.defaultProps)var me=N.type.defaultProps;for(we in O)D.call(O,we)&&!B.hasOwnProperty(we)&&(se[we]=O[we]===void 0&&me!==void 0?me[we]:O[we])}var we=arguments.length-2;if(we===1)se.children=re;else if(1<we){me=Array(we);for(var Oe=0;Oe<we;Oe++)me[Oe]=arguments[Oe+2];se.children=me}return{$$typeof:o,type:N.type,key:Z,ref:he,props:se,_owner:ue}},sn.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:r,_context:N},N.Consumer=N},sn.createElement=I,sn.createFactory=function(N){var O=I.bind(null,N);return O.type=N,O},sn.createRef=function(){return{current:null}},sn.forwardRef=function(N){return{$$typeof:l,render:N}},sn.isValidElement=V,sn.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:ce}},sn.memo=function(N,O){return{$$typeof:d,type:N,compare:O===void 0?null:O}},sn.startTransition=function(N){var O=H.transition;H.transition={};try{N()}finally{H.transition=O}},sn.unstable_act=Y,sn.useCallback=function(N,O){return ye.current.useCallback(N,O)},sn.useContext=function(N){return ye.current.useContext(N)},sn.useDebugValue=function(){},sn.useDeferredValue=function(N){return ye.current.useDeferredValue(N)},sn.useEffect=function(N,O){return ye.current.useEffect(N,O)},sn.useId=function(){return ye.current.useId()},sn.useImperativeHandle=function(N,O,re){return ye.current.useImperativeHandle(N,O,re)},sn.useInsertionEffect=function(N,O){return ye.current.useInsertionEffect(N,O)},sn.useLayoutEffect=function(N,O){return ye.current.useLayoutEffect(N,O)},sn.useMemo=function(N,O){return ye.current.useMemo(N,O)},sn.useReducer=function(N,O,re){return ye.current.useReducer(N,O,re)},sn.useRef=function(N){return ye.current.useRef(N)},sn.useState=function(N){return ye.current.useState(N)},sn.useSyncExternalStore=function(N,O,re){return ye.current.useSyncExternalStore(N,O,re)},sn.useTransition=function(){return ye.current.useTransition()},sn.version="18.3.1",sn}var i1;function dg(){return i1||(i1=1,g0.exports=v3()),g0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1;function y3(){if(r1)return Uh;r1=1;var o=dg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(l,f,d){var p,g={},v=null,x=null;d!==void 0&&(v=""+d),f.key!==void 0&&(v=""+f.key),f.ref!==void 0&&(x=f.ref);for(p in f)n.call(f,p)&&!r.hasOwnProperty(p)&&(g[p]=f[p]);if(l&&l.defaultProps)for(p in f=l.defaultProps,f)g[p]===void 0&&(g[p]=f[p]);return{$$typeof:e,type:l,key:v,ref:x,props:g,_owner:i.current}}return Uh.Fragment=t,Uh.jsx=a,Uh.jsxs=a,Uh}var s1;function x3(){return s1||(s1=1,m0.exports=y3()),m0.exports}var Ae=x3(),Qp={},v0={exports:{}},$r={},y0={exports:{}},x0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1;function _3(){return o1||(o1=1,function(o){function e(H,Q){var Y=H.length;H.push(Q);e:for(;0<Y;){var N=Y-1>>>1,O=H[N];if(0<i(O,Q))H[N]=Q,H[Y]=O,Y=N;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Q=H[0],Y=H.pop();if(Y!==Q){H[0]=Y;e:for(var N=0,O=H.length,re=O>>>1;N<re;){var se=2*(N+1)-1,Z=H[se],he=se+1,ue=H[he];if(0>i(Z,Y))he<O&&0>i(ue,Z)?(H[N]=ue,H[he]=Y,N=he):(H[N]=Z,H[se]=Y,N=se);else if(he<O&&0>i(ue,Y))H[N]=ue,H[he]=Y,N=he;else break e}}return Q}function i(H,Q){var Y=H.sortIndex-Q.sortIndex;return Y!==0?Y:H.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;o.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();o.unstable_now=function(){return a.now()-l}}var f=[],d=[],p=1,g=null,v=3,x=!1,M=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var Q=t(d);Q!==null;){if(Q.callback===null)n(d);else if(Q.startTime<=H)n(d),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=t(d)}}function L(H){if(w=!1,A(H),!M)if(t(f)!==null)M=!0,ce(D);else{var Q=t(d);Q!==null&&ye(L,Q.startTime-H)}}function D(H,Q){M=!1,w&&(w=!1,C(I),I=-1),x=!0;var Y=v;try{for(A(Q),g=t(f);g!==null&&(!(g.expirationTime>Q)||H&&!te());){var N=g.callback;if(typeof N=="function"){g.callback=null,v=g.priorityLevel;var O=N(g.expirationTime<=Q);Q=o.unstable_now(),typeof O=="function"?g.callback=O:g===t(f)&&n(f),A(Q)}else n(f);g=t(f)}if(g!==null)var re=!0;else{var se=t(d);se!==null&&ye(L,se.startTime-Q),re=!1}return re}finally{g=null,v=Y,x=!1}}var F=!1,B=null,I=-1,z=5,V=-1;function te(){return!(o.unstable_now()-V<z)}function X(){if(B!==null){var H=o.unstable_now();V=H;var Q=!0;try{Q=B(!0,H)}finally{Q?K():(F=!1,B=null)}}else F=!1}var K;if(typeof E=="function")K=function(){E(X)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,oe=q.port2;q.port1.onmessage=X,K=function(){oe.postMessage(null)}}else K=function(){S(X,0)};function ce(H){B=H,F||(F=!0,K())}function ye(H,Q){I=S(function(){H(o.unstable_now())},Q)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(H){H.callback=null},o.unstable_continueExecution=function(){M||x||(M=!0,ce(D))},o.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<H?Math.floor(1e3/H):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_getFirstCallbackNode=function(){return t(f)},o.unstable_next=function(H){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var Y=v;v=Q;try{return H()}finally{v=Y}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Y=v;v=H;try{return Q()}finally{v=Y}},o.unstable_scheduleCallback=function(H,Q,Y){var N=o.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?N+Y:N):Y=N,H){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Y+O,H={id:p++,callback:Q,priorityLevel:H,startTime:Y,expirationTime:O,sortIndex:-1},Y>N?(H.sortIndex=Y,e(d,H),t(f)===null&&H===t(d)&&(w?(C(I),I=-1):w=!0,ye(L,Y-N))):(H.sortIndex=O,e(f,H),M||x||(M=!0,ce(D))),H},o.unstable_shouldYield=te,o.unstable_wrapCallback=function(H){var Q=v;return function(){var Y=v;v=Q;try{return H.apply(this,arguments)}finally{v=Y}}}}(x0)),x0}var a1;function S3(){return a1||(a1=1,y0.exports=_3()),y0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function w3(){if(l1)return $r;l1=1;var o=dg(),e=S3();function t(s){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+s,m=1;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function r(s,u){a(s,u),a(s+"Capture",u)}function a(s,u){for(i[s]=u,s=0;s<u.length;s++)n.add(u[s])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(s){return f.call(g,s)?!0:f.call(p,s)?!1:d.test(s)?g[s]=!0:(p[s]=!0,!1)}function x(s,u,m,_){if(m!==null&&m.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return _?!1:m!==null?!m.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function M(s,u,m,_){if(u===null||typeof u>"u"||x(s,u,m,_))return!0;if(_)return!1;if(m!==null)switch(m.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function w(s,u,m,_,T,R,U){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=_,this.attributeNamespace=T,this.mustUseProperty=m,this.propertyName=s,this.type=u,this.sanitizeURL=R,this.removeEmptyString=U}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){S[s]=new w(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var u=s[0];S[u]=new w(u,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){S[s]=new w(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){S[s]=new w(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){S[s]=new w(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){S[s]=new w(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){S[s]=new w(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){S[s]=new w(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){S[s]=new w(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function E(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var u=s.replace(C,E);S[u]=new w(u,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var u=s.replace(C,E);S[u]=new w(u,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var u=s.replace(C,E);S[u]=new w(u,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){S[s]=new w(s,1,!1,s.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){S[s]=new w(s,1,!1,s.toLowerCase(),null,!0,!0)});function A(s,u,m,_){var T=S.hasOwnProperty(u)?S[u]:null;(T!==null?T.type!==0:_||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(M(u,m,T,_)&&(m=null),_||T===null?v(u)&&(m===null?s.removeAttribute(u):s.setAttribute(u,""+m)):T.mustUseProperty?s[T.propertyName]=m===null?T.type===3?!1:"":m:(u=T.attributeName,_=T.attributeNamespace,m===null?s.removeAttribute(u):(T=T.type,m=T===3||T===4&&m===!0?"":""+m,_?s.setAttributeNS(_,u,m):s.setAttribute(u,m))))}var L=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),te=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),H=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var Y=Object.assign,N;function O(s){if(N===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);N=u&&u[1]||""}return`
`+N+s}var re=!1;function se(s,u){if(!s||re)return"";re=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Pe){var _=Pe}Reflect.construct(s,[],u)}else{try{u.call()}catch(Pe){_=Pe}s.call(u.prototype)}else{try{throw Error()}catch(Pe){_=Pe}s()}}catch(Pe){if(Pe&&_&&typeof Pe.stack=="string"){for(var T=Pe.stack.split(`
`),R=_.stack.split(`
`),U=T.length-1,ne=R.length-1;1<=U&&0<=ne&&T[U]!==R[ne];)ne--;for(;1<=U&&0<=ne;U--,ne--)if(T[U]!==R[ne]){if(U!==1||ne!==1)do if(U--,ne--,0>ne||T[U]!==R[ne]){var le=`
`+T[U].replace(" at new "," at ");return s.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",s.displayName)),le}while(1<=U&&0<=ne);break}}}finally{re=!1,Error.prepareStackTrace=m}return(s=s?s.displayName||s.name:"")?O(s):""}function Z(s){switch(s.tag){case 5:return O(s.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return s=se(s.type,!1),s;case 11:return s=se(s.type.render,!1),s;case 1:return s=se(s.type,!0),s;default:return""}}function he(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case B:return"Fragment";case F:return"Portal";case z:return"Profiler";case I:return"StrictMode";case K:return"Suspense";case q:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case te:return(s.displayName||"Context")+".Consumer";case V:return(s._context.displayName||"Context")+".Provider";case X:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case oe:return u=s.displayName||null,u!==null?u:he(s.type)||"Memo";case ce:u=s._payload,s=s._init;try{return he(s(u))}catch{}}return null}function ue(s){var u=s.type;switch(s.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=u.render,s=s.displayName||s.name||"",u.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(u);case 8:return u===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function me(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function we(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Oe(s){var u=we(s)?"checked":"value",m=Object.getOwnPropertyDescriptor(s.constructor.prototype,u),_=""+s[u];if(!s.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var T=m.get,R=m.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return T.call(this)},set:function(U){_=""+U,R.call(this,U)}}),Object.defineProperty(s,u,{enumerable:m.enumerable}),{getValue:function(){return _},setValue:function(U){_=""+U},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function ke(s){s._valueTracker||(s._valueTracker=Oe(s))}function ae(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var m=u.getValue(),_="";return s&&(_=we(s)?s.checked?"true":"false":s.value),s=_,s!==m?(u.setValue(s),!0):!1}function be(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ge(s,u){var m=u.checked;return Y({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??s._wrapperState.initialChecked})}function He(s,u){var m=u.defaultValue==null?"":u.defaultValue,_=u.checked!=null?u.checked:u.defaultChecked;m=me(u.value!=null?u.value:m),s._wrapperState={initialChecked:_,initialValue:m,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Ue(s,u){u=u.checked,u!=null&&A(s,"checked",u,!1)}function ut(s,u){Ue(s,u);var m=me(u.value),_=u.type;if(m!=null)_==="number"?(m===0&&s.value===""||s.value!=m)&&(s.value=""+m):s.value!==""+m&&(s.value=""+m);else if(_==="submit"||_==="reset"){s.removeAttribute("value");return}u.hasOwnProperty("value")?Qe(s,u.type,m):u.hasOwnProperty("defaultValue")&&Qe(s,u.type,me(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(s.defaultChecked=!!u.defaultChecked)}function Ie(s,u,m){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var _=u.type;if(!(_!=="submit"&&_!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+s._wrapperState.initialValue,m||u===s.value||(s.value=u),s.defaultValue=u}m=s.name,m!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,m!==""&&(s.name=m)}function Qe(s,u,m){(u!=="number"||be(s.ownerDocument)!==s)&&(m==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+m&&(s.defaultValue=""+m))}var tt=Array.isArray;function Re(s,u,m,_){if(s=s.options,u){u={};for(var T=0;T<m.length;T++)u["$"+m[T]]=!0;for(m=0;m<s.length;m++)T=u.hasOwnProperty("$"+s[m].value),s[m].selected!==T&&(s[m].selected=T),T&&_&&(s[m].defaultSelected=!0)}else{for(m=""+me(m),u=null,T=0;T<s.length;T++){if(s[T].value===m){s[T].selected=!0,_&&(s[T].defaultSelected=!0);return}u!==null||s[T].disabled||(u=s[T])}u!==null&&(u.selected=!0)}}function W(s,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},u,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function G(s,u){var m=u.value;if(m==null){if(m=u.children,u=u.defaultValue,m!=null){if(u!=null)throw Error(t(92));if(tt(m)){if(1<m.length)throw Error(t(93));m=m[0]}u=m}u==null&&(u=""),m=u}s._wrapperState={initialValue:me(m)}}function fe(s,u){var m=me(u.value),_=me(u.defaultValue);m!=null&&(m=""+m,m!==s.value&&(s.value=m),u.defaultValue==null&&s.defaultValue!==m&&(s.defaultValue=m)),_!=null&&(s.defaultValue=""+_)}function Te(s){var u=s.textContent;u===s._wrapperState.initialValue&&u!==""&&u!==null&&(s.value=u)}function je(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ye(s,u){return s==null||s==="http://www.w3.org/1999/xhtml"?je(u):s==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var qe,Ke=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,m,_,T){MSApp.execUnsafeLocalFunction(function(){return s(u,m,_,T)})}:s}(function(s,u){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=u;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=qe.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;u.firstChild;)s.appendChild(u.firstChild)}});function Le(s,u){if(u){var m=s.firstChild;if(m&&m===s.lastChild&&m.nodeType===3){m.nodeValue=u;return}}s.textContent=u}var lt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Je=["Webkit","ms","Moz","O"];Object.keys(lt).forEach(function(s){Je.forEach(function(u){u=u+s.charAt(0).toUpperCase()+s.substring(1),lt[u]=lt[s]})});function ct(s,u,m){return u==null||typeof u=="boolean"||u===""?"":m||typeof u!="number"||u===0||lt.hasOwnProperty(s)&&lt[s]?(""+u).trim():u+"px"}function et(s,u){s=s.style;for(var m in u)if(u.hasOwnProperty(m)){var _=m.indexOf("--")===0,T=ct(m,u[m],_);m==="float"&&(m="cssFloat"),_?s.setProperty(m,T):s[m]=T}}var Ze=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ie(s,u){if(u){if(Ze[s]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function Fe(s,u){if(s.indexOf("-")===-1)return typeof u.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var st=null;function ee(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var xe=null,Be=null,rt=null;function mt(s){if(s=qs(s)){if(typeof xe!="function")throw Error(t(280));var u=s.stateNode;u&&(u=kc(u),xe(s.stateNode,s.type,u))}}function Yt(s){Be?rt?rt.push(s):rt=[s]:Be=s}function kt(){if(Be){var s=Be,u=rt;if(rt=Be=null,mt(s),u)for(s=0;s<u.length;s++)mt(u[s])}}function Vt(s,u){return s(u)}function Gt(){}var en=!1;function Ot(s,u,m){if(en)return s(u,m);en=!0;try{return Vt(s,u,m)}finally{en=!1,(Be!==null||rt!==null)&&(Gt(),kt())}}function zt(s,u){var m=s.stateNode;if(m===null)return null;var _=kc(m);if(_===null)return null;m=_[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(s=s.type,_=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!_;break e;default:s=!1}if(s)return null;if(m&&typeof m!="function")throw Error(t(231,u,typeof m));return m}var Ei=!1;if(l)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Ei=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Ei=!1}function un(s,u,m,_,T,R,U,ne,le){var Pe=Array.prototype.slice.call(arguments,3);try{u.apply(m,Pe)}catch(nt){this.onError(nt)}}var j=!1,_e=null,Ce=!1,ge=null,Ne={onError:function(s){j=!0,_e=s}};function St(s,u,m,_,T,R,U,ne,le){j=!1,_e=null,un.apply(Ne,arguments)}function Ct(s,u,m,_,T,R,U,ne,le){if(St.apply(this,arguments),j){if(j){var Pe=_e;j=!1,_e=null}else throw Error(t(198));Ce||(Ce=!0,ge=Pe)}}function At(s){var u=s,m=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(m=u.return),s=u.return;while(s)}return u.tag===3?m:null}function Wt(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function tn(s){if(At(s)!==s)throw Error(t(188))}function Ht(s){var u=s.alternate;if(!u){if(u=At(s),u===null)throw Error(t(188));return u!==s?null:s}for(var m=s,_=u;;){var T=m.return;if(T===null)break;var R=T.alternate;if(R===null){if(_=T.return,_!==null){m=_;continue}break}if(T.child===R.child){for(R=T.child;R;){if(R===m)return tn(T),s;if(R===_)return tn(T),u;R=R.sibling}throw Error(t(188))}if(m.return!==_.return)m=T,_=R;else{for(var U=!1,ne=T.child;ne;){if(ne===m){U=!0,m=T,_=R;break}if(ne===_){U=!0,_=T,m=R;break}ne=ne.sibling}if(!U){for(ne=R.child;ne;){if(ne===m){U=!0,m=R,_=T;break}if(ne===_){U=!0,_=R,m=T;break}ne=ne.sibling}if(!U)throw Error(t(189))}}if(m.alternate!==_)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?s:u}function qt(s){return s=Ht(s),s!==null?Tn(s):null}function Tn(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var u=Tn(s);if(u!==null)return u;s=s.sibling}return null}var ii=e.unstable_scheduleCallback,Ti=e.unstable_cancelCallback,Sr=e.unstable_shouldYield,Sn=e.unstable_requestPaint,Xe=e.unstable_now,Yi=e.unstable_getCurrentPriorityLevel,wn=e.unstable_ImmediatePriority,ri=e.unstable_UserBlockingPriority,Ur=e.unstable_NormalPriority,Br=e.unstable_LowPriority,qi=e.unstable_IdlePriority,cn=null,Dt=null;function an(s){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(cn,s,void 0,(s.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:wr,Fn=Math.log,Qn=Math.LN2;function wr(s){return s>>>=0,s===0?32:31-(Fn(s)/Qn|0)|0}var Zi=64,Hn=4194304;function Ji(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ns(s,u){var m=s.pendingLanes;if(m===0)return 0;var _=0,T=s.suspendedLanes,R=s.pingedLanes,U=m&268435455;if(U!==0){var ne=U&~T;ne!==0?_=Ji(ne):(R&=U,R!==0&&(_=Ji(R)))}else U=m&~T,U!==0?_=Ji(U):R!==0&&(_=Ji(R));if(_===0)return 0;if(u!==0&&u!==_&&(u&T)===0&&(T=_&-_,R=u&-u,T>=R||T===16&&(R&4194240)!==0))return u;if((_&4)!==0&&(_|=m&16),u=s.entangledLanes,u!==0)for(s=s.entanglements,u&=_;0<u;)m=31-nn(u),T=1<<m,_|=s[m],u&=~T;return _}function Ha(s,u){switch(s){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wo(s,u){for(var m=s.suspendedLanes,_=s.pingedLanes,T=s.expirationTimes,R=s.pendingLanes;0<R;){var U=31-nn(R),ne=1<<U,le=T[U];le===-1?((ne&m)===0||(ne&_)!==0)&&(T[U]=Ha(ne,u)):le<=u&&(s.expiredLanes|=ne),R&=~ne}}function Qi(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function lr(){var s=Zi;return Zi<<=1,(Zi&4194240)===0&&(Zi=64),s}function Mo(s){for(var u=[],m=0;31>m;m++)u.push(s);return u}function ts(s,u,m){s.pendingLanes|=u,u!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,u=31-nn(u),s[u]=m}function lc(s,u){var m=s.pendingLanes&~u;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=u,s.mutableReadLanes&=u,s.entangledLanes&=u,u=s.entanglements;var _=s.eventTimes;for(s=s.expirationTimes;0<m;){var T=31-nn(m),R=1<<T;u[T]=0,_[T]=-1,s[T]=-1,m&=~R}}function ns(s,u){var m=s.entangledLanes|=u;for(s=s.entanglements;m;){var _=31-nn(m),T=1<<_;T&u|s[_]&u&&(s[_]|=u),m&=~T}}var rn=0;function ys(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var bo,ja,Xa,xs,Jo,Gr=!1,is=[],Ci=null,Ft=null,Vr=null,Mr=new Map,_s=new Map,Wr=[],uc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rn(s,u){switch(s){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":Mr.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(u.pointerId)}}function rs(s,u,m,_,T,R){return s===null||s.nativeEvent!==R?(s={blockedOn:u,domEventName:m,eventSystemFlags:_,nativeEvent:R,targetContainers:[T]},u!==null&&(u=qs(u),u!==null&&ja(u)),s):(s.eventSystemFlags|=_,u=s.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),s)}function cc(s,u,m,_,T){switch(u){case"focusin":return Ci=rs(Ci,s,u,m,_,T),!0;case"dragenter":return Ft=rs(Ft,s,u,m,_,T),!0;case"mouseover":return Vr=rs(Vr,s,u,m,_,T),!0;case"pointerover":var R=T.pointerId;return Mr.set(R,rs(Mr.get(R)||null,s,u,m,_,T)),!0;case"gotpointercapture":return R=T.pointerId,_s.set(R,rs(_s.get(R)||null,s,u,m,_,T)),!0}return!1}function Oi(s){var u=No(s.target);if(u!==null){var m=At(u);if(m!==null){if(u=m.tag,u===13){if(u=Wt(m),u!==null){s.blockedOn=u,Jo(s.priority,function(){Xa(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){s.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Eo(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var m=zi(s.domEventName,s.eventSystemFlags,u[0],s.nativeEvent);if(m===null){m=s.nativeEvent;var _=new m.constructor(m.type,m);st=_,m.target.dispatchEvent(_),st=null}else return u=qs(m),u!==null&&ja(u),s.blockedOn=m,!1;u.shift()}return!0}function To(s,u,m){Eo(s)&&m.delete(u)}function br(){Gr=!1,Ci!==null&&Eo(Ci)&&(Ci=null),Ft!==null&&Eo(Ft)&&(Ft=null),Vr!==null&&Eo(Vr)&&(Vr=null),Mr.forEach(To),_s.forEach(To)}function Os(s,u){s.blockedOn===u&&(s.blockedOn=null,Gr||(Gr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,br)))}function Co(s){function u(T){return Os(T,s)}if(0<is.length){Os(is[0],s);for(var m=1;m<is.length;m++){var _=is[m];_.blockedOn===s&&(_.blockedOn=null)}}for(Ci!==null&&Os(Ci,s),Ft!==null&&Os(Ft,s),Vr!==null&&Os(Vr,s),Mr.forEach(u),_s.forEach(u),m=0;m<Wr.length;m++)_=Wr[m],_.blockedOn===s&&(_.blockedOn=null);for(;0<Wr.length&&(m=Wr[0],m.blockedOn===null);)Oi(m),m.blockedOn===null&&Wr.shift()}var di=L.ReactCurrentBatchConfig,pi=!0;function Ss(s,u,m,_){var T=rn,R=di.transition;di.transition=null;try{rn=1,Qo(s,u,m,_)}finally{rn=T,di.transition=R}}function Hr(s,u,m,_){var T=rn,R=di.transition;di.transition=null;try{rn=4,Qo(s,u,m,_)}finally{rn=T,di.transition=R}}function Qo(s,u,m,_){if(pi){var T=zi(s,u,m,_);if(T===null)Ac(s,u,_,Ao,m),Rn(s,_);else if(cc(T,s,u,m,_))_.stopPropagation();else if(Rn(s,_),u&4&&-1<uc.indexOf(s)){for(;T!==null;){var R=qs(T);if(R!==null&&bo(R),R=zi(s,u,m,_),R===null&&Ac(s,u,_,Ao,m),R===T)break;T=R}T!==null&&_.stopPropagation()}else Ac(s,u,_,null,m)}}var Ao=null;function zi(s,u,m,_){if(Ao=null,s=ee(_),s=No(s),s!==null)if(u=At(s),u===null)s=null;else if(m=u.tag,m===13){if(s=Wt(u),s!==null)return s;s=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null);return Ao=s,null}function Po(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yi()){case wn:return 1;case ri:return 4;case Ur:case Br:return 16;case qi:return 536870912;default:return 16}default:return 16}}var ur=null,zs=null,mi=null;function si(){if(mi)return mi;var s,u=zs,m=u.length,_,T="value"in ur?ur.value:ur.textContent,R=T.length;for(s=0;s<m&&u[s]===T[s];s++);var U=m-s;for(_=1;_<=U&&u[m-_]===T[R-_];_++);return mi=T.slice(s,1<_?1-_:void 0)}function Us(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function cr(){return!0}function Bs(){return!1}function gi(s){function u(m,_,T,R,U){this._reactName=m,this._targetInst=T,this.type=_,this.nativeEvent=R,this.target=U,this.currentTarget=null;for(var ne in s)s.hasOwnProperty(ne)&&(m=s[ne],this[ne]=m?m(R):R[ne]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?cr:Bs,this.isPropagationStopped=Bs,this}return Y(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),u}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kn=gi(Gs),oi=Y({},Gs,{view:0,detail:0}),jn=gi(oi),Nn,Ki,jr,Ya=Y({},oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ro,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==jr&&(jr&&s.type==="mousemove"?(Nn=s.screenX-jr.screenX,Ki=s.screenY-jr.screenY):Ki=Nn=0,jr=s),Nn)},movementY:function(s){return"movementY"in s?s.movementY:Ki}}),qf=gi(Ya),Vs=Y({},Ya,{dataTransfer:0}),Lo=gi(Vs),fc=Y({},oi,{relatedTarget:0}),hc=gi(fc),dc=Y({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),ap=gi(dc),lp=Y({},Gs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Zf=gi(lp),pc=Y({},Gs,{data:0}),Jf=gi(pc),up={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qa(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=Qf[s])?!!u[s]:!1}function Ro(){return qa}var mc=Y({},oi,{key:function(s){if(s.key){var u=up[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=Us(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?cp[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ro,charCode:function(s){return s.type==="keypress"?Us(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Us(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),gc=gi(mc),Xr=Y({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Er=gi(Xr),Ko=Y({},oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ro}),Ws=gi(Ko),Hs=Y({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$o=gi(Hs),fp=Y({},Ya,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Kf=gi(fp),$f=[9,13,27,32],$i=l&&"CompositionEvent"in window,Ai=null;l&&"documentMode"in document&&(Ai=document.documentMode);var In=l&&"TextEvent"in window&&!Ai,Za=l&&(!$i||Ai&&8<Ai&&11>=Ai),Yr=" ",eh=!1;function th(s,u){switch(s){case"keyup":return $f.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Io=!1;function hp(s,u){switch(s){case"compositionend":return vc(u);case"keypress":return u.which!==32?null:(eh=!0,Yr);case"textInput":return s=u.data,s===Yr&&eh?null:s;default:return null}}function Xl(s,u){if(Io)return s==="compositionend"||!$i&&th(s,u)?(s=si(),mi=zs=ur=null,Io=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Za&&u.locale!=="ko"?null:u.data;default:return null}}var Ja={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yc(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!Ja[s.type]:u==="textarea"}function Qa(s,u,m,_){Yt(_),u=Pc(u,"onChange"),0<u.length&&(m=new Kn("onChange","change",null,m,_),s.push({event:m,listeners:u}))}var Do=null,Ka=null;function dp(s){nl(s,0)}function js(s){var u=Xn(s);if(ae(u))return s}function pp(s,u){if(s==="change")return u}var $a=!1;if(l){var fr;if(l){var ea="oninput"in document;if(!ea){var ta=document.createElement("div");ta.setAttribute("oninput","return;"),ea=typeof ta.oninput=="function"}fr=ea}else fr=!1;$a=fr&&(!document.documentMode||9<document.documentMode)}function ss(){Do&&(Do.detachEvent("onpropertychange",xc),Ka=Do=null)}function xc(s){if(s.propertyName==="value"&&js(Ka)){var u=[];Qa(u,Ka,s,ee(s)),Ot(dp,u)}}function el(s,u,m){s==="focusin"?(ss(),Do=u,Ka=m,Do.attachEvent("onpropertychange",xc)):s==="focusout"&&ss()}function mp(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return js(Ka)}function nh(s,u){if(s==="click")return js(u)}function On(s,u){if(s==="input"||s==="change")return js(u)}function _c(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var Tr=typeof Object.is=="function"?Object.is:_c;function na(s,u){if(Tr(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var m=Object.keys(s),_=Object.keys(u);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var T=m[_];if(!f.call(u,T)||!Tr(s[T],u[T]))return!1}return!0}function Yl(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Cr(s,u){var m=Yl(s);s=0;for(var _;m;){if(m.nodeType===3){if(_=s+m.textContent.length,s<=u&&_>=u)return{node:m,offset:u-s};s=_}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Yl(m)}}function ia(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?ia(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function zn(){for(var s=window,u=be();u instanceof s.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)s=u.contentWindow;else break;u=be(s.document)}return u}function vi(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}function yi(s){var u=zn(),m=s.focusedElem,_=s.selectionRange;if(u!==m&&m&&m.ownerDocument&&ia(m.ownerDocument.documentElement,m)){if(_!==null&&vi(m)){if(u=_.start,s=_.end,s===void 0&&(s=u),"selectionStart"in m)m.selectionStart=u,m.selectionEnd=Math.min(s,m.value.length);else if(s=(u=m.ownerDocument||document)&&u.defaultView||window,s.getSelection){s=s.getSelection();var T=m.textContent.length,R=Math.min(_.start,T);_=_.end===void 0?R:Math.min(_.end,T),!s.extend&&R>_&&(T=_,_=R,R=T),T=Cr(m,R);var U=Cr(m,_);T&&U&&(s.rangeCount!==1||s.anchorNode!==T.node||s.anchorOffset!==T.offset||s.focusNode!==U.node||s.focusOffset!==U.offset)&&(u=u.createRange(),u.setStart(T.node,T.offset),s.removeAllRanges(),R>_?(s.addRange(u),s.extend(U.node,U.offset)):(u.setEnd(U.node,U.offset),s.addRange(u)))}}for(u=[],s=m;s=s.parentNode;)s.nodeType===1&&u.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<u.length;m++)s=u[m],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Sc=l&&"documentMode"in document&&11>=document.documentMode,ws=null,ra=null,ql=null,xi=!1;function wc(s,u,m){var _=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;xi||ws==null||ws!==be(_)||(_=ws,"selectionStart"in _&&vi(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),ql&&na(ql,_)||(ql=_,_=Pc(ra,"onSelect"),0<_.length&&(u=new Kn("onSelect","select",null,u,m),s.push({event:u,listeners:_}),u.target=ws)))}function tl(s,u){var m={};return m[s.toLowerCase()]=u.toLowerCase(),m["Webkit"+s]="webkit"+u,m["Moz"+s]="moz"+u,m}var ko={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionend:tl("Transition","TransitionEnd")},os={},as={};l&&(as=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Ms(s){if(os[s])return os[s];if(!ko[s])return s;var u=ko[s],m;for(m in u)if(u.hasOwnProperty(m)&&m in as)return os[s]=u[m];return s}var Zl=Ms("animationend"),Jl=Ms("animationiteration"),ih=Ms("animationstart"),rh=Ms("transitionend"),sh=new Map,oh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(s,u){sh.set(s,u),r(u,[s])}for(var Mc=0;Mc<oh.length;Mc++){var Ql=oh[Mc],Kl=Ql.toLowerCase(),gp=Ql[0].toUpperCase()+Ql.slice(1);Xs(Kl,"on"+gp)}Xs(Zl,"onAnimationEnd"),Xs(Jl,"onAnimationIteration"),Xs(ih,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(rh,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fo));function Ec(s,u,m){var _=s.type||"unknown-event";s.currentTarget=m,Ct(_,u,void 0,s),s.currentTarget=null}function nl(s,u){u=(u&4)!==0;for(var m=0;m<s.length;m++){var _=s[m],T=_.event;_=_.listeners;e:{var R=void 0;if(u)for(var U=_.length-1;0<=U;U--){var ne=_[U],le=ne.instance,Pe=ne.currentTarget;if(ne=ne.listener,le!==R&&T.isPropagationStopped())break e;Ec(T,ne,Pe),R=le}else for(U=0;U<_.length;U++){if(ne=_[U],le=ne.instance,Pe=ne.currentTarget,ne=ne.listener,le!==R&&T.isPropagationStopped())break e;Ec(T,ne,Pe),R=le}}}if(Ce)throw s=ge,Ce=!1,ge=null,s}function Mn(s,u){var m=u[aa];m===void 0&&(m=u[aa]=new Set);var _=s+"__bubble";m.has(_)||(Cc(u,s,2,!1),m.add(_))}function Tc(s,u,m){var _=0;u&&(_|=4),Cc(m,s,_,u)}var $l="_reactListening"+Math.random().toString(36).slice(2);function il(s){if(!s[$l]){s[$l]=!0,n.forEach(function(m){m!=="selectionchange"&&(bc.has(m)||Tc(m,!1,s),Tc(m,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[$l]||(u[$l]=!0,Tc("selectionchange",!1,u))}}function Cc(s,u,m,_){switch(Po(u)){case 1:var T=Ss;break;case 4:T=Hr;break;default:T=Qo}m=T.bind(null,u,m,s),T=void 0,!Ei||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),_?T!==void 0?s.addEventListener(u,m,{capture:!0,passive:T}):s.addEventListener(u,m,!0):T!==void 0?s.addEventListener(u,m,{passive:T}):s.addEventListener(u,m,!1)}function Ac(s,u,m,_,T){var R=_;if((u&1)===0&&(u&2)===0&&_!==null)e:for(;;){if(_===null)return;var U=_.tag;if(U===3||U===4){var ne=_.stateNode.containerInfo;if(ne===T||ne.nodeType===8&&ne.parentNode===T)break;if(U===4)for(U=_.return;U!==null;){var le=U.tag;if((le===3||le===4)&&(le=U.stateNode.containerInfo,le===T||le.nodeType===8&&le.parentNode===T))return;U=U.return}for(;ne!==null;){if(U=No(ne),U===null)return;if(le=U.tag,le===5||le===6){_=R=U;continue e}ne=ne.parentNode}}_=_.return}Ot(function(){var Pe=R,nt=ee(m),it=[];e:{var $e=sh.get(s);if($e!==void 0){var yt=Kn,wt=s;switch(s){case"keypress":if(Us(m)===0)break e;case"keydown":case"keyup":yt=gc;break;case"focusin":wt="focus",yt=hc;break;case"focusout":wt="blur",yt=hc;break;case"beforeblur":case"afterblur":yt=hc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=Lo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Ws;break;case Zl:case Jl:case ih:yt=ap;break;case rh:yt=$o;break;case"scroll":yt=jn;break;case"wheel":yt=Kf;break;case"copy":case"cut":case"paste":yt=Zf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Er}var Mt=(u&4)!==0,li=!Mt&&s==="scroll",Se=Mt?$e!==null?$e+"Capture":null:$e;Mt=[];for(var de=Pe,Me;de!==null;){Me=de;var at=Me.stateNode;if(Me.tag===5&&at!==null&&(Me=at,Se!==null&&(at=zt(de,Se),at!=null&&Mt.push(rl(de,at,Me)))),li)break;de=de.return}0<Mt.length&&($e=new yt($e,wt,null,m,nt),it.push({event:$e,listeners:Mt}))}}if((u&7)===0){e:{if($e=s==="mouseover"||s==="pointerover",yt=s==="mouseout"||s==="pointerout",$e&&m!==st&&(wt=m.relatedTarget||m.fromElement)&&(No(wt)||wt[Ar]))break e;if((yt||$e)&&($e=nt.window===nt?nt:($e=nt.ownerDocument)?$e.defaultView||$e.parentWindow:window,yt?(wt=m.relatedTarget||m.toElement,yt=Pe,wt=wt?No(wt):null,wt!==null&&(li=At(wt),wt!==li||wt.tag!==5&&wt.tag!==6)&&(wt=null)):(yt=null,wt=Pe),yt!==wt)){if(Mt=qf,at="onMouseLeave",Se="onMouseEnter",de="mouse",(s==="pointerout"||s==="pointerover")&&(Mt=Er,at="onPointerLeave",Se="onPointerEnter",de="pointer"),li=yt==null?$e:Xn(yt),Me=wt==null?$e:Xn(wt),$e=new Mt(at,de+"leave",yt,m,nt),$e.target=li,$e.relatedTarget=Me,at=null,No(nt)===Pe&&(Mt=new Mt(Se,de+"enter",wt,m,nt),Mt.target=Me,Mt.relatedTarget=li,at=Mt),li=at,yt&&wt)t:{for(Mt=yt,Se=wt,de=0,Me=Mt;Me;Me=sa(Me))de++;for(Me=0,at=Se;at;at=sa(at))Me++;for(;0<de-Me;)Mt=sa(Mt),de--;for(;0<Me-de;)Se=sa(Se),Me--;for(;de--;){if(Mt===Se||Se!==null&&Mt===Se.alternate)break t;Mt=sa(Mt),Se=sa(Se)}Mt=null}else Mt=null;yt!==null&&vp(it,$e,yt,Mt,!1),wt!==null&&li!==null&&vp(it,li,wt,Mt,!0)}}e:{if($e=Pe?Xn(Pe):window,yt=$e.nodeName&&$e.nodeName.toLowerCase(),yt==="select"||yt==="input"&&$e.type==="file")var Tt=pp;else if(yc($e))if($a)Tt=On;else{Tt=mp;var Lt=el}else(yt=$e.nodeName)&&yt.toLowerCase()==="input"&&($e.type==="checkbox"||$e.type==="radio")&&(Tt=nh);if(Tt&&(Tt=Tt(s,Pe))){Qa(it,Tt,m,nt);break e}Lt&&Lt(s,$e,Pe),s==="focusout"&&(Lt=$e._wrapperState)&&Lt.controlled&&$e.type==="number"&&Qe($e,"number",$e.value)}switch(Lt=Pe?Xn(Pe):window,s){case"focusin":(yc(Lt)||Lt.contentEditable==="true")&&(ws=Lt,ra=Pe,ql=null);break;case"focusout":ql=ra=ws=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,wc(it,m,nt);break;case"selectionchange":if(Sc)break;case"keydown":case"keyup":wc(it,m,nt)}var Rt;if($i)e:{switch(s){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else Io?th(s,m)&&(Nt="onCompositionEnd"):s==="keydown"&&m.keyCode===229&&(Nt="onCompositionStart");Nt&&(Za&&m.locale!=="ko"&&(Io||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&Io&&(Rt=si()):(ur=nt,zs="value"in ur?ur.value:ur.textContent,Io=!0)),Lt=Pc(Pe,Nt),0<Lt.length&&(Nt=new Jf(Nt,s,null,m,nt),it.push({event:Nt,listeners:Lt}),Rt?Nt.data=Rt:(Rt=vc(m),Rt!==null&&(Nt.data=Rt)))),(Rt=In?hp(s,m):Xl(s,m))&&(Pe=Pc(Pe,"onBeforeInput"),0<Pe.length&&(nt=new Jf("onBeforeInput","beforeinput",null,m,nt),it.push({event:nt,listeners:Pe}),nt.data=Rt))}nl(it,u)})}function rl(s,u,m){return{instance:s,listener:u,currentTarget:m}}function Pc(s,u){for(var m=u+"Capture",_=[];s!==null;){var T=s,R=T.stateNode;T.tag===5&&R!==null&&(T=R,R=zt(s,m),R!=null&&_.unshift(rl(s,R,T)),R=zt(s,u),R!=null&&_.push(rl(s,R,T))),s=s.return}return _}function sa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function vp(s,u,m,_,T){for(var R=u._reactName,U=[];m!==null&&m!==_;){var ne=m,le=ne.alternate,Pe=ne.stateNode;if(le!==null&&le===_)break;ne.tag===5&&Pe!==null&&(ne=Pe,T?(le=zt(m,R),le!=null&&U.unshift(rl(m,le,ne))):T||(le=zt(m,R),le!=null&&U.push(rl(m,le,ne)))),m=m.return}U.length!==0&&s.push({event:u,listeners:U})}var Vg=/\r\n?/g,yp=/\u0000|\uFFFD/g;function ah(s){return(typeof s=="string"?s:""+s).replace(Vg,`
`).replace(yp,"")}function eu(s,u,m){if(u=ah(u),ah(s)!==u&&m)throw Error(t(425))}function tu(){}var sl=null,lh=null;function uh(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var ch=typeof setTimeout=="function"?setTimeout:void 0,fh=typeof clearTimeout=="function"?clearTimeout:void 0,Lc=typeof Promise=="function"?Promise:void 0,Wg=typeof queueMicrotask=="function"?queueMicrotask:typeof Lc<"u"?function(s){return Lc.resolve(null).then(s).catch(xp)}:ch;function xp(s){setTimeout(function(){throw s})}function Rc(s,u){var m=u,_=0;do{var T=m.nextSibling;if(s.removeChild(m),T&&T.nodeType===8)if(m=T.data,m==="/$"){if(_===0){s.removeChild(T),Co(u);return}_--}else m!=="$"&&m!=="$?"&&m!=="$!"||_++;m=T}while(m);Co(u)}function Ys(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return s}function hh(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var m=s.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return s;u--}else m==="/$"&&u++}s=s.previousSibling}return null}var oa=Math.random().toString(36).slice(2),ai="__reactFiber$"+oa,ol="__reactProps$"+oa,Ar="__reactContainer$"+oa,aa="__reactEvents$"+oa,Ic="__reactListeners$"+oa,Dc="__reactHandles$"+oa;function No(s){var u=s[ai];if(u)return u;for(var m=s.parentNode;m;){if(u=m[Ar]||m[ai]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(s=hh(s);s!==null;){if(m=s[ai])return m;s=hh(s)}return u}s=m,m=s.parentNode}return null}function qs(s){return s=s[ai]||s[Ar],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Xn(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function kc(s){return s[ol]||null}var dh=[],_i=-1;function Un(s){return{current:s}}function bn(s){0>_i||(s.current=dh[_i],dh[_i]=null,_i--)}function _n(s,u){_i++,dh[_i]=s.current,s.current=u}var Zs={},Pi=Un(Zs),er=Un(!1),Js=Zs;function la(s,u){var m=s.type.contextTypes;if(!m)return Zs;var _=s.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===u)return _.__reactInternalMemoizedMaskedChildContext;var T={},R;for(R in m)T[R]=u[R];return _&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=u,s.__reactInternalMemoizedMaskedChildContext=T),T}function Ui(s){return s=s.childContextTypes,s!=null}function nu(){bn(er),bn(Pi)}function ph(s,u,m){if(Pi.current!==Zs)throw Error(t(168));_n(Pi,u),_n(er,m)}function iu(s,u,m){var _=s.stateNode;if(u=u.childContextTypes,typeof _.getChildContext!="function")return m;_=_.getChildContext();for(var T in _)if(!(T in u))throw Error(t(108,ue(s)||"Unknown",T));return Y({},m,_)}function ua(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Zs,Js=Pi.current,_n(Pi,s),_n(er,er.current),!0}function mh(s,u,m){var _=s.stateNode;if(!_)throw Error(t(169));m?(s=iu(s,u,Js),_.__reactInternalMemoizedMergedChildContext=s,bn(er),bn(Pi),_n(Pi,s)):bn(er),_n(er,m)}var ls=null,ru=!1,Fc=!1;function su(s){ls===null?ls=[s]:ls.push(s)}function _p(s){ru=!0,su(s)}function bs(){if(!Fc&&ls!==null){Fc=!0;var s=0,u=rn;try{var m=ls;for(rn=1;s<m.length;s++){var _=m[s];do _=_(!0);while(_!==null)}ls=null,ru=!1}catch(T){throw ls!==null&&(ls=ls.slice(s+1)),ii(wn,bs),T}finally{rn=u,Fc=!1}}return null}var ca=[],hr=0,Nc=null,Oc=0,tr=[],Si=0,fa=null,ft=1,qr="";function Qs(s,u){ca[hr++]=Oc,ca[hr++]=Nc,Nc=s,Oc=u}function gh(s,u,m){tr[Si++]=ft,tr[Si++]=qr,tr[Si++]=fa,fa=s;var _=ft;s=qr;var T=32-nn(_)-1;_&=~(1<<T),m+=1;var R=32-nn(u)+T;if(30<R){var U=T-T%5;R=(_&(1<<U)-1).toString(32),_>>=U,T-=U,ft=1<<32-nn(u)+T|m<<T|_,qr=R+s}else ft=1<<R|m<<T|_,qr=s}function vh(s){s.return!==null&&(Qs(s,1),gh(s,1,0))}function Ks(s){for(;s===Nc;)Nc=ca[--hr],ca[hr]=null,Oc=ca[--hr],ca[hr]=null;for(;s===fa;)fa=tr[--Si],tr[Si]=null,qr=tr[--Si],tr[Si]=null,ft=tr[--Si],tr[Si]=null}var Li=null,nr=null,Cn=!1,Zr=null;function yh(s,u){var m=Ps(5,null,null,0);m.elementType="DELETED",m.stateNode=u,m.return=s,u=s.deletions,u===null?(s.deletions=[m],s.flags|=16):u.push(m)}function xh(s,u){switch(s.tag){case 5:var m=s.type;return u=u.nodeType!==1||m.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(s.stateNode=u,Li=s,nr=Ys(u.firstChild),!0):!1;case 6:return u=s.pendingProps===""||u.nodeType!==3?null:u,u!==null?(s.stateNode=u,Li=s,nr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(m=fa!==null?{id:ft,overflow:qr}:null,s.memoizedState={dehydrated:u,treeContext:m,retryLane:1073741824},m=Ps(18,null,null,0),m.stateNode=u,m.return=s,s.child=m,Li=s,nr=null,!0):!1;default:return!1}}function zc(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Uc(s){if(Cn){var u=nr;if(u){var m=u;if(!xh(s,u)){if(zc(s))throw Error(t(418));u=Ys(m.nextSibling);var _=Li;u&&xh(s,u)?yh(_,m):(s.flags=s.flags&-4097|2,Cn=!1,Li=s)}}else{if(zc(s))throw Error(t(418));s.flags=s.flags&-4097|2,Cn=!1,Li=s}}}function Bc(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Li=s}function al(s){if(s!==Li)return!1;if(!Cn)return Bc(s),Cn=!0,!1;var u;if((u=s.tag!==3)&&!(u=s.tag!==5)&&(u=s.type,u=u!=="head"&&u!=="body"&&!uh(s.type,s.memoizedProps)),u&&(u=nr)){if(zc(s))throw _h(),Error(t(418));for(;u;)yh(s,u),u=Ys(u.nextSibling)}if(Bc(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,u=0;s;){if(s.nodeType===8){var m=s.data;if(m==="/$"){if(u===0){nr=Ys(s.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++}s=s.nextSibling}nr=null}}else nr=Li?Ys(s.stateNode.nextSibling):null;return!0}function _h(){for(var s=nr;s;)s=Ys(s.nextSibling)}function Oo(){nr=Li=null,Cn=!1}function ll(s){Zr===null?Zr=[s]:Zr.push(s)}var Hg=L.ReactCurrentBatchConfig;function ou(s,u,m){if(s=m.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var _=m.stateNode}if(!_)throw Error(t(147,s));var T=_,R=""+s;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===R?u.ref:(u=function(U){var ne=T.refs;U===null?delete ne[R]:ne[R]=U},u._stringRef=R,u)}if(typeof s!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,s))}return s}function au(s,u){throw s=Object.prototype.toString.call(u),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s))}function Sh(s){var u=s._init;return u(s._payload)}function wh(s){function u(Se,de){if(s){var Me=Se.deletions;Me===null?(Se.deletions=[de],Se.flags|=16):Me.push(de)}}function m(Se,de){if(!s)return null;for(;de!==null;)u(Se,de),de=de.sibling;return null}function _(Se,de){for(Se=new Map;de!==null;)de.key!==null?Se.set(de.key,de):Se.set(de.index,de),de=de.sibling;return Se}function T(Se,de){return Se=xl(Se,de),Se.index=0,Se.sibling=null,Se}function R(Se,de,Me){return Se.index=Me,s?(Me=Se.alternate,Me!==null?(Me=Me.index,Me<de?(Se.flags|=2,de):Me):(Se.flags|=2,de)):(Se.flags|=1048576,de)}function U(Se){return s&&Se.alternate===null&&(Se.flags|=2),Se}function ne(Se,de,Me,at){return de===null||de.tag!==6?(de=u0(Me,Se.mode,at),de.return=Se,de):(de=T(de,Me),de.return=Se,de)}function le(Se,de,Me,at){var Tt=Me.type;return Tt===B?nt(Se,de,Me.props.children,at,Me.key):de!==null&&(de.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===ce&&Sh(Tt)===de.type)?(at=T(de,Me.props),at.ref=ou(Se,de,Me),at.return=Se,at):(at=Wp(Me.type,Me.key,Me.props,null,Se.mode,at),at.ref=ou(Se,de,Me),at.return=Se,at)}function Pe(Se,de,Me,at){return de===null||de.tag!==4||de.stateNode.containerInfo!==Me.containerInfo||de.stateNode.implementation!==Me.implementation?(de=c0(Me,Se.mode,at),de.return=Se,de):(de=T(de,Me.children||[]),de.return=Se,de)}function nt(Se,de,Me,at,Tt){return de===null||de.tag!==7?(de=bu(Me,Se.mode,at,Tt),de.return=Se,de):(de=T(de,Me),de.return=Se,de)}function it(Se,de,Me){if(typeof de=="string"&&de!==""||typeof de=="number")return de=u0(""+de,Se.mode,Me),de.return=Se,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case D:return Me=Wp(de.type,de.key,de.props,null,Se.mode,Me),Me.ref=ou(Se,null,de),Me.return=Se,Me;case F:return de=c0(de,Se.mode,Me),de.return=Se,de;case ce:var at=de._init;return it(Se,at(de._payload),Me)}if(tt(de)||Q(de))return de=bu(de,Se.mode,Me,null),de.return=Se,de;au(Se,de)}return null}function $e(Se,de,Me,at){var Tt=de!==null?de.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Tt!==null?null:ne(Se,de,""+Me,at);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case D:return Me.key===Tt?le(Se,de,Me,at):null;case F:return Me.key===Tt?Pe(Se,de,Me,at):null;case ce:return Tt=Me._init,$e(Se,de,Tt(Me._payload),at)}if(tt(Me)||Q(Me))return Tt!==null?null:nt(Se,de,Me,at,null);au(Se,Me)}return null}function yt(Se,de,Me,at,Tt){if(typeof at=="string"&&at!==""||typeof at=="number")return Se=Se.get(Me)||null,ne(de,Se,""+at,Tt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case D:return Se=Se.get(at.key===null?Me:at.key)||null,le(de,Se,at,Tt);case F:return Se=Se.get(at.key===null?Me:at.key)||null,Pe(de,Se,at,Tt);case ce:var Lt=at._init;return yt(Se,de,Me,Lt(at._payload),Tt)}if(tt(at)||Q(at))return Se=Se.get(Me)||null,nt(de,Se,at,Tt,null);au(de,at)}return null}function wt(Se,de,Me,at){for(var Tt=null,Lt=null,Rt=de,Nt=de=0,Wi=null;Rt!==null&&Nt<Me.length;Nt++){Rt.index>Nt?(Wi=Rt,Rt=null):Wi=Rt.sibling;var pn=$e(Se,Rt,Me[Nt],at);if(pn===null){Rt===null&&(Rt=Wi);break}s&&Rt&&pn.alternate===null&&u(Se,Rt),de=R(pn,de,Nt),Lt===null?Tt=pn:Lt.sibling=pn,Lt=pn,Rt=Wi}if(Nt===Me.length)return m(Se,Rt),Cn&&Qs(Se,Nt),Tt;if(Rt===null){for(;Nt<Me.length;Nt++)Rt=it(Se,Me[Nt],at),Rt!==null&&(de=R(Rt,de,Nt),Lt===null?Tt=Rt:Lt.sibling=Rt,Lt=Rt);return Cn&&Qs(Se,Nt),Tt}for(Rt=_(Se,Rt);Nt<Me.length;Nt++)Wi=yt(Rt,Se,Nt,Me[Nt],at),Wi!==null&&(s&&Wi.alternate!==null&&Rt.delete(Wi.key===null?Nt:Wi.key),de=R(Wi,de,Nt),Lt===null?Tt=Wi:Lt.sibling=Wi,Lt=Wi);return s&&Rt.forEach(function(_l){return u(Se,_l)}),Cn&&Qs(Se,Nt),Tt}function Mt(Se,de,Me,at){var Tt=Q(Me);if(typeof Tt!="function")throw Error(t(150));if(Me=Tt.call(Me),Me==null)throw Error(t(151));for(var Lt=Tt=null,Rt=de,Nt=de=0,Wi=null,pn=Me.next();Rt!==null&&!pn.done;Nt++,pn=Me.next()){Rt.index>Nt?(Wi=Rt,Rt=null):Wi=Rt.sibling;var _l=$e(Se,Rt,pn.value,at);if(_l===null){Rt===null&&(Rt=Wi);break}s&&Rt&&_l.alternate===null&&u(Se,Rt),de=R(_l,de,Nt),Lt===null?Tt=_l:Lt.sibling=_l,Lt=_l,Rt=Wi}if(pn.done)return m(Se,Rt),Cn&&Qs(Se,Nt),Tt;if(Rt===null){for(;!pn.done;Nt++,pn=Me.next())pn=it(Se,pn.value,at),pn!==null&&(de=R(pn,de,Nt),Lt===null?Tt=pn:Lt.sibling=pn,Lt=pn);return Cn&&Qs(Se,Nt),Tt}for(Rt=_(Se,Rt);!pn.done;Nt++,pn=Me.next())pn=yt(Rt,Se,Nt,pn.value,at),pn!==null&&(s&&pn.alternate!==null&&Rt.delete(pn.key===null?Nt:pn.key),de=R(pn,de,Nt),Lt===null?Tt=pn:Lt.sibling=pn,Lt=pn);return s&&Rt.forEach(function(m3){return u(Se,m3)}),Cn&&Qs(Se,Nt),Tt}function li(Se,de,Me,at){if(typeof Me=="object"&&Me!==null&&Me.type===B&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case D:e:{for(var Tt=Me.key,Lt=de;Lt!==null;){if(Lt.key===Tt){if(Tt=Me.type,Tt===B){if(Lt.tag===7){m(Se,Lt.sibling),de=T(Lt,Me.props.children),de.return=Se,Se=de;break e}}else if(Lt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===ce&&Sh(Tt)===Lt.type){m(Se,Lt.sibling),de=T(Lt,Me.props),de.ref=ou(Se,Lt,Me),de.return=Se,Se=de;break e}m(Se,Lt);break}else u(Se,Lt);Lt=Lt.sibling}Me.type===B?(de=bu(Me.props.children,Se.mode,at,Me.key),de.return=Se,Se=de):(at=Wp(Me.type,Me.key,Me.props,null,Se.mode,at),at.ref=ou(Se,de,Me),at.return=Se,Se=at)}return U(Se);case F:e:{for(Lt=Me.key;de!==null;){if(de.key===Lt)if(de.tag===4&&de.stateNode.containerInfo===Me.containerInfo&&de.stateNode.implementation===Me.implementation){m(Se,de.sibling),de=T(de,Me.children||[]),de.return=Se,Se=de;break e}else{m(Se,de);break}else u(Se,de);de=de.sibling}de=c0(Me,Se.mode,at),de.return=Se,Se=de}return U(Se);case ce:return Lt=Me._init,li(Se,de,Lt(Me._payload),at)}if(tt(Me))return wt(Se,de,Me,at);if(Q(Me))return Mt(Se,de,Me,at);au(Se,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,de!==null&&de.tag===6?(m(Se,de.sibling),de=T(de,Me),de.return=Se,Se=de):(m(Se,de),de=u0(Me,Se.mode,at),de.return=Se,Se=de),U(Se)):m(Se,de)}return li}var ha=wh(!0),lu=wh(!1),da=Un(null),pa=null,$s=null,ul=null;function ma(){ul=$s=pa=null}function uu(s){var u=da.current;bn(da),s._currentValue=u}function cu(s,u,m){for(;s!==null;){var _=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),s===m)break;s=s.return}}function zo(s,u){pa=s,ul=$s=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&u)!==0&&(Qt=!0),s.firstContext=null)}function Pr(s){var u=s._currentValue;if(ul!==s)if(s={context:s,memoizedValue:u,next:null},$s===null){if(pa===null)throw Error(t(308));$s=s,pa.dependencies={lanes:0,firstContext:s}}else $s=$s.next=s;return u}var eo=null;function Mh(s){eo===null?eo=[s]:eo.push(s)}function fu(s,u,m,_){var T=u.interleaved;return T===null?(m.next=m,Mh(u)):(m.next=T.next,T.next=m),u.interleaved=m,us(s,_)}function us(s,u){s.lanes|=u;var m=s.alternate;for(m!==null&&(m.lanes|=u),m=s,s=s.return;s!==null;)s.childLanes|=u,m=s.alternate,m!==null&&(m.childLanes|=u),m=s,s=s.return;return m.tag===3?m.stateNode:null}var vn=!1;function Zt(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yn(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function yn(s,u){return{eventTime:s,lane:u,tag:0,payload:null,callback:null,next:null}}function Dn(s,u,m){var _=s.updateQueue;if(_===null)return null;if(_=_.shared,(hn&2)!==0){var T=_.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),_.pending=u,us(s,m)}return T=_.interleaved,T===null?(u.next=u,Mh(_)):(u.next=T.next,T.next=u),_.interleaved=u,us(s,m)}function Bi(s,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194240)!==0)){var _=u.lanes;_&=s.pendingLanes,m|=_,u.lanes=m,ns(s,m)}}function ga(s,u){var m=s.updateQueue,_=s.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var T=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var U={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};R===null?T=R=U:R=R.next=U,m=m.next}while(m!==null);R===null?T=R=u:R=R.next=u}else T=R=u;m={baseState:_.baseState,firstBaseUpdate:T,lastBaseUpdate:R,shared:_.shared,effects:_.effects},s.updateQueue=m;return}s=m.lastBaseUpdate,s===null?m.firstBaseUpdate=u:s.next=u,m.lastBaseUpdate=u}function Bn(s,u,m,_){var T=s.updateQueue;vn=!1;var R=T.firstBaseUpdate,U=T.lastBaseUpdate,ne=T.shared.pending;if(ne!==null){T.shared.pending=null;var le=ne,Pe=le.next;le.next=null,U===null?R=Pe:U.next=Pe,U=le;var nt=s.alternate;nt!==null&&(nt=nt.updateQueue,ne=nt.lastBaseUpdate,ne!==U&&(ne===null?nt.firstBaseUpdate=Pe:ne.next=Pe,nt.lastBaseUpdate=le))}if(R!==null){var it=T.baseState;U=0,nt=Pe=le=null,ne=R;do{var $e=ne.lane,yt=ne.eventTime;if((_&$e)===$e){nt!==null&&(nt=nt.next={eventTime:yt,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var wt=s,Mt=ne;switch($e=u,yt=m,Mt.tag){case 1:if(wt=Mt.payload,typeof wt=="function"){it=wt.call(yt,it,$e);break e}it=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Mt.payload,$e=typeof wt=="function"?wt.call(yt,it,$e):wt,$e==null)break e;it=Y({},it,$e);break e;case 2:vn=!0}}ne.callback!==null&&ne.lane!==0&&(s.flags|=64,$e=T.effects,$e===null?T.effects=[ne]:$e.push(ne))}else yt={eventTime:yt,lane:$e,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},nt===null?(Pe=nt=yt,le=it):nt=nt.next=yt,U|=$e;if(ne=ne.next,ne===null){if(ne=T.shared.pending,ne===null)break;$e=ne,ne=$e.next,$e.next=null,T.lastBaseUpdate=$e,T.shared.pending=null}}while(!0);if(nt===null&&(le=it),T.baseState=le,T.firstBaseUpdate=Pe,T.lastBaseUpdate=nt,u=T.shared.interleaved,u!==null){T=u;do U|=T.lane,T=T.next;while(T!==u)}else R===null&&(T.shared.lanes=0);_u|=U,s.lanes=U,s.memoizedState=it}}function cl(s,u,m){if(s=u.effects,u.effects=null,s!==null)for(u=0;u<s.length;u++){var _=s[u],T=_.callback;if(T!==null){if(_.callback=null,_=m,typeof T!="function")throw Error(t(191,T));T.call(_)}}}var Es={},Lr=Un(Es),va=Un(Es),to=Un(Es);function $n(s){if(s===Es)throw Error(t(174));return s}function hu(s,u){switch(_n(to,u),_n(va,s),_n(Lr,Es),s=u.nodeType,s){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Ye(null,"");break;default:s=s===8?u.parentNode:u,u=s.namespaceURI||null,s=s.tagName,u=Ye(u,s)}bn(Lr),_n(Lr,u)}function Uo(){bn(Lr),bn(va),bn(to)}function ya(s){$n(to.current);var u=$n(Lr.current),m=Ye(u,s.type);u!==m&&(_n(va,s),_n(Lr,m))}function fl(s){va.current===s&&(bn(Lr),bn(va))}var An=Un(0);function cs(s){for(var u=s;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var hl=[];function Ts(){for(var s=0;s<hl.length;s++)hl[s]._workInProgressVersionPrimary=null;hl.length=0}var xa=L.ReactCurrentDispatcher,_a=L.ReactCurrentBatchConfig,no=0,En=null,Gn=null,fn=null,fs=!1,Gi=!1,Bo=0,dr=0;function Ri(){throw Error(t(321))}function du(s,u){if(u===null)return!1;for(var m=0;m<u.length&&m<s.length;m++)if(!Tr(s[m],u[m]))return!1;return!0}function pu(s,u,m,_,T,R){if(no=R,En=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,xa.current=s===null||s.memoizedState===null?Cp:Ap,s=m(_,T),Gi){R=0;do{if(Gi=!1,Bo=0,25<=R)throw Error(t(301));R+=1,fn=Gn=null,u.updateQueue=null,xa.current=Pp,s=m(_,T)}while(Gi)}if(xa.current=Yc,u=Gn!==null&&Gn.next!==null,no=0,fn=Gn=En=null,fs=!1,u)throw Error(t(300));return s}function bh(){var s=Bo!==0;return Bo=0,s}function Ii(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?En.memoizedState=fn=s:fn=fn.next=s,fn}function Rr(){if(Gn===null){var s=En.alternate;s=s!==null?s.memoizedState:null}else s=Gn.next;var u=fn===null?En.memoizedState:fn.next;if(u!==null)fn=u,Gn=s;else{if(s===null)throw Error(t(310));Gn=s,s={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},fn===null?En.memoizedState=fn=s:fn=fn.next=s}return fn}function dl(s,u){return typeof u=="function"?u(s):u}function mu(s){var u=Rr(),m=u.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=s;var _=Gn,T=_.baseQueue,R=m.pending;if(R!==null){if(T!==null){var U=T.next;T.next=R.next,R.next=U}_.baseQueue=T=R,m.pending=null}if(T!==null){R=T.next,_=_.baseState;var ne=U=null,le=null,Pe=R;do{var nt=Pe.lane;if((no&nt)===nt)le!==null&&(le=le.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),_=Pe.hasEagerState?Pe.eagerState:s(_,Pe.action);else{var it={lane:nt,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};le===null?(ne=le=it,U=_):le=le.next=it,En.lanes|=nt,_u|=nt}Pe=Pe.next}while(Pe!==null&&Pe!==R);le===null?U=_:le.next=ne,Tr(_,u.memoizedState)||(Qt=!0),u.memoizedState=_,u.baseState=U,u.baseQueue=le,m.lastRenderedState=_}if(s=m.interleaved,s!==null){T=s;do R=T.lane,En.lanes|=R,_u|=R,T=T.next;while(T!==s)}else T===null&&(m.lanes=0);return[u.memoizedState,m.dispatch]}function io(s){var u=Rr(),m=u.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=s;var _=m.dispatch,T=m.pending,R=u.memoizedState;if(T!==null){m.pending=null;var U=T=T.next;do R=s(R,U.action),U=U.next;while(U!==T);Tr(R,u.memoizedState)||(Qt=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),m.lastRenderedState=R}return[R,_]}function Eh(){}function Th(s,u){var m=En,_=Rr(),T=u(),R=!Tr(_.memoizedState,T);if(R&&(_.memoizedState=T,Qt=!0),_=_.queue,Ph(Sp.bind(null,m,_,s),[s]),_.getSnapshot!==u||R||fn!==null&&fn.memoizedState.tag&1){if(m.flags|=2048,hs(9,gu.bind(null,m,_,T,u),void 0,null),Vi===null)throw Error(t(349));(no&30)!==0||Gc(m,u,T)}return T}function Gc(s,u,m){s.flags|=16384,s={getSnapshot:u,value:m},u=En.updateQueue,u===null?(u={lastEffect:null,stores:null},En.updateQueue=u,u.stores=[s]):(m=u.stores,m===null?u.stores=[s]:m.push(s))}function gu(s,u,m,_){u.value=m,u.getSnapshot=_,wp(u)&&Ch(s)}function Sp(s,u,m){return m(function(){wp(u)&&Ch(s)})}function wp(s){var u=s.getSnapshot;s=s.value;try{var m=u();return!Tr(s,m)}catch{return!0}}function Ch(s){var u=us(s,1);u!==null&&lo(u,s,1,-1)}function Ah(s){var u=Ii();return typeof s=="function"&&(s=s()),u.memoizedState=u.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dl,lastRenderedState:s},u.queue=s,s=s.dispatch=Sa.bind(null,En,s),[u.memoizedState,s]}function hs(s,u,m,_){return s={tag:s,create:u,destroy:m,deps:_,next:null},u=En.updateQueue,u===null?(u={lastEffect:null,stores:null},En.updateQueue=u,u.lastEffect=s.next=s):(m=u.lastEffect,m===null?u.lastEffect=s.next=s:(_=m.next,m.next=s,s.next=_,u.lastEffect=s)),s}function Mp(){return Rr().memoizedState}function Cs(s,u,m,_){var T=Ii();En.flags|=s,T.memoizedState=hs(1|u,m,void 0,_===void 0?null:_)}function vu(s,u,m,_){var T=Rr();_=_===void 0?null:_;var R=void 0;if(Gn!==null){var U=Gn.memoizedState;if(R=U.destroy,_!==null&&du(_,U.deps)){T.memoizedState=hs(u,m,R,_);return}}En.flags|=s,T.memoizedState=hs(1|u,m,R,_)}function ir(s,u){return Cs(8390656,8,s,u)}function Ph(s,u){return vu(2048,8,s,u)}function Lh(s,u){return vu(4,2,s,u)}function bp(s,u){return vu(4,4,s,u)}function Ep(s,u){if(typeof u=="function")return s=s(),u(s),function(){u(null)};if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function Rh(s,u,m){return m=m!=null?m.concat([s]):null,vu(4,4,Ep.bind(null,u,s),m)}function Vc(){}function Tp(s,u){var m=Rr();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&du(u,_[1])?_[0]:(m.memoizedState=[s,u],s)}function Ir(s,u){var m=Rr();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&du(u,_[1])?_[0]:(s=s(),m.memoizedState=[s,u],s)}function Wc(s,u,m){return(no&21)===0?(s.baseState&&(s.baseState=!1,Qt=!0),s.memoizedState=m):(Tr(m,u)||(m=lr(),En.lanes|=m,_u|=m,s.baseState=!0),u)}function jg(s,u){var m=rn;rn=m!==0&&4>m?m:4,s(!0);var _=_a.transition;_a.transition={};try{s(!1),u()}finally{rn=m,_a.transition=_}}function ro(){return Rr().memoizedState}function Hc(s,u,m){var _=vl(s);if(m={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null},yu(s))jc(u,m);else if(m=fu(s,u,m,_),m!==null){var T=kr();lo(m,s,_,T),Xc(m,u,_)}}function Sa(s,u,m){var _=vl(s),T={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null};if(yu(s))jc(u,T);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var U=u.lastRenderedState,ne=R(U,m);if(T.hasEagerState=!0,T.eagerState=ne,Tr(ne,U)){var le=u.interleaved;le===null?(T.next=T,Mh(u)):(T.next=le.next,le.next=T),u.interleaved=T;return}}catch{}finally{}m=fu(s,u,T,_),m!==null&&(T=kr(),lo(m,s,_,T),Xc(m,u,_))}}function yu(s){var u=s.alternate;return s===En||u!==null&&u===En}function jc(s,u){Gi=fs=!0;var m=s.pending;m===null?u.next=u:(u.next=m.next,m.next=u),s.pending=u}function Xc(s,u,m){if((m&4194240)!==0){var _=u.lanes;_&=s.pendingLanes,m|=_,u.lanes=m,ns(s,m)}}var Yc={readContext:Pr,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},Cp={readContext:Pr,useCallback:function(s,u){return Ii().memoizedState=[s,u===void 0?null:u],s},useContext:Pr,useEffect:ir,useImperativeHandle:function(s,u,m){return m=m!=null?m.concat([s]):null,Cs(4194308,4,Ep.bind(null,u,s),m)},useLayoutEffect:function(s,u){return Cs(4194308,4,s,u)},useInsertionEffect:function(s,u){return Cs(4,2,s,u)},useMemo:function(s,u){var m=Ii();return u=u===void 0?null:u,s=s(),m.memoizedState=[s,u],s},useReducer:function(s,u,m){var _=Ii();return u=m!==void 0?m(u):u,_.memoizedState=_.baseState=u,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:u},_.queue=s,s=s.dispatch=Hc.bind(null,En,s),[_.memoizedState,s]},useRef:function(s){var u=Ii();return s={current:s},u.memoizedState=s},useState:Ah,useDebugValue:Vc,useDeferredValue:function(s){return Ii().memoizedState=s},useTransition:function(){var s=Ah(!1),u=s[0];return s=jg.bind(null,s[1]),Ii().memoizedState=s,[u,s]},useMutableSource:function(){},useSyncExternalStore:function(s,u,m){var _=En,T=Ii();if(Cn){if(m===void 0)throw Error(t(407));m=m()}else{if(m=u(),Vi===null)throw Error(t(349));(no&30)!==0||Gc(_,u,m)}T.memoizedState=m;var R={value:m,getSnapshot:u};return T.queue=R,ir(Sp.bind(null,_,R,s),[s]),_.flags|=2048,hs(9,gu.bind(null,_,R,m,u),void 0,null),m},useId:function(){var s=Ii(),u=Vi.identifierPrefix;if(Cn){var m=qr,_=ft;m=(_&~(1<<32-nn(_)-1)).toString(32)+m,u=":"+u+"R"+m,m=Bo++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=dr++,u=":"+u+"r"+m.toString(32)+":";return s.memoizedState=u},unstable_isNewReconciler:!1},Ap={readContext:Pr,useCallback:Tp,useContext:Pr,useEffect:Ph,useImperativeHandle:Rh,useInsertionEffect:Lh,useLayoutEffect:bp,useMemo:Ir,useReducer:mu,useRef:Mp,useState:function(){return mu(dl)},useDebugValue:Vc,useDeferredValue:function(s){var u=Rr();return Wc(u,Gn.memoizedState,s)},useTransition:function(){var s=mu(dl)[0],u=Rr().memoizedState;return[s,u]},useMutableSource:Eh,useSyncExternalStore:Th,useId:ro,unstable_isNewReconciler:!1},Pp={readContext:Pr,useCallback:Tp,useContext:Pr,useEffect:Ph,useImperativeHandle:Rh,useInsertionEffect:Lh,useLayoutEffect:bp,useMemo:Ir,useReducer:io,useRef:Mp,useState:function(){return io(dl)},useDebugValue:Vc,useDeferredValue:function(s){var u=Rr();return Gn===null?u.memoizedState=s:Wc(u,Gn.memoizedState,s)},useTransition:function(){var s=io(dl)[0],u=Rr().memoizedState;return[s,u]},useMutableSource:Eh,useSyncExternalStore:Th,useId:ro,unstable_isNewReconciler:!1};function Jr(s,u){if(s&&s.defaultProps){u=Y({},u),s=s.defaultProps;for(var m in s)u[m]===void 0&&(u[m]=s[m]);return u}return u}function xu(s,u,m,_){u=s.memoizedState,m=m(_,u),m=m==null?u:Y({},u,m),s.memoizedState=m,s.lanes===0&&(s.updateQueue.baseState=m)}var qc={isMounted:function(s){return(s=s._reactInternals)?At(s)===s:!1},enqueueSetState:function(s,u,m){s=s._reactInternals;var _=kr(),T=vl(s),R=yn(_,T);R.payload=u,m!=null&&(R.callback=m),u=Dn(s,R,T),u!==null&&(lo(u,s,T,_),Bi(u,s,T))},enqueueReplaceState:function(s,u,m){s=s._reactInternals;var _=kr(),T=vl(s),R=yn(_,T);R.tag=1,R.payload=u,m!=null&&(R.callback=m),u=Dn(s,R,T),u!==null&&(lo(u,s,T,_),Bi(u,s,T))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var m=kr(),_=vl(s),T=yn(m,_);T.tag=2,u!=null&&(T.callback=u),u=Dn(s,T,_),u!==null&&(lo(u,s,_,m),Bi(u,s,_))}};function Lp(s,u,m,_,T,R,U){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(_,R,U):u.prototype&&u.prototype.isPureReactComponent?!na(m,_)||!na(T,R):!0}function c(s,u,m){var _=!1,T=Zs,R=u.contextType;return typeof R=="object"&&R!==null?R=Pr(R):(T=Ui(u)?Js:Pi.current,_=u.contextTypes,R=(_=_!=null)?la(s,T):Zs),u=new u(m,R),s.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=qc,s.stateNode=u,u._reactInternals=s,_&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=T,s.__reactInternalMemoizedMaskedChildContext=R),u}function h(s,u,m,_){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,_),u.state!==s&&qc.enqueueReplaceState(u,u.state,null)}function y(s,u,m,_){var T=s.stateNode;T.props=m,T.state=s.memoizedState,T.refs={},Zt(s);var R=u.contextType;typeof R=="object"&&R!==null?T.context=Pr(R):(R=Ui(u)?Js:Pi.current,T.context=la(s,R)),T.state=s.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(xu(s,u,R,m),T.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(u=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),u!==T.state&&qc.enqueueReplaceState(T,T.state,null),Bn(s,m,T,_),T.state=s.memoizedState),typeof T.componentDidMount=="function"&&(s.flags|=4194308)}function b(s,u){try{var m="",_=u;do m+=Z(_),_=_.return;while(_);var T=m}catch(R){T=`
Error generating stack: `+R.message+`
`+R.stack}return{value:s,source:u,stack:T,digest:null}}function P(s,u,m){return{value:s,source:null,stack:m??null,digest:u??null}}function k(s,u){try{console.error(u.value)}catch(m){setTimeout(function(){throw m})}}var $=typeof WeakMap=="function"?WeakMap:Map;function pe(s,u,m){m=yn(-1,m),m.tag=3,m.payload={element:null};var _=u.value;return m.callback=function(){Op||(Op=!0,t0=_),k(s,u)},m}function ze(s,u,m){m=yn(-1,m),m.tag=3;var _=s.type.getDerivedStateFromError;if(typeof _=="function"){var T=u.value;m.payload=function(){return _(T)},m.callback=function(){k(s,u)}}var R=s.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(m.callback=function(){k(s,u),typeof _!="function"&&(ml===null?ml=new Set([this]):ml.add(this));var U=u.stack;this.componentDidCatch(u.value,{componentStack:U!==null?U:""})}),m}function ot(s,u,m){var _=s.pingCache;if(_===null){_=s.pingCache=new $;var T=new Set;_.set(u,T)}else T=_.get(u),T===void 0&&(T=new Set,_.set(u,T));T.has(m)||(T.add(m),s=r3.bind(null,s,u,m),u.then(s,s))}function xt(s){do{var u;if((u=s.tag===13)&&(u=s.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return s;s=s.return}while(s!==null);return null}function Ut(s,u,m,_,T){return(s.mode&1)===0?(s===u?s.flags|=65536:(s.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(u=yn(-1,1),u.tag=2,Dn(m,u,1))),m.lanes|=1),s):(s.flags|=65536,s.lanes=T,s)}var Pt=L.ReactCurrentOwner,Qt=!1;function gt(s,u,m,_){u.child=s===null?lu(u,null,m,_):ha(u,s.child,m,_)}function Di(s,u,m,_,T){m=m.render;var R=u.ref;return zo(u,T),_=pu(s,u,m,_,R,T),m=bh(),s!==null&&!Qt?(u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~T,wa(s,u,T)):(Cn&&m&&vh(u),u.flags|=1,gt(s,u,_,T),u.child)}function Dr(s,u,m,_,T){if(s===null){var R=m.type;return typeof R=="function"&&!l0(R)&&R.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(u.tag=15,u.type=R,Ee(s,u,R,_,T)):(s=Wp(m.type,null,_,u,u.mode,T),s.ref=u.ref,s.return=u,u.child=s)}if(R=s.child,(s.lanes&T)===0){var U=R.memoizedProps;if(m=m.compare,m=m!==null?m:na,m(U,_)&&s.ref===u.ref)return wa(s,u,T)}return u.flags|=1,s=xl(R,_),s.ref=u.ref,s.return=u,u.child=s}function Ee(s,u,m,_,T){if(s!==null){var R=s.memoizedProps;if(na(R,_)&&s.ref===u.ref)if(Qt=!1,u.pendingProps=_=R,(s.lanes&T)!==0)(s.flags&131072)!==0&&(Qt=!0);else return u.lanes=s.lanes,wa(s,u,T)}return pt(s,u,m,_,T)}function ve(s,u,m){var _=u.pendingProps,T=_.children,R=s!==null?s.memoizedState:null;if(_.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Jc,ds),ds|=m;else{if((m&1073741824)===0)return s=R!==null?R.baseLanes|m:m,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:s,cachePool:null,transitions:null},u.updateQueue=null,_n(Jc,ds),ds|=s,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=R!==null?R.baseLanes:m,_n(Jc,ds),ds|=_}else R!==null?(_=R.baseLanes|m,u.memoizedState=null):_=m,_n(Jc,ds),ds|=_;return gt(s,u,T,m),u.child}function De(s,u){var m=u.ref;(s===null&&m!==null||s!==null&&s.ref!==m)&&(u.flags|=512,u.flags|=2097152)}function pt(s,u,m,_,T){var R=Ui(m)?Js:Pi.current;return R=la(u,R),zo(u,T),m=pu(s,u,m,_,R,T),_=bh(),s!==null&&!Qt?(u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~T,wa(s,u,T)):(Cn&&_&&vh(u),u.flags|=1,gt(s,u,m,T),u.child)}function Et(s,u,m,_,T){if(Ui(m)){var R=!0;ua(u)}else R=!1;if(zo(u,T),u.stateNode===null)Ip(s,u),c(u,m,_),y(u,m,_,T),_=!0;else if(s===null){var U=u.stateNode,ne=u.memoizedProps;U.props=ne;var le=U.context,Pe=m.contextType;typeof Pe=="object"&&Pe!==null?Pe=Pr(Pe):(Pe=Ui(m)?Js:Pi.current,Pe=la(u,Pe));var nt=m.getDerivedStateFromProps,it=typeof nt=="function"||typeof U.getSnapshotBeforeUpdate=="function";it||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ne!==_||le!==Pe)&&h(u,U,_,Pe),vn=!1;var $e=u.memoizedState;U.state=$e,Bn(u,_,U,T),le=u.memoizedState,ne!==_||$e!==le||er.current||vn?(typeof nt=="function"&&(xu(u,m,nt,_),le=u.memoizedState),(ne=vn||Lp(u,m,ne,_,$e,le,Pe))?(it||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(u.flags|=4194308)):(typeof U.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=le),U.props=_,U.state=le,U.context=Pe,_=ne):(typeof U.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{U=u.stateNode,Yn(s,u),ne=u.memoizedProps,Pe=u.type===u.elementType?ne:Jr(u.type,ne),U.props=Pe,it=u.pendingProps,$e=U.context,le=m.contextType,typeof le=="object"&&le!==null?le=Pr(le):(le=Ui(m)?Js:Pi.current,le=la(u,le));var yt=m.getDerivedStateFromProps;(nt=typeof yt=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ne!==it||$e!==le)&&h(u,U,_,le),vn=!1,$e=u.memoizedState,U.state=$e,Bn(u,_,U,T);var wt=u.memoizedState;ne!==it||$e!==wt||er.current||vn?(typeof yt=="function"&&(xu(u,m,yt,_),wt=u.memoizedState),(Pe=vn||Lp(u,m,Pe,_,$e,wt,le)||!1)?(nt||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(_,wt,le),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(_,wt,le)),typeof U.componentDidUpdate=="function"&&(u.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof U.componentDidUpdate!="function"||ne===s.memoizedProps&&$e===s.memoizedState||(u.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ne===s.memoizedProps&&$e===s.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=wt),U.props=_,U.state=wt,U.context=le,_=Pe):(typeof U.componentDidUpdate!="function"||ne===s.memoizedProps&&$e===s.memoizedState||(u.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ne===s.memoizedProps&&$e===s.memoizedState||(u.flags|=1024),_=!1)}return jt(s,u,m,_,R,T)}function jt(s,u,m,_,T,R){De(s,u);var U=(u.flags&128)!==0;if(!_&&!U)return T&&mh(u,m,!1),wa(s,u,R);_=u.stateNode,Pt.current=u;var ne=U&&typeof m.getDerivedStateFromError!="function"?null:_.render();return u.flags|=1,s!==null&&U?(u.child=ha(u,s.child,null,R),u.child=ha(u,null,ne,R)):gt(s,u,ne,R),u.memoizedState=_.state,T&&mh(u,m,!0),u.child}function Bt(s){var u=s.stateNode;u.pendingContext?ph(s,u.pendingContext,u.pendingContext!==u.context):u.context&&ph(s,u.context,!1),hu(s,u.containerInfo)}function ln(s,u,m,_,T){return Oo(),ll(T),u.flags|=256,gt(s,u,m,_),u.child}var ei={dehydrated:null,treeContext:null,retryLane:0};function on(s){return{baseLanes:s,cachePool:null,transitions:null}}function so(s,u,m){var _=u.pendingProps,T=An.current,R=!1,U=(u.flags&128)!==0,ne;if((ne=U)||(ne=s!==null&&s.memoizedState===null?!1:(T&2)!==0),ne?(R=!0,u.flags&=-129):(s===null||s.memoizedState!==null)&&(T|=1),_n(An,T&1),s===null)return Uc(u),s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((u.mode&1)===0?u.lanes=1:s.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(U=_.children,s=_.fallback,R?(_=u.mode,R=u.child,U={mode:"hidden",children:U},(_&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=U):R=Hp(U,_,0,null),s=bu(s,_,m,null),R.return=u,s.return=u,R.sibling=s,u.child=R,u.child.memoizedState=on(m),u.memoizedState=ei,s):Ih(u,U));if(T=s.memoizedState,T!==null&&(ne=T.dehydrated,ne!==null))return X2(s,u,U,_,ne,T,m);if(R){R=_.fallback,U=u.mode,T=s.child,ne=T.sibling;var le={mode:"hidden",children:_.children};return(U&1)===0&&u.child!==T?(_=u.child,_.childLanes=0,_.pendingProps=le,u.deletions=null):(_=xl(T,le),_.subtreeFlags=T.subtreeFlags&14680064),ne!==null?R=xl(ne,R):(R=bu(R,U,m,null),R.flags|=2),R.return=u,_.return=u,_.sibling=R,u.child=_,_=R,R=u.child,U=s.child.memoizedState,U=U===null?on(m):{baseLanes:U.baseLanes|m,cachePool:null,transitions:U.transitions},R.memoizedState=U,R.childLanes=s.childLanes&~m,u.memoizedState=ei,_}return R=s.child,s=R.sibling,_=xl(R,{mode:"visible",children:_.children}),(u.mode&1)===0&&(_.lanes=m),_.return=u,_.sibling=null,s!==null&&(m=u.deletions,m===null?(u.deletions=[s],u.flags|=16):m.push(s)),u.child=_,u.memoizedState=null,_}function Ih(s,u){return u=Hp({mode:"visible",children:u},s.mode,0,null),u.return=s,s.child=u}function Rp(s,u,m,_){return _!==null&&ll(_),ha(u,s.child,null,m),s=Ih(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function X2(s,u,m,_,T,R,U){if(m)return u.flags&256?(u.flags&=-257,_=P(Error(t(422))),Rp(s,u,U,_)):u.memoizedState!==null?(u.child=s.child,u.flags|=128,null):(R=_.fallback,T=u.mode,_=Hp({mode:"visible",children:_.children},T,0,null),R=bu(R,T,U,null),R.flags|=2,_.return=u,R.return=u,_.sibling=R,u.child=_,(u.mode&1)!==0&&ha(u,s.child,null,U),u.child.memoizedState=on(U),u.memoizedState=ei,R);if((u.mode&1)===0)return Rp(s,u,U,null);if(T.data==="$!"){if(_=T.nextSibling&&T.nextSibling.dataset,_)var ne=_.dgst;return _=ne,R=Error(t(419)),_=P(R,_,void 0),Rp(s,u,U,_)}if(ne=(U&s.childLanes)!==0,Qt||ne){if(_=Vi,_!==null){switch(U&-U){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(_.suspendedLanes|U))!==0?0:T,T!==0&&T!==R.retryLane&&(R.retryLane=T,us(s,T),lo(_,s,T,-1))}return a0(),_=P(Error(t(421))),Rp(s,u,U,_)}return T.data==="$?"?(u.flags|=128,u.child=s.child,u=s3.bind(null,s),T._reactRetry=u,null):(s=R.treeContext,nr=Ys(T.nextSibling),Li=u,Cn=!0,Zr=null,s!==null&&(tr[Si++]=ft,tr[Si++]=qr,tr[Si++]=fa,ft=s.id,qr=s.overflow,fa=u),u=Ih(u,_.children),u.flags|=4096,u)}function Ex(s,u,m){s.lanes|=u;var _=s.alternate;_!==null&&(_.lanes|=u),cu(s.return,u,m)}function Xg(s,u,m,_,T){var R=s.memoizedState;R===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:T}:(R.isBackwards=u,R.rendering=null,R.renderingStartTime=0,R.last=_,R.tail=m,R.tailMode=T)}function Tx(s,u,m){var _=u.pendingProps,T=_.revealOrder,R=_.tail;if(gt(s,u,_.children,m),_=An.current,(_&2)!==0)_=_&1|2,u.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ex(s,m,u);else if(s.tag===19)Ex(s,m,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}_&=1}if(_n(An,_),(u.mode&1)===0)u.memoizedState=null;else switch(T){case"forwards":for(m=u.child,T=null;m!==null;)s=m.alternate,s!==null&&cs(s)===null&&(T=m),m=m.sibling;m=T,m===null?(T=u.child,u.child=null):(T=m.sibling,m.sibling=null),Xg(u,!1,T,m,R);break;case"backwards":for(m=null,T=u.child,u.child=null;T!==null;){if(s=T.alternate,s!==null&&cs(s)===null){u.child=T;break}s=T.sibling,T.sibling=m,m=T,T=s}Xg(u,!0,m,null,R);break;case"together":Xg(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ip(s,u){(u.mode&1)===0&&s!==null&&(s.alternate=null,u.alternate=null,u.flags|=2)}function wa(s,u,m){if(s!==null&&(u.dependencies=s.dependencies),_u|=u.lanes,(m&u.childLanes)===0)return null;if(s!==null&&u.child!==s.child)throw Error(t(153));if(u.child!==null){for(s=u.child,m=xl(s,s.pendingProps),u.child=m,m.return=u;s.sibling!==null;)s=s.sibling,m=m.sibling=xl(s,s.pendingProps),m.return=u;m.sibling=null}return u.child}function Y2(s,u,m){switch(u.tag){case 3:Bt(u),Oo();break;case 5:ya(u);break;case 1:Ui(u.type)&&ua(u);break;case 4:hu(u,u.stateNode.containerInfo);break;case 10:var _=u.type._context,T=u.memoizedProps.value;_n(da,_._currentValue),_._currentValue=T;break;case 13:if(_=u.memoizedState,_!==null)return _.dehydrated!==null?(_n(An,An.current&1),u.flags|=128,null):(m&u.child.childLanes)!==0?so(s,u,m):(_n(An,An.current&1),s=wa(s,u,m),s!==null?s.sibling:null);_n(An,An.current&1);break;case 19:if(_=(m&u.childLanes)!==0,(s.flags&128)!==0){if(_)return Tx(s,u,m);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),_n(An,An.current),_)break;return null;case 22:case 23:return u.lanes=0,ve(s,u,m)}return wa(s,u,m)}var Cx,Yg,Ax,Px;Cx=function(s,u){for(var m=u.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Yg=function(){},Ax=function(s,u,m,_){var T=s.memoizedProps;if(T!==_){s=u.stateNode,$n(Lr.current);var R=null;switch(m){case"input":T=Ge(s,T),_=Ge(s,_),R=[];break;case"select":T=Y({},T,{value:void 0}),_=Y({},_,{value:void 0}),R=[];break;case"textarea":T=W(s,T),_=W(s,_),R=[];break;default:typeof T.onClick!="function"&&typeof _.onClick=="function"&&(s.onclick=tu)}ie(m,_);var U;m=null;for(Pe in T)if(!_.hasOwnProperty(Pe)&&T.hasOwnProperty(Pe)&&T[Pe]!=null)if(Pe==="style"){var ne=T[Pe];for(U in ne)ne.hasOwnProperty(U)&&(m||(m={}),m[U]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(i.hasOwnProperty(Pe)?R||(R=[]):(R=R||[]).push(Pe,null));for(Pe in _){var le=_[Pe];if(ne=T!=null?T[Pe]:void 0,_.hasOwnProperty(Pe)&&le!==ne&&(le!=null||ne!=null))if(Pe==="style")if(ne){for(U in ne)!ne.hasOwnProperty(U)||le&&le.hasOwnProperty(U)||(m||(m={}),m[U]="");for(U in le)le.hasOwnProperty(U)&&ne[U]!==le[U]&&(m||(m={}),m[U]=le[U])}else m||(R||(R=[]),R.push(Pe,m)),m=le;else Pe==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,ne=ne?ne.__html:void 0,le!=null&&ne!==le&&(R=R||[]).push(Pe,le)):Pe==="children"?typeof le!="string"&&typeof le!="number"||(R=R||[]).push(Pe,""+le):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Pe)?(le!=null&&Pe==="onScroll"&&Mn("scroll",s),R||ne===le||(R=[])):(R=R||[]).push(Pe,le))}m&&(R=R||[]).push("style",m);var Pe=R;(u.updateQueue=Pe)&&(u.flags|=4)}},Px=function(s,u,m,_){m!==_&&(u.flags|=4)};function Dh(s,u){if(!Cn)switch(s.tailMode){case"hidden":u=s.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?s.tail=null:m.sibling=null;break;case"collapsed":m=s.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:_.sibling=null}}function pr(s){var u=s.alternate!==null&&s.alternate.child===s.child,m=0,_=0;if(u)for(var T=s.child;T!==null;)m|=T.lanes|T.childLanes,_|=T.subtreeFlags&14680064,_|=T.flags&14680064,T.return=s,T=T.sibling;else for(T=s.child;T!==null;)m|=T.lanes|T.childLanes,_|=T.subtreeFlags,_|=T.flags,T.return=s,T=T.sibling;return s.subtreeFlags|=_,s.childLanes=m,u}function q2(s,u,m){var _=u.pendingProps;switch(Ks(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(u),null;case 1:return Ui(u.type)&&nu(),pr(u),null;case 3:return _=u.stateNode,Uo(),bn(er),bn(Pi),Ts(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(s===null||s.child===null)&&(al(u)?u.flags|=4:s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Zr!==null&&(r0(Zr),Zr=null))),Yg(s,u),pr(u),null;case 5:fl(u);var T=$n(to.current);if(m=u.type,s!==null&&u.stateNode!=null)Ax(s,u,m,_,T),s.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!_){if(u.stateNode===null)throw Error(t(166));return pr(u),null}if(s=$n(Lr.current),al(u)){_=u.stateNode,m=u.type;var R=u.memoizedProps;switch(_[ai]=u,_[ol]=R,s=(u.mode&1)!==0,m){case"dialog":Mn("cancel",_),Mn("close",_);break;case"iframe":case"object":case"embed":Mn("load",_);break;case"video":case"audio":for(T=0;T<Fo.length;T++)Mn(Fo[T],_);break;case"source":Mn("error",_);break;case"img":case"image":case"link":Mn("error",_),Mn("load",_);break;case"details":Mn("toggle",_);break;case"input":He(_,R),Mn("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!R.multiple},Mn("invalid",_);break;case"textarea":G(_,R),Mn("invalid",_)}ie(m,R),T=null;for(var U in R)if(R.hasOwnProperty(U)){var ne=R[U];U==="children"?typeof ne=="string"?_.textContent!==ne&&(R.suppressHydrationWarning!==!0&&eu(_.textContent,ne,s),T=["children",ne]):typeof ne=="number"&&_.textContent!==""+ne&&(R.suppressHydrationWarning!==!0&&eu(_.textContent,ne,s),T=["children",""+ne]):i.hasOwnProperty(U)&&ne!=null&&U==="onScroll"&&Mn("scroll",_)}switch(m){case"input":ke(_),Ie(_,R,!0);break;case"textarea":ke(_),Te(_);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(_.onclick=tu)}_=T,u.updateQueue=_,_!==null&&(u.flags|=4)}else{U=T.nodeType===9?T:T.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=je(m)),s==="http://www.w3.org/1999/xhtml"?m==="script"?(s=U.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof _.is=="string"?s=U.createElement(m,{is:_.is}):(s=U.createElement(m),m==="select"&&(U=s,_.multiple?U.multiple=!0:_.size&&(U.size=_.size))):s=U.createElementNS(s,m),s[ai]=u,s[ol]=_,Cx(s,u,!1,!1),u.stateNode=s;e:{switch(U=Fe(m,_),m){case"dialog":Mn("cancel",s),Mn("close",s),T=_;break;case"iframe":case"object":case"embed":Mn("load",s),T=_;break;case"video":case"audio":for(T=0;T<Fo.length;T++)Mn(Fo[T],s);T=_;break;case"source":Mn("error",s),T=_;break;case"img":case"image":case"link":Mn("error",s),Mn("load",s),T=_;break;case"details":Mn("toggle",s),T=_;break;case"input":He(s,_),T=Ge(s,_),Mn("invalid",s);break;case"option":T=_;break;case"select":s._wrapperState={wasMultiple:!!_.multiple},T=Y({},_,{value:void 0}),Mn("invalid",s);break;case"textarea":G(s,_),T=W(s,_),Mn("invalid",s);break;default:T=_}ie(m,T),ne=T;for(R in ne)if(ne.hasOwnProperty(R)){var le=ne[R];R==="style"?et(s,le):R==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,le!=null&&Ke(s,le)):R==="children"?typeof le=="string"?(m!=="textarea"||le!=="")&&Le(s,le):typeof le=="number"&&Le(s,""+le):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(i.hasOwnProperty(R)?le!=null&&R==="onScroll"&&Mn("scroll",s):le!=null&&A(s,R,le,U))}switch(m){case"input":ke(s),Ie(s,_,!1);break;case"textarea":ke(s),Te(s);break;case"option":_.value!=null&&s.setAttribute("value",""+me(_.value));break;case"select":s.multiple=!!_.multiple,R=_.value,R!=null?Re(s,!!_.multiple,R,!1):_.defaultValue!=null&&Re(s,!!_.multiple,_.defaultValue,!0);break;default:typeof T.onClick=="function"&&(s.onclick=tu)}switch(m){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return pr(u),null;case 6:if(s&&u.stateNode!=null)Px(s,u,s.memoizedProps,_);else{if(typeof _!="string"&&u.stateNode===null)throw Error(t(166));if(m=$n(to.current),$n(Lr.current),al(u)){if(_=u.stateNode,m=u.memoizedProps,_[ai]=u,(R=_.nodeValue!==m)&&(s=Li,s!==null))switch(s.tag){case 3:eu(_.nodeValue,m,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&eu(_.nodeValue,m,(s.mode&1)!==0)}R&&(u.flags|=4)}else _=(m.nodeType===9?m:m.ownerDocument).createTextNode(_),_[ai]=u,u.stateNode=_}return pr(u),null;case 13:if(bn(An),_=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Cn&&nr!==null&&(u.mode&1)!==0&&(u.flags&128)===0)_h(),Oo(),u.flags|=98560,R=!1;else if(R=al(u),_!==null&&_.dehydrated!==null){if(s===null){if(!R)throw Error(t(318));if(R=u.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(t(317));R[ai]=u}else Oo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;pr(u),R=!1}else Zr!==null&&(r0(Zr),Zr=null),R=!0;if(!R)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=m,u):(_=_!==null,_!==(s!==null&&s.memoizedState!==null)&&_&&(u.child.flags|=8192,(u.mode&1)!==0&&(s===null||(An.current&1)!==0?ki===0&&(ki=3):a0())),u.updateQueue!==null&&(u.flags|=4),pr(u),null);case 4:return Uo(),Yg(s,u),s===null&&il(u.stateNode.containerInfo),pr(u),null;case 10:return uu(u.type._context),pr(u),null;case 17:return Ui(u.type)&&nu(),pr(u),null;case 19:if(bn(An),R=u.memoizedState,R===null)return pr(u),null;if(_=(u.flags&128)!==0,U=R.rendering,U===null)if(_)Dh(R,!1);else{if(ki!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(U=cs(s),U!==null){for(u.flags|=128,Dh(R,!1),_=U.updateQueue,_!==null&&(u.updateQueue=_,u.flags|=4),u.subtreeFlags=0,_=m,m=u.child;m!==null;)R=m,s=_,R.flags&=14680066,U=R.alternate,U===null?(R.childLanes=0,R.lanes=s,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=U.childLanes,R.lanes=U.lanes,R.child=U.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=U.memoizedProps,R.memoizedState=U.memoizedState,R.updateQueue=U.updateQueue,R.type=U.type,s=U.dependencies,R.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),m=m.sibling;return _n(An,An.current&1|2),u.child}s=s.sibling}R.tail!==null&&Xe()>Qc&&(u.flags|=128,_=!0,Dh(R,!1),u.lanes=4194304)}else{if(!_)if(s=cs(U),s!==null){if(u.flags|=128,_=!0,m=s.updateQueue,m!==null&&(u.updateQueue=m,u.flags|=4),Dh(R,!0),R.tail===null&&R.tailMode==="hidden"&&!U.alternate&&!Cn)return pr(u),null}else 2*Xe()-R.renderingStartTime>Qc&&m!==1073741824&&(u.flags|=128,_=!0,Dh(R,!1),u.lanes=4194304);R.isBackwards?(U.sibling=u.child,u.child=U):(m=R.last,m!==null?m.sibling=U:u.child=U,R.last=U)}return R.tail!==null?(u=R.tail,R.rendering=u,R.tail=u.sibling,R.renderingStartTime=Xe(),u.sibling=null,m=An.current,_n(An,_?m&1|2:m&1),u):(pr(u),null);case 22:case 23:return o0(),_=u.memoizedState!==null,s!==null&&s.memoizedState!==null!==_&&(u.flags|=8192),_&&(u.mode&1)!==0?(ds&1073741824)!==0&&(pr(u),u.subtreeFlags&6&&(u.flags|=8192)):pr(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function Z2(s,u){switch(Ks(u),u.tag){case 1:return Ui(u.type)&&nu(),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return Uo(),bn(er),bn(Pi),Ts(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 5:return fl(u),null;case 13:if(bn(An),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Oo()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return bn(An),null;case 4:return Uo(),null;case 10:return uu(u.type._context),null;case 22:case 23:return o0(),null;case 24:return null;default:return null}}var Dp=!1,mr=!1,J2=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Zc(s,u){var m=s.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(_){ti(s,u,_)}else m.current=null}function qg(s,u,m){try{m()}catch(_){ti(s,u,_)}}var Lx=!1;function Q2(s,u){if(sl=pi,s=zn(),vi(s)){if("selectionStart"in s)var m={start:s.selectionStart,end:s.selectionEnd};else e:{m=(m=s.ownerDocument)&&m.defaultView||window;var _=m.getSelection&&m.getSelection();if(_&&_.rangeCount!==0){m=_.anchorNode;var T=_.anchorOffset,R=_.focusNode;_=_.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var U=0,ne=-1,le=-1,Pe=0,nt=0,it=s,$e=null;t:for(;;){for(var yt;it!==m||T!==0&&it.nodeType!==3||(ne=U+T),it!==R||_!==0&&it.nodeType!==3||(le=U+_),it.nodeType===3&&(U+=it.nodeValue.length),(yt=it.firstChild)!==null;)$e=it,it=yt;for(;;){if(it===s)break t;if($e===m&&++Pe===T&&(ne=U),$e===R&&++nt===_&&(le=U),(yt=it.nextSibling)!==null)break;it=$e,$e=it.parentNode}it=yt}m=ne===-1||le===-1?null:{start:ne,end:le}}else m=null}m=m||{start:0,end:0}}else m=null;for(lh={focusedElem:s,selectionRange:m},pi=!1,_t=u;_t!==null;)if(u=_t,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,_t=s;else for(;_t!==null;){u=_t;try{var wt=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(wt!==null){var Mt=wt.memoizedProps,li=wt.memoizedState,Se=u.stateNode,de=Se.getSnapshotBeforeUpdate(u.elementType===u.type?Mt:Jr(u.type,Mt),li);Se.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var Me=u.stateNode.containerInfo;Me.nodeType===1?Me.textContent="":Me.nodeType===9&&Me.documentElement&&Me.removeChild(Me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(at){ti(u,u.return,at)}if(s=u.sibling,s!==null){s.return=u.return,_t=s;break}_t=u.return}return wt=Lx,Lx=!1,wt}function kh(s,u,m){var _=u.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var T=_=_.next;do{if((T.tag&s)===s){var R=T.destroy;T.destroy=void 0,R!==void 0&&qg(u,m,R)}T=T.next}while(T!==_)}}function kp(s,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&s)===s){var _=m.create;m.destroy=_()}m=m.next}while(m!==u)}}function Zg(s){var u=s.ref;if(u!==null){var m=s.stateNode;switch(s.tag){case 5:s=m;break;default:s=m}typeof u=="function"?u(s):u.current=s}}function Rx(s){var u=s.alternate;u!==null&&(s.alternate=null,Rx(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&(delete u[ai],delete u[ol],delete u[aa],delete u[Ic],delete u[Dc])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Ix(s){return s.tag===5||s.tag===3||s.tag===4}function Dx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ix(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Jg(s,u,m){var _=s.tag;if(_===5||_===6)s=s.stateNode,u?m.nodeType===8?m.parentNode.insertBefore(s,u):m.insertBefore(s,u):(m.nodeType===8?(u=m.parentNode,u.insertBefore(s,m)):(u=m,u.appendChild(s)),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=tu));else if(_!==4&&(s=s.child,s!==null))for(Jg(s,u,m),s=s.sibling;s!==null;)Jg(s,u,m),s=s.sibling}function Qg(s,u,m){var _=s.tag;if(_===5||_===6)s=s.stateNode,u?m.insertBefore(s,u):m.appendChild(s);else if(_!==4&&(s=s.child,s!==null))for(Qg(s,u,m),s=s.sibling;s!==null;)Qg(s,u,m),s=s.sibling}var rr=null,oo=!1;function pl(s,u,m){for(m=m.child;m!==null;)kx(s,u,m),m=m.sibling}function kx(s,u,m){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(cn,m)}catch{}switch(m.tag){case 5:mr||Zc(m,u);case 6:var _=rr,T=oo;rr=null,pl(s,u,m),rr=_,oo=T,rr!==null&&(oo?(s=rr,m=m.stateNode,s.nodeType===8?s.parentNode.removeChild(m):s.removeChild(m)):rr.removeChild(m.stateNode));break;case 18:rr!==null&&(oo?(s=rr,m=m.stateNode,s.nodeType===8?Rc(s.parentNode,m):s.nodeType===1&&Rc(s,m),Co(s)):Rc(rr,m.stateNode));break;case 4:_=rr,T=oo,rr=m.stateNode.containerInfo,oo=!0,pl(s,u,m),rr=_,oo=T;break;case 0:case 11:case 14:case 15:if(!mr&&(_=m.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){T=_=_.next;do{var R=T,U=R.destroy;R=R.tag,U!==void 0&&((R&2)!==0||(R&4)!==0)&&qg(m,u,U),T=T.next}while(T!==_)}pl(s,u,m);break;case 1:if(!mr&&(Zc(m,u),_=m.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=m.memoizedProps,_.state=m.memoizedState,_.componentWillUnmount()}catch(ne){ti(m,u,ne)}pl(s,u,m);break;case 21:pl(s,u,m);break;case 22:m.mode&1?(mr=(_=mr)||m.memoizedState!==null,pl(s,u,m),mr=_):pl(s,u,m);break;default:pl(s,u,m)}}function Fx(s){var u=s.updateQueue;if(u!==null){s.updateQueue=null;var m=s.stateNode;m===null&&(m=s.stateNode=new J2),u.forEach(function(_){var T=o3.bind(null,s,_);m.has(_)||(m.add(_),_.then(T,T))})}}function ao(s,u){var m=u.deletions;if(m!==null)for(var _=0;_<m.length;_++){var T=m[_];try{var R=s,U=u,ne=U;e:for(;ne!==null;){switch(ne.tag){case 5:rr=ne.stateNode,oo=!1;break e;case 3:rr=ne.stateNode.containerInfo,oo=!0;break e;case 4:rr=ne.stateNode.containerInfo,oo=!0;break e}ne=ne.return}if(rr===null)throw Error(t(160));kx(R,U,T),rr=null,oo=!1;var le=T.alternate;le!==null&&(le.return=null),T.return=null}catch(Pe){ti(T,u,Pe)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)Nx(u,s),u=u.sibling}function Nx(s,u){var m=s.alternate,_=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ao(u,s),Go(s),_&4){try{kh(3,s,s.return),kp(3,s)}catch(Mt){ti(s,s.return,Mt)}try{kh(5,s,s.return)}catch(Mt){ti(s,s.return,Mt)}}break;case 1:ao(u,s),Go(s),_&512&&m!==null&&Zc(m,m.return);break;case 5:if(ao(u,s),Go(s),_&512&&m!==null&&Zc(m,m.return),s.flags&32){var T=s.stateNode;try{Le(T,"")}catch(Mt){ti(s,s.return,Mt)}}if(_&4&&(T=s.stateNode,T!=null)){var R=s.memoizedProps,U=m!==null?m.memoizedProps:R,ne=s.type,le=s.updateQueue;if(s.updateQueue=null,le!==null)try{ne==="input"&&R.type==="radio"&&R.name!=null&&Ue(T,R),Fe(ne,U);var Pe=Fe(ne,R);for(U=0;U<le.length;U+=2){var nt=le[U],it=le[U+1];nt==="style"?et(T,it):nt==="dangerouslySetInnerHTML"?Ke(T,it):nt==="children"?Le(T,it):A(T,nt,it,Pe)}switch(ne){case"input":ut(T,R);break;case"textarea":fe(T,R);break;case"select":var $e=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!R.multiple;var yt=R.value;yt!=null?Re(T,!!R.multiple,yt,!1):$e!==!!R.multiple&&(R.defaultValue!=null?Re(T,!!R.multiple,R.defaultValue,!0):Re(T,!!R.multiple,R.multiple?[]:"",!1))}T[ol]=R}catch(Mt){ti(s,s.return,Mt)}}break;case 6:if(ao(u,s),Go(s),_&4){if(s.stateNode===null)throw Error(t(162));T=s.stateNode,R=s.memoizedProps;try{T.nodeValue=R}catch(Mt){ti(s,s.return,Mt)}}break;case 3:if(ao(u,s),Go(s),_&4&&m!==null&&m.memoizedState.isDehydrated)try{Co(u.containerInfo)}catch(Mt){ti(s,s.return,Mt)}break;case 4:ao(u,s),Go(s);break;case 13:ao(u,s),Go(s),T=s.child,T.flags&8192&&(R=T.memoizedState!==null,T.stateNode.isHidden=R,!R||T.alternate!==null&&T.alternate.memoizedState!==null||(e0=Xe())),_&4&&Fx(s);break;case 22:if(nt=m!==null&&m.memoizedState!==null,s.mode&1?(mr=(Pe=mr)||nt,ao(u,s),mr=Pe):ao(u,s),Go(s),_&8192){if(Pe=s.memoizedState!==null,(s.stateNode.isHidden=Pe)&&!nt&&(s.mode&1)!==0)for(_t=s,nt=s.child;nt!==null;){for(it=_t=nt;_t!==null;){switch($e=_t,yt=$e.child,$e.tag){case 0:case 11:case 14:case 15:kh(4,$e,$e.return);break;case 1:Zc($e,$e.return);var wt=$e.stateNode;if(typeof wt.componentWillUnmount=="function"){_=$e,m=$e.return;try{u=_,wt.props=u.memoizedProps,wt.state=u.memoizedState,wt.componentWillUnmount()}catch(Mt){ti(_,m,Mt)}}break;case 5:Zc($e,$e.return);break;case 22:if($e.memoizedState!==null){Ux(it);continue}}yt!==null?(yt.return=$e,_t=yt):Ux(it)}nt=nt.sibling}e:for(nt=null,it=s;;){if(it.tag===5){if(nt===null){nt=it;try{T=it.stateNode,Pe?(R=T.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(ne=it.stateNode,le=it.memoizedProps.style,U=le!=null&&le.hasOwnProperty("display")?le.display:null,ne.style.display=ct("display",U))}catch(Mt){ti(s,s.return,Mt)}}}else if(it.tag===6){if(nt===null)try{it.stateNode.nodeValue=Pe?"":it.memoizedProps}catch(Mt){ti(s,s.return,Mt)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===s)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===s)break e;for(;it.sibling===null;){if(it.return===null||it.return===s)break e;nt===it&&(nt=null),it=it.return}nt===it&&(nt=null),it.sibling.return=it.return,it=it.sibling}}break;case 19:ao(u,s),Go(s),_&4&&Fx(s);break;case 21:break;default:ao(u,s),Go(s)}}function Go(s){var u=s.flags;if(u&2){try{e:{for(var m=s.return;m!==null;){if(Ix(m)){var _=m;break e}m=m.return}throw Error(t(160))}switch(_.tag){case 5:var T=_.stateNode;_.flags&32&&(Le(T,""),_.flags&=-33);var R=Dx(s);Qg(s,R,T);break;case 3:case 4:var U=_.stateNode.containerInfo,ne=Dx(s);Jg(s,ne,U);break;default:throw Error(t(161))}}catch(le){ti(s,s.return,le)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function K2(s,u,m){_t=s,Ox(s)}function Ox(s,u,m){for(var _=(s.mode&1)!==0;_t!==null;){var T=_t,R=T.child;if(T.tag===22&&_){var U=T.memoizedState!==null||Dp;if(!U){var ne=T.alternate,le=ne!==null&&ne.memoizedState!==null||mr;ne=Dp;var Pe=mr;if(Dp=U,(mr=le)&&!Pe)for(_t=T;_t!==null;)U=_t,le=U.child,U.tag===22&&U.memoizedState!==null?Bx(T):le!==null?(le.return=U,_t=le):Bx(T);for(;R!==null;)_t=R,Ox(R),R=R.sibling;_t=T,Dp=ne,mr=Pe}zx(s)}else(T.subtreeFlags&8772)!==0&&R!==null?(R.return=T,_t=R):zx(s)}}function zx(s){for(;_t!==null;){var u=_t;if((u.flags&8772)!==0){var m=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:mr||kp(5,u);break;case 1:var _=u.stateNode;if(u.flags&4&&!mr)if(m===null)_.componentDidMount();else{var T=u.elementType===u.type?m.memoizedProps:Jr(u.type,m.memoizedProps);_.componentDidUpdate(T,m.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var R=u.updateQueue;R!==null&&cl(u,R,_);break;case 3:var U=u.updateQueue;if(U!==null){if(m=null,u.child!==null)switch(u.child.tag){case 5:m=u.child.stateNode;break;case 1:m=u.child.stateNode}cl(u,U,m)}break;case 5:var ne=u.stateNode;if(m===null&&u.flags&4){m=ne;var le=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":le.autoFocus&&m.focus();break;case"img":le.src&&(m.src=le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Pe=u.alternate;if(Pe!==null){var nt=Pe.memoizedState;if(nt!==null){var it=nt.dehydrated;it!==null&&Co(it)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}mr||u.flags&512&&Zg(u)}catch($e){ti(u,u.return,$e)}}if(u===s){_t=null;break}if(m=u.sibling,m!==null){m.return=u.return,_t=m;break}_t=u.return}}function Ux(s){for(;_t!==null;){var u=_t;if(u===s){_t=null;break}var m=u.sibling;if(m!==null){m.return=u.return,_t=m;break}_t=u.return}}function Bx(s){for(;_t!==null;){var u=_t;try{switch(u.tag){case 0:case 11:case 15:var m=u.return;try{kp(4,u)}catch(le){ti(u,m,le)}break;case 1:var _=u.stateNode;if(typeof _.componentDidMount=="function"){var T=u.return;try{_.componentDidMount()}catch(le){ti(u,T,le)}}var R=u.return;try{Zg(u)}catch(le){ti(u,R,le)}break;case 5:var U=u.return;try{Zg(u)}catch(le){ti(u,U,le)}}}catch(le){ti(u,u.return,le)}if(u===s){_t=null;break}var ne=u.sibling;if(ne!==null){ne.return=u.return,_t=ne;break}_t=u.return}}var $2=Math.ceil,Fp=L.ReactCurrentDispatcher,Kg=L.ReactCurrentOwner,As=L.ReactCurrentBatchConfig,hn=0,Vi=null,wi=null,sr=0,ds=0,Jc=Un(0),ki=0,Fh=null,_u=0,Np=0,$g=0,Nh=null,Qr=null,e0=0,Qc=1/0,Ma=null,Op=!1,t0=null,ml=null,zp=!1,gl=null,Up=0,Oh=0,n0=null,Bp=-1,Gp=0;function kr(){return(hn&6)!==0?Xe():Bp!==-1?Bp:Bp=Xe()}function vl(s){return(s.mode&1)===0?1:(hn&2)!==0&&sr!==0?sr&-sr:Hg.transition!==null?(Gp===0&&(Gp=lr()),Gp):(s=rn,s!==0||(s=window.event,s=s===void 0?16:Po(s.type)),s)}function lo(s,u,m,_){if(50<Oh)throw Oh=0,n0=null,Error(t(185));ts(s,m,_),((hn&2)===0||s!==Vi)&&(s===Vi&&((hn&2)===0&&(Np|=m),ki===4&&yl(s,sr)),Kr(s,_),m===1&&hn===0&&(u.mode&1)===0&&(Qc=Xe()+500,ru&&bs()))}function Kr(s,u){var m=s.callbackNode;wo(s,u);var _=Ns(s,s===Vi?sr:0);if(_===0)m!==null&&Ti(m),s.callbackNode=null,s.callbackPriority=0;else if(u=_&-_,s.callbackPriority!==u){if(m!=null&&Ti(m),u===1)s.tag===0?_p(Vx.bind(null,s)):su(Vx.bind(null,s)),Wg(function(){(hn&6)===0&&bs()}),m=null;else{switch(ys(_)){case 1:m=wn;break;case 4:m=ri;break;case 16:m=Ur;break;case 536870912:m=qi;break;default:m=Ur}m=Jx(m,Gx.bind(null,s))}s.callbackPriority=u,s.callbackNode=m}}function Gx(s,u){if(Bp=-1,Gp=0,(hn&6)!==0)throw Error(t(327));var m=s.callbackNode;if(Kc()&&s.callbackNode!==m)return null;var _=Ns(s,s===Vi?sr:0);if(_===0)return null;if((_&30)!==0||(_&s.expiredLanes)!==0||u)u=Vp(s,_);else{u=_;var T=hn;hn|=2;var R=Hx();(Vi!==s||sr!==u)&&(Ma=null,Qc=Xe()+500,wu(s,u));do try{n3();break}catch(ne){Wx(s,ne)}while(!0);ma(),Fp.current=R,hn=T,wi!==null?u=0:(Vi=null,sr=0,u=ki)}if(u!==0){if(u===2&&(T=Qi(s),T!==0&&(_=T,u=i0(s,T))),u===1)throw m=Fh,wu(s,0),yl(s,_),Kr(s,Xe()),m;if(u===6)yl(s,_);else{if(T=s.current.alternate,(_&30)===0&&!e3(T)&&(u=Vp(s,_),u===2&&(R=Qi(s),R!==0&&(_=R,u=i0(s,R))),u===1))throw m=Fh,wu(s,0),yl(s,_),Kr(s,Xe()),m;switch(s.finishedWork=T,s.finishedLanes=_,u){case 0:case 1:throw Error(t(345));case 2:Mu(s,Qr,Ma);break;case 3:if(yl(s,_),(_&130023424)===_&&(u=e0+500-Xe(),10<u)){if(Ns(s,0)!==0)break;if(T=s.suspendedLanes,(T&_)!==_){kr(),s.pingedLanes|=s.suspendedLanes&T;break}s.timeoutHandle=ch(Mu.bind(null,s,Qr,Ma),u);break}Mu(s,Qr,Ma);break;case 4:if(yl(s,_),(_&4194240)===_)break;for(u=s.eventTimes,T=-1;0<_;){var U=31-nn(_);R=1<<U,U=u[U],U>T&&(T=U),_&=~R}if(_=T,_=Xe()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*$2(_/1960))-_,10<_){s.timeoutHandle=ch(Mu.bind(null,s,Qr,Ma),_);break}Mu(s,Qr,Ma);break;case 5:Mu(s,Qr,Ma);break;default:throw Error(t(329))}}}return Kr(s,Xe()),s.callbackNode===m?Gx.bind(null,s):null}function i0(s,u){var m=Nh;return s.current.memoizedState.isDehydrated&&(wu(s,u).flags|=256),s=Vp(s,u),s!==2&&(u=Qr,Qr=m,u!==null&&r0(u)),s}function r0(s){Qr===null?Qr=s:Qr.push.apply(Qr,s)}function e3(s){for(var u=s;;){if(u.flags&16384){var m=u.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var _=0;_<m.length;_++){var T=m[_],R=T.getSnapshot;T=T.value;try{if(!Tr(R(),T))return!1}catch{return!1}}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function yl(s,u){for(u&=~$g,u&=~Np,s.suspendedLanes|=u,s.pingedLanes&=~u,s=s.expirationTimes;0<u;){var m=31-nn(u),_=1<<m;s[m]=-1,u&=~_}}function Vx(s){if((hn&6)!==0)throw Error(t(327));Kc();var u=Ns(s,0);if((u&1)===0)return Kr(s,Xe()),null;var m=Vp(s,u);if(s.tag!==0&&m===2){var _=Qi(s);_!==0&&(u=_,m=i0(s,_))}if(m===1)throw m=Fh,wu(s,0),yl(s,u),Kr(s,Xe()),m;if(m===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=u,Mu(s,Qr,Ma),Kr(s,Xe()),null}function s0(s,u){var m=hn;hn|=1;try{return s(u)}finally{hn=m,hn===0&&(Qc=Xe()+500,ru&&bs())}}function Su(s){gl!==null&&gl.tag===0&&(hn&6)===0&&Kc();var u=hn;hn|=1;var m=As.transition,_=rn;try{if(As.transition=null,rn=1,s)return s()}finally{rn=_,As.transition=m,hn=u,(hn&6)===0&&bs()}}function o0(){ds=Jc.current,bn(Jc)}function wu(s,u){s.finishedWork=null,s.finishedLanes=0;var m=s.timeoutHandle;if(m!==-1&&(s.timeoutHandle=-1,fh(m)),wi!==null)for(m=wi.return;m!==null;){var _=m;switch(Ks(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&nu();break;case 3:Uo(),bn(er),bn(Pi),Ts();break;case 5:fl(_);break;case 4:Uo();break;case 13:bn(An);break;case 19:bn(An);break;case 10:uu(_.type._context);break;case 22:case 23:o0()}m=m.return}if(Vi=s,wi=s=xl(s.current,null),sr=ds=u,ki=0,Fh=null,$g=Np=_u=0,Qr=Nh=null,eo!==null){for(u=0;u<eo.length;u++)if(m=eo[u],_=m.interleaved,_!==null){m.interleaved=null;var T=_.next,R=m.pending;if(R!==null){var U=R.next;R.next=T,_.next=U}m.pending=_}eo=null}return s}function Wx(s,u){do{var m=wi;try{if(ma(),xa.current=Yc,fs){for(var _=En.memoizedState;_!==null;){var T=_.queue;T!==null&&(T.pending=null),_=_.next}fs=!1}if(no=0,fn=Gn=En=null,Gi=!1,Bo=0,Kg.current=null,m===null||m.return===null){ki=1,Fh=u,wi=null;break}e:{var R=s,U=m.return,ne=m,le=u;if(u=sr,ne.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var Pe=le,nt=ne,it=nt.tag;if((nt.mode&1)===0&&(it===0||it===11||it===15)){var $e=nt.alternate;$e?(nt.updateQueue=$e.updateQueue,nt.memoizedState=$e.memoizedState,nt.lanes=$e.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var yt=xt(U);if(yt!==null){yt.flags&=-257,Ut(yt,U,ne,R,u),yt.mode&1&&ot(R,Pe,u),u=yt,le=Pe;var wt=u.updateQueue;if(wt===null){var Mt=new Set;Mt.add(le),u.updateQueue=Mt}else wt.add(le);break e}else{if((u&1)===0){ot(R,Pe,u),a0();break e}le=Error(t(426))}}else if(Cn&&ne.mode&1){var li=xt(U);if(li!==null){(li.flags&65536)===0&&(li.flags|=256),Ut(li,U,ne,R,u),ll(b(le,ne));break e}}R=le=b(le,ne),ki!==4&&(ki=2),Nh===null?Nh=[R]:Nh.push(R),R=U;do{switch(R.tag){case 3:R.flags|=65536,u&=-u,R.lanes|=u;var Se=pe(R,le,u);ga(R,Se);break e;case 1:ne=le;var de=R.type,Me=R.stateNode;if((R.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(ml===null||!ml.has(Me)))){R.flags|=65536,u&=-u,R.lanes|=u;var at=ze(R,ne,u);ga(R,at);break e}}R=R.return}while(R!==null)}Xx(m)}catch(Tt){u=Tt,wi===m&&m!==null&&(wi=m=m.return);continue}break}while(!0)}function Hx(){var s=Fp.current;return Fp.current=Yc,s===null?Yc:s}function a0(){(ki===0||ki===3||ki===2)&&(ki=4),Vi===null||(_u&268435455)===0&&(Np&268435455)===0||yl(Vi,sr)}function Vp(s,u){var m=hn;hn|=2;var _=Hx();(Vi!==s||sr!==u)&&(Ma=null,wu(s,u));do try{t3();break}catch(T){Wx(s,T)}while(!0);if(ma(),hn=m,Fp.current=_,wi!==null)throw Error(t(261));return Vi=null,sr=0,ki}function t3(){for(;wi!==null;)jx(wi)}function n3(){for(;wi!==null&&!Sr();)jx(wi)}function jx(s){var u=Zx(s.alternate,s,ds);s.memoizedProps=s.pendingProps,u===null?Xx(s):wi=u,Kg.current=null}function Xx(s){var u=s;do{var m=u.alternate;if(s=u.return,(u.flags&32768)===0){if(m=q2(m,u,ds),m!==null){wi=m;return}}else{if(m=Z2(m,u),m!==null){m.flags&=32767,wi=m;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ki=6,wi=null;return}}if(u=u.sibling,u!==null){wi=u;return}wi=u=s}while(u!==null);ki===0&&(ki=5)}function Mu(s,u,m){var _=rn,T=As.transition;try{As.transition=null,rn=1,i3(s,u,m,_)}finally{As.transition=T,rn=_}return null}function i3(s,u,m,_){do Kc();while(gl!==null);if((hn&6)!==0)throw Error(t(327));m=s.finishedWork;var T=s.finishedLanes;if(m===null)return null;if(s.finishedWork=null,s.finishedLanes=0,m===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var R=m.lanes|m.childLanes;if(lc(s,R),s===Vi&&(wi=Vi=null,sr=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||zp||(zp=!0,Jx(Ur,function(){return Kc(),null})),R=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||R){R=As.transition,As.transition=null;var U=rn;rn=1;var ne=hn;hn|=4,Kg.current=null,Q2(s,m),Nx(m,s),yi(lh),pi=!!sl,lh=sl=null,s.current=m,K2(m),Sn(),hn=ne,rn=U,As.transition=R}else s.current=m;if(zp&&(zp=!1,gl=s,Up=T),R=s.pendingLanes,R===0&&(ml=null),an(m.stateNode),Kr(s,Xe()),u!==null)for(_=s.onRecoverableError,m=0;m<u.length;m++)T=u[m],_(T.value,{componentStack:T.stack,digest:T.digest});if(Op)throw Op=!1,s=t0,t0=null,s;return(Up&1)!==0&&s.tag!==0&&Kc(),R=s.pendingLanes,(R&1)!==0?s===n0?Oh++:(Oh=0,n0=s):Oh=0,bs(),null}function Kc(){if(gl!==null){var s=ys(Up),u=As.transition,m=rn;try{if(As.transition=null,rn=16>s?16:s,gl===null)var _=!1;else{if(s=gl,gl=null,Up=0,(hn&6)!==0)throw Error(t(331));var T=hn;for(hn|=4,_t=s.current;_t!==null;){var R=_t,U=R.child;if((_t.flags&16)!==0){var ne=R.deletions;if(ne!==null){for(var le=0;le<ne.length;le++){var Pe=ne[le];for(_t=Pe;_t!==null;){var nt=_t;switch(nt.tag){case 0:case 11:case 15:kh(8,nt,R)}var it=nt.child;if(it!==null)it.return=nt,_t=it;else for(;_t!==null;){nt=_t;var $e=nt.sibling,yt=nt.return;if(Rx(nt),nt===Pe){_t=null;break}if($e!==null){$e.return=yt,_t=$e;break}_t=yt}}}var wt=R.alternate;if(wt!==null){var Mt=wt.child;if(Mt!==null){wt.child=null;do{var li=Mt.sibling;Mt.sibling=null,Mt=li}while(Mt!==null)}}_t=R}}if((R.subtreeFlags&2064)!==0&&U!==null)U.return=R,_t=U;else e:for(;_t!==null;){if(R=_t,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:kh(9,R,R.return)}var Se=R.sibling;if(Se!==null){Se.return=R.return,_t=Se;break e}_t=R.return}}var de=s.current;for(_t=de;_t!==null;){U=_t;var Me=U.child;if((U.subtreeFlags&2064)!==0&&Me!==null)Me.return=U,_t=Me;else e:for(U=de;_t!==null;){if(ne=_t,(ne.flags&2048)!==0)try{switch(ne.tag){case 0:case 11:case 15:kp(9,ne)}}catch(Tt){ti(ne,ne.return,Tt)}if(ne===U){_t=null;break e}var at=ne.sibling;if(at!==null){at.return=ne.return,_t=at;break e}_t=ne.return}}if(hn=T,bs(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(cn,s)}catch{}_=!0}return _}finally{rn=m,As.transition=u}}return!1}function Yx(s,u,m){u=b(m,u),u=pe(s,u,1),s=Dn(s,u,1),u=kr(),s!==null&&(ts(s,1,u),Kr(s,u))}function ti(s,u,m){if(s.tag===3)Yx(s,s,m);else for(;u!==null;){if(u.tag===3){Yx(u,s,m);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(ml===null||!ml.has(_))){s=b(m,s),s=ze(u,s,1),u=Dn(u,s,1),s=kr(),u!==null&&(ts(u,1,s),Kr(u,s));break}}u=u.return}}function r3(s,u,m){var _=s.pingCache;_!==null&&_.delete(u),u=kr(),s.pingedLanes|=s.suspendedLanes&m,Vi===s&&(sr&m)===m&&(ki===4||ki===3&&(sr&130023424)===sr&&500>Xe()-e0?wu(s,0):$g|=m),Kr(s,u)}function qx(s,u){u===0&&((s.mode&1)===0?u=1:(u=Hn,Hn<<=1,(Hn&130023424)===0&&(Hn=4194304)));var m=kr();s=us(s,u),s!==null&&(ts(s,u,m),Kr(s,m))}function s3(s){var u=s.memoizedState,m=0;u!==null&&(m=u.retryLane),qx(s,m)}function o3(s,u){var m=0;switch(s.tag){case 13:var _=s.stateNode,T=s.memoizedState;T!==null&&(m=T.retryLane);break;case 19:_=s.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(u),qx(s,m)}var Zx;Zx=function(s,u,m){if(s!==null)if(s.memoizedProps!==u.pendingProps||er.current)Qt=!0;else{if((s.lanes&m)===0&&(u.flags&128)===0)return Qt=!1,Y2(s,u,m);Qt=(s.flags&131072)!==0}else Qt=!1,Cn&&(u.flags&1048576)!==0&&gh(u,Oc,u.index);switch(u.lanes=0,u.tag){case 2:var _=u.type;Ip(s,u),s=u.pendingProps;var T=la(u,Pi.current);zo(u,m),T=pu(null,u,_,s,T,m);var R=bh();return u.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Ui(_)?(R=!0,ua(u)):R=!1,u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Zt(u),T.updater=qc,u.stateNode=T,T._reactInternals=u,y(u,_,s,m),u=jt(null,u,_,!0,R,m)):(u.tag=0,Cn&&R&&vh(u),gt(null,u,T,m),u=u.child),u;case 16:_=u.elementType;e:{switch(Ip(s,u),s=u.pendingProps,T=_._init,_=T(_._payload),u.type=_,T=u.tag=l3(_),s=Jr(_,s),T){case 0:u=pt(null,u,_,s,m);break e;case 1:u=Et(null,u,_,s,m);break e;case 11:u=Di(null,u,_,s,m);break e;case 14:u=Dr(null,u,_,Jr(_.type,s),m);break e}throw Error(t(306,_,""))}return u;case 0:return _=u.type,T=u.pendingProps,T=u.elementType===_?T:Jr(_,T),pt(s,u,_,T,m);case 1:return _=u.type,T=u.pendingProps,T=u.elementType===_?T:Jr(_,T),Et(s,u,_,T,m);case 3:e:{if(Bt(u),s===null)throw Error(t(387));_=u.pendingProps,R=u.memoizedState,T=R.element,Yn(s,u),Bn(u,_,null,m);var U=u.memoizedState;if(_=U.element,R.isDehydrated)if(R={element:_,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){T=b(Error(t(423)),u),u=ln(s,u,_,m,T);break e}else if(_!==T){T=b(Error(t(424)),u),u=ln(s,u,_,m,T);break e}else for(nr=Ys(u.stateNode.containerInfo.firstChild),Li=u,Cn=!0,Zr=null,m=lu(u,null,_,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Oo(),_===T){u=wa(s,u,m);break e}gt(s,u,_,m)}u=u.child}return u;case 5:return ya(u),s===null&&Uc(u),_=u.type,T=u.pendingProps,R=s!==null?s.memoizedProps:null,U=T.children,uh(_,T)?U=null:R!==null&&uh(_,R)&&(u.flags|=32),De(s,u),gt(s,u,U,m),u.child;case 6:return s===null&&Uc(u),null;case 13:return so(s,u,m);case 4:return hu(u,u.stateNode.containerInfo),_=u.pendingProps,s===null?u.child=ha(u,null,_,m):gt(s,u,_,m),u.child;case 11:return _=u.type,T=u.pendingProps,T=u.elementType===_?T:Jr(_,T),Di(s,u,_,T,m);case 7:return gt(s,u,u.pendingProps,m),u.child;case 8:return gt(s,u,u.pendingProps.children,m),u.child;case 12:return gt(s,u,u.pendingProps.children,m),u.child;case 10:e:{if(_=u.type._context,T=u.pendingProps,R=u.memoizedProps,U=T.value,_n(da,_._currentValue),_._currentValue=U,R!==null)if(Tr(R.value,U)){if(R.children===T.children&&!er.current){u=wa(s,u,m);break e}}else for(R=u.child,R!==null&&(R.return=u);R!==null;){var ne=R.dependencies;if(ne!==null){U=R.child;for(var le=ne.firstContext;le!==null;){if(le.context===_){if(R.tag===1){le=yn(-1,m&-m),le.tag=2;var Pe=R.updateQueue;if(Pe!==null){Pe=Pe.shared;var nt=Pe.pending;nt===null?le.next=le:(le.next=nt.next,nt.next=le),Pe.pending=le}}R.lanes|=m,le=R.alternate,le!==null&&(le.lanes|=m),cu(R.return,m,u),ne.lanes|=m;break}le=le.next}}else if(R.tag===10)U=R.type===u.type?null:R.child;else if(R.tag===18){if(U=R.return,U===null)throw Error(t(341));U.lanes|=m,ne=U.alternate,ne!==null&&(ne.lanes|=m),cu(U,m,u),U=R.sibling}else U=R.child;if(U!==null)U.return=R;else for(U=R;U!==null;){if(U===u){U=null;break}if(R=U.sibling,R!==null){R.return=U.return,U=R;break}U=U.return}R=U}gt(s,u,T.children,m),u=u.child}return u;case 9:return T=u.type,_=u.pendingProps.children,zo(u,m),T=Pr(T),_=_(T),u.flags|=1,gt(s,u,_,m),u.child;case 14:return _=u.type,T=Jr(_,u.pendingProps),T=Jr(_.type,T),Dr(s,u,_,T,m);case 15:return Ee(s,u,u.type,u.pendingProps,m);case 17:return _=u.type,T=u.pendingProps,T=u.elementType===_?T:Jr(_,T),Ip(s,u),u.tag=1,Ui(_)?(s=!0,ua(u)):s=!1,zo(u,m),c(u,_,T),y(u,_,T,m),jt(null,u,_,!0,s,m);case 19:return Tx(s,u,m);case 22:return ve(s,u,m)}throw Error(t(156,u.tag))};function Jx(s,u){return ii(s,u)}function a3(s,u,m,_){this.tag=s,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(s,u,m,_){return new a3(s,u,m,_)}function l0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function l3(s){if(typeof s=="function")return l0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===X)return 11;if(s===oe)return 14}return 2}function xl(s,u){var m=s.alternate;return m===null?(m=Ps(s.tag,u,s.key,s.mode),m.elementType=s.elementType,m.type=s.type,m.stateNode=s.stateNode,m.alternate=s,s.alternate=m):(m.pendingProps=u,m.type=s.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=s.flags&14680064,m.childLanes=s.childLanes,m.lanes=s.lanes,m.child=s.child,m.memoizedProps=s.memoizedProps,m.memoizedState=s.memoizedState,m.updateQueue=s.updateQueue,u=s.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=s.sibling,m.index=s.index,m.ref=s.ref,m}function Wp(s,u,m,_,T,R){var U=2;if(_=s,typeof s=="function")l0(s)&&(U=1);else if(typeof s=="string")U=5;else e:switch(s){case B:return bu(m.children,T,R,u);case I:U=8,T|=8;break;case z:return s=Ps(12,m,u,T|2),s.elementType=z,s.lanes=R,s;case K:return s=Ps(13,m,u,T),s.elementType=K,s.lanes=R,s;case q:return s=Ps(19,m,u,T),s.elementType=q,s.lanes=R,s;case ye:return Hp(m,T,R,u);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:U=10;break e;case te:U=9;break e;case X:U=11;break e;case oe:U=14;break e;case ce:U=16,_=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return u=Ps(U,m,u,T),u.elementType=s,u.type=_,u.lanes=R,u}function bu(s,u,m,_){return s=Ps(7,s,_,u),s.lanes=m,s}function Hp(s,u,m,_){return s=Ps(22,s,_,u),s.elementType=ye,s.lanes=m,s.stateNode={isHidden:!1},s}function u0(s,u,m){return s=Ps(6,s,null,u),s.lanes=m,s}function c0(s,u,m){return u=Ps(4,s.children!==null?s.children:[],s.key,u),u.lanes=m,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}function u3(s,u,m,_,T){this.tag=u,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mo(0),this.expirationTimes=Mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.identifierPrefix=_,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function f0(s,u,m,_,T,R,U,ne,le){return s=new u3(s,u,m,ne,le),u===1?(u=1,R===!0&&(u|=8)):u=0,R=Ps(3,null,null,u),s.current=R,R.stateNode=s,R.memoizedState={element:_,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zt(R),s}function c3(s,u,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:_==null?null:""+_,children:s,containerInfo:u,implementation:m}}function Qx(s){if(!s)return Zs;s=s._reactInternals;e:{if(At(s)!==s||s.tag!==1)throw Error(t(170));var u=s;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ui(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(s.tag===1){var m=s.type;if(Ui(m))return iu(s,m,u)}return u}function Kx(s,u,m,_,T,R,U,ne,le){return s=f0(m,_,!0,s,T,R,U,ne,le),s.context=Qx(null),m=s.current,_=kr(),T=vl(m),R=yn(_,T),R.callback=u??null,Dn(m,R,T),s.current.lanes=T,ts(s,T,_),Kr(s,_),s}function jp(s,u,m,_){var T=u.current,R=kr(),U=vl(T);return m=Qx(m),u.context===null?u.context=m:u.pendingContext=m,u=yn(R,U),u.payload={element:s},_=_===void 0?null:_,_!==null&&(u.callback=_),s=Dn(T,u,U),s!==null&&(lo(s,T,U,R),Bi(s,T,U)),U}function Xp(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function $x(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var m=s.retryLane;s.retryLane=m!==0&&m<u?m:u}}function h0(s,u){$x(s,u),(s=s.alternate)&&$x(s,u)}function f3(){return null}var e1=typeof reportError=="function"?reportError:function(s){console.error(s)};function d0(s){this._internalRoot=s}Yp.prototype.render=d0.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(t(409));jp(s,u,null,null)},Yp.prototype.unmount=d0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;Su(function(){jp(null,s,null,null)}),u[Ar]=null}};function Yp(s){this._internalRoot=s}Yp.prototype.unstable_scheduleHydration=function(s){if(s){var u=xs();s={blockedOn:null,target:s,priority:u};for(var m=0;m<Wr.length&&u!==0&&u<Wr[m].priority;m++);Wr.splice(m,0,s),m===0&&Oi(s)}};function p0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function qp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function t1(){}function h3(s,u,m,_,T){if(T){if(typeof _=="function"){var R=_;_=function(){var Pe=Xp(U);R.call(Pe)}}var U=Kx(u,_,s,0,null,!1,!1,"",t1);return s._reactRootContainer=U,s[Ar]=U.current,il(s.nodeType===8?s.parentNode:s),Su(),U}for(;T=s.lastChild;)s.removeChild(T);if(typeof _=="function"){var ne=_;_=function(){var Pe=Xp(le);ne.call(Pe)}}var le=f0(s,0,!1,null,null,!1,!1,"",t1);return s._reactRootContainer=le,s[Ar]=le.current,il(s.nodeType===8?s.parentNode:s),Su(function(){jp(u,le,m,_)}),le}function Zp(s,u,m,_,T){var R=m._reactRootContainer;if(R){var U=R;if(typeof T=="function"){var ne=T;T=function(){var le=Xp(U);ne.call(le)}}jp(u,U,s,T)}else U=h3(m,u,s,T,_);return Xp(U)}bo=function(s){switch(s.tag){case 3:var u=s.stateNode;if(u.current.memoizedState.isDehydrated){var m=Ji(u.pendingLanes);m!==0&&(ns(u,m|1),Kr(u,Xe()),(hn&6)===0&&(Qc=Xe()+500,bs()))}break;case 13:Su(function(){var _=us(s,1);if(_!==null){var T=kr();lo(_,s,1,T)}}),h0(s,1)}},ja=function(s){if(s.tag===13){var u=us(s,134217728);if(u!==null){var m=kr();lo(u,s,134217728,m)}h0(s,134217728)}},Xa=function(s){if(s.tag===13){var u=vl(s),m=us(s,u);if(m!==null){var _=kr();lo(m,s,u,_)}h0(s,u)}},xs=function(){return rn},Jo=function(s,u){var m=rn;try{return rn=s,u()}finally{rn=m}},xe=function(s,u,m){switch(u){case"input":if(ut(s,m),u=m.name,m.type==="radio"&&u!=null){for(m=s;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<m.length;u++){var _=m[u];if(_!==s&&_.form===s.form){var T=kc(_);if(!T)throw Error(t(90));ae(_),ut(_,T)}}}break;case"textarea":fe(s,m);break;case"select":u=m.value,u!=null&&Re(s,!!m.multiple,u,!1)}},Vt=s0,Gt=Su;var d3={usingClientEntryPoint:!1,Events:[qs,Xn,kc,Yt,kt,s0]},zh={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p3={bundleType:zh.bundleType,version:zh.version,rendererPackageName:zh.rendererPackageName,rendererConfig:zh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=qt(s),s===null?null:s.stateNode},findFiberByHostInstance:zh.findFiberByHostInstance||f3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{cn=Jp.inject(p3),Dt=Jp}catch{}}return $r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d3,$r.createPortal=function(s,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p0(u))throw Error(t(200));return c3(s,u,null,m)},$r.createRoot=function(s,u){if(!p0(s))throw Error(t(299));var m=!1,_="",T=e1;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),u=f0(s,1,!1,null,null,m,!1,_,T),s[Ar]=u.current,il(s.nodeType===8?s.parentNode:s),new d0(u)},$r.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=qt(u),s=s===null?null:s.stateNode,s},$r.flushSync=function(s){return Su(s)},$r.hydrate=function(s,u,m){if(!qp(u))throw Error(t(200));return Zp(null,s,u,!0,m)},$r.hydrateRoot=function(s,u,m){if(!p0(s))throw Error(t(405));var _=m!=null&&m.hydratedSources||null,T=!1,R="",U=e1;if(m!=null&&(m.unstable_strictMode===!0&&(T=!0),m.identifierPrefix!==void 0&&(R=m.identifierPrefix),m.onRecoverableError!==void 0&&(U=m.onRecoverableError)),u=Kx(u,null,s,1,m??null,T,!1,R,U),s[Ar]=u.current,il(s),_)for(s=0;s<_.length;s++)m=_[s],T=m._getVersion,T=T(m._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[m,T]:u.mutableSourceEagerHydrationData.push(m,T);return new Yp(u)},$r.render=function(s,u,m){if(!qp(u))throw Error(t(200));return Zp(null,s,u,!1,m)},$r.unmountComponentAtNode=function(s){if(!qp(s))throw Error(t(40));return s._reactRootContainer?(Su(function(){Zp(null,null,s,!1,function(){s._reactRootContainer=null,s[Ar]=null})}),!0):!1},$r.unstable_batchedUpdates=s0,$r.unstable_renderSubtreeIntoContainer=function(s,u,m,_){if(!qp(m))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Zp(s,u,m,!1,_)},$r.version="18.3.1-next-f1338f8080-20240426",$r}var u1;function M3(){if(u1)return v0.exports;u1=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),v0.exports=w3(),v0.exports}var c1;function b3(){if(c1)return Qp;c1=1;var o=M3();return Qp.createRoot=o.createRoot,Qp.hydrateRoot=o.hydrateRoot,Qp}var E3=b3();function Df(){return Df=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Df.apply(null,arguments)}var We=dg();/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pg="150",ku={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Fu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zS=0,Sv=1,US=2,T3=3,BS=0,mg=1,od=2,Gu=3,Xo=0,Or=1,go=2,C3=2,Na=0,Xu=1,wv=2,Mv=3,bv=4,GS=5,zu=100,VS=101,WS=102,Ev=103,Tv=104,HS=200,jS=201,XS=202,YS=203,wy=204,My=205,qS=206,ZS=207,JS=208,QS=209,KS=210,$S=0,ew=1,tw=2,tg=3,nw=4,iw=5,rw=6,sw=7,Ud=0,ow=1,aw=2,yo=0,lw=1,uw=2,cw=3,by=4,fw=5,gg=300,Nl=301,Ol=302,gd=303,vd=304,Bf=306,yd=1e3,xr=1001,xd=1002,ci=1003,ng=1004,A3=1004,ad=1005,P3=1005,qn=1006,Ey=1007,L3=1007,zl=1008,R3=1008,Oa=1009,hw=1010,dw=1011,Ty=1012,pw=1013,Al=1014,ka=1015,kf=1016,mw=1017,gw=1018,Yu=1020,vw=1021,es=1023,yw=1024,xw=1025,Dl=1026,Ku=1027,_w=1028,Sw=1029,ww=1030,Mw=1031,bw=1033,Hm=33776,jm=33777,Xm=33778,Ym=33779,Cv=35840,Av=35841,Pv=35842,Lv=35843,Ew=36196,Rv=37492,Iv=37496,Dv=37808,kv=37809,Fv=37810,Nv=37811,Ov=37812,zv=37813,Uv=37814,Bv=37815,Gv=37816,Vv=37817,Wv=37818,Hv=37819,jv=37820,Xv=37821,qm=36492,Tw=36283,Yv=36284,qv=36285,Zv=36286,Cw=2200,Aw=2201,Pw=2202,_d=2300,Sd=2301,Zm=2302,Vu=2400,Wu=2401,wd=2402,vg=2500,Cy=2501,I3=0,D3=1,k3=2,Ul=3e3,kn=3001,Lw=3200,Ay=3201,Gl=0,Rw=1,F3="",ho="srgb",Ff="srgb-linear",Py="display-p3",N3=0,Jm=7680,O3=7681,z3=7682,U3=7683,B3=34055,G3=34056,V3=5386,W3=512,H3=513,j3=514,X3=515,Y3=516,q3=517,Z3=518,Iw=519,Md=35044,J3=35048,Q3=35040,K3=35045,$3=35049,eb=35041,tb=35046,nb=35050,ib=35042,rb="100",Jv="300 es",ig=1035;let Ba=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let r=0,a=i.length;r<a;r++)i[r].call(this,e);e.target=null}}};const gr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let f1=1234567;const qu=Math.PI/180,bd=180/Math.PI;function gs(){const o=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(gr[o&255]+gr[o>>8&255]+gr[o>>16&255]+gr[o>>24&255]+"-"+gr[e&255]+gr[e>>8&255]+"-"+gr[e>>16&15|64]+gr[e>>24&255]+"-"+gr[t&63|128]+gr[t>>8&255]+"-"+gr[t>>16&255]+gr[t>>24&255]+gr[n&255]+gr[n>>8&255]+gr[n>>16&255]+gr[n>>24&255]).toLowerCase()}function fi(o,e,t){return Math.max(e,Math.min(t,o))}function Ly(o,e){return(o%e+e)%e}function sb(o,e,t,n,i){return n+(o-e)*(i-n)/(t-e)}function ob(o,e,t){return o!==e?(t-o)/(e-o):0}function ld(o,e,t){return(1-t)*o+t*e}function ab(o,e,t,n){return ld(o,e,1-Math.exp(-t*n))}function lb(o,e=1){return e-Math.abs(Ly(o,e*2)-e)}function ub(o,e,t){return o<=e?0:o>=t?1:(o=(o-e)/(t-e),o*o*(3-2*o))}function cb(o,e,t){return o<=e?0:o>=t?1:(o=(o-e)/(t-e),o*o*o*(o*(o*6-15)+10))}function fb(o,e){return o+Math.floor(Math.random()*(e-o+1))}function hb(o,e){return o+Math.random()*(e-o)}function db(o){return o*(.5-Math.random())}function pb(o){o!==void 0&&(f1=o);let e=f1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function mb(o){return o*qu}function gb(o){return o*bd}function Qv(o){return(o&o-1)===0&&o!==0}function Dw(o){return Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function kw(o){return Math.pow(2,Math.floor(Math.log(o)/Math.LN2))}function vb(o,e,t,n,i){const r=Math.cos,a=Math.sin,l=r(t/2),f=a(t/2),d=r((e+n)/2),p=a((e+n)/2),g=r((e-n)/2),v=a((e-n)/2),x=r((n-e)/2),M=a((n-e)/2);switch(i){case"XYX":o.set(l*p,f*g,f*v,l*d);break;case"YZY":o.set(f*v,l*p,f*g,l*d);break;case"ZXZ":o.set(f*g,f*v,l*p,l*d);break;case"XZX":o.set(l*p,f*M,f*x,l*d);break;case"YXY":o.set(f*x,l*p,f*M,l*d);break;case"ZYZ":o.set(f*M,f*x,l*p,l*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Fa(o,e){switch(e.constructor){case Float32Array:return o;case Uint16Array:return o/65535;case Uint8Array:return o/255;case Int16Array:return Math.max(o/32767,-1);case Int8Array:return Math.max(o/127,-1);default:throw new Error("Invalid component type.")}}function Pn(o,e){switch(e.constructor){case Float32Array:return o;case Uint16Array:return Math.round(o*65535);case Uint8Array:return Math.round(o*255);case Int16Array:return Math.round(o*32767);case Int8Array:return Math.round(o*127);default:throw new Error("Invalid component type.")}}const yb={DEG2RAD:qu,RAD2DEG:bd,generateUUID:gs,clamp:fi,euclideanModulo:Ly,mapLinear:sb,inverseLerp:ob,lerp:ld,damp:ab,pingpong:lb,smoothstep:ub,smootherstep:cb,randInt:fb,randFloat:hb,randFloatSpread:db,seededRandom:pb,degToRad:mb,radToDeg:gb,isPowerOfTwo:Qv,ceilPowerOfTwo:Dw,floorPowerOfTwo:kw,setQuaternionFromProperEuler:vb,normalize:Pn,denormalize:Fa};class Ve{constructor(e=0,t=0){Ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ji{constructor(){ji.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,r,a,l,f,d){const p=this.elements;return p[0]=e,p[1]=i,p[2]=l,p[3]=t,p[4]=r,p[5]=f,p[6]=n,p[7]=a,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],l=n[3],f=n[6],d=n[1],p=n[4],g=n[7],v=n[2],x=n[5],M=n[8],w=i[0],S=i[3],C=i[6],E=i[1],A=i[4],L=i[7],D=i[2],F=i[5],B=i[8];return r[0]=a*w+l*E+f*D,r[3]=a*S+l*A+f*F,r[6]=a*C+l*L+f*B,r[1]=d*w+p*E+g*D,r[4]=d*S+p*A+g*F,r[7]=d*C+p*L+g*B,r[2]=v*w+x*E+M*D,r[5]=v*S+x*A+M*F,r[8]=v*C+x*L+M*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],l=e[5],f=e[6],d=e[7],p=e[8];return t*a*p-t*l*d-n*r*p+n*l*f+i*r*d-i*a*f}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],l=e[5],f=e[6],d=e[7],p=e[8],g=p*a-l*d,v=l*f-p*r,x=d*r-a*f,M=t*g+n*v+i*x;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/M;return e[0]=g*w,e[1]=(i*d-p*n)*w,e[2]=(l*n-i*a)*w,e[3]=v*w,e[4]=(p*t-i*f)*w,e[5]=(i*r-l*t)*w,e[6]=x*w,e[7]=(n*f-d*t)*w,e[8]=(a*t-n*r)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,l){const f=Math.cos(r),d=Math.sin(r);return this.set(n*f,n*d,-n*(f*a+d*l)+a+e,-i*d,i*f,-i*(-d*a+f*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(_0.makeScale(e,t)),this}rotate(e){return this.premultiply(_0.makeRotation(-e)),this}translate(e,t){return this.premultiply(_0.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const _0=new ji;function Fw(o){for(let e=o.length-1;e>=0;--e)if(o[e]>=65535)return!0;return!1}const xb={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Mf(o,e){return new xb[o](e)}function Ed(o){return document.createElementNS("http://www.w3.org/1999/xhtml",o)}class _r{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,a,l){let f=n[i+0],d=n[i+1],p=n[i+2],g=n[i+3];const v=r[a+0],x=r[a+1],M=r[a+2],w=r[a+3];if(l===0){e[t+0]=f,e[t+1]=d,e[t+2]=p,e[t+3]=g;return}if(l===1){e[t+0]=v,e[t+1]=x,e[t+2]=M,e[t+3]=w;return}if(g!==w||f!==v||d!==x||p!==M){let S=1-l;const C=f*v+d*x+p*M+g*w,E=C>=0?1:-1,A=1-C*C;if(A>Number.EPSILON){const D=Math.sqrt(A),F=Math.atan2(D,C*E);S=Math.sin(S*F)/D,l=Math.sin(l*F)/D}const L=l*E;if(f=f*S+v*L,d=d*S+x*L,p=p*S+M*L,g=g*S+w*L,S===1-l){const D=1/Math.sqrt(f*f+d*d+p*p+g*g);f*=D,d*=D,p*=D,g*=D}}e[t]=f,e[t+1]=d,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,i,r,a){const l=n[i],f=n[i+1],d=n[i+2],p=n[i+3],g=r[a],v=r[a+1],x=r[a+2],M=r[a+3];return e[t]=l*M+p*g+f*x-d*v,e[t+1]=f*M+p*v+d*g-l*x,e[t+2]=d*M+p*x+l*v-f*g,e[t+3]=p*M-l*g-f*v-d*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,r=e._z,a=e._order,l=Math.cos,f=Math.sin,d=l(n/2),p=l(i/2),g=l(r/2),v=f(n/2),x=f(i/2),M=f(r/2);switch(a){case"XYZ":this._x=v*p*g+d*x*M,this._y=d*x*g-v*p*M,this._z=d*p*M+v*x*g,this._w=d*p*g-v*x*M;break;case"YXZ":this._x=v*p*g+d*x*M,this._y=d*x*g-v*p*M,this._z=d*p*M-v*x*g,this._w=d*p*g+v*x*M;break;case"ZXY":this._x=v*p*g-d*x*M,this._y=d*x*g+v*p*M,this._z=d*p*M+v*x*g,this._w=d*p*g-v*x*M;break;case"ZYX":this._x=v*p*g-d*x*M,this._y=d*x*g+v*p*M,this._z=d*p*M-v*x*g,this._w=d*p*g+v*x*M;break;case"YZX":this._x=v*p*g+d*x*M,this._y=d*x*g+v*p*M,this._z=d*p*M-v*x*g,this._w=d*p*g-v*x*M;break;case"XZY":this._x=v*p*g-d*x*M,this._y=d*x*g-v*p*M,this._z=d*p*M+v*x*g,this._w=d*p*g+v*x*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],l=t[5],f=t[9],d=t[2],p=t[6],g=t[10],v=n+l+g;if(v>0){const x=.5/Math.sqrt(v+1);this._w=.25/x,this._x=(p-f)*x,this._y=(r-d)*x,this._z=(a-i)*x}else if(n>l&&n>g){const x=2*Math.sqrt(1+n-l-g);this._w=(p-f)/x,this._x=.25*x,this._y=(i+a)/x,this._z=(r+d)/x}else if(l>g){const x=2*Math.sqrt(1+l-n-g);this._w=(r-d)/x,this._x=(i+a)/x,this._y=.25*x,this._z=(f+p)/x}else{const x=2*Math.sqrt(1+g-n-l);this._w=(a-i)/x,this._x=(r+d)/x,this._y=(f+p)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,l=t._x,f=t._y,d=t._z,p=t._w;return this._x=n*p+a*l+i*d-r*f,this._y=i*p+a*f+r*l-n*d,this._z=r*p+a*d+n*f-i*l,this._w=a*p-n*l-i*f-r*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let l=a*e._w+n*e._x+i*e._y+r*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const f=1-l*l;if(f<=Number.EPSILON){const x=1-t;return this._w=x*a+t*this._w,this._x=x*n+t*this._x,this._y=x*i+t*this._y,this._z=x*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(f),p=Math.atan2(d,l),g=Math.sin((1-t)*p)/d,v=Math.sin(t*p)/d;return this._w=a*g+this._w*v,this._x=n*g+this._x*v,this._y=i*g+this._y*v,this._z=r*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,t=0,n=0){J.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(h1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(h1.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,l=e.z,f=e.w,d=f*t+a*i-l*n,p=f*n+l*t-r*i,g=f*i+r*n-a*t,v=-r*t-a*n-l*i;return this.x=d*f+v*-r+p*-l-g*-a,this.y=p*f+v*-a+g*-r-d*-l,this.z=g*f+v*-l+d*-a-p*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,l=t.y,f=t.z;return this.x=i*f-r*l,this.y=r*a-n*f,this.z=n*l-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return S0.copy(this).projectOnVector(e),this.sub(S0)}reflect(e){return this.sub(S0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(fi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const S0=new J,h1=new _r;function Pf(o){return o<.04045?o*.0773993808:Math.pow(o*.9478672986+.0521327014,2.4)}function w0(o){return o<.0031308?o*12.92:1.055*Math.pow(o,.41666)-.055}const _b=new ji().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Sb=new ji().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Pl=new J;function wb(o){return o.convertSRGBToLinear(),Pl.set(o.r,o.g,o.b).applyMatrix3(Sb),o.setRGB(Pl.x,Pl.y,Pl.z)}function Mb(o){return Pl.set(o.r,o.g,o.b).applyMatrix3(_b),o.setRGB(Pl.x,Pl.y,Pl.z).convertLinearToSRGB()}const bb={[Ff]:o=>o,[ho]:o=>o.convertSRGBToLinear(),[Py]:wb},Eb={[Ff]:o=>o,[ho]:o=>o.convertLinearToSRGB(),[Py]:Mb},yr={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(o){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!o},get workingColorSpace(){return Ff},set workingColorSpace(o){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(o,e,t){if(this.enabled===!1||e===t||!e||!t)return o;const n=bb[e],i=Eb[t];if(n===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(n(o))},fromWorkingColorSpace:function(o,e){return this.convert(o,this.workingColorSpace,e)},toWorkingColorSpace:function(o,e){return this.convert(o,e,this.workingColorSpace)}};let $c;class Ry{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{$c===void 0&&($c=Ed("canvas")),$c.width=e.width,$c.height=e.height;const n=$c.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=$c}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ed("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let a=0;a<r.length;a++)r[a]=Pf(r[a]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Pf(t[n]/255)*255):t[n]=Pf(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Hu{constructor(e=null){this.isSource=!0,this.uuid=gs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let r;if(Array.isArray(i)){r=[];for(let a=0,l=i.length;a<l;a++)i[a].isDataTexture?r.push(M0(i[a].image)):r.push(M0(i[a]))}else r=M0(i);n.url=r}return t||(e.images[this.uuid]=n),n}}function M0(o){return typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&o instanceof ImageBitmap?Ry.getDataURL(o):o.data?{data:Array.from(o.data),width:o.width,height:o.height,type:o.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Tb=0;class Jn extends Ba{constructor(e=Jn.DEFAULT_IMAGE,t=Jn.DEFAULT_MAPPING,n=xr,i=xr,r=qn,a=zl,l=es,f=Oa,d=Jn.DEFAULT_ANISOTROPY,p=Ul){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Tb++}),this.uuid=gs(),this.name="",this.source=new Hu(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=f,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ji,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==gg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case yd:e.x=e.x-Math.floor(e.x);break;case xr:e.x=e.x<0?0:1;break;case xd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case yd:e.y=e.y-Math.floor(e.y);break;case xr:e.y=e.y<0?0:1;break;case xd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Jn.DEFAULT_IMAGE=null;Jn.DEFAULT_MAPPING=gg;Jn.DEFAULT_ANISOTROPY=1;class gn{constructor(e=0,t=0,n=0,i=1){gn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const f=e.elements,d=f[0],p=f[4],g=f[8],v=f[1],x=f[5],M=f[9],w=f[2],S=f[6],C=f[10];if(Math.abs(p-v)<.01&&Math.abs(g-w)<.01&&Math.abs(M-S)<.01){if(Math.abs(p+v)<.1&&Math.abs(g+w)<.1&&Math.abs(M+S)<.1&&Math.abs(d+x+C-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(d+1)/2,L=(x+1)/2,D=(C+1)/2,F=(p+v)/4,B=(g+w)/4,I=(M+S)/4;return A>L&&A>D?A<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(A),i=F/n,r=B/n):L>D?L<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(L),n=F/i,r=I/i):D<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(D),n=B/r,i=I/r),this.set(n,i,r,t),this}let E=Math.sqrt((S-M)*(S-M)+(g-w)*(g-w)+(v-p)*(v-p));return Math.abs(E)<.001&&(E=1),this.x=(S-M)/E,this.y=(g-w)/E,this.z=(v-p)/E,this.w=Math.acos((d+x+C-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class xo extends Ba{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new gn(0,0,e,t),this.scissorTest=!1,this.viewport=new gn(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new Jn(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:qn,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Hu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class yg extends Jn{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ci,this.minFilter=ci,this.wrapR=xr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Cb extends xo{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new yg(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Iy extends Jn{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ci,this.minFilter=ci,this.wrapR=xr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ab extends xo{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Iy(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Pb extends xo{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=r.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Vl{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,l=-1/0;for(let f=0,d=e.length;f<d;f+=3){const p=e[f],g=e[f+1],v=e[f+2];p<t&&(t=p),g<n&&(n=g),v<i&&(i=v),p>r&&(r=p),g>a&&(a=g),v>l&&(l=v)}return this.min.set(t,n,i),this.max.set(r,a,l),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,l=-1/0;for(let f=0,d=e.count;f<d;f++){const p=e.getX(f),g=e.getY(f),v=e.getZ(f);p<t&&(t=p),g<n&&(n=g),v<i&&(i=v),p>r&&(r=p),g>a&&(a=g),v>l&&(l=v)}return this.min.set(t,n,i),this.max.set(r,a,l),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Eu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0)if(t&&n.attributes!=null&&n.attributes.position!==void 0){const r=n.attributes.position;for(let a=0,l=r.count;a<l;a++)Eu.fromBufferAttribute(r,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Eu)}else n.boundingBox===null&&n.computeBoundingBox(),b0.copy(n.boundingBox),b0.applyMatrix4(e.matrixWorld),this.union(b0);const i=e.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Eu),Eu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Bh),Kp.subVectors(this.max,Bh),ef.subVectors(e.a,Bh),tf.subVectors(e.b,Bh),nf.subVectors(e.c,Bh),Sl.subVectors(tf,ef),wl.subVectors(nf,tf),Tu.subVectors(ef,nf);let t=[0,-Sl.z,Sl.y,0,-wl.z,wl.y,0,-Tu.z,Tu.y,Sl.z,0,-Sl.x,wl.z,0,-wl.x,Tu.z,0,-Tu.x,-Sl.y,Sl.x,0,-wl.y,wl.x,0,-Tu.y,Tu.x,0];return!E0(t,ef,tf,nf,Kp)||(t=[1,0,0,0,1,0,0,0,1],!E0(t,ef,tf,nf,Kp))?!1:($p.crossVectors(Sl,wl),t=[$p.x,$p.y,$p.z],E0(t,ef,tf,nf,Kp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Eu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Eu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ba[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ba[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ba[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ba[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ba[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ba[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ba[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ba[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ba),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ba=[new J,new J,new J,new J,new J,new J,new J,new J],Eu=new J,b0=new Vl,ef=new J,tf=new J,nf=new J,Sl=new J,wl=new J,Tu=new J,Bh=new J,Kp=new J,$p=new J,Cu=new J;function E0(o,e,t,n,i){for(let r=0,a=o.length-3;r<=a;r+=3){Cu.fromArray(o,r);const l=i.x*Math.abs(Cu.x)+i.y*Math.abs(Cu.y)+i.z*Math.abs(Cu.z),f=e.dot(Cu),d=t.dot(Cu),p=n.dot(Cu);if(Math.max(-Math.max(f,d,p),Math.min(f,d,p))>l)return!1}return!0}const Lb=new Vl,Gh=new J,T0=new J;class Wl{constructor(e=new J,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Lb.setFromPoints(e).getCenter(n);let i=0;for(let r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Gh.subVectors(e,this.center);const t=Gh.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Gh,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(T0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Gh.copy(e.center).add(T0)),this.expandByPoint(Gh.copy(e.center).sub(T0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ea=new J,C0=new J,em=new J,Ml=new J,A0=new J,tm=new J,P0=new J;class Gf{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ea)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ea.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ea.copy(this.origin).addScaledVector(this.direction,t),Ea.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){C0.copy(e).add(t).multiplyScalar(.5),em.copy(t).sub(e).normalize(),Ml.copy(this.origin).sub(C0);const r=e.distanceTo(t)*.5,a=-this.direction.dot(em),l=Ml.dot(this.direction),f=-Ml.dot(em),d=Ml.lengthSq(),p=Math.abs(1-a*a);let g,v,x,M;if(p>0)if(g=a*f-l,v=a*l-f,M=r*p,g>=0)if(v>=-M)if(v<=M){const w=1/p;g*=w,v*=w,x=g*(g+a*v+2*l)+v*(a*g+v+2*f)+d}else v=r,g=Math.max(0,-(a*v+l)),x=-g*g+v*(v+2*f)+d;else v=-r,g=Math.max(0,-(a*v+l)),x=-g*g+v*(v+2*f)+d;else v<=-M?(g=Math.max(0,-(-a*r+l)),v=g>0?-r:Math.min(Math.max(-r,-f),r),x=-g*g+v*(v+2*f)+d):v<=M?(g=0,v=Math.min(Math.max(-r,-f),r),x=v*(v+2*f)+d):(g=Math.max(0,-(a*r+l)),v=g>0?r:Math.min(Math.max(-r,-f),r),x=-g*g+v*(v+2*f)+d);else v=a>0?-r:r,g=Math.max(0,-(a*v+l)),x=-g*g+v*(v+2*f)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,g),i&&i.copy(C0).addScaledVector(em,v),x}intersectSphere(e,t){Ea.subVectors(e.center,this.origin);const n=Ea.dot(this.direction),i=Ea.dot(Ea)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),l=n-a,f=n+a;return f<0?null:l<0?this.at(f,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,l,f;const d=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,v=this.origin;return d>=0?(n=(e.min.x-v.x)*d,i=(e.max.x-v.x)*d):(n=(e.max.x-v.x)*d,i=(e.min.x-v.x)*d),p>=0?(r=(e.min.y-v.y)*p,a=(e.max.y-v.y)*p):(r=(e.max.y-v.y)*p,a=(e.min.y-v.y)*p),n>a||r>i||((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),g>=0?(l=(e.min.z-v.z)*g,f=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,f=(e.min.z-v.z)*g),n>f||l>i)||((l>n||n!==n)&&(n=l),(f<i||i!==i)&&(i=f),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Ea)!==null}intersectTriangle(e,t,n,i,r){A0.subVectors(t,e),tm.subVectors(n,e),P0.crossVectors(A0,tm);let a=this.direction.dot(P0),l;if(a>0){if(i)return null;l=1}else if(a<0)l=-1,a=-a;else return null;Ml.subVectors(this.origin,e);const f=l*this.direction.dot(tm.crossVectors(Ml,tm));if(f<0)return null;const d=l*this.direction.dot(A0.cross(Ml));if(d<0||f+d>a)return null;const p=-l*Ml.dot(P0);return p<0?null:this.at(p/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jt{constructor(){Jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,r,a,l,f,d,p,g,v,x,M,w,S){const C=this.elements;return C[0]=e,C[4]=t,C[8]=n,C[12]=i,C[1]=r,C[5]=a,C[9]=l,C[13]=f,C[2]=d,C[6]=p,C[10]=g,C[14]=v,C[3]=x,C[7]=M,C[11]=w,C[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/rf.setFromMatrixColumn(e,0).length(),r=1/rf.setFromMatrixColumn(e,1).length(),a=1/rf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),l=Math.sin(n),f=Math.cos(i),d=Math.sin(i),p=Math.cos(r),g=Math.sin(r);if(e.order==="XYZ"){const v=a*p,x=a*g,M=l*p,w=l*g;t[0]=f*p,t[4]=-f*g,t[8]=d,t[1]=x+M*d,t[5]=v-w*d,t[9]=-l*f,t[2]=w-v*d,t[6]=M+x*d,t[10]=a*f}else if(e.order==="YXZ"){const v=f*p,x=f*g,M=d*p,w=d*g;t[0]=v+w*l,t[4]=M*l-x,t[8]=a*d,t[1]=a*g,t[5]=a*p,t[9]=-l,t[2]=x*l-M,t[6]=w+v*l,t[10]=a*f}else if(e.order==="ZXY"){const v=f*p,x=f*g,M=d*p,w=d*g;t[0]=v-w*l,t[4]=-a*g,t[8]=M+x*l,t[1]=x+M*l,t[5]=a*p,t[9]=w-v*l,t[2]=-a*d,t[6]=l,t[10]=a*f}else if(e.order==="ZYX"){const v=a*p,x=a*g,M=l*p,w=l*g;t[0]=f*p,t[4]=M*d-x,t[8]=v*d+w,t[1]=f*g,t[5]=w*d+v,t[9]=x*d-M,t[2]=-d,t[6]=l*f,t[10]=a*f}else if(e.order==="YZX"){const v=a*f,x=a*d,M=l*f,w=l*d;t[0]=f*p,t[4]=w-v*g,t[8]=M*g+x,t[1]=g,t[5]=a*p,t[9]=-l*p,t[2]=-d*p,t[6]=x*g+M,t[10]=v-w*g}else if(e.order==="XZY"){const v=a*f,x=a*d,M=l*f,w=l*d;t[0]=f*p,t[4]=-g,t[8]=d*p,t[1]=v*g+w,t[5]=a*p,t[9]=x*g-M,t[2]=M*g-x,t[6]=l*p,t[10]=w*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Rb,e,Ib)}lookAt(e,t,n){const i=this.elements;return ps.subVectors(e,t),ps.lengthSq()===0&&(ps.z=1),ps.normalize(),bl.crossVectors(n,ps),bl.lengthSq()===0&&(Math.abs(n.z)===1?ps.x+=1e-4:ps.z+=1e-4,ps.normalize(),bl.crossVectors(n,ps)),bl.normalize(),nm.crossVectors(ps,bl),i[0]=bl.x,i[4]=nm.x,i[8]=ps.x,i[1]=bl.y,i[5]=nm.y,i[9]=ps.y,i[2]=bl.z,i[6]=nm.z,i[10]=ps.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],l=n[4],f=n[8],d=n[12],p=n[1],g=n[5],v=n[9],x=n[13],M=n[2],w=n[6],S=n[10],C=n[14],E=n[3],A=n[7],L=n[11],D=n[15],F=i[0],B=i[4],I=i[8],z=i[12],V=i[1],te=i[5],X=i[9],K=i[13],q=i[2],oe=i[6],ce=i[10],ye=i[14],H=i[3],Q=i[7],Y=i[11],N=i[15];return r[0]=a*F+l*V+f*q+d*H,r[4]=a*B+l*te+f*oe+d*Q,r[8]=a*I+l*X+f*ce+d*Y,r[12]=a*z+l*K+f*ye+d*N,r[1]=p*F+g*V+v*q+x*H,r[5]=p*B+g*te+v*oe+x*Q,r[9]=p*I+g*X+v*ce+x*Y,r[13]=p*z+g*K+v*ye+x*N,r[2]=M*F+w*V+S*q+C*H,r[6]=M*B+w*te+S*oe+C*Q,r[10]=M*I+w*X+S*ce+C*Y,r[14]=M*z+w*K+S*ye+C*N,r[3]=E*F+A*V+L*q+D*H,r[7]=E*B+A*te+L*oe+D*Q,r[11]=E*I+A*X+L*ce+D*Y,r[15]=E*z+A*K+L*ye+D*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],l=e[5],f=e[9],d=e[13],p=e[2],g=e[6],v=e[10],x=e[14],M=e[3],w=e[7],S=e[11],C=e[15];return M*(+r*f*g-i*d*g-r*l*v+n*d*v+i*l*x-n*f*x)+w*(+t*f*x-t*d*v+r*a*v-i*a*x+i*d*p-r*f*p)+S*(+t*d*g-t*l*x-r*a*g+n*a*x+r*l*p-n*d*p)+C*(-i*l*p-t*f*g+t*l*v+i*a*g-n*a*v+n*f*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],l=e[5],f=e[6],d=e[7],p=e[8],g=e[9],v=e[10],x=e[11],M=e[12],w=e[13],S=e[14],C=e[15],E=g*S*d-w*v*d+w*f*x-l*S*x-g*f*C+l*v*C,A=M*v*d-p*S*d-M*f*x+a*S*x+p*f*C-a*v*C,L=p*w*d-M*g*d+M*l*x-a*w*x-p*l*C+a*g*C,D=M*g*f-p*w*f-M*l*v+a*w*v+p*l*S-a*g*S,F=t*E+n*A+i*L+r*D;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/F;return e[0]=E*B,e[1]=(w*v*r-g*S*r-w*i*x+n*S*x+g*i*C-n*v*C)*B,e[2]=(l*S*r-w*f*r+w*i*d-n*S*d-l*i*C+n*f*C)*B,e[3]=(g*f*r-l*v*r-g*i*d+n*v*d+l*i*x-n*f*x)*B,e[4]=A*B,e[5]=(p*S*r-M*v*r+M*i*x-t*S*x-p*i*C+t*v*C)*B,e[6]=(M*f*r-a*S*r-M*i*d+t*S*d+a*i*C-t*f*C)*B,e[7]=(a*v*r-p*f*r+p*i*d-t*v*d-a*i*x+t*f*x)*B,e[8]=L*B,e[9]=(M*g*r-p*w*r-M*n*x+t*w*x+p*n*C-t*g*C)*B,e[10]=(a*w*r-M*l*r+M*n*d-t*w*d-a*n*C+t*l*C)*B,e[11]=(p*l*r-a*g*r-p*n*d+t*g*d+a*n*x-t*l*x)*B,e[12]=D*B,e[13]=(p*w*i-M*g*i+M*n*v-t*w*v-p*n*S+t*g*S)*B,e[14]=(M*l*i-a*w*i-M*n*f+t*w*f+a*n*S-t*l*S)*B,e[15]=(a*g*i-p*l*i+p*n*f-t*g*f-a*n*v+t*l*v)*B,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,l=e.y,f=e.z,d=r*a,p=r*l;return this.set(d*a+n,d*l-i*f,d*f+i*l,0,d*l+i*f,p*l+n,p*f-i*a,0,d*f-i*l,p*f+i*a,r*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,l=t._z,f=t._w,d=r+r,p=a+a,g=l+l,v=r*d,x=r*p,M=r*g,w=a*p,S=a*g,C=l*g,E=f*d,A=f*p,L=f*g,D=n.x,F=n.y,B=n.z;return i[0]=(1-(w+C))*D,i[1]=(x+L)*D,i[2]=(M-A)*D,i[3]=0,i[4]=(x-L)*F,i[5]=(1-(v+C))*F,i[6]=(S+E)*F,i[7]=0,i[8]=(M+A)*B,i[9]=(S-E)*B,i[10]=(1-(v+w))*B,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=rf.set(i[0],i[1],i[2]).length();const a=rf.set(i[4],i[5],i[6]).length(),l=rf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],uo.copy(this);const d=1/r,p=1/a,g=1/l;return uo.elements[0]*=d,uo.elements[1]*=d,uo.elements[2]*=d,uo.elements[4]*=p,uo.elements[5]*=p,uo.elements[6]*=p,uo.elements[8]*=g,uo.elements[9]*=g,uo.elements[10]*=g,t.setFromRotationMatrix(uo),n.x=r,n.y=a,n.z=l,this}makePerspective(e,t,n,i,r,a){const l=this.elements,f=2*r/(t-e),d=2*r/(n-i),p=(t+e)/(t-e),g=(n+i)/(n-i),v=-(a+r)/(a-r),x=-2*a*r/(a-r);return l[0]=f,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=d,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=v,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,r,a){const l=this.elements,f=1/(t-e),d=1/(n-i),p=1/(a-r),g=(t+e)*f,v=(n+i)*d,x=(a+r)*p;return l[0]=2*f,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-v,l[2]=0,l[6]=0,l[10]=-2*p,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const rf=new J,uo=new Jt,Rb=new J(0,0,0),Ib=new J(1,1,1),bl=new J,nm=new J,ps=new J,d1=new Jt,p1=new _r;class Bd{constructor(e=0,t=0,n=0,i=Bd.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],a=i[4],l=i[8],f=i[1],d=i[5],p=i[9],g=i[2],v=i[6],x=i[10];switch(t){case"XYZ":this._y=Math.asin(fi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,x),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-fi(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,x),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(fi(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,x),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(f,r));break;case"ZYX":this._y=Math.asin(-fi(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,x),this._z=Math.atan2(f,r)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(fi(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(l,x));break;case"XZY":this._z=Math.asin(-fi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(l,r)):(this._x=Math.atan2(-p,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return d1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(d1,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return p1.setFromEuler(this),this.setFromQuaternion(p1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Bd.DEFAULT_ORDER="XYZ";class Zu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Db=0;const m1=new J,sf=new _r,Ta=new Jt,im=new J,Vh=new J,kb=new J,Fb=new _r,g1=new J(1,0,0),v1=new J(0,1,0),y1=new J(0,0,1),Nb={type:"added"},x1={type:"removed"};class mn extends Ba{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Db++}),this.uuid=gs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mn.DEFAULT_UP.clone();const e=new J,t=new Bd,n=new _r,i=new J(1,1,1);function r(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Jt},normalMatrix:{value:new ji}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=mn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Zu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sf.setFromAxisAngle(e,t),this.quaternion.multiply(sf),this}rotateOnWorldAxis(e,t){return sf.setFromAxisAngle(e,t),this.quaternion.premultiply(sf),this}rotateX(e){return this.rotateOnAxis(g1,e)}rotateY(e){return this.rotateOnAxis(v1,e)}rotateZ(e){return this.rotateOnAxis(y1,e)}translateOnAxis(e,t){return m1.copy(e).applyQuaternion(this.quaternion),this.position.add(m1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(g1,e)}translateY(e){return this.translateOnAxis(v1,e)}translateZ(e){return this.translateOnAxis(y1,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ta.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?im.copy(e):im.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Vh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ta.lookAt(Vh,im,this.up):Ta.lookAt(im,Vh,this.up),this.quaternion.setFromRotationMatrix(Ta),i&&(Ta.extractRotation(i.matrixWorld),sf.setFromRotationMatrix(Ta),this.quaternion.premultiply(sf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Nb)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(x1)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(x1)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ta.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ta.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ta),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vh,e,kb),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vh,Fb,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const r=t[n];(r.matrixWorldAutoUpdate===!0||e===!0)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let r=0,a=i.length;r<a;r++){const l=i[r];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function r(l,f){return l[f.uuid]===void 0&&(l[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const f=l.shapes;if(Array.isArray(f))for(let d=0,p=f.length;d<p;d++){const g=f[d];r(e.shapes,g)}else r(e.shapes,f)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let f=0,d=this.material.length;f<d;f++)l.push(r(e.materials,this.material[f]));i.material=l}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const f=this.animations[l];i.animations.push(r(e.animations,f))}}if(t){const l=a(e.geometries),f=a(e.materials),d=a(e.textures),p=a(e.images),g=a(e.shapes),v=a(e.skeletons),x=a(e.animations),M=a(e.nodes);l.length>0&&(n.geometries=l),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),x.length>0&&(n.animations=x),M.length>0&&(n.nodes=M)}return n.object=i,n;function a(l){const f=[];for(const d in l){const p=l[d];delete p.metadata,f.push(p)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}mn.DEFAULT_UP=new J(0,1,0);mn.DEFAULT_MATRIX_AUTO_UPDATE=!0;mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const co=new J,Ca=new J,L0=new J,Aa=new J,of=new J,af=new J,_1=new J,R0=new J,I0=new J,D0=new J;class Ds{constructor(e=new J,t=new J,n=new J){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),co.subVectors(e,t),i.cross(co);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){co.subVectors(i,t),Ca.subVectors(n,t),L0.subVectors(e,t);const a=co.dot(co),l=co.dot(Ca),f=co.dot(L0),d=Ca.dot(Ca),p=Ca.dot(L0),g=a*d-l*l;if(g===0)return r.set(-2,-1,-1);const v=1/g,x=(d*f-l*p)*v,M=(a*p-l*f)*v;return r.set(1-x-M,M,x)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Aa),Aa.x>=0&&Aa.y>=0&&Aa.x+Aa.y<=1}static getUV(e,t,n,i,r,a,l,f){return this.getBarycoord(e,t,n,i,Aa),f.set(0,0),f.addScaledVector(r,Aa.x),f.addScaledVector(a,Aa.y),f.addScaledVector(l,Aa.z),f}static isFrontFacing(e,t,n,i){return co.subVectors(n,t),Ca.subVectors(e,t),co.cross(Ca).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return co.subVectors(this.c,this.b),Ca.subVectors(this.a,this.b),co.cross(Ca).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ds.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ds.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return Ds.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Ds.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ds.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let a,l;of.subVectors(i,n),af.subVectors(r,n),R0.subVectors(e,n);const f=of.dot(R0),d=af.dot(R0);if(f<=0&&d<=0)return t.copy(n);I0.subVectors(e,i);const p=of.dot(I0),g=af.dot(I0);if(p>=0&&g<=p)return t.copy(i);const v=f*g-p*d;if(v<=0&&f>=0&&p<=0)return a=f/(f-p),t.copy(n).addScaledVector(of,a);D0.subVectors(e,r);const x=of.dot(D0),M=af.dot(D0);if(M>=0&&x<=M)return t.copy(r);const w=x*d-f*M;if(w<=0&&d>=0&&M<=0)return l=d/(d-M),t.copy(n).addScaledVector(af,l);const S=p*M-x*g;if(S<=0&&g-p>=0&&x-M>=0)return _1.subVectors(r,i),l=(g-p)/(g-p+(x-M)),t.copy(i).addScaledVector(_1,l);const C=1/(S+w+v);return a=w*C,l=v*C,t.copy(n).addScaledVector(of,a).addScaledVector(af,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ob=0;class ar extends Ba{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ob++}),this.uuid=gs(),this.name="",this.type="Material",this.blending=Xu,this.side=Xo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=wy,this.blendDst=My,this.blendEquation=zu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=tg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Iw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jm,this.stencilZFail=Jm,this.stencilZPass=Jm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Xu&&(n.blending=this.blending),this.side!==Xo&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(r){const a=[];for(const l in r){const f=r[l];delete f.metadata,a.push(f)}return a}if(t){const r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const Nw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fo={h:0,s:0,l:0},rm={h:0,s:0,l:0};function k0(o,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+(e-o)*6*t:t<1/2?e:t<2/3?o+(e-o)*6*(2/3-t):o}class vt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ho){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,yr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=yr.workingColorSpace){return this.r=e,this.g=t,this.b=n,yr.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=yr.workingColorSpace){if(e=Ly(e,1),t=fi(t,0,1),n=fi(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=k0(a,r,e+1/3),this.g=k0(a,r,e),this.b=k0(a,r,e-1/3)}return yr.toWorkingColorSpace(this,i),this}setStyle(e,t=ho){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=i[1],l=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,yr.toWorkingColorSpace(this,t),n(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,yr.toWorkingColorSpace(this,t),n(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const f=parseFloat(r[1])/360,d=parseFloat(r[2])/100,p=parseFloat(r[3])/100;return n(r[4]),this.setHSL(f,d,p,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],a=r.length;if(a===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,yr.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,yr.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ho){const n=Nw[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Pf(e.r),this.g=Pf(e.g),this.b=Pf(e.b),this}copyLinearToSRGB(e){return this.r=w0(e.r),this.g=w0(e.g),this.b=w0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ho){return yr.fromWorkingColorSpace(vr.copy(this),e),fi(vr.r*255,0,255)<<16^fi(vr.g*255,0,255)<<8^fi(vr.b*255,0,255)<<0}getHexString(e=ho){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=yr.workingColorSpace){yr.fromWorkingColorSpace(vr.copy(this),t);const n=vr.r,i=vr.g,r=vr.b,a=Math.max(n,i,r),l=Math.min(n,i,r);let f,d;const p=(l+a)/2;if(l===a)f=0,d=0;else{const g=a-l;switch(d=p<=.5?g/(a+l):g/(2-a-l),a){case n:f=(i-r)/g+(i<r?6:0);break;case i:f=(r-n)/g+2;break;case r:f=(n-i)/g+4;break}f/=6}return e.h=f,e.s=d,e.l=p,e}getRGB(e,t=yr.workingColorSpace){return yr.fromWorkingColorSpace(vr.copy(this),t),e.r=vr.r,e.g=vr.g,e.b=vr.b,e}getStyle(e=ho){yr.fromWorkingColorSpace(vr.copy(this),e);const t=vr.r,n=vr.g,i=vr.b;return e!==ho?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${t*255|0},${n*255|0},${i*255|0})`}offsetHSL(e,t,n){return this.getHSL(fo),fo.h+=e,fo.s+=t,fo.l+=n,this.setHSL(fo.h,fo.s,fo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(fo),e.getHSL(rm);const n=ld(fo.h,rm.h,t),i=ld(fo.s,rm.s,t),r=ld(fo.l,rm.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vr=new vt;vt.NAMES=Nw;class Ga extends ar{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ud,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Mi=new J,sm=new Ve;class Ln{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Md,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)sm.fromBufferAttribute(this,t),sm.applyMatrix3(e),this.setXY(t,sm.x,sm.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Mi.fromBufferAttribute(this,t),Mi.applyMatrix3(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Mi.fromBufferAttribute(this,t),Mi.applyMatrix4(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Mi.fromBufferAttribute(this,t),Mi.applyNormalMatrix(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Mi.fromBufferAttribute(this,t),Mi.transformDirection(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Fa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Fa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Fa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Fa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),i=Pn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),i=Pn(i,this.array),r=Pn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Md&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class zb extends Ln{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Ub extends Ln{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Bb extends Ln{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Gb extends Ln{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Dy extends Ln{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Vb extends Ln{constructor(e,t,n){super(new Int32Array(e),t,n)}}class ky extends Ln{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Wb extends Ln{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class bt extends Ln{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Hb extends Ln{constructor(e,t,n){super(new Float64Array(e),t,n)}}let jb=0;const Ls=new Jt,F0=new mn,lf=new J,ms=new Vl,Wh=new Vl,Hi=new J;class $t extends Ba{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:jb++}),this.uuid=gs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Fw(e)?ky:Dy)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new ji().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ls.makeRotationFromQuaternion(e),this.applyMatrix4(Ls),this}rotateX(e){return Ls.makeRotationX(e),this.applyMatrix4(Ls),this}rotateY(e){return Ls.makeRotationY(e),this.applyMatrix4(Ls),this}rotateZ(e){return Ls.makeRotationZ(e),this.applyMatrix4(Ls),this}translate(e,t,n){return Ls.makeTranslation(e,t,n),this.applyMatrix4(Ls),this}scale(e,t,n){return Ls.makeScale(e,t,n),this.applyMatrix4(Ls),this}lookAt(e){return F0.lookAt(e),F0.updateMatrix(),this.applyMatrix4(F0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(lf).negate(),this.translate(lf.x,lf.y,lf.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new bt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const r=t[n];ms.setFromBufferAttribute(r),this.morphTargetsRelative?(Hi.addVectors(this.boundingBox.min,ms.min),this.boundingBox.expandByPoint(Hi),Hi.addVectors(this.boundingBox.max,ms.max),this.boundingBox.expandByPoint(Hi)):(this.boundingBox.expandByPoint(ms.min),this.boundingBox.expandByPoint(ms.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Wl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new J,1/0);return}if(e){const n=this.boundingSphere.center;if(ms.setFromBufferAttribute(e),t)for(let r=0,a=t.length;r<a;r++){const l=t[r];Wh.setFromBufferAttribute(l),this.morphTargetsRelative?(Hi.addVectors(ms.min,Wh.min),ms.expandByPoint(Hi),Hi.addVectors(ms.max,Wh.max),ms.expandByPoint(Hi)):(ms.expandByPoint(Wh.min),ms.expandByPoint(Wh.max))}ms.getCenter(n);let i=0;for(let r=0,a=e.count;r<a;r++)Hi.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(Hi));if(t)for(let r=0,a=t.length;r<a;r++){const l=t[r],f=this.morphTargetsRelative;for(let d=0,p=l.count;d<p;d++)Hi.fromBufferAttribute(l,d),f&&(lf.fromBufferAttribute(e,d),Hi.add(lf)),i=Math.max(i,n.distanceToSquared(Hi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,l=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ln(new Float32Array(4*l),4));const f=this.getAttribute("tangent").array,d=[],p=[];for(let V=0;V<l;V++)d[V]=new J,p[V]=new J;const g=new J,v=new J,x=new J,M=new Ve,w=new Ve,S=new Ve,C=new J,E=new J;function A(V,te,X){g.fromArray(i,V*3),v.fromArray(i,te*3),x.fromArray(i,X*3),M.fromArray(a,V*2),w.fromArray(a,te*2),S.fromArray(a,X*2),v.sub(g),x.sub(g),w.sub(M),S.sub(M);const K=1/(w.x*S.y-S.x*w.y);isFinite(K)&&(C.copy(v).multiplyScalar(S.y).addScaledVector(x,-w.y).multiplyScalar(K),E.copy(x).multiplyScalar(w.x).addScaledVector(v,-S.x).multiplyScalar(K),d[V].add(C),d[te].add(C),d[X].add(C),p[V].add(E),p[te].add(E),p[X].add(E))}let L=this.groups;L.length===0&&(L=[{start:0,count:n.length}]);for(let V=0,te=L.length;V<te;++V){const X=L[V],K=X.start,q=X.count;for(let oe=K,ce=K+q;oe<ce;oe+=3)A(n[oe+0],n[oe+1],n[oe+2])}const D=new J,F=new J,B=new J,I=new J;function z(V){B.fromArray(r,V*3),I.copy(B);const te=d[V];D.copy(te),D.sub(B.multiplyScalar(B.dot(te))).normalize(),F.crossVectors(I,te);const K=F.dot(p[V])<0?-1:1;f[V*4]=D.x,f[V*4+1]=D.y,f[V*4+2]=D.z,f[V*4+3]=K}for(let V=0,te=L.length;V<te;++V){const X=L[V],K=X.start,q=X.count;for(let oe=K,ce=K+q;oe<ce;oe+=3)z(n[oe+0]),z(n[oe+1]),z(n[oe+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ln(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,x=n.count;v<x;v++)n.setXYZ(v,0,0,0);const i=new J,r=new J,a=new J,l=new J,f=new J,d=new J,p=new J,g=new J;if(e)for(let v=0,x=e.count;v<x;v+=3){const M=e.getX(v+0),w=e.getX(v+1),S=e.getX(v+2);i.fromBufferAttribute(t,M),r.fromBufferAttribute(t,w),a.fromBufferAttribute(t,S),p.subVectors(a,r),g.subVectors(i,r),p.cross(g),l.fromBufferAttribute(n,M),f.fromBufferAttribute(n,w),d.fromBufferAttribute(n,S),l.add(p),f.add(p),d.add(p),n.setXYZ(M,l.x,l.y,l.z),n.setXYZ(w,f.x,f.y,f.z),n.setXYZ(S,d.x,d.y,d.z)}else for(let v=0,x=t.count;v<x;v+=3)i.fromBufferAttribute(t,v+0),r.fromBufferAttribute(t,v+1),a.fromBufferAttribute(t,v+2),p.subVectors(a,r),g.subVectors(i,r),p.cross(g),n.setXYZ(v+0,p.x,p.y,p.z),n.setXYZ(v+1,p.x,p.y,p.z),n.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Hi.fromBufferAttribute(e,t),Hi.normalize(),e.setXYZ(t,Hi.x,Hi.y,Hi.z)}toNonIndexed(){function e(l,f){const d=l.array,p=l.itemSize,g=l.normalized,v=new d.constructor(f.length*p);let x=0,M=0;for(let w=0,S=f.length;w<S;w++){l.isInterleavedBufferAttribute?x=f[w]*l.data.stride+l.offset:x=f[w]*p;for(let C=0;C<p;C++)v[M++]=d[x++]}return new Ln(v,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new $t,n=this.index.array,i=this.attributes;for(const l in i){const f=i[l],d=e(f,n);t.setAttribute(l,d)}const r=this.morphAttributes;for(const l in r){const f=[],d=r[l];for(let p=0,g=d.length;p<g;p++){const v=d[p],x=e(v,n);f.push(x)}t.morphAttributes[l]=f}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,f=a.length;l<f;l++){const d=a[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const d in f)f[d]!==void 0&&(e[d]=f[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n){const d=n[f];e.data.attributes[f]=d.toJSON(e.data)}const i={};let r=!1;for(const f in this.morphAttributes){const d=this.morphAttributes[f],p=[];for(let g=0,v=d.length;g<v;g++){const x=d[g];p.push(x.toJSON(e.data))}p.length>0&&(i[f]=p,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const d in i){const p=i[d];this.setAttribute(d,p.clone(t))}const r=e.morphAttributes;for(const d in r){const p=[],g=r[d];for(let v=0,x=g.length;v<x;v++)p.push(g[v].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let d=0,p=a.length;d<p;d++){const g=a[d];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const S1=new Jt,Vo=new Gf,om=new Wl,w1=new J,Hh=new J,jh=new J,Xh=new J,N0=new J,am=new J,lm=new Ve,um=new Ve,cm=new Ve,O0=new J,fm=new J;class bi extends mn{constructor(e=new $t,t=new Ga){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const l=this.morphTargetInfluences;if(r&&l){am.set(0,0,0);for(let f=0,d=r.length;f<d;f++){const p=l[f],g=r[f];p!==0&&(N0.fromBufferAttribute(g,e),a?am.addScaledVector(N0,p):am.addScaledVector(N0.sub(t),p))}t.add(am)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),om.copy(n.boundingSphere),om.applyMatrix4(r),Vo.copy(e.ray).recast(e.near),om.containsPoint(Vo.origin)===!1&&(Vo.intersectSphere(om,w1)===null||Vo.origin.distanceToSquared(w1)>(e.far-e.near)**2))||(S1.copy(r).invert(),Vo.copy(e.ray).applyMatrix4(S1),n.boundingBox!==null&&Vo.intersectsBox(n.boundingBox)===!1))return;let a;const l=n.index,f=n.attributes.position,d=n.attributes.uv,p=n.attributes.uv2,g=n.groups,v=n.drawRange;if(l!==null)if(Array.isArray(i))for(let x=0,M=g.length;x<M;x++){const w=g[x],S=i[w.materialIndex],C=Math.max(w.start,v.start),E=Math.min(l.count,Math.min(w.start+w.count,v.start+v.count));for(let A=C,L=E;A<L;A+=3){const D=l.getX(A),F=l.getX(A+1),B=l.getX(A+2);a=hm(this,S,e,Vo,d,p,D,F,B),a&&(a.faceIndex=Math.floor(A/3),a.face.materialIndex=w.materialIndex,t.push(a))}}else{const x=Math.max(0,v.start),M=Math.min(l.count,v.start+v.count);for(let w=x,S=M;w<S;w+=3){const C=l.getX(w),E=l.getX(w+1),A=l.getX(w+2);a=hm(this,i,e,Vo,d,p,C,E,A),a&&(a.faceIndex=Math.floor(w/3),t.push(a))}}else if(f!==void 0)if(Array.isArray(i))for(let x=0,M=g.length;x<M;x++){const w=g[x],S=i[w.materialIndex],C=Math.max(w.start,v.start),E=Math.min(f.count,Math.min(w.start+w.count,v.start+v.count));for(let A=C,L=E;A<L;A+=3){const D=A,F=A+1,B=A+2;a=hm(this,S,e,Vo,d,p,D,F,B),a&&(a.faceIndex=Math.floor(A/3),a.face.materialIndex=w.materialIndex,t.push(a))}}else{const x=Math.max(0,v.start),M=Math.min(f.count,v.start+v.count);for(let w=x,S=M;w<S;w+=3){const C=w,E=w+1,A=w+2;a=hm(this,i,e,Vo,d,p,C,E,A),a&&(a.faceIndex=Math.floor(w/3),t.push(a))}}}}function Xb(o,e,t,n,i,r,a,l){let f;if(e.side===Or?f=n.intersectTriangle(a,r,i,!0,l):f=n.intersectTriangle(i,r,a,e.side===Xo,l),f===null)return null;fm.copy(l),fm.applyMatrix4(o.matrixWorld);const d=t.ray.origin.distanceTo(fm);return d<t.near||d>t.far?null:{distance:d,point:fm.clone(),object:o}}function hm(o,e,t,n,i,r,a,l,f){o.getVertexPosition(a,Hh),o.getVertexPosition(l,jh),o.getVertexPosition(f,Xh);const d=Xb(o,e,t,n,Hh,jh,Xh,O0);if(d){i&&(lm.fromBufferAttribute(i,a),um.fromBufferAttribute(i,l),cm.fromBufferAttribute(i,f),d.uv=Ds.getUV(O0,Hh,jh,Xh,lm,um,cm,new Ve)),r&&(lm.fromBufferAttribute(r,a),um.fromBufferAttribute(r,l),cm.fromBufferAttribute(r,f),d.uv2=Ds.getUV(O0,Hh,jh,Xh,lm,um,cm,new Ve));const p={a,b:l,c:f,normal:new J,materialIndex:0};Ds.getNormal(Hh,jh,Xh,p.normal),d.face=p}return d}class Hl extends $t{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const l=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const f=[],d=[],p=[],g=[];let v=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(f),this.setAttribute("position",new bt(d,3)),this.setAttribute("normal",new bt(p,3)),this.setAttribute("uv",new bt(g,2));function M(w,S,C,E,A,L,D,F,B,I,z){const V=L/B,te=D/I,X=L/2,K=D/2,q=F/2,oe=B+1,ce=I+1;let ye=0,H=0;const Q=new J;for(let Y=0;Y<ce;Y++){const N=Y*te-K;for(let O=0;O<oe;O++){const re=O*V-X;Q[w]=re*E,Q[S]=N*A,Q[C]=q,d.push(Q.x,Q.y,Q.z),Q[w]=0,Q[S]=0,Q[C]=F>0?1:-1,p.push(Q.x,Q.y,Q.z),g.push(O/B),g.push(1-Y/I),ye+=1}}for(let Y=0;Y<I;Y++)for(let N=0;N<B;N++){const O=v+N+oe*Y,re=v+N+oe*(Y+1),se=v+(N+1)+oe*(Y+1),Z=v+(N+1)+oe*Y;f.push(O,re,Z),f.push(re,se,Z),H+=6}l.addGroup(x,H,z),x+=H,v+=ye}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Nf(o){const e={};for(const t in o){e[t]={};for(const n in o[t]){const i=o[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Nr(o){const e={};for(let t=0;t<o.length;t++){const n=Nf(o[t]);for(const i in n)e[i]=n[i]}return e}function Yb(o){const e=[];for(let t=0;t<o.length;t++)e.push(o[t].clone());return e}function Ow(o){return o.getRenderTarget()===null&&o.outputEncoding===kn?ho:Ff}const Fy={clone:Nf,merge:Nr};var qb=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Zb=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Yo extends ar{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=qb,this.fragmentShader=Zb,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Nf(e.uniforms),this.uniformsGroups=Yb(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Gd extends mn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class hi extends Gd{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=bd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(qu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return bd*2*Math.atan(Math.tan(qu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(qu*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const f=a.fullWidth,d=a.fullHeight;r+=a.offsetX*i/f,t-=a.offsetY*n/d,i*=a.width/f,n*=a.height/d}const l=this.filmOffset;l!==0&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const uf=-90,cf=1;class zw extends mn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const i=new hi(uf,cf,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const r=new hi(uf,cf,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);const a=new hi(uf,cf,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const l=new hi(uf,cf,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(0,-1,0),this.add(l);const f=new hi(uf,cf,e,t);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(0,0,1),this.add(f);const d=new hi(uf,cf,e,t);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(0,0,-1),this.add(d)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,a,l,f,d]=this.children,p=e.getRenderTarget(),g=e.toneMapping,v=e.xr.enabled;e.toneMapping=yo,e.xr.enabled=!1;const x=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,l),e.setRenderTarget(n,4),e.render(t,f),n.texture.generateMipmaps=x,e.setRenderTarget(n,5),e.render(t,d),e.setRenderTarget(p),e.toneMapping=g,e.xr.enabled=v,n.texture.needsPMREMUpdate=!0}}class Vd extends Jn{constructor(e,t,n,i,r,a,l,f,d,p){e=e!==void 0?e:[],t=t!==void 0?t:Nl,super(e,t,n,i,r,a,l,f,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Uw extends xo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Vd(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:qn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Hl(5,5,5),r=new Yo({name:"CubemapFromEquirect",uniforms:Nf(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Or,blending:Na});r.uniforms.tEquirect.value=t;const a=new bi(i,r),l=t.minFilter;return t.minFilter===zl&&(t.minFilter=qn),new zw(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}const z0=new J,Jb=new J,Qb=new ji;class Ia{constructor(e=new J(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=z0.subVectors(n,t).cross(Jb.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(z0),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Qb.getNormalMatrix(e),i=this.coplanarPoint(z0).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ff=new Wl,dm=new J;class xg{constructor(e=new Ia,t=new Ia,n=new Ia,i=new Ia,r=new Ia,a=new Ia){this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(i),l[4].copy(r),l[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],l=n[3],f=n[4],d=n[5],p=n[6],g=n[7],v=n[8],x=n[9],M=n[10],w=n[11],S=n[12],C=n[13],E=n[14],A=n[15];return t[0].setComponents(l-i,g-f,w-v,A-S).normalize(),t[1].setComponents(l+i,g+f,w+v,A+S).normalize(),t[2].setComponents(l+r,g+d,w+x,A+C).normalize(),t[3].setComponents(l-r,g-d,w-x,A-C).normalize(),t[4].setComponents(l-a,g-p,w-M,A-E).normalize(),t[5].setComponents(l+a,g+p,w+M,A+E).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),ff.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ff)}intersectsSprite(e){return ff.center.set(0,0,0),ff.radius=.7071067811865476,ff.applyMatrix4(e.matrixWorld),this.intersectsSphere(ff)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(dm.x=i.normal.x>0?e.max.x:e.min.x,dm.y=i.normal.y>0?e.max.y:e.min.y,dm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(dm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Bw(){let o=null,e=!1,t=null,n=null;function i(r,a){t(r,a),n=o.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=o.requestAnimationFrame(i),e=!0)},stop:function(){o.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){o=r}}}function Kb(o,e){const t=e.isWebGL2,n=new WeakMap;function i(d,p){const g=d.array,v=d.usage,x=o.createBuffer();o.bindBuffer(p,x),o.bufferData(p,g,v),d.onUploadCallback();let M;if(g instanceof Float32Array)M=5126;else if(g instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(t)M=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else M=5123;else if(g instanceof Int16Array)M=5122;else if(g instanceof Uint32Array)M=5125;else if(g instanceof Int32Array)M=5124;else if(g instanceof Int8Array)M=5120;else if(g instanceof Uint8Array)M=5121;else if(g instanceof Uint8ClampedArray)M=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+g);return{buffer:x,type:M,bytesPerElement:g.BYTES_PER_ELEMENT,version:d.version}}function r(d,p,g){const v=p.array,x=p.updateRange;o.bindBuffer(g,d),x.count===-1?o.bufferSubData(g,0,v):(t?o.bufferSubData(g,x.offset*v.BYTES_PER_ELEMENT,v,x.offset,x.count):o.bufferSubData(g,x.offset*v.BYTES_PER_ELEMENT,v.subarray(x.offset,x.offset+x.count)),x.count=-1),p.onUploadCallback()}function a(d){return d.isInterleavedBufferAttribute&&(d=d.data),n.get(d)}function l(d){d.isInterleavedBufferAttribute&&(d=d.data);const p=n.get(d);p&&(o.deleteBuffer(p.buffer),n.delete(d))}function f(d,p){if(d.isGLBufferAttribute){const v=n.get(d);(!v||v.version<d.version)&&n.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const g=n.get(d);g===void 0?n.set(d,i(d,p)):g.version<d.version&&(r(g.buffer,d,p),g.version=d.version)}return{get:a,remove:l,update:f}}class Va extends $t{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,l=Math.floor(n),f=Math.floor(i),d=l+1,p=f+1,g=e/l,v=t/f,x=[],M=[],w=[],S=[];for(let C=0;C<p;C++){const E=C*v-a;for(let A=0;A<d;A++){const L=A*g-r;M.push(L,-E,0),w.push(0,0,1),S.push(A/l),S.push(1-C/f)}}for(let C=0;C<f;C++)for(let E=0;E<l;E++){const A=E+d*C,L=E+d*(C+1),D=E+1+d*(C+1),F=E+1+d*C;x.push(A,L,F),x.push(L,D,F)}this.setIndex(x),this.setAttribute("position",new bt(M,3)),this.setAttribute("normal",new bt(w,3)),this.setAttribute("uv",new bt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Va(e.width,e.height,e.widthSegments,e.heightSegments)}}var $b=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,eE=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tE=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,nE=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iE=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rE=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sE="vec3 transformed = vec3( position );",oE=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,aE=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,lE=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,uE=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,cE=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,fE=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,hE=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,dE=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,pE=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,mE=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,gE=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,vE=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,yE=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,xE=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,_E=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,SE=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,wE=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ME=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,bE=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,EE="gl_FragColor = linearToOutputTexel( gl_FragColor );",TE=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,CE=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,AE=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,PE=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,LE=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RE=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,IE=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,DE=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,kE=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,FE=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,NE=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,OE=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,zE=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,UE=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,BE=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,GE=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,VE=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,WE=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,HE=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,jE=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,XE=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,YE=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,qE=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ZE=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,JE=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,QE=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,KE=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,$E=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,eT=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,tT=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,nT=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,iT=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,rT=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,sT=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,oT=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,aT=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,lT=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,uT=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,cT=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,fT=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,hT=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,dT=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,pT=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mT=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gT=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,vT=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,yT=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,xT=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,_T=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,ST=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,wT=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,MT=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,bT=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ET=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,TT=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,CT=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,AT=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,PT=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,LT=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,RT=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,IT=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,DT=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,kT=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,FT=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,NT=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,OT=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zT=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,UT=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,BT=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,GT=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,VT=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,WT=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,HT=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,jT=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,XT=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,YT=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,qT=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,ZT=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,JT=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const QT=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,KT=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,$T=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,eC=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,tC=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,nC=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,iC=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,rC=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,sC=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,oC=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,aC=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,lC=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,uC=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cC=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fC=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hC=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dC=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pC=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mC=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,gC=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vC=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yC=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xC=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_C=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SC=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,wC=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MC=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bC=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EC=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,TC=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,CC=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AC=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,PC=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LC=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Kt={alphamap_fragment:$b,alphamap_pars_fragment:eE,alphatest_fragment:tE,alphatest_pars_fragment:nE,aomap_fragment:iE,aomap_pars_fragment:rE,begin_vertex:sE,beginnormal_vertex:oE,bsdfs:aE,iridescence_fragment:lE,bumpmap_pars_fragment:uE,clipping_planes_fragment:cE,clipping_planes_pars_fragment:fE,clipping_planes_pars_vertex:hE,clipping_planes_vertex:dE,color_fragment:pE,color_pars_fragment:mE,color_pars_vertex:gE,color_vertex:vE,common:yE,cube_uv_reflection_fragment:xE,defaultnormal_vertex:_E,displacementmap_pars_vertex:SE,displacementmap_vertex:wE,emissivemap_fragment:ME,emissivemap_pars_fragment:bE,encodings_fragment:EE,encodings_pars_fragment:TE,envmap_fragment:CE,envmap_common_pars_fragment:AE,envmap_pars_fragment:PE,envmap_pars_vertex:LE,envmap_physical_pars_fragment:VE,envmap_vertex:RE,fog_vertex:IE,fog_pars_vertex:DE,fog_fragment:kE,fog_pars_fragment:FE,gradientmap_pars_fragment:NE,lightmap_fragment:OE,lightmap_pars_fragment:zE,lights_lambert_fragment:UE,lights_lambert_pars_fragment:BE,lights_pars_begin:GE,lights_toon_fragment:WE,lights_toon_pars_fragment:HE,lights_phong_fragment:jE,lights_phong_pars_fragment:XE,lights_physical_fragment:YE,lights_physical_pars_fragment:qE,lights_fragment_begin:ZE,lights_fragment_maps:JE,lights_fragment_end:QE,logdepthbuf_fragment:KE,logdepthbuf_pars_fragment:$E,logdepthbuf_pars_vertex:eT,logdepthbuf_vertex:tT,map_fragment:nT,map_pars_fragment:iT,map_particle_fragment:rT,map_particle_pars_fragment:sT,metalnessmap_fragment:oT,metalnessmap_pars_fragment:aT,morphcolor_vertex:lT,morphnormal_vertex:uT,morphtarget_pars_vertex:cT,morphtarget_vertex:fT,normal_fragment_begin:hT,normal_fragment_maps:dT,normal_pars_fragment:pT,normal_pars_vertex:mT,normal_vertex:gT,normalmap_pars_fragment:vT,clearcoat_normal_fragment_begin:yT,clearcoat_normal_fragment_maps:xT,clearcoat_pars_fragment:_T,iridescence_pars_fragment:ST,output_fragment:wT,packing:MT,premultiplied_alpha_fragment:bT,project_vertex:ET,dithering_fragment:TT,dithering_pars_fragment:CT,roughnessmap_fragment:AT,roughnessmap_pars_fragment:PT,shadowmap_pars_fragment:LT,shadowmap_pars_vertex:RT,shadowmap_vertex:IT,shadowmask_pars_fragment:DT,skinbase_vertex:kT,skinning_pars_vertex:FT,skinning_vertex:NT,skinnormal_vertex:OT,specularmap_fragment:zT,specularmap_pars_fragment:UT,tonemapping_fragment:BT,tonemapping_pars_fragment:GT,transmission_fragment:VT,transmission_pars_fragment:WT,uv_pars_fragment:HT,uv_pars_vertex:jT,uv_vertex:XT,uv2_pars_fragment:YT,uv2_pars_vertex:qT,uv2_vertex:ZT,worldpos_vertex:JT,background_vert:QT,background_frag:KT,backgroundCube_vert:$T,backgroundCube_frag:eC,cube_vert:tC,cube_frag:nC,depth_vert:iC,depth_frag:rC,distanceRGBA_vert:sC,distanceRGBA_frag:oC,equirect_vert:aC,equirect_frag:lC,linedashed_vert:uC,linedashed_frag:cC,meshbasic_vert:fC,meshbasic_frag:hC,meshlambert_vert:dC,meshlambert_frag:pC,meshmatcap_vert:mC,meshmatcap_frag:gC,meshnormal_vert:vC,meshnormal_frag:yC,meshphong_vert:xC,meshphong_frag:_C,meshphysical_vert:SC,meshphysical_frag:wC,meshtoon_vert:MC,meshtoon_frag:bC,points_vert:EC,points_frag:TC,shadow_vert:CC,shadow_frag:AC,sprite_vert:PC,sprite_frag:LC},dt={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ji},uv2Transform:{value:new ji},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ji}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ji}}},po={basic:{uniforms:Nr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:Kt.meshbasic_vert,fragmentShader:Kt.meshbasic_frag},lambert:{uniforms:Nr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new vt(0)}}]),vertexShader:Kt.meshlambert_vert,fragmentShader:Kt.meshlambert_frag},phong:{uniforms:Nr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:Kt.meshphong_vert,fragmentShader:Kt.meshphong_frag},standard:{uniforms:Nr([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Kt.meshphysical_vert,fragmentShader:Kt.meshphysical_frag},toon:{uniforms:Nr([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new vt(0)}}]),vertexShader:Kt.meshtoon_vert,fragmentShader:Kt.meshtoon_frag},matcap:{uniforms:Nr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:Kt.meshmatcap_vert,fragmentShader:Kt.meshmatcap_frag},points:{uniforms:Nr([dt.points,dt.fog]),vertexShader:Kt.points_vert,fragmentShader:Kt.points_frag},dashed:{uniforms:Nr([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Kt.linedashed_vert,fragmentShader:Kt.linedashed_frag},depth:{uniforms:Nr([dt.common,dt.displacementmap]),vertexShader:Kt.depth_vert,fragmentShader:Kt.depth_frag},normal:{uniforms:Nr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:Kt.meshnormal_vert,fragmentShader:Kt.meshnormal_frag},sprite:{uniforms:Nr([dt.sprite,dt.fog]),vertexShader:Kt.sprite_vert,fragmentShader:Kt.sprite_frag},background:{uniforms:{uvTransform:{value:new ji},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Kt.background_vert,fragmentShader:Kt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Kt.backgroundCube_vert,fragmentShader:Kt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Kt.cube_vert,fragmentShader:Kt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Kt.equirect_vert,fragmentShader:Kt.equirect_frag},distanceRGBA:{uniforms:Nr([dt.common,dt.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Kt.distanceRGBA_vert,fragmentShader:Kt.distanceRGBA_frag},shadow:{uniforms:Nr([dt.lights,dt.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:Kt.shadow_vert,fragmentShader:Kt.shadow_frag}};po.physical={uniforms:Nr([po.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new vt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new vt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new vt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Kt.meshphysical_vert,fragmentShader:Kt.meshphysical_frag};const pm={r:0,b:0,g:0};function RC(o,e,t,n,i,r,a){const l=new vt(0);let f=r===!0?0:1,d,p,g=null,v=0,x=null;function M(S,C){let E=!1,A=C.isScene===!0?C.background:null;A&&A.isTexture&&(A=(C.backgroundBlurriness>0?t:e).get(A));const L=o.xr,D=L.getSession&&L.getSession();D&&D.environmentBlendMode==="additive"&&(A=null),A===null?w(l,f):A&&A.isColor&&(w(A,1),E=!0),(o.autoClear||E)&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),A&&(A.isCubeTexture||A.mapping===Bf)?(p===void 0&&(p=new bi(new Hl(1,1,1),new Yo({name:"BackgroundCubeMaterial",uniforms:Nf(po.backgroundCube.uniforms),vertexShader:po.backgroundCube.vertexShader,fragmentShader:po.backgroundCube.fragmentShader,side:Or,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(F,B,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(p)),p.material.uniforms.envMap.value=A,p.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,p.material.toneMapped=A.encoding!==kn,(g!==A||v!==A.version||x!==o.toneMapping)&&(p.material.needsUpdate=!0,g=A,v=A.version,x=o.toneMapping),p.layers.enableAll(),S.unshift(p,p.geometry,p.material,0,0,null)):A&&A.isTexture&&(d===void 0&&(d=new bi(new Va(2,2),new Yo({name:"BackgroundMaterial",uniforms:Nf(po.background.uniforms),vertexShader:po.background.vertexShader,fragmentShader:po.background.fragmentShader,side:Xo,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=A,d.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,d.material.toneMapped=A.encoding!==kn,A.matrixAutoUpdate===!0&&A.updateMatrix(),d.material.uniforms.uvTransform.value.copy(A.matrix),(g!==A||v!==A.version||x!==o.toneMapping)&&(d.material.needsUpdate=!0,g=A,v=A.version,x=o.toneMapping),d.layers.enableAll(),S.unshift(d,d.geometry,d.material,0,0,null))}function w(S,C){S.getRGB(pm,Ow(o)),n.buffers.color.setClear(pm.r,pm.g,pm.b,C,a)}return{getClearColor:function(){return l},setClearColor:function(S,C=1){l.set(S),f=C,w(l,f)},getClearAlpha:function(){return f},setClearAlpha:function(S){f=S,w(l,f)},render:M}}function IC(o,e,t,n){const i=o.getParameter(34921),r=n.isWebGL2?null:e.get("OES_vertex_array_object"),a=n.isWebGL2||r!==null,l={},f=S(null);let d=f,p=!1;function g(q,oe,ce,ye,H){let Q=!1;if(a){const Y=w(ye,ce,oe);d!==Y&&(d=Y,x(d.object)),Q=C(q,ye,ce,H),Q&&E(q,ye,ce,H)}else{const Y=oe.wireframe===!0;(d.geometry!==ye.id||d.program!==ce.id||d.wireframe!==Y)&&(d.geometry=ye.id,d.program=ce.id,d.wireframe=Y,Q=!0)}H!==null&&t.update(H,34963),(Q||p)&&(p=!1,I(q,oe,ce,ye),H!==null&&o.bindBuffer(34963,t.get(H).buffer))}function v(){return n.isWebGL2?o.createVertexArray():r.createVertexArrayOES()}function x(q){return n.isWebGL2?o.bindVertexArray(q):r.bindVertexArrayOES(q)}function M(q){return n.isWebGL2?o.deleteVertexArray(q):r.deleteVertexArrayOES(q)}function w(q,oe,ce){const ye=ce.wireframe===!0;let H=l[q.id];H===void 0&&(H={},l[q.id]=H);let Q=H[oe.id];Q===void 0&&(Q={},H[oe.id]=Q);let Y=Q[ye];return Y===void 0&&(Y=S(v()),Q[ye]=Y),Y}function S(q){const oe=[],ce=[],ye=[];for(let H=0;H<i;H++)oe[H]=0,ce[H]=0,ye[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:oe,enabledAttributes:ce,attributeDivisors:ye,object:q,attributes:{},index:null}}function C(q,oe,ce,ye){const H=d.attributes,Q=oe.attributes;let Y=0;const N=ce.getAttributes();for(const O in N)if(N[O].location>=0){const se=H[O];let Z=Q[O];if(Z===void 0&&(O==="instanceMatrix"&&q.instanceMatrix&&(Z=q.instanceMatrix),O==="instanceColor"&&q.instanceColor&&(Z=q.instanceColor)),se===void 0||se.attribute!==Z||Z&&se.data!==Z.data)return!0;Y++}return d.attributesNum!==Y||d.index!==ye}function E(q,oe,ce,ye){const H={},Q=oe.attributes;let Y=0;const N=ce.getAttributes();for(const O in N)if(N[O].location>=0){let se=Q[O];se===void 0&&(O==="instanceMatrix"&&q.instanceMatrix&&(se=q.instanceMatrix),O==="instanceColor"&&q.instanceColor&&(se=q.instanceColor));const Z={};Z.attribute=se,se&&se.data&&(Z.data=se.data),H[O]=Z,Y++}d.attributes=H,d.attributesNum=Y,d.index=ye}function A(){const q=d.newAttributes;for(let oe=0,ce=q.length;oe<ce;oe++)q[oe]=0}function L(q){D(q,0)}function D(q,oe){const ce=d.newAttributes,ye=d.enabledAttributes,H=d.attributeDivisors;ce[q]=1,ye[q]===0&&(o.enableVertexAttribArray(q),ye[q]=1),H[q]!==oe&&((n.isWebGL2?o:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](q,oe),H[q]=oe)}function F(){const q=d.newAttributes,oe=d.enabledAttributes;for(let ce=0,ye=oe.length;ce<ye;ce++)oe[ce]!==q[ce]&&(o.disableVertexAttribArray(ce),oe[ce]=0)}function B(q,oe,ce,ye,H,Q){n.isWebGL2===!0&&(ce===5124||ce===5125)?o.vertexAttribIPointer(q,oe,ce,H,Q):o.vertexAttribPointer(q,oe,ce,ye,H,Q)}function I(q,oe,ce,ye){if(n.isWebGL2===!1&&(q.isInstancedMesh||ye.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const H=ye.attributes,Q=ce.getAttributes(),Y=oe.defaultAttributeValues;for(const N in Q){const O=Q[N];if(O.location>=0){let re=H[N];if(re===void 0&&(N==="instanceMatrix"&&q.instanceMatrix&&(re=q.instanceMatrix),N==="instanceColor"&&q.instanceColor&&(re=q.instanceColor)),re!==void 0){const se=re.normalized,Z=re.itemSize,he=t.get(re);if(he===void 0)continue;const ue=he.buffer,me=he.type,we=he.bytesPerElement;if(re.isInterleavedBufferAttribute){const Oe=re.data,ke=Oe.stride,ae=re.offset;if(Oe.isInstancedInterleavedBuffer){for(let be=0;be<O.locationSize;be++)D(O.location+be,Oe.meshPerAttribute);q.isInstancedMesh!==!0&&ye._maxInstanceCount===void 0&&(ye._maxInstanceCount=Oe.meshPerAttribute*Oe.count)}else for(let be=0;be<O.locationSize;be++)L(O.location+be);o.bindBuffer(34962,ue);for(let be=0;be<O.locationSize;be++)B(O.location+be,Z/O.locationSize,me,se,ke*we,(ae+Z/O.locationSize*be)*we)}else{if(re.isInstancedBufferAttribute){for(let Oe=0;Oe<O.locationSize;Oe++)D(O.location+Oe,re.meshPerAttribute);q.isInstancedMesh!==!0&&ye._maxInstanceCount===void 0&&(ye._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let Oe=0;Oe<O.locationSize;Oe++)L(O.location+Oe);o.bindBuffer(34962,ue);for(let Oe=0;Oe<O.locationSize;Oe++)B(O.location+Oe,Z/O.locationSize,me,se,Z*we,Z/O.locationSize*Oe*we)}}else if(Y!==void 0){const se=Y[N];if(se!==void 0)switch(se.length){case 2:o.vertexAttrib2fv(O.location,se);break;case 3:o.vertexAttrib3fv(O.location,se);break;case 4:o.vertexAttrib4fv(O.location,se);break;default:o.vertexAttrib1fv(O.location,se)}}}}F()}function z(){X();for(const q in l){const oe=l[q];for(const ce in oe){const ye=oe[ce];for(const H in ye)M(ye[H].object),delete ye[H];delete oe[ce]}delete l[q]}}function V(q){if(l[q.id]===void 0)return;const oe=l[q.id];for(const ce in oe){const ye=oe[ce];for(const H in ye)M(ye[H].object),delete ye[H];delete oe[ce]}delete l[q.id]}function te(q){for(const oe in l){const ce=l[oe];if(ce[q.id]===void 0)continue;const ye=ce[q.id];for(const H in ye)M(ye[H].object),delete ye[H];delete ce[q.id]}}function X(){K(),p=!0,d!==f&&(d=f,x(d.object))}function K(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:g,reset:X,resetDefaultState:K,dispose:z,releaseStatesOfGeometry:V,releaseStatesOfProgram:te,initAttributes:A,enableAttribute:L,disableUnusedAttributes:F}}function DC(o,e,t,n){const i=n.isWebGL2;let r;function a(d){r=d}function l(d,p){o.drawArrays(r,d,p),t.update(p,r,1)}function f(d,p,g){if(g===0)return;let v,x;if(i)v=o,x="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),x="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[x](r,d,p,g),t.update(p,r,g)}this.setMode=a,this.render=l,this.renderInstances=f}function kC(o,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");n=o.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function r(B){if(B==="highp"){if(o.getShaderPrecisionFormat(35633,36338).precision>0&&o.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";B="mediump"}return B==="mediump"&&o.getShaderPrecisionFormat(35633,36337).precision>0&&o.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&o instanceof WebGL2RenderingContext;let l=t.precision!==void 0?t.precision:"highp";const f=r(l);f!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",f,"instead."),l=f);const d=a||e.has("WEBGL_draw_buffers"),p=t.logarithmicDepthBuffer===!0,g=o.getParameter(34930),v=o.getParameter(35660),x=o.getParameter(3379),M=o.getParameter(34076),w=o.getParameter(34921),S=o.getParameter(36347),C=o.getParameter(36348),E=o.getParameter(36349),A=v>0,L=a||e.has("OES_texture_float"),D=A&&L,F=a?o.getParameter(36183):0;return{isWebGL2:a,drawBuffers:d,getMaxAnisotropy:i,getMaxPrecision:r,precision:l,logarithmicDepthBuffer:p,maxTextures:g,maxVertexTextures:v,maxTextureSize:x,maxCubemapSize:M,maxAttributes:w,maxVertexUniforms:S,maxVaryings:C,maxFragmentUniforms:E,vertexTextures:A,floatFragmentTextures:L,floatVertexTextures:D,maxSamples:F}}function FC(o){const e=this;let t=null,n=0,i=!1,r=!1;const a=new Ia,l=new ji,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const x=g.length!==0||v||n!==0||i;return i=v,n=g.length,x},this.beginShadows=function(){r=!0,p(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,v){t=p(g,v,0)},this.setState=function(g,v,x){const M=g.clippingPlanes,w=g.clipIntersection,S=g.clipShadows,C=o.get(g);if(!i||M===null||M.length===0||r&&!S)r?p(null):d();else{const E=r?0:n,A=E*4;let L=C.clippingState||null;f.value=L,L=p(M,v,A,x);for(let D=0;D!==A;++D)L[D]=t[D];C.clippingState=L,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=E}};function d(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(g,v,x,M){const w=g!==null?g.length:0;let S=null;if(w!==0){if(S=f.value,M!==!0||S===null){const C=x+w*4,E=v.matrixWorldInverse;l.getNormalMatrix(E),(S===null||S.length<C)&&(S=new Float32Array(C));for(let A=0,L=x;A!==w;++A,L+=4)a.copy(g[A]).applyMatrix4(E,l),a.normal.toArray(S,L),S[L+3]=a.constant}f.value=S,f.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,S}}function NC(o){let e=new WeakMap;function t(a,l){return l===gd?a.mapping=Nl:l===vd&&(a.mapping=Ol),a}function n(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const l=a.mapping;if(l===gd||l===vd)if(e.has(a)){const f=e.get(a).texture;return t(f,a.mapping)}else{const f=a.image;if(f&&f.height>0){const d=new Uw(f.height/2);return d.fromEquirectangularTexture(o,a),e.set(a,d),a.addEventListener("dispose",i),t(d.texture,a.mapping)}else return null}}return a}function i(a){const l=a.target;l.removeEventListener("dispose",i);const f=e.get(l);f!==void 0&&(e.delete(l),f.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}class kl extends Gd{constructor(e=-1,t=1,n=1,i=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,l=i+t,f=i-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=d*this.view.offsetX,a=r+d*this.view.width,l-=p*this.view.offsetY,f=l-p*this.view.height}this.projectionMatrix.makeOrthographic(r,a,l,f,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const bf=4,M1=[.125,.215,.35,.446,.526,.582],Uu=20,U0=new kl,b1=new vt;let B0=null;const Nu=(1+Math.sqrt(5))/2,hf=1/Nu,E1=[new J(1,1,1),new J(-1,1,1),new J(1,1,-1),new J(-1,1,-1),new J(0,Nu,hf),new J(0,Nu,-hf),new J(hf,0,Nu),new J(-hf,0,Nu),new J(Nu,hf,0),new J(-Nu,hf,0)];class Kv{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){B0=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=A1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=C1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(B0),e.scissorTest=!1,mm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Nl||e.mapping===Ol?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),B0=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:qn,minFilter:qn,generateMipmaps:!1,type:kf,format:es,encoding:Ul,depthBuffer:!1},i=T1(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=T1(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=OC(r)),this._blurMaterial=zC(r,e,t)}return i}_compileMaterial(e){const t=new bi(this._lodPlanes[0],e);this._renderer.compile(t,U0)}_sceneToCubeUV(e,t,n,i){const l=new hi(90,1,t,n),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,v=p.toneMapping;p.getClearColor(b1),p.toneMapping=yo,p.autoClear=!1;const x=new Ga({name:"PMREM.Background",side:Or,depthWrite:!1,depthTest:!1}),M=new bi(new Hl,x);let w=!1;const S=e.background;S?S.isColor&&(x.color.copy(S),e.background=null,w=!0):(x.color.copy(b1),w=!0);for(let C=0;C<6;C++){const E=C%3;E===0?(l.up.set(0,f[C],0),l.lookAt(d[C],0,0)):E===1?(l.up.set(0,0,f[C]),l.lookAt(0,d[C],0)):(l.up.set(0,f[C],0),l.lookAt(0,0,d[C]));const A=this._cubeSize;mm(i,E*A,C>2?A:0,A,A),p.setRenderTarget(i),w&&p.render(M,l),p.render(e,l)}M.geometry.dispose(),M.material.dispose(),p.toneMapping=v,p.autoClear=g,e.background=S}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Nl||e.mapping===Ol;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=A1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=C1());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new bi(this._lodPlanes[0],r),l=r.uniforms;l.envMap.value=e;const f=this._cubeSize;mm(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(a,U0)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=E1[(i-1)%E1.length];this._blur(e,i-1,i,r,a)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,l){const f=this._renderer,d=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=new bi(this._lodPlanes[i],d),v=d.uniforms,x=this._sizeLods[n]-1,M=isFinite(r)?Math.PI/(2*x):2*Math.PI/(2*Uu-1),w=r/M,S=isFinite(r)?1+Math.floor(p*w):Uu;S>Uu&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Uu}`);const C=[];let E=0;for(let B=0;B<Uu;++B){const I=B/w,z=Math.exp(-I*I/2);C.push(z),B===0?E+=z:B<S&&(E+=2*z)}for(let B=0;B<C.length;B++)C[B]=C[B]/E;v.envMap.value=e.texture,v.samples.value=S,v.weights.value=C,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:A}=this;v.dTheta.value=M,v.mipInt.value=A-n;const L=this._sizeLods[i],D=3*L*(i>A-bf?i-A+bf:0),F=4*(this._cubeSize-L);mm(t,D,F,3*L,2*L),f.setRenderTarget(t),f.render(g,U0)}}function OC(o){const e=[],t=[],n=[];let i=o;const r=o-bf+1+M1.length;for(let a=0;a<r;a++){const l=Math.pow(2,i);t.push(l);let f=1/l;a>o-bf?f=M1[a-o+bf-1]:a===0&&(f=0),n.push(f);const d=1/(l-2),p=-d,g=1+d,v=[p,p,g,p,g,g,p,p,g,g,p,g],x=6,M=6,w=3,S=2,C=1,E=new Float32Array(w*M*x),A=new Float32Array(S*M*x),L=new Float32Array(C*M*x);for(let F=0;F<x;F++){const B=F%3*2/3-1,I=F>2?0:-1,z=[B,I,0,B+2/3,I,0,B+2/3,I+1,0,B,I,0,B+2/3,I+1,0,B,I+1,0];E.set(z,w*M*F),A.set(v,S*M*F);const V=[F,F,F,F,F,F];L.set(V,C*M*F)}const D=new $t;D.setAttribute("position",new Ln(E,w)),D.setAttribute("uv",new Ln(A,S)),D.setAttribute("faceIndex",new Ln(L,C)),e.push(D),i>bf&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function T1(o,e,t){const n=new xo(o,e,t);return n.texture.mapping=Bf,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function mm(o,e,t,n,i){o.viewport.set(e,t,n,i),o.scissor.set(e,t,n,i)}function zC(o,e,t){const n=new Float32Array(Uu),i=new J(0,1,0);return new Yo({name:"SphericalGaussianBlur",defines:{n:Uu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${o}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Ny(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Na,depthTest:!1,depthWrite:!1})}function C1(){return new Yo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ny(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Na,depthTest:!1,depthWrite:!1})}function A1(){return new Yo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ny(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Na,depthTest:!1,depthWrite:!1})}function Ny(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function UC(o){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const f=l.mapping,d=f===gd||f===vd,p=f===Nl||f===Ol;if(d||p)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let g=e.get(l);return t===null&&(t=new Kv(o)),g=d?t.fromEquirectangular(l,g):t.fromCubemap(l,g),e.set(l,g),g.texture}else{if(e.has(l))return e.get(l).texture;{const g=l.image;if(d&&g&&g.height>0||p&&g&&i(g)){t===null&&(t=new Kv(o));const v=d?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,v),l.addEventListener("dispose",r),v.texture}else return null}}}return l}function i(l){let f=0;const d=6;for(let p=0;p<d;p++)l[p]!==void 0&&f++;return f===d}function r(l){const f=l.target;f.removeEventListener("dispose",r);const d=e.get(f);d!==void 0&&(e.delete(f),d.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function BC(o){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=o.getExtension("WEBGL_depth_texture")||o.getExtension("MOZ_WEBGL_depth_texture")||o.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=o.getExtension("WEBGL_compressed_texture_s3tc")||o.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=o.getExtension("WEBGL_compressed_texture_pvrtc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=o.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function GC(o,e,t,n){const i={},r=new WeakMap;function a(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const M in v.attributes)e.remove(v.attributes[M]);v.removeEventListener("dispose",a),delete i[v.id];const x=r.get(v);x&&(e.remove(x),r.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return i[v.id]===!0||(v.addEventListener("dispose",a),i[v.id]=!0,t.memory.geometries++),v}function f(g){const v=g.attributes;for(const M in v)e.update(v[M],34962);const x=g.morphAttributes;for(const M in x){const w=x[M];for(let S=0,C=w.length;S<C;S++)e.update(w[S],34962)}}function d(g){const v=[],x=g.index,M=g.attributes.position;let w=0;if(x!==null){const E=x.array;w=x.version;for(let A=0,L=E.length;A<L;A+=3){const D=E[A+0],F=E[A+1],B=E[A+2];v.push(D,F,F,B,B,D)}}else{const E=M.array;w=M.version;for(let A=0,L=E.length/3-1;A<L;A+=3){const D=A+0,F=A+1,B=A+2;v.push(D,F,F,B,B,D)}}const S=new(Fw(v)?ky:Dy)(v,1);S.version=w;const C=r.get(g);C&&e.remove(C),r.set(g,S)}function p(g){const v=r.get(g);if(v){const x=g.index;x!==null&&v.version<x.version&&d(g)}else d(g);return r.get(g)}return{get:l,update:f,getWireframeAttribute:p}}function VC(o,e,t,n){const i=n.isWebGL2;let r;function a(v){r=v}let l,f;function d(v){l=v.type,f=v.bytesPerElement}function p(v,x){o.drawElements(r,x,l,v*f),t.update(x,r,1)}function g(v,x,M){if(M===0)return;let w,S;if(i)w=o,S="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[S](r,x,l,v*f,M),t.update(x,r,M)}this.setMode=a,this.setIndex=d,this.render=p,this.renderInstances=g}function WC(o){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,l){switch(t.calls++,a){case 4:t.triangles+=l*(r/3);break;case 1:t.lines+=l*(r/2);break;case 3:t.lines+=l*(r-1);break;case 2:t.lines+=l*r;break;case 0:t.points+=l*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function HC(o,e){return o[0]-e[0]}function jC(o,e){return Math.abs(e[1])-Math.abs(o[1])}function XC(o,e,t){const n={},i=new Float32Array(8),r=new WeakMap,a=new gn,l=[];for(let d=0;d<8;d++)l[d]=[d,0];function f(d,p,g){const v=d.morphTargetInfluences;if(e.isWebGL2===!0){const M=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,w=M!==void 0?M.length:0;let S=r.get(p);if(S===void 0||S.count!==w){let oe=function(){K.dispose(),r.delete(p),p.removeEventListener("dispose",oe)};var x=oe;S!==void 0&&S.texture.dispose();const A=p.morphAttributes.position!==void 0,L=p.morphAttributes.normal!==void 0,D=p.morphAttributes.color!==void 0,F=p.morphAttributes.position||[],B=p.morphAttributes.normal||[],I=p.morphAttributes.color||[];let z=0;A===!0&&(z=1),L===!0&&(z=2),D===!0&&(z=3);let V=p.attributes.position.count*z,te=1;V>e.maxTextureSize&&(te=Math.ceil(V/e.maxTextureSize),V=e.maxTextureSize);const X=new Float32Array(V*te*4*w),K=new yg(X,V,te,w);K.type=ka,K.needsUpdate=!0;const q=z*4;for(let ce=0;ce<w;ce++){const ye=F[ce],H=B[ce],Q=I[ce],Y=V*te*4*ce;for(let N=0;N<ye.count;N++){const O=N*q;A===!0&&(a.fromBufferAttribute(ye,N),X[Y+O+0]=a.x,X[Y+O+1]=a.y,X[Y+O+2]=a.z,X[Y+O+3]=0),L===!0&&(a.fromBufferAttribute(H,N),X[Y+O+4]=a.x,X[Y+O+5]=a.y,X[Y+O+6]=a.z,X[Y+O+7]=0),D===!0&&(a.fromBufferAttribute(Q,N),X[Y+O+8]=a.x,X[Y+O+9]=a.y,X[Y+O+10]=a.z,X[Y+O+11]=Q.itemSize===4?a.w:1)}}S={count:w,texture:K,size:new Ve(V,te)},r.set(p,S),p.addEventListener("dispose",oe)}let C=0;for(let A=0;A<v.length;A++)C+=v[A];const E=p.morphTargetsRelative?1:1-C;g.getUniforms().setValue(o,"morphTargetBaseInfluence",E),g.getUniforms().setValue(o,"morphTargetInfluences",v),g.getUniforms().setValue(o,"morphTargetsTexture",S.texture,t),g.getUniforms().setValue(o,"morphTargetsTextureSize",S.size)}else{const M=v===void 0?0:v.length;let w=n[p.id];if(w===void 0||w.length!==M){w=[];for(let L=0;L<M;L++)w[L]=[L,0];n[p.id]=w}for(let L=0;L<M;L++){const D=w[L];D[0]=L,D[1]=v[L]}w.sort(jC);for(let L=0;L<8;L++)L<M&&w[L][1]?(l[L][0]=w[L][0],l[L][1]=w[L][1]):(l[L][0]=Number.MAX_SAFE_INTEGER,l[L][1]=0);l.sort(HC);const S=p.morphAttributes.position,C=p.morphAttributes.normal;let E=0;for(let L=0;L<8;L++){const D=l[L],F=D[0],B=D[1];F!==Number.MAX_SAFE_INTEGER&&B?(S&&p.getAttribute("morphTarget"+L)!==S[F]&&p.setAttribute("morphTarget"+L,S[F]),C&&p.getAttribute("morphNormal"+L)!==C[F]&&p.setAttribute("morphNormal"+L,C[F]),i[L]=B,E+=B):(S&&p.hasAttribute("morphTarget"+L)===!0&&p.deleteAttribute("morphTarget"+L),C&&p.hasAttribute("morphNormal"+L)===!0&&p.deleteAttribute("morphNormal"+L),i[L]=0)}const A=p.morphTargetsRelative?1:1-E;g.getUniforms().setValue(o,"morphTargetBaseInfluence",A),g.getUniforms().setValue(o,"morphTargetInfluences",i)}}return{update:f}}function YC(o,e,t,n){let i=new WeakMap;function r(f){const d=n.render.frame,p=f.geometry,g=e.get(f,p);return i.get(g)!==d&&(e.update(g),i.set(g,d)),f.isInstancedMesh&&(f.hasEventListener("dispose",l)===!1&&f.addEventListener("dispose",l),t.update(f.instanceMatrix,34962),f.instanceColor!==null&&t.update(f.instanceColor,34962)),g}function a(){i=new WeakMap}function l(f){const d=f.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:r,dispose:a}}const Gw=new Jn,Vw=new yg,Ww=new Iy,Hw=new Vd,P1=[],L1=[],R1=new Float32Array(16),I1=new Float32Array(9),D1=new Float32Array(4);function Vf(o,e,t){const n=o[0];if(n<=0||n>0)return o;const i=e*t;let r=P1[i];if(r===void 0&&(r=new Float32Array(i),P1[i]=r),e!==0){n.toArray(r,0);for(let a=1,l=0;a!==e;++a)l+=t,o[a].toArray(r,l)}return r}function Fi(o,e){if(o.length!==e.length)return!1;for(let t=0,n=o.length;t<n;t++)if(o[t]!==e[t])return!1;return!0}function Ni(o,e){for(let t=0,n=e.length;t<n;t++)o[t]=e[t]}function _g(o,e){let t=L1[e];t===void 0&&(t=new Int32Array(e),L1[e]=t);for(let n=0;n!==e;++n)t[n]=o.allocateTextureUnit();return t}function qC(o,e){const t=this.cache;t[0]!==e&&(o.uniform1f(this.addr,e),t[0]=e)}function ZC(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(o.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fi(t,e))return;o.uniform2fv(this.addr,e),Ni(t,e)}}function JC(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(o.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(o.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Fi(t,e))return;o.uniform3fv(this.addr,e),Ni(t,e)}}function QC(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(o.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fi(t,e))return;o.uniform4fv(this.addr,e),Ni(t,e)}}function KC(o,e){const t=this.cache,n=e.elements;if(n===void 0){if(Fi(t,e))return;o.uniformMatrix2fv(this.addr,!1,e),Ni(t,e)}else{if(Fi(t,n))return;D1.set(n),o.uniformMatrix2fv(this.addr,!1,D1),Ni(t,n)}}function $C(o,e){const t=this.cache,n=e.elements;if(n===void 0){if(Fi(t,e))return;o.uniformMatrix3fv(this.addr,!1,e),Ni(t,e)}else{if(Fi(t,n))return;I1.set(n),o.uniformMatrix3fv(this.addr,!1,I1),Ni(t,n)}}function eA(o,e){const t=this.cache,n=e.elements;if(n===void 0){if(Fi(t,e))return;o.uniformMatrix4fv(this.addr,!1,e),Ni(t,e)}else{if(Fi(t,n))return;R1.set(n),o.uniformMatrix4fv(this.addr,!1,R1),Ni(t,n)}}function tA(o,e){const t=this.cache;t[0]!==e&&(o.uniform1i(this.addr,e),t[0]=e)}function nA(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(o.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fi(t,e))return;o.uniform2iv(this.addr,e),Ni(t,e)}}function iA(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(o.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Fi(t,e))return;o.uniform3iv(this.addr,e),Ni(t,e)}}function rA(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(o.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fi(t,e))return;o.uniform4iv(this.addr,e),Ni(t,e)}}function sA(o,e){const t=this.cache;t[0]!==e&&(o.uniform1ui(this.addr,e),t[0]=e)}function oA(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(o.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fi(t,e))return;o.uniform2uiv(this.addr,e),Ni(t,e)}}function aA(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(o.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Fi(t,e))return;o.uniform3uiv(this.addr,e),Ni(t,e)}}function lA(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(o.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fi(t,e))return;o.uniform4uiv(this.addr,e),Ni(t,e)}}function uA(o,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(o.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||Gw,i)}function cA(o,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(o.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||Ww,i)}function fA(o,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(o.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||Hw,i)}function hA(o,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(o.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||Vw,i)}function dA(o){switch(o){case 5126:return qC;case 35664:return ZC;case 35665:return JC;case 35666:return QC;case 35674:return KC;case 35675:return $C;case 35676:return eA;case 5124:case 35670:return tA;case 35667:case 35671:return nA;case 35668:case 35672:return iA;case 35669:case 35673:return rA;case 5125:return sA;case 36294:return oA;case 36295:return aA;case 36296:return lA;case 35678:case 36198:case 36298:case 36306:case 35682:return uA;case 35679:case 36299:case 36307:return cA;case 35680:case 36300:case 36308:case 36293:return fA;case 36289:case 36303:case 36311:case 36292:return hA}}function pA(o,e){o.uniform1fv(this.addr,e)}function mA(o,e){const t=Vf(e,this.size,2);o.uniform2fv(this.addr,t)}function gA(o,e){const t=Vf(e,this.size,3);o.uniform3fv(this.addr,t)}function vA(o,e){const t=Vf(e,this.size,4);o.uniform4fv(this.addr,t)}function yA(o,e){const t=Vf(e,this.size,4);o.uniformMatrix2fv(this.addr,!1,t)}function xA(o,e){const t=Vf(e,this.size,9);o.uniformMatrix3fv(this.addr,!1,t)}function _A(o,e){const t=Vf(e,this.size,16);o.uniformMatrix4fv(this.addr,!1,t)}function SA(o,e){o.uniform1iv(this.addr,e)}function wA(o,e){o.uniform2iv(this.addr,e)}function MA(o,e){o.uniform3iv(this.addr,e)}function bA(o,e){o.uniform4iv(this.addr,e)}function EA(o,e){o.uniform1uiv(this.addr,e)}function TA(o,e){o.uniform2uiv(this.addr,e)}function CA(o,e){o.uniform3uiv(this.addr,e)}function AA(o,e){o.uniform4uiv(this.addr,e)}function PA(o,e,t){const n=this.cache,i=e.length,r=_g(t,i);Fi(n,r)||(o.uniform1iv(this.addr,r),Ni(n,r));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||Gw,r[a])}function LA(o,e,t){const n=this.cache,i=e.length,r=_g(t,i);Fi(n,r)||(o.uniform1iv(this.addr,r),Ni(n,r));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||Ww,r[a])}function RA(o,e,t){const n=this.cache,i=e.length,r=_g(t,i);Fi(n,r)||(o.uniform1iv(this.addr,r),Ni(n,r));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||Hw,r[a])}function IA(o,e,t){const n=this.cache,i=e.length,r=_g(t,i);Fi(n,r)||(o.uniform1iv(this.addr,r),Ni(n,r));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||Vw,r[a])}function DA(o){switch(o){case 5126:return pA;case 35664:return mA;case 35665:return gA;case 35666:return vA;case 35674:return yA;case 35675:return xA;case 35676:return _A;case 5124:case 35670:return SA;case 35667:case 35671:return wA;case 35668:case 35672:return MA;case 35669:case 35673:return bA;case 5125:return EA;case 36294:return TA;case 36295:return CA;case 36296:return AA;case 35678:case 36198:case 36298:case 36306:case 35682:return PA;case 35679:case 36299:case 36307:return LA;case 35680:case 36300:case 36308:case 36293:return RA;case 36289:case 36303:case 36311:case 36292:return IA}}class kA{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=dA(t.type)}}class FA{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=DA(t.type)}}class NA{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const l=i[r];l.setValue(e,t[l.id],n)}}}const G0=/(\w+)(\])?(\[|\.)?/g;function k1(o,e){o.seq.push(e),o.map[e.id]=e}function OA(o,e,t){const n=o.name,i=n.length;for(G0.lastIndex=0;;){const r=G0.exec(n),a=G0.lastIndex;let l=r[1];const f=r[2]==="]",d=r[3];if(f&&(l=l|0),d===void 0||d==="["&&a+2===i){k1(t,d===void 0?new kA(l,o,e):new FA(l,o,e));break}else{let g=t.map[l];g===void 0&&(g=new NA(l),k1(t,g)),t=g}}}class Qm{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const r=e.getActiveUniform(t,i),a=e.getUniformLocation(t,r.name);OA(r,a,this)}}setValue(e,t,n,i){const r=this.map[t];r!==void 0&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const l=t[r],f=n[l.id];f.needsUpdate!==!1&&l.setValue(e,f.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const a=e[i];a.id in t&&n.push(a)}return n}}function F1(o,e,t){const n=o.createShader(e);return o.shaderSource(n,t),o.compileShader(n),n}let zA=0;function UA(o,e){const t=o.split(`
`),n=[],i=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let a=i;a<r;a++){const l=a+1;n.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return n.join(`
`)}function BA(o){switch(o){case Ul:return["Linear","( value )"];case kn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",o),["Linear","( value )"]}}function N1(o,e,t){const n=o.getShaderParameter(e,35713),i=o.getShaderInfoLog(e).trim();if(n&&i==="")return"";const r=/ERROR: 0:(\d+)/.exec(i);if(r){const a=parseInt(r[1]);return t.toUpperCase()+`

`+i+`

`+UA(o.getShaderSource(e),a)}else return i}function GA(o,e){const t=BA(e);return"vec4 "+o+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function VA(o,e){let t;switch(e){case lw:t="Linear";break;case uw:t="Reinhard";break;case cw:t="OptimizedCineon";break;case by:t="ACESFilmic";break;case fw:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+o+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function WA(o){return[o.extensionDerivatives||o.envMapCubeUVHeight||o.bumpMap||o.tangentSpaceNormalMap||o.clearcoatNormalMap||o.flatShading||o.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(o.extensionFragDepth||o.logarithmicDepthBuffer)&&o.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",o.extensionDrawBuffers&&o.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(o.extensionShaderTextureLOD||o.envMap||o.transmission)&&o.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rd).join(`
`)}function HA(o){const e=[];for(const t in o){const n=o[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function jA(o,e){const t={},n=o.getProgramParameter(e,35721);for(let i=0;i<n;i++){const r=o.getActiveAttrib(e,i),a=r.name;let l=1;r.type===35674&&(l=2),r.type===35675&&(l=3),r.type===35676&&(l=4),t[a]={type:r.type,location:o.getAttribLocation(e,a),locationSize:l}}return t}function rd(o){return o!==""}function O1(o,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return o.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function z1(o,e){return o.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const XA=/^[ \t]*#include +<([\w\d./]+)>/gm;function $v(o){return o.replace(XA,YA)}function YA(o,e){const t=Kt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return $v(t)}const qA=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function U1(o){return o.replace(qA,ZA)}function ZA(o,e,t,n){let i="";for(let r=parseInt(e);r<parseInt(t);r++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return i}function B1(o){let e="precision "+o.precision+` float;
precision `+o.precision+" int;";return o.precision==="highp"?e+=`
#define HIGH_PRECISION`:o.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:o.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function JA(o){let e="SHADOWMAP_TYPE_BASIC";return o.shadowMapType===mg?e="SHADOWMAP_TYPE_PCF":o.shadowMapType===od?e="SHADOWMAP_TYPE_PCF_SOFT":o.shadowMapType===Gu&&(e="SHADOWMAP_TYPE_VSM"),e}function QA(o){let e="ENVMAP_TYPE_CUBE";if(o.envMap)switch(o.envMapMode){case Nl:case Ol:e="ENVMAP_TYPE_CUBE";break;case Bf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function KA(o){let e="ENVMAP_MODE_REFLECTION";if(o.envMap)switch(o.envMapMode){case Ol:e="ENVMAP_MODE_REFRACTION";break}return e}function $A(o){let e="ENVMAP_BLENDING_NONE";if(o.envMap)switch(o.combine){case Ud:e="ENVMAP_BLENDING_MULTIPLY";break;case ow:e="ENVMAP_BLENDING_MIX";break;case aw:e="ENVMAP_BLENDING_ADD";break}return e}function eP(o){const e=o.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function tP(o,e,t,n){const i=o.getContext(),r=t.defines;let a=t.vertexShader,l=t.fragmentShader;const f=JA(t),d=QA(t),p=KA(t),g=$A(t),v=eP(t),x=t.isWebGL2?"":WA(t),M=HA(r),w=i.createProgram();let S,C,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=[M].filter(rd).join(`
`),S.length>0&&(S+=`
`),C=[x,M].filter(rd).join(`
`),C.length>0&&(C+=`
`)):(S=[B1(t),"#define SHADER_NAME "+t.shaderName,M,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(rd).join(`
`),C=[x,B1(t),"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==yo?"#define TONE_MAPPING":"",t.toneMapping!==yo?Kt.tonemapping_pars_fragment:"",t.toneMapping!==yo?VA("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Kt.encodings_pars_fragment,GA("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(rd).join(`
`)),a=$v(a),a=O1(a,t),a=z1(a,t),l=$v(l),l=O1(l,t),l=z1(l,t),a=U1(a),l=U1(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,S=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,C=["#define varying in",t.glslVersion===Jv?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Jv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);const A=E+S+a,L=E+C+l,D=F1(i,35633,A),F=F1(i,35632,L);if(i.attachShader(w,D),i.attachShader(w,F),t.index0AttributeName!==void 0?i.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w),o.debug.checkShaderErrors){const z=i.getProgramInfoLog(w).trim(),V=i.getShaderInfoLog(D).trim(),te=i.getShaderInfoLog(F).trim();let X=!0,K=!0;if(i.getProgramParameter(w,35714)===!1){X=!1;const q=N1(i,D,"vertex"),oe=N1(i,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(w,35715)+`

Program Info Log: `+z+`
`+q+`
`+oe)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(V===""||te==="")&&(K=!1);K&&(this.diagnostics={runnable:X,programLog:z,vertexShader:{log:V,prefix:S},fragmentShader:{log:te,prefix:C}})}i.deleteShader(D),i.deleteShader(F);let B;this.getUniforms=function(){return B===void 0&&(B=new Qm(i,w)),B};let I;return this.getAttributes=function(){return I===void 0&&(I=jA(i,w)),I},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(w),this.program=void 0},this.name=t.shaderName,this.id=zA++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=D,this.fragmentShader=F,this}let nP=0;class iP{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new rP(e),t.set(e,n)),n}}class rP{constructor(e){this.id=nP++,this.code=e,this.usedTimes=0}}function sP(o,e,t,n,i,r,a){const l=new Zu,f=new iP,d=[],p=i.isWebGL2,g=i.logarithmicDepthBuffer,v=i.vertexTextures;let x=i.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(I,z,V,te,X){const K=te.fog,q=X.geometry,oe=I.isMeshStandardMaterial?te.environment:null,ce=(I.isMeshStandardMaterial?t:e).get(I.envMap||oe),ye=ce&&ce.mapping===Bf?ce.image.height:null,H=M[I.type];I.precision!==null&&(x=i.getMaxPrecision(I.precision),x!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",x,"instead."));const Q=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,Y=Q!==void 0?Q.length:0;let N=0;q.morphAttributes.position!==void 0&&(N=1),q.morphAttributes.normal!==void 0&&(N=2),q.morphAttributes.color!==void 0&&(N=3);let O,re,se,Z;if(H){const ke=po[H];O=ke.vertexShader,re=ke.fragmentShader}else O=I.vertexShader,re=I.fragmentShader,f.update(I),se=f.getVertexShaderID(I),Z=f.getFragmentShaderID(I);const he=o.getRenderTarget(),ue=I.alphaTest>0,me=I.clearcoat>0,we=I.iridescence>0;return{isWebGL2:p,shaderID:H,shaderName:I.type,vertexShader:O,fragmentShader:re,defines:I.defines,customVertexShaderID:se,customFragmentShaderID:Z,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:x,instancing:X.isInstancedMesh===!0,instancingColor:X.isInstancedMesh===!0&&X.instanceColor!==null,supportsVertexTextures:v,outputEncoding:he===null?o.outputEncoding:he.isXRRenderTarget===!0?he.texture.encoding:Ul,map:!!I.map,matcap:!!I.matcap,envMap:!!ce,envMapMode:ce&&ce.mapping,envMapCubeUVHeight:ye,lightMap:!!I.lightMap,aoMap:!!I.aoMap,emissiveMap:!!I.emissiveMap,bumpMap:!!I.bumpMap,normalMap:!!I.normalMap,objectSpaceNormalMap:I.normalMapType===Rw,tangentSpaceNormalMap:I.normalMapType===Gl,decodeVideoTexture:!!I.map&&I.map.isVideoTexture===!0&&I.map.encoding===kn,clearcoat:me,clearcoatMap:me&&!!I.clearcoatMap,clearcoatRoughnessMap:me&&!!I.clearcoatRoughnessMap,clearcoatNormalMap:me&&!!I.clearcoatNormalMap,iridescence:we,iridescenceMap:we&&!!I.iridescenceMap,iridescenceThicknessMap:we&&!!I.iridescenceThicknessMap,displacementMap:!!I.displacementMap,roughnessMap:!!I.roughnessMap,metalnessMap:!!I.metalnessMap,specularMap:!!I.specularMap,specularIntensityMap:!!I.specularIntensityMap,specularColorMap:!!I.specularColorMap,opaque:I.transparent===!1&&I.blending===Xu,alphaMap:!!I.alphaMap,alphaTest:ue,gradientMap:!!I.gradientMap,sheen:I.sheen>0,sheenColorMap:!!I.sheenColorMap,sheenRoughnessMap:!!I.sheenRoughnessMap,transmission:I.transmission>0,transmissionMap:!!I.transmissionMap,thicknessMap:!!I.thicknessMap,combine:I.combine,vertexTangents:!!I.normalMap&&!!q.attributes.tangent,vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,vertexUvs:!!I.map||!!I.bumpMap||!!I.normalMap||!!I.specularMap||!!I.alphaMap||!!I.emissiveMap||!!I.roughnessMap||!!I.metalnessMap||!!I.clearcoatMap||!!I.clearcoatRoughnessMap||!!I.clearcoatNormalMap||!!I.iridescenceMap||!!I.iridescenceThicknessMap||!!I.displacementMap||!!I.transmissionMap||!!I.thicknessMap||!!I.specularIntensityMap||!!I.specularColorMap||!!I.sheenColorMap||!!I.sheenRoughnessMap,uvsVertexOnly:!(I.map||I.bumpMap||I.normalMap||I.specularMap||I.alphaMap||I.emissiveMap||I.roughnessMap||I.metalnessMap||I.clearcoatNormalMap||I.iridescenceMap||I.iridescenceThicknessMap||I.transmission>0||I.transmissionMap||I.thicknessMap||I.specularIntensityMap||I.specularColorMap||I.sheen>0||I.sheenColorMap||I.sheenRoughnessMap)&&!!I.displacementMap,fog:!!K,useFog:I.fog===!0,fogExp2:K&&K.isFogExp2,flatShading:!!I.flatShading,sizeAttenuation:I.sizeAttenuation,logarithmicDepthBuffer:g,skinning:X.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:N,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:I.dithering,shadowMapEnabled:o.shadowMap.enabled&&V.length>0,shadowMapType:o.shadowMap.type,toneMapping:I.toneMapped?o.toneMapping:yo,useLegacyLights:o.useLegacyLights,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===go,flipSided:I.side===Or,useDepthPacking:!!I.depthPacking,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:I.extensions&&I.extensions.derivatives,extensionFragDepth:I.extensions&&I.extensions.fragDepth,extensionDrawBuffers:I.extensions&&I.extensions.drawBuffers,extensionShaderTextureLOD:I.extensions&&I.extensions.shaderTextureLOD,rendererExtensionFragDepth:p||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||n.has("EXT_shader_texture_lod"),customProgramCacheKey:I.customProgramCacheKey()}}function S(I){const z=[];if(I.shaderID?z.push(I.shaderID):(z.push(I.customVertexShaderID),z.push(I.customFragmentShaderID)),I.defines!==void 0)for(const V in I.defines)z.push(V),z.push(I.defines[V]);return I.isRawShaderMaterial===!1&&(C(z,I),E(z,I),z.push(o.outputEncoding)),z.push(I.customProgramCacheKey),z.join()}function C(I,z){I.push(z.precision),I.push(z.outputEncoding),I.push(z.envMapMode),I.push(z.envMapCubeUVHeight),I.push(z.combine),I.push(z.vertexUvs),I.push(z.fogExp2),I.push(z.sizeAttenuation),I.push(z.morphTargetsCount),I.push(z.morphAttributeCount),I.push(z.numDirLights),I.push(z.numPointLights),I.push(z.numSpotLights),I.push(z.numSpotLightMaps),I.push(z.numHemiLights),I.push(z.numRectAreaLights),I.push(z.numDirLightShadows),I.push(z.numPointLightShadows),I.push(z.numSpotLightShadows),I.push(z.numSpotLightShadowsWithMaps),I.push(z.shadowMapType),I.push(z.toneMapping),I.push(z.numClippingPlanes),I.push(z.numClipIntersection),I.push(z.depthPacking)}function E(I,z){l.disableAll(),z.isWebGL2&&l.enable(0),z.supportsVertexTextures&&l.enable(1),z.instancing&&l.enable(2),z.instancingColor&&l.enable(3),z.map&&l.enable(4),z.matcap&&l.enable(5),z.envMap&&l.enable(6),z.lightMap&&l.enable(7),z.aoMap&&l.enable(8),z.emissiveMap&&l.enable(9),z.bumpMap&&l.enable(10),z.normalMap&&l.enable(11),z.objectSpaceNormalMap&&l.enable(12),z.tangentSpaceNormalMap&&l.enable(13),z.clearcoat&&l.enable(14),z.clearcoatMap&&l.enable(15),z.clearcoatRoughnessMap&&l.enable(16),z.clearcoatNormalMap&&l.enable(17),z.iridescence&&l.enable(18),z.iridescenceMap&&l.enable(19),z.iridescenceThicknessMap&&l.enable(20),z.displacementMap&&l.enable(21),z.specularMap&&l.enable(22),z.roughnessMap&&l.enable(23),z.metalnessMap&&l.enable(24),z.gradientMap&&l.enable(25),z.alphaMap&&l.enable(26),z.alphaTest&&l.enable(27),z.vertexColors&&l.enable(28),z.vertexAlphas&&l.enable(29),z.vertexUvs&&l.enable(30),z.vertexTangents&&l.enable(31),z.uvsVertexOnly&&l.enable(32),I.push(l.mask),l.disableAll(),z.fog&&l.enable(0),z.useFog&&l.enable(1),z.flatShading&&l.enable(2),z.logarithmicDepthBuffer&&l.enable(3),z.skinning&&l.enable(4),z.morphTargets&&l.enable(5),z.morphNormals&&l.enable(6),z.morphColors&&l.enable(7),z.premultipliedAlpha&&l.enable(8),z.shadowMapEnabled&&l.enable(9),z.useLegacyLights&&l.enable(10),z.doubleSided&&l.enable(11),z.flipSided&&l.enable(12),z.useDepthPacking&&l.enable(13),z.dithering&&l.enable(14),z.specularIntensityMap&&l.enable(15),z.specularColorMap&&l.enable(16),z.transmission&&l.enable(17),z.transmissionMap&&l.enable(18),z.thicknessMap&&l.enable(19),z.sheen&&l.enable(20),z.sheenColorMap&&l.enable(21),z.sheenRoughnessMap&&l.enable(22),z.decodeVideoTexture&&l.enable(23),z.opaque&&l.enable(24),I.push(l.mask)}function A(I){const z=M[I.type];let V;if(z){const te=po[z];V=Fy.clone(te.uniforms)}else V=I.uniforms;return V}function L(I,z){let V;for(let te=0,X=d.length;te<X;te++){const K=d[te];if(K.cacheKey===z){V=K,++V.usedTimes;break}}return V===void 0&&(V=new tP(o,z,I,r),d.push(V)),V}function D(I){if(--I.usedTimes===0){const z=d.indexOf(I);d[z]=d[d.length-1],d.pop(),I.destroy()}}function F(I){f.remove(I)}function B(){f.dispose()}return{getParameters:w,getProgramCacheKey:S,getUniforms:A,acquireProgram:L,releaseProgram:D,releaseShaderCache:F,programs:d,dispose:B}}function oP(){let o=new WeakMap;function e(r){let a=o.get(r);return a===void 0&&(a={},o.set(r,a)),a}function t(r){o.delete(r)}function n(r,a,l){o.get(r)[a]=l}function i(){o=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function aP(o,e){return o.groupOrder!==e.groupOrder?o.groupOrder-e.groupOrder:o.renderOrder!==e.renderOrder?o.renderOrder-e.renderOrder:o.material.id!==e.material.id?o.material.id-e.material.id:o.z!==e.z?o.z-e.z:o.id-e.id}function G1(o,e){return o.groupOrder!==e.groupOrder?o.groupOrder-e.groupOrder:o.renderOrder!==e.renderOrder?o.renderOrder-e.renderOrder:o.z!==e.z?e.z-o.z:o.id-e.id}function V1(){const o=[];let e=0;const t=[],n=[],i=[];function r(){e=0,t.length=0,n.length=0,i.length=0}function a(g,v,x,M,w,S){let C=o[e];return C===void 0?(C={id:g.id,object:g,geometry:v,material:x,groupOrder:M,renderOrder:g.renderOrder,z:w,group:S},o[e]=C):(C.id=g.id,C.object=g,C.geometry=v,C.material=x,C.groupOrder=M,C.renderOrder=g.renderOrder,C.z=w,C.group=S),e++,C}function l(g,v,x,M,w,S){const C=a(g,v,x,M,w,S);x.transmission>0?n.push(C):x.transparent===!0?i.push(C):t.push(C)}function f(g,v,x,M,w,S){const C=a(g,v,x,M,w,S);x.transmission>0?n.unshift(C):x.transparent===!0?i.unshift(C):t.unshift(C)}function d(g,v){t.length>1&&t.sort(g||aP),n.length>1&&n.sort(v||G1),i.length>1&&i.sort(v||G1)}function p(){for(let g=e,v=o.length;g<v;g++){const x=o[g];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:n,transparent:i,init:r,push:l,unshift:f,finish:p,sort:d}}function lP(){let o=new WeakMap;function e(n,i){const r=o.get(n);let a;return r===void 0?(a=new V1,o.set(n,[a])):i>=r.length?(a=new V1,r.push(a)):a=r[i],a}function t(){o=new WeakMap}return{get:e,dispose:t}}function uP(){const o={};return{get:function(e){if(o[e.id]!==void 0)return o[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new vt};break;case"SpotLight":t={position:new J,direction:new J,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new vt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":t={color:new vt,position:new J,halfWidth:new J,halfHeight:new J};break}return o[e.id]=t,t}}}function cP(){const o={};return{get:function(e){if(o[e.id]!==void 0)return o[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return o[e.id]=t,t}}}let fP=0;function hP(o,e){return(e.castShadow?2:0)-(o.castShadow?2:0)+(e.map?1:0)-(o.map?1:0)}function dP(o,e){const t=new uP,n=cP(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let p=0;p<9;p++)i.probe.push(new J);const r=new J,a=new Jt,l=new Jt;function f(p,g){let v=0,x=0,M=0;for(let te=0;te<9;te++)i.probe[te].set(0,0,0);let w=0,S=0,C=0,E=0,A=0,L=0,D=0,F=0,B=0,I=0;p.sort(hP);const z=g===!0?Math.PI:1;for(let te=0,X=p.length;te<X;te++){const K=p[te],q=K.color,oe=K.intensity,ce=K.distance,ye=K.shadow&&K.shadow.map?K.shadow.map.texture:null;if(K.isAmbientLight)v+=q.r*oe*z,x+=q.g*oe*z,M+=q.b*oe*z;else if(K.isLightProbe)for(let H=0;H<9;H++)i.probe[H].addScaledVector(K.sh.coefficients[H],oe);else if(K.isDirectionalLight){const H=t.get(K);if(H.color.copy(K.color).multiplyScalar(K.intensity*z),K.castShadow){const Q=K.shadow,Y=n.get(K);Y.shadowBias=Q.bias,Y.shadowNormalBias=Q.normalBias,Y.shadowRadius=Q.radius,Y.shadowMapSize=Q.mapSize,i.directionalShadow[w]=Y,i.directionalShadowMap[w]=ye,i.directionalShadowMatrix[w]=K.shadow.matrix,L++}i.directional[w]=H,w++}else if(K.isSpotLight){const H=t.get(K);H.position.setFromMatrixPosition(K.matrixWorld),H.color.copy(q).multiplyScalar(oe*z),H.distance=ce,H.coneCos=Math.cos(K.angle),H.penumbraCos=Math.cos(K.angle*(1-K.penumbra)),H.decay=K.decay,i.spot[C]=H;const Q=K.shadow;if(K.map&&(i.spotLightMap[B]=K.map,B++,Q.updateMatrices(K),K.castShadow&&I++),i.spotLightMatrix[C]=Q.matrix,K.castShadow){const Y=n.get(K);Y.shadowBias=Q.bias,Y.shadowNormalBias=Q.normalBias,Y.shadowRadius=Q.radius,Y.shadowMapSize=Q.mapSize,i.spotShadow[C]=Y,i.spotShadowMap[C]=ye,F++}C++}else if(K.isRectAreaLight){const H=t.get(K);H.color.copy(q).multiplyScalar(oe),H.halfWidth.set(K.width*.5,0,0),H.halfHeight.set(0,K.height*.5,0),i.rectArea[E]=H,E++}else if(K.isPointLight){const H=t.get(K);if(H.color.copy(K.color).multiplyScalar(K.intensity*z),H.distance=K.distance,H.decay=K.decay,K.castShadow){const Q=K.shadow,Y=n.get(K);Y.shadowBias=Q.bias,Y.shadowNormalBias=Q.normalBias,Y.shadowRadius=Q.radius,Y.shadowMapSize=Q.mapSize,Y.shadowCameraNear=Q.camera.near,Y.shadowCameraFar=Q.camera.far,i.pointShadow[S]=Y,i.pointShadowMap[S]=ye,i.pointShadowMatrix[S]=K.shadow.matrix,D++}i.point[S]=H,S++}else if(K.isHemisphereLight){const H=t.get(K);H.skyColor.copy(K.color).multiplyScalar(oe*z),H.groundColor.copy(K.groundColor).multiplyScalar(oe*z),i.hemi[A]=H,A++}}E>0&&(e.isWebGL2||o.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_FLOAT_1,i.rectAreaLTC2=dt.LTC_FLOAT_2):o.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_HALF_1,i.rectAreaLTC2=dt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=v,i.ambient[1]=x,i.ambient[2]=M;const V=i.hash;(V.directionalLength!==w||V.pointLength!==S||V.spotLength!==C||V.rectAreaLength!==E||V.hemiLength!==A||V.numDirectionalShadows!==L||V.numPointShadows!==D||V.numSpotShadows!==F||V.numSpotMaps!==B)&&(i.directional.length=w,i.spot.length=C,i.rectArea.length=E,i.point.length=S,i.hemi.length=A,i.directionalShadow.length=L,i.directionalShadowMap.length=L,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=F,i.spotShadowMap.length=F,i.directionalShadowMatrix.length=L,i.pointShadowMatrix.length=D,i.spotLightMatrix.length=F+B-I,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=I,V.directionalLength=w,V.pointLength=S,V.spotLength=C,V.rectAreaLength=E,V.hemiLength=A,V.numDirectionalShadows=L,V.numPointShadows=D,V.numSpotShadows=F,V.numSpotMaps=B,i.version=fP++)}function d(p,g){let v=0,x=0,M=0,w=0,S=0;const C=g.matrixWorldInverse;for(let E=0,A=p.length;E<A;E++){const L=p[E];if(L.isDirectionalLight){const D=i.directional[v];D.direction.setFromMatrixPosition(L.matrixWorld),r.setFromMatrixPosition(L.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(C),v++}else if(L.isSpotLight){const D=i.spot[M];D.position.setFromMatrixPosition(L.matrixWorld),D.position.applyMatrix4(C),D.direction.setFromMatrixPosition(L.matrixWorld),r.setFromMatrixPosition(L.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(C),M++}else if(L.isRectAreaLight){const D=i.rectArea[w];D.position.setFromMatrixPosition(L.matrixWorld),D.position.applyMatrix4(C),l.identity(),a.copy(L.matrixWorld),a.premultiply(C),l.extractRotation(a),D.halfWidth.set(L.width*.5,0,0),D.halfHeight.set(0,L.height*.5,0),D.halfWidth.applyMatrix4(l),D.halfHeight.applyMatrix4(l),w++}else if(L.isPointLight){const D=i.point[x];D.position.setFromMatrixPosition(L.matrixWorld),D.position.applyMatrix4(C),x++}else if(L.isHemisphereLight){const D=i.hemi[S];D.direction.setFromMatrixPosition(L.matrixWorld),D.direction.transformDirection(C),S++}}}return{setup:f,setupView:d,state:i}}function W1(o,e){const t=new dP(o,e),n=[],i=[];function r(){n.length=0,i.length=0}function a(g){n.push(g)}function l(g){i.push(g)}function f(g){t.setup(n,g)}function d(g){t.setupView(n,g)}return{init:r,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:f,setupLightsView:d,pushLight:a,pushShadow:l}}function pP(o,e){let t=new WeakMap;function n(r,a=0){const l=t.get(r);let f;return l===void 0?(f=new W1(o,e),t.set(r,[f])):a>=l.length?(f=new W1(o,e),l.push(f)):f=l[a],f}function i(){t=new WeakMap}return{get:n,dispose:i}}class Sg extends ar{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Lw,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class wg extends ar{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new J,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const mP=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,gP=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vP(o,e,t){let n=new xg;const i=new Ve,r=new Ve,a=new gn,l=new Sg({depthPacking:Ay}),f=new wg,d={},p=t.maxTextureSize,g={[Xo]:Or,[Or]:Xo,[go]:go},v=new Yo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:mP,fragmentShader:gP}),x=v.clone();x.defines.HORIZONTAL_PASS=1;const M=new $t;M.setAttribute("position",new Ln(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new bi(M,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mg,this.render=function(L,D,F){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||L.length===0)return;const B=o.getRenderTarget(),I=o.getActiveCubeFace(),z=o.getActiveMipmapLevel(),V=o.state;V.setBlending(Na),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);for(let te=0,X=L.length;te<X;te++){const K=L[te],q=K.shadow;if(q===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(q.autoUpdate===!1&&q.needsUpdate===!1)continue;i.copy(q.mapSize);const oe=q.getFrameExtents();if(i.multiply(oe),r.copy(q.mapSize),(i.x>p||i.y>p)&&(i.x>p&&(r.x=Math.floor(p/oe.x),i.x=r.x*oe.x,q.mapSize.x=r.x),i.y>p&&(r.y=Math.floor(p/oe.y),i.y=r.y*oe.y,q.mapSize.y=r.y)),q.map===null){const ye=this.type!==Gu?{minFilter:ci,magFilter:ci}:{};q.map=new xo(i.x,i.y,ye),q.map.texture.name=K.name+".shadowMap",q.camera.updateProjectionMatrix()}o.setRenderTarget(q.map),o.clear();const ce=q.getViewportCount();for(let ye=0;ye<ce;ye++){const H=q.getViewport(ye);a.set(r.x*H.x,r.y*H.y,r.x*H.z,r.y*H.w),V.viewport(a),q.updateMatrices(K,ye),n=q.getFrustum(),A(D,F,q.camera,K,this.type)}q.isPointLightShadow!==!0&&this.type===Gu&&C(q,F),q.needsUpdate=!1}S.needsUpdate=!1,o.setRenderTarget(B,I,z)};function C(L,D){const F=e.update(w);v.defines.VSM_SAMPLES!==L.blurSamples&&(v.defines.VSM_SAMPLES=L.blurSamples,x.defines.VSM_SAMPLES=L.blurSamples,v.needsUpdate=!0,x.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new xo(i.x,i.y)),v.uniforms.shadow_pass.value=L.map.texture,v.uniforms.resolution.value=L.mapSize,v.uniforms.radius.value=L.radius,o.setRenderTarget(L.mapPass),o.clear(),o.renderBufferDirect(D,null,F,v,w,null),x.uniforms.shadow_pass.value=L.mapPass.texture,x.uniforms.resolution.value=L.mapSize,x.uniforms.radius.value=L.radius,o.setRenderTarget(L.map),o.clear(),o.renderBufferDirect(D,null,F,x,w,null)}function E(L,D,F,B,I,z){let V=null;const te=F.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(te!==void 0)V=te;else if(V=F.isPointLight===!0?f:l,o.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const X=V.uuid,K=D.uuid;let q=d[X];q===void 0&&(q={},d[X]=q);let oe=q[K];oe===void 0&&(oe=V.clone(),q[K]=oe),V=oe}return V.visible=D.visible,V.wireframe=D.wireframe,z===Gu?V.side=D.shadowSide!==null?D.shadowSide:D.side:V.side=D.shadowSide!==null?D.shadowSide:g[D.side],V.alphaMap=D.alphaMap,V.alphaTest=D.alphaTest,V.map=D.map,V.clipShadows=D.clipShadows,V.clippingPlanes=D.clippingPlanes,V.clipIntersection=D.clipIntersection,V.displacementMap=D.displacementMap,V.displacementScale=D.displacementScale,V.displacementBias=D.displacementBias,V.wireframeLinewidth=D.wireframeLinewidth,V.linewidth=D.linewidth,F.isPointLight===!0&&V.isMeshDistanceMaterial===!0&&(V.referencePosition.setFromMatrixPosition(F.matrixWorld),V.nearDistance=B,V.farDistance=I),V}function A(L,D,F,B,I){if(L.visible===!1)return;if(L.layers.test(D.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&I===Gu)&&(!L.frustumCulled||n.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,L.matrixWorld);const te=e.update(L),X=L.material;if(Array.isArray(X)){const K=te.groups;for(let q=0,oe=K.length;q<oe;q++){const ce=K[q],ye=X[ce.materialIndex];if(ye&&ye.visible){const H=E(L,ye,B,F.near,F.far,I);o.renderBufferDirect(F,null,te,H,L,ce)}}}else if(X.visible){const K=E(L,X,B,F.near,F.far,I);o.renderBufferDirect(F,null,te,K,L,null)}}const V=L.children;for(let te=0,X=V.length;te<X;te++)A(V[te],D,F,B,I)}}function yP(o,e,t){const n=t.isWebGL2;function i(){let ee=!1;const xe=new gn;let Be=null;const rt=new gn(0,0,0,0);return{setMask:function(mt){Be!==mt&&!ee&&(o.colorMask(mt,mt,mt,mt),Be=mt)},setLocked:function(mt){ee=mt},setClear:function(mt,Yt,kt,Vt,Gt){Gt===!0&&(mt*=Vt,Yt*=Vt,kt*=Vt),xe.set(mt,Yt,kt,Vt),rt.equals(xe)===!1&&(o.clearColor(mt,Yt,kt,Vt),rt.copy(xe))},reset:function(){ee=!1,Be=null,rt.set(-1,0,0,0)}}}function r(){let ee=!1,xe=null,Be=null,rt=null;return{setTest:function(mt){mt?ue(2929):me(2929)},setMask:function(mt){xe!==mt&&!ee&&(o.depthMask(mt),xe=mt)},setFunc:function(mt){if(Be!==mt){switch(mt){case $S:o.depthFunc(512);break;case ew:o.depthFunc(519);break;case tw:o.depthFunc(513);break;case tg:o.depthFunc(515);break;case nw:o.depthFunc(514);break;case iw:o.depthFunc(518);break;case rw:o.depthFunc(516);break;case sw:o.depthFunc(517);break;default:o.depthFunc(515)}Be=mt}},setLocked:function(mt){ee=mt},setClear:function(mt){rt!==mt&&(o.clearDepth(mt),rt=mt)},reset:function(){ee=!1,xe=null,Be=null,rt=null}}}function a(){let ee=!1,xe=null,Be=null,rt=null,mt=null,Yt=null,kt=null,Vt=null,Gt=null;return{setTest:function(en){ee||(en?ue(2960):me(2960))},setMask:function(en){xe!==en&&!ee&&(o.stencilMask(en),xe=en)},setFunc:function(en,Ot,zt){(Be!==en||rt!==Ot||mt!==zt)&&(o.stencilFunc(en,Ot,zt),Be=en,rt=Ot,mt=zt)},setOp:function(en,Ot,zt){(Yt!==en||kt!==Ot||Vt!==zt)&&(o.stencilOp(en,Ot,zt),Yt=en,kt=Ot,Vt=zt)},setLocked:function(en){ee=en},setClear:function(en){Gt!==en&&(o.clearStencil(en),Gt=en)},reset:function(){ee=!1,xe=null,Be=null,rt=null,mt=null,Yt=null,kt=null,Vt=null,Gt=null}}}const l=new i,f=new r,d=new a,p=new WeakMap,g=new WeakMap;let v={},x={},M=new WeakMap,w=[],S=null,C=!1,E=null,A=null,L=null,D=null,F=null,B=null,I=null,z=!1,V=null,te=null,X=null,K=null,q=null;const oe=o.getParameter(35661);let ce=!1,ye=0;const H=o.getParameter(7938);H.indexOf("WebGL")!==-1?(ye=parseFloat(/^WebGL (\d)/.exec(H)[1]),ce=ye>=1):H.indexOf("OpenGL ES")!==-1&&(ye=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),ce=ye>=2);let Q=null,Y={};const N=o.getParameter(3088),O=o.getParameter(2978),re=new gn().fromArray(N),se=new gn().fromArray(O);function Z(ee,xe,Be){const rt=new Uint8Array(4),mt=o.createTexture();o.bindTexture(ee,mt),o.texParameteri(ee,10241,9728),o.texParameteri(ee,10240,9728);for(let Yt=0;Yt<Be;Yt++)o.texImage2D(xe+Yt,0,6408,1,1,0,6408,5121,rt);return mt}const he={};he[3553]=Z(3553,3553,1),he[34067]=Z(34067,34069,6),l.setClear(0,0,0,1),f.setClear(1),d.setClear(0),ue(2929),f.setFunc(tg),Ue(!1),ut(Sv),ue(2884),Ge(Na);function ue(ee){v[ee]!==!0&&(o.enable(ee),v[ee]=!0)}function me(ee){v[ee]!==!1&&(o.disable(ee),v[ee]=!1)}function we(ee,xe){return x[ee]!==xe?(o.bindFramebuffer(ee,xe),x[ee]=xe,n&&(ee===36009&&(x[36160]=xe),ee===36160&&(x[36009]=xe)),!0):!1}function Oe(ee,xe){let Be=w,rt=!1;if(ee)if(Be=M.get(xe),Be===void 0&&(Be=[],M.set(xe,Be)),ee.isWebGLMultipleRenderTargets){const mt=ee.texture;if(Be.length!==mt.length||Be[0]!==36064){for(let Yt=0,kt=mt.length;Yt<kt;Yt++)Be[Yt]=36064+Yt;Be.length=mt.length,rt=!0}}else Be[0]!==36064&&(Be[0]=36064,rt=!0);else Be[0]!==1029&&(Be[0]=1029,rt=!0);rt&&(t.isWebGL2?o.drawBuffers(Be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Be))}function ke(ee){return S!==ee?(o.useProgram(ee),S=ee,!0):!1}const ae={[zu]:32774,[VS]:32778,[WS]:32779};if(n)ae[Ev]=32775,ae[Tv]=32776;else{const ee=e.get("EXT_blend_minmax");ee!==null&&(ae[Ev]=ee.MIN_EXT,ae[Tv]=ee.MAX_EXT)}const be={[HS]:0,[jS]:1,[XS]:768,[wy]:770,[KS]:776,[JS]:774,[qS]:772,[YS]:769,[My]:771,[QS]:775,[ZS]:773};function Ge(ee,xe,Be,rt,mt,Yt,kt,Vt){if(ee===Na){C===!0&&(me(3042),C=!1);return}if(C===!1&&(ue(3042),C=!0),ee!==GS){if(ee!==E||Vt!==z){if((A!==zu||F!==zu)&&(o.blendEquation(32774),A=zu,F=zu),Vt)switch(ee){case Xu:o.blendFuncSeparate(1,771,1,771);break;case wv:o.blendFunc(1,1);break;case Mv:o.blendFuncSeparate(0,769,0,1);break;case bv:o.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}else switch(ee){case Xu:o.blendFuncSeparate(770,771,1,771);break;case wv:o.blendFunc(770,1);break;case Mv:o.blendFuncSeparate(0,769,0,1);break;case bv:o.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}L=null,D=null,B=null,I=null,E=ee,z=Vt}return}mt=mt||xe,Yt=Yt||Be,kt=kt||rt,(xe!==A||mt!==F)&&(o.blendEquationSeparate(ae[xe],ae[mt]),A=xe,F=mt),(Be!==L||rt!==D||Yt!==B||kt!==I)&&(o.blendFuncSeparate(be[Be],be[rt],be[Yt],be[kt]),L=Be,D=rt,B=Yt,I=kt),E=ee,z=!1}function He(ee,xe){ee.side===go?me(2884):ue(2884);let Be=ee.side===Or;xe&&(Be=!Be),Ue(Be),ee.blending===Xu&&ee.transparent===!1?Ge(Na):Ge(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.premultipliedAlpha),f.setFunc(ee.depthFunc),f.setTest(ee.depthTest),f.setMask(ee.depthWrite),l.setMask(ee.colorWrite);const rt=ee.stencilWrite;d.setTest(rt),rt&&(d.setMask(ee.stencilWriteMask),d.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),d.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),Qe(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?ue(32926):me(32926)}function Ue(ee){V!==ee&&(ee?o.frontFace(2304):o.frontFace(2305),V=ee)}function ut(ee){ee!==zS?(ue(2884),ee!==te&&(ee===Sv?o.cullFace(1029):ee===US?o.cullFace(1028):o.cullFace(1032))):me(2884),te=ee}function Ie(ee){ee!==X&&(ce&&o.lineWidth(ee),X=ee)}function Qe(ee,xe,Be){ee?(ue(32823),(K!==xe||q!==Be)&&(o.polygonOffset(xe,Be),K=xe,q=Be)):me(32823)}function tt(ee){ee?ue(3089):me(3089)}function Re(ee){ee===void 0&&(ee=33984+oe-1),Q!==ee&&(o.activeTexture(ee),Q=ee)}function W(ee,xe,Be){Be===void 0&&(Q===null?Be=33984+oe-1:Be=Q);let rt=Y[Be];rt===void 0&&(rt={type:void 0,texture:void 0},Y[Be]=rt),(rt.type!==ee||rt.texture!==xe)&&(Q!==Be&&(o.activeTexture(Be),Q=Be),o.bindTexture(ee,xe||he[ee]),rt.type=ee,rt.texture=xe)}function G(){const ee=Y[Q];ee!==void 0&&ee.type!==void 0&&(o.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function fe(){try{o.compressedTexImage2D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Te(){try{o.compressedTexImage3D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function je(){try{o.texSubImage2D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ye(){try{o.texSubImage3D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function qe(){try{o.compressedTexSubImage2D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ke(){try{o.compressedTexSubImage3D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Le(){try{o.texStorage2D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function lt(){try{o.texStorage3D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Je(){try{o.texImage2D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ct(){try{o.texImage3D.apply(o,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function et(ee){re.equals(ee)===!1&&(o.scissor(ee.x,ee.y,ee.z,ee.w),re.copy(ee))}function Ze(ee){se.equals(ee)===!1&&(o.viewport(ee.x,ee.y,ee.z,ee.w),se.copy(ee))}function ie(ee,xe){let Be=g.get(xe);Be===void 0&&(Be=new WeakMap,g.set(xe,Be));let rt=Be.get(ee);rt===void 0&&(rt=o.getUniformBlockIndex(xe,ee.name),Be.set(ee,rt))}function Fe(ee,xe){const rt=g.get(xe).get(ee);p.get(xe)!==rt&&(o.uniformBlockBinding(xe,rt,ee.__bindingPointIndex),p.set(xe,rt))}function st(){o.disable(3042),o.disable(2884),o.disable(2929),o.disable(32823),o.disable(3089),o.disable(2960),o.disable(32926),o.blendEquation(32774),o.blendFunc(1,0),o.blendFuncSeparate(1,0,1,0),o.colorMask(!0,!0,!0,!0),o.clearColor(0,0,0,0),o.depthMask(!0),o.depthFunc(513),o.clearDepth(1),o.stencilMask(4294967295),o.stencilFunc(519,0,4294967295),o.stencilOp(7680,7680,7680),o.clearStencil(0),o.cullFace(1029),o.frontFace(2305),o.polygonOffset(0,0),o.activeTexture(33984),o.bindFramebuffer(36160,null),n===!0&&(o.bindFramebuffer(36009,null),o.bindFramebuffer(36008,null)),o.useProgram(null),o.lineWidth(1),o.scissor(0,0,o.canvas.width,o.canvas.height),o.viewport(0,0,o.canvas.width,o.canvas.height),v={},Q=null,Y={},x={},M=new WeakMap,w=[],S=null,C=!1,E=null,A=null,L=null,D=null,F=null,B=null,I=null,z=!1,V=null,te=null,X=null,K=null,q=null,re.set(0,0,o.canvas.width,o.canvas.height),se.set(0,0,o.canvas.width,o.canvas.height),l.reset(),f.reset(),d.reset()}return{buffers:{color:l,depth:f,stencil:d},enable:ue,disable:me,bindFramebuffer:we,drawBuffers:Oe,useProgram:ke,setBlending:Ge,setMaterial:He,setFlipSided:Ue,setCullFace:ut,setLineWidth:Ie,setPolygonOffset:Qe,setScissorTest:tt,activeTexture:Re,bindTexture:W,unbindTexture:G,compressedTexImage2D:fe,compressedTexImage3D:Te,texImage2D:Je,texImage3D:ct,updateUBOMapping:ie,uniformBlockBinding:Fe,texStorage2D:Le,texStorage3D:lt,texSubImage2D:je,texSubImage3D:Ye,compressedTexSubImage2D:qe,compressedTexSubImage3D:Ke,scissor:et,viewport:Ze,reset:st}}function xP(o,e,t,n,i,r,a){const l=i.isWebGL2,f=i.maxTextures,d=i.maxCubemapSize,p=i.maxTextureSize,g=i.maxSamples,v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,x=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),M=new WeakMap;let w;const S=new WeakMap;let C=!1;try{C=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(W,G){return C?new OffscreenCanvas(W,G):Ed("canvas")}function A(W,G,fe,Te){let je=1;if((W.width>Te||W.height>Te)&&(je=Te/Math.max(W.width,W.height)),je<1||G===!0)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const Ye=G?kw:Math.floor,qe=Ye(je*W.width),Ke=Ye(je*W.height);w===void 0&&(w=E(qe,Ke));const Le=fe?E(qe,Ke):w;return Le.width=qe,Le.height=Ke,Le.getContext("2d").drawImage(W,0,0,qe,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+qe+"x"+Ke+")."),Le}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W;return W}function L(W){return Qv(W.width)&&Qv(W.height)}function D(W){return l?!1:W.wrapS!==xr||W.wrapT!==xr||W.minFilter!==ci&&W.minFilter!==qn}function F(W,G){return W.generateMipmaps&&G&&W.minFilter!==ci&&W.minFilter!==qn}function B(W){o.generateMipmap(W)}function I(W,G,fe,Te,je=!1){if(l===!1)return G;if(W!==null){if(o[W]!==void 0)return o[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Ye=G;return G===6403&&(fe===5126&&(Ye=33326),fe===5131&&(Ye=33325),fe===5121&&(Ye=33321)),G===33319&&(fe===5126&&(Ye=33328),fe===5131&&(Ye=33327),fe===5121&&(Ye=33323)),G===6408&&(fe===5126&&(Ye=34836),fe===5131&&(Ye=34842),fe===5121&&(Ye=Te===kn&&je===!1?35907:32856),fe===32819&&(Ye=32854),fe===32820&&(Ye=32855)),(Ye===33325||Ye===33326||Ye===33327||Ye===33328||Ye===34842||Ye===34836)&&e.get("EXT_color_buffer_float"),Ye}function z(W,G,fe){return F(W,fe)===!0||W.isFramebufferTexture&&W.minFilter!==ci&&W.minFilter!==qn?Math.log2(Math.max(G.width,G.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?G.mipmaps.length:1}function V(W){return W===ci||W===ng||W===ad?9728:9729}function te(W){const G=W.target;G.removeEventListener("dispose",te),K(G),G.isVideoTexture&&M.delete(G)}function X(W){const G=W.target;G.removeEventListener("dispose",X),oe(G)}function K(W){const G=n.get(W);if(G.__webglInit===void 0)return;const fe=W.source,Te=S.get(fe);if(Te){const je=Te[G.__cacheKey];je.usedTimes--,je.usedTimes===0&&q(W),Object.keys(Te).length===0&&S.delete(fe)}n.remove(W)}function q(W){const G=n.get(W);o.deleteTexture(G.__webglTexture);const fe=W.source,Te=S.get(fe);delete Te[G.__cacheKey],a.memory.textures--}function oe(W){const G=W.texture,fe=n.get(W),Te=n.get(G);if(Te.__webglTexture!==void 0&&(o.deleteTexture(Te.__webglTexture),a.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let je=0;je<6;je++)o.deleteFramebuffer(fe.__webglFramebuffer[je]),fe.__webglDepthbuffer&&o.deleteRenderbuffer(fe.__webglDepthbuffer[je]);else{if(o.deleteFramebuffer(fe.__webglFramebuffer),fe.__webglDepthbuffer&&o.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&o.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let je=0;je<fe.__webglColorRenderbuffer.length;je++)fe.__webglColorRenderbuffer[je]&&o.deleteRenderbuffer(fe.__webglColorRenderbuffer[je]);fe.__webglDepthRenderbuffer&&o.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}if(W.isWebGLMultipleRenderTargets)for(let je=0,Ye=G.length;je<Ye;je++){const qe=n.get(G[je]);qe.__webglTexture&&(o.deleteTexture(qe.__webglTexture),a.memory.textures--),n.remove(G[je])}n.remove(G),n.remove(W)}let ce=0;function ye(){ce=0}function H(){const W=ce;return W>=f&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+f),ce+=1,W}function Q(W){const G=[];return G.push(W.wrapS),G.push(W.wrapT),G.push(W.wrapR||0),G.push(W.magFilter),G.push(W.minFilter),G.push(W.anisotropy),G.push(W.internalFormat),G.push(W.format),G.push(W.type),G.push(W.generateMipmaps),G.push(W.premultiplyAlpha),G.push(W.flipY),G.push(W.unpackAlignment),G.push(W.encoding),G.join()}function Y(W,G){const fe=n.get(W);if(W.isVideoTexture&&tt(W),W.isRenderTargetTexture===!1&&W.version>0&&fe.__version!==W.version){const Te=W.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{me(fe,W,G);return}}t.bindTexture(3553,fe.__webglTexture,33984+G)}function N(W,G){const fe=n.get(W);if(W.version>0&&fe.__version!==W.version){me(fe,W,G);return}t.bindTexture(35866,fe.__webglTexture,33984+G)}function O(W,G){const fe=n.get(W);if(W.version>0&&fe.__version!==W.version){me(fe,W,G);return}t.bindTexture(32879,fe.__webglTexture,33984+G)}function re(W,G){const fe=n.get(W);if(W.version>0&&fe.__version!==W.version){we(fe,W,G);return}t.bindTexture(34067,fe.__webglTexture,33984+G)}const se={[yd]:10497,[xr]:33071,[xd]:33648},Z={[ci]:9728,[ng]:9984,[ad]:9986,[qn]:9729,[Ey]:9985,[zl]:9987};function he(W,G,fe){if(fe?(o.texParameteri(W,10242,se[G.wrapS]),o.texParameteri(W,10243,se[G.wrapT]),(W===32879||W===35866)&&o.texParameteri(W,32882,se[G.wrapR]),o.texParameteri(W,10240,Z[G.magFilter]),o.texParameteri(W,10241,Z[G.minFilter])):(o.texParameteri(W,10242,33071),o.texParameteri(W,10243,33071),(W===32879||W===35866)&&o.texParameteri(W,32882,33071),(G.wrapS!==xr||G.wrapT!==xr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),o.texParameteri(W,10240,V(G.magFilter)),o.texParameteri(W,10241,V(G.minFilter)),G.minFilter!==ci&&G.minFilter!==qn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Te=e.get("EXT_texture_filter_anisotropic");if(G.magFilter===ci||G.minFilter!==ad&&G.minFilter!==zl||G.type===ka&&e.has("OES_texture_float_linear")===!1||l===!1&&G.type===kf&&e.has("OES_texture_half_float_linear")===!1)return;(G.anisotropy>1||n.get(G).__currentAnisotropy)&&(o.texParameterf(W,Te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),n.get(G).__currentAnisotropy=G.anisotropy)}}function ue(W,G){let fe=!1;W.__webglInit===void 0&&(W.__webglInit=!0,G.addEventListener("dispose",te));const Te=G.source;let je=S.get(Te);je===void 0&&(je={},S.set(Te,je));const Ye=Q(G);if(Ye!==W.__cacheKey){je[Ye]===void 0&&(je[Ye]={texture:o.createTexture(),usedTimes:0},a.memory.textures++,fe=!0),je[Ye].usedTimes++;const qe=je[W.__cacheKey];qe!==void 0&&(je[W.__cacheKey].usedTimes--,qe.usedTimes===0&&q(G)),W.__cacheKey=Ye,W.__webglTexture=je[Ye].texture}return fe}function me(W,G,fe){let Te=3553;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(Te=35866),G.isData3DTexture&&(Te=32879);const je=ue(W,G),Ye=G.source;t.bindTexture(Te,W.__webglTexture,33984+fe);const qe=n.get(Ye);if(Ye.version!==qe.__version||je===!0){t.activeTexture(33984+fe),o.pixelStorei(37440,G.flipY),o.pixelStorei(37441,G.premultiplyAlpha),o.pixelStorei(3317,G.unpackAlignment),o.pixelStorei(37443,0);const Ke=D(G)&&L(G.image)===!1;let Le=A(G.image,Ke,!1,p);Le=Re(G,Le);const lt=L(Le)||l,Je=r.convert(G.format,G.encoding);let ct=r.convert(G.type),et=I(G.internalFormat,Je,ct,G.encoding,G.isVideoTexture);he(Te,G,lt);let Ze;const ie=G.mipmaps,Fe=l&&G.isVideoTexture!==!0,st=qe.__version===void 0||je===!0,ee=z(G,Le,lt);if(G.isDepthTexture)et=6402,l?G.type===ka?et=36012:G.type===Al?et=33190:G.type===Yu?et=35056:et=33189:G.type===ka&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===Dl&&et===6402&&G.type!==Ty&&G.type!==Al&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=Al,ct=r.convert(G.type)),G.format===Ku&&et===6402&&(et=34041,G.type!==Yu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=Yu,ct=r.convert(G.type))),st&&(Fe?t.texStorage2D(3553,1,et,Le.width,Le.height):t.texImage2D(3553,0,et,Le.width,Le.height,0,Je,ct,null));else if(G.isDataTexture)if(ie.length>0&&lt){Fe&&st&&t.texStorage2D(3553,ee,et,ie[0].width,ie[0].height);for(let xe=0,Be=ie.length;xe<Be;xe++)Ze=ie[xe],Fe?t.texSubImage2D(3553,xe,0,0,Ze.width,Ze.height,Je,ct,Ze.data):t.texImage2D(3553,xe,et,Ze.width,Ze.height,0,Je,ct,Ze.data);G.generateMipmaps=!1}else Fe?(st&&t.texStorage2D(3553,ee,et,Le.width,Le.height),t.texSubImage2D(3553,0,0,0,Le.width,Le.height,Je,ct,Le.data)):t.texImage2D(3553,0,et,Le.width,Le.height,0,Je,ct,Le.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){Fe&&st&&t.texStorage3D(35866,ee,et,ie[0].width,ie[0].height,Le.depth);for(let xe=0,Be=ie.length;xe<Be;xe++)Ze=ie[xe],G.format!==es?Je!==null?Fe?t.compressedTexSubImage3D(35866,xe,0,0,0,Ze.width,Ze.height,Le.depth,Je,Ze.data,0,0):t.compressedTexImage3D(35866,xe,et,Ze.width,Ze.height,Le.depth,0,Ze.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Fe?t.texSubImage3D(35866,xe,0,0,0,Ze.width,Ze.height,Le.depth,Je,ct,Ze.data):t.texImage3D(35866,xe,et,Ze.width,Ze.height,Le.depth,0,Je,ct,Ze.data)}else{Fe&&st&&t.texStorage2D(3553,ee,et,ie[0].width,ie[0].height);for(let xe=0,Be=ie.length;xe<Be;xe++)Ze=ie[xe],G.format!==es?Je!==null?Fe?t.compressedTexSubImage2D(3553,xe,0,0,Ze.width,Ze.height,Je,Ze.data):t.compressedTexImage2D(3553,xe,et,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Fe?t.texSubImage2D(3553,xe,0,0,Ze.width,Ze.height,Je,ct,Ze.data):t.texImage2D(3553,xe,et,Ze.width,Ze.height,0,Je,ct,Ze.data)}else if(G.isDataArrayTexture)Fe?(st&&t.texStorage3D(35866,ee,et,Le.width,Le.height,Le.depth),t.texSubImage3D(35866,0,0,0,0,Le.width,Le.height,Le.depth,Je,ct,Le.data)):t.texImage3D(35866,0,et,Le.width,Le.height,Le.depth,0,Je,ct,Le.data);else if(G.isData3DTexture)Fe?(st&&t.texStorage3D(32879,ee,et,Le.width,Le.height,Le.depth),t.texSubImage3D(32879,0,0,0,0,Le.width,Le.height,Le.depth,Je,ct,Le.data)):t.texImage3D(32879,0,et,Le.width,Le.height,Le.depth,0,Je,ct,Le.data);else if(G.isFramebufferTexture){if(st)if(Fe)t.texStorage2D(3553,ee,et,Le.width,Le.height);else{let xe=Le.width,Be=Le.height;for(let rt=0;rt<ee;rt++)t.texImage2D(3553,rt,et,xe,Be,0,Je,ct,null),xe>>=1,Be>>=1}}else if(ie.length>0&&lt){Fe&&st&&t.texStorage2D(3553,ee,et,ie[0].width,ie[0].height);for(let xe=0,Be=ie.length;xe<Be;xe++)Ze=ie[xe],Fe?t.texSubImage2D(3553,xe,0,0,Je,ct,Ze):t.texImage2D(3553,xe,et,Je,ct,Ze);G.generateMipmaps=!1}else Fe?(st&&t.texStorage2D(3553,ee,et,Le.width,Le.height),t.texSubImage2D(3553,0,0,0,Je,ct,Le)):t.texImage2D(3553,0,et,Je,ct,Le);F(G,lt)&&B(Te),qe.__version=Ye.version,G.onUpdate&&G.onUpdate(G)}W.__version=G.version}function we(W,G,fe){if(G.image.length!==6)return;const Te=ue(W,G),je=G.source;t.bindTexture(34067,W.__webglTexture,33984+fe);const Ye=n.get(je);if(je.version!==Ye.__version||Te===!0){t.activeTexture(33984+fe),o.pixelStorei(37440,G.flipY),o.pixelStorei(37441,G.premultiplyAlpha),o.pixelStorei(3317,G.unpackAlignment),o.pixelStorei(37443,0);const qe=G.isCompressedTexture||G.image[0].isCompressedTexture,Ke=G.image[0]&&G.image[0].isDataTexture,Le=[];for(let xe=0;xe<6;xe++)!qe&&!Ke?Le[xe]=A(G.image[xe],!1,!0,d):Le[xe]=Ke?G.image[xe].image:G.image[xe],Le[xe]=Re(G,Le[xe]);const lt=Le[0],Je=L(lt)||l,ct=r.convert(G.format,G.encoding),et=r.convert(G.type),Ze=I(G.internalFormat,ct,et,G.encoding),ie=l&&G.isVideoTexture!==!0,Fe=Ye.__version===void 0||Te===!0;let st=z(G,lt,Je);he(34067,G,Je);let ee;if(qe){ie&&Fe&&t.texStorage2D(34067,st,Ze,lt.width,lt.height);for(let xe=0;xe<6;xe++){ee=Le[xe].mipmaps;for(let Be=0;Be<ee.length;Be++){const rt=ee[Be];G.format!==es?ct!==null?ie?t.compressedTexSubImage2D(34069+xe,Be,0,0,rt.width,rt.height,ct,rt.data):t.compressedTexImage2D(34069+xe,Be,Ze,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ie?t.texSubImage2D(34069+xe,Be,0,0,rt.width,rt.height,ct,et,rt.data):t.texImage2D(34069+xe,Be,Ze,rt.width,rt.height,0,ct,et,rt.data)}}}else{ee=G.mipmaps,ie&&Fe&&(ee.length>0&&st++,t.texStorage2D(34067,st,Ze,Le[0].width,Le[0].height));for(let xe=0;xe<6;xe++)if(Ke){ie?t.texSubImage2D(34069+xe,0,0,0,Le[xe].width,Le[xe].height,ct,et,Le[xe].data):t.texImage2D(34069+xe,0,Ze,Le[xe].width,Le[xe].height,0,ct,et,Le[xe].data);for(let Be=0;Be<ee.length;Be++){const mt=ee[Be].image[xe].image;ie?t.texSubImage2D(34069+xe,Be+1,0,0,mt.width,mt.height,ct,et,mt.data):t.texImage2D(34069+xe,Be+1,Ze,mt.width,mt.height,0,ct,et,mt.data)}}else{ie?t.texSubImage2D(34069+xe,0,0,0,ct,et,Le[xe]):t.texImage2D(34069+xe,0,Ze,ct,et,Le[xe]);for(let Be=0;Be<ee.length;Be++){const rt=ee[Be];ie?t.texSubImage2D(34069+xe,Be+1,0,0,ct,et,rt.image[xe]):t.texImage2D(34069+xe,Be+1,Ze,ct,et,rt.image[xe])}}}F(G,Je)&&B(34067),Ye.__version=je.version,G.onUpdate&&G.onUpdate(G)}W.__version=G.version}function Oe(W,G,fe,Te,je){const Ye=r.convert(fe.format,fe.encoding),qe=r.convert(fe.type),Ke=I(fe.internalFormat,Ye,qe,fe.encoding);n.get(G).__hasExternalTextures||(je===32879||je===35866?t.texImage3D(je,0,Ke,G.width,G.height,G.depth,0,Ye,qe,null):t.texImage2D(je,0,Ke,G.width,G.height,0,Ye,qe,null)),t.bindFramebuffer(36160,W),Qe(G)?v.framebufferTexture2DMultisampleEXT(36160,Te,je,n.get(fe).__webglTexture,0,Ie(G)):(je===3553||je>=34069&&je<=34074)&&o.framebufferTexture2D(36160,Te,je,n.get(fe).__webglTexture,0),t.bindFramebuffer(36160,null)}function ke(W,G,fe){if(o.bindRenderbuffer(36161,W),G.depthBuffer&&!G.stencilBuffer){let Te=33189;if(fe||Qe(G)){const je=G.depthTexture;je&&je.isDepthTexture&&(je.type===ka?Te=36012:je.type===Al&&(Te=33190));const Ye=Ie(G);Qe(G)?v.renderbufferStorageMultisampleEXT(36161,Ye,Te,G.width,G.height):o.renderbufferStorageMultisample(36161,Ye,Te,G.width,G.height)}else o.renderbufferStorage(36161,Te,G.width,G.height);o.framebufferRenderbuffer(36160,36096,36161,W)}else if(G.depthBuffer&&G.stencilBuffer){const Te=Ie(G);fe&&Qe(G)===!1?o.renderbufferStorageMultisample(36161,Te,35056,G.width,G.height):Qe(G)?v.renderbufferStorageMultisampleEXT(36161,Te,35056,G.width,G.height):o.renderbufferStorage(36161,34041,G.width,G.height),o.framebufferRenderbuffer(36160,33306,36161,W)}else{const Te=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let je=0;je<Te.length;je++){const Ye=Te[je],qe=r.convert(Ye.format,Ye.encoding),Ke=r.convert(Ye.type),Le=I(Ye.internalFormat,qe,Ke,Ye.encoding),lt=Ie(G);fe&&Qe(G)===!1?o.renderbufferStorageMultisample(36161,lt,Le,G.width,G.height):Qe(G)?v.renderbufferStorageMultisampleEXT(36161,lt,Le,G.width,G.height):o.renderbufferStorage(36161,Le,G.width,G.height)}}o.bindRenderbuffer(36161,null)}function ae(W,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,W),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),Y(G.depthTexture,0);const Te=n.get(G.depthTexture).__webglTexture,je=Ie(G);if(G.depthTexture.format===Dl)Qe(G)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,Te,0,je):o.framebufferTexture2D(36160,36096,3553,Te,0);else if(G.depthTexture.format===Ku)Qe(G)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,Te,0,je):o.framebufferTexture2D(36160,33306,3553,Te,0);else throw new Error("Unknown depthTexture format")}function be(W){const G=n.get(W),fe=W.isWebGLCubeRenderTarget===!0;if(W.depthTexture&&!G.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");ae(G.__webglFramebuffer,W)}else if(fe){G.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)t.bindFramebuffer(36160,G.__webglFramebuffer[Te]),G.__webglDepthbuffer[Te]=o.createRenderbuffer(),ke(G.__webglDepthbuffer[Te],W,!1)}else t.bindFramebuffer(36160,G.__webglFramebuffer),G.__webglDepthbuffer=o.createRenderbuffer(),ke(G.__webglDepthbuffer,W,!1);t.bindFramebuffer(36160,null)}function Ge(W,G,fe){const Te=n.get(W);G!==void 0&&Oe(Te.__webglFramebuffer,W,W.texture,36064,3553),fe!==void 0&&be(W)}function He(W){const G=W.texture,fe=n.get(W),Te=n.get(G);W.addEventListener("dispose",X),W.isWebGLMultipleRenderTargets!==!0&&(Te.__webglTexture===void 0&&(Te.__webglTexture=o.createTexture()),Te.__version=G.version,a.memory.textures++);const je=W.isWebGLCubeRenderTarget===!0,Ye=W.isWebGLMultipleRenderTargets===!0,qe=L(W)||l;if(je){fe.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)fe.__webglFramebuffer[Ke]=o.createFramebuffer()}else{if(fe.__webglFramebuffer=o.createFramebuffer(),Ye)if(i.drawBuffers){const Ke=W.texture;for(let Le=0,lt=Ke.length;Le<lt;Le++){const Je=n.get(Ke[Le]);Je.__webglTexture===void 0&&(Je.__webglTexture=o.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&W.samples>0&&Qe(W)===!1){const Ke=Ye?G:[G];fe.__webglMultisampledFramebuffer=o.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,fe.__webglMultisampledFramebuffer);for(let Le=0;Le<Ke.length;Le++){const lt=Ke[Le];fe.__webglColorRenderbuffer[Le]=o.createRenderbuffer(),o.bindRenderbuffer(36161,fe.__webglColorRenderbuffer[Le]);const Je=r.convert(lt.format,lt.encoding),ct=r.convert(lt.type),et=I(lt.internalFormat,Je,ct,lt.encoding,W.isXRRenderTarget===!0),Ze=Ie(W);o.renderbufferStorageMultisample(36161,Ze,et,W.width,W.height),o.framebufferRenderbuffer(36160,36064+Le,36161,fe.__webglColorRenderbuffer[Le])}o.bindRenderbuffer(36161,null),W.depthBuffer&&(fe.__webglDepthRenderbuffer=o.createRenderbuffer(),ke(fe.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(36160,null)}}if(je){t.bindTexture(34067,Te.__webglTexture),he(34067,G,qe);for(let Ke=0;Ke<6;Ke++)Oe(fe.__webglFramebuffer[Ke],W,G,36064,34069+Ke);F(G,qe)&&B(34067),t.unbindTexture()}else if(Ye){const Ke=W.texture;for(let Le=0,lt=Ke.length;Le<lt;Le++){const Je=Ke[Le],ct=n.get(Je);t.bindTexture(3553,ct.__webglTexture),he(3553,Je,qe),Oe(fe.__webglFramebuffer,W,Je,36064+Le,3553),F(Je,qe)&&B(3553)}t.unbindTexture()}else{let Ke=3553;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(l?Ke=W.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ke,Te.__webglTexture),he(Ke,G,qe),Oe(fe.__webglFramebuffer,W,G,36064,Ke),F(G,qe)&&B(Ke),t.unbindTexture()}W.depthBuffer&&be(W)}function Ue(W){const G=L(W)||l,fe=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let Te=0,je=fe.length;Te<je;Te++){const Ye=fe[Te];if(F(Ye,G)){const qe=W.isWebGLCubeRenderTarget?34067:3553,Ke=n.get(Ye).__webglTexture;t.bindTexture(qe,Ke),B(qe),t.unbindTexture()}}}function ut(W){if(l&&W.samples>0&&Qe(W)===!1){const G=W.isWebGLMultipleRenderTargets?W.texture:[W.texture],fe=W.width,Te=W.height;let je=16384;const Ye=[],qe=W.stencilBuffer?33306:36096,Ke=n.get(W),Le=W.isWebGLMultipleRenderTargets===!0;if(Le)for(let lt=0;lt<G.length;lt++)t.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),o.framebufferRenderbuffer(36160,36064+lt,36161,null),t.bindFramebuffer(36160,Ke.__webglFramebuffer),o.framebufferTexture2D(36009,36064+lt,3553,null,0);t.bindFramebuffer(36008,Ke.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ke.__webglFramebuffer);for(let lt=0;lt<G.length;lt++){Ye.push(36064+lt),W.depthBuffer&&Ye.push(qe);const Je=Ke.__ignoreDepthValues!==void 0?Ke.__ignoreDepthValues:!1;if(Je===!1&&(W.depthBuffer&&(je|=256),W.stencilBuffer&&(je|=1024)),Le&&o.framebufferRenderbuffer(36008,36064,36161,Ke.__webglColorRenderbuffer[lt]),Je===!0&&(o.invalidateFramebuffer(36008,[qe]),o.invalidateFramebuffer(36009,[qe])),Le){const ct=n.get(G[lt]).__webglTexture;o.framebufferTexture2D(36009,36064,3553,ct,0)}o.blitFramebuffer(0,0,fe,Te,0,0,fe,Te,je,9728),x&&o.invalidateFramebuffer(36008,Ye)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Le)for(let lt=0;lt<G.length;lt++){t.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),o.framebufferRenderbuffer(36160,36064+lt,36161,Ke.__webglColorRenderbuffer[lt]);const Je=n.get(G[lt]).__webglTexture;t.bindFramebuffer(36160,Ke.__webglFramebuffer),o.framebufferTexture2D(36009,36064+lt,3553,Je,0)}t.bindFramebuffer(36009,Ke.__webglMultisampledFramebuffer)}}function Ie(W){return Math.min(g,W.samples)}function Qe(W){const G=n.get(W);return l&&W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function tt(W){const G=a.render.frame;M.get(W)!==G&&(M.set(W,G),W.update())}function Re(W,G){const fe=W.encoding,Te=W.format,je=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||W.format===ig||fe!==Ul&&(fe===kn?l===!1?e.has("EXT_sRGB")===!0&&Te===es?(W.format=ig,W.minFilter=qn,W.generateMipmaps=!1):G=Ry.sRGBToLinear(G):(Te!==es||je!==Oa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",fe)),G}this.allocateTextureUnit=H,this.resetTextureUnits=ye,this.setTexture2D=Y,this.setTexture2DArray=N,this.setTexture3D=O,this.setTextureCube=re,this.rebindTextures=Ge,this.setupRenderTarget=He,this.updateRenderTargetMipmap=Ue,this.updateMultisampleRenderTarget=ut,this.setupDepthRenderbuffer=be,this.setupFrameBufferTexture=Oe,this.useMultisampledRTT=Qe}function jw(o,e,t){const n=t.isWebGL2;function i(r,a=null){let l;if(r===Oa)return 5121;if(r===mw)return 32819;if(r===gw)return 32820;if(r===hw)return 5120;if(r===dw)return 5122;if(r===Ty)return 5123;if(r===pw)return 5124;if(r===Al)return 5125;if(r===ka)return 5126;if(r===kf)return n?5131:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(r===vw)return 6406;if(r===es)return 6408;if(r===yw)return 6409;if(r===xw)return 6410;if(r===Dl)return 6402;if(r===Ku)return 34041;if(r===ig)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(r===_w)return 6403;if(r===Sw)return 36244;if(r===ww)return 33319;if(r===Mw)return 33320;if(r===bw)return 36249;if(r===Hm||r===jm||r===Xm||r===Ym)if(a===kn)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(r===Hm)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===jm)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Xm)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Ym)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(r===Hm)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===jm)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Xm)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Ym)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Cv||r===Av||r===Pv||r===Lv)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(r===Cv)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Av)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Pv)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Lv)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Ew)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(r===Rv||r===Iv)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(r===Rv)return a===kn?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(r===Iv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Dv||r===kv||r===Fv||r===Nv||r===Ov||r===zv||r===Uv||r===Bv||r===Gv||r===Vv||r===Wv||r===Hv||r===jv||r===Xv)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(r===Dv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===kv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Fv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Nv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Ov)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===zv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Uv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Bv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Gv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Vv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Wv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Hv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===jv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Xv)return a===kn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===qm)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(r===qm)return a===kn?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(r===Tw||r===Yv||r===qv||r===Zv)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(r===qm)return l.COMPRESSED_RED_RGTC1_EXT;if(r===Yv)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===qv)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Zv)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Yu?n?34042:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):o[r]!==void 0?o[r]:null}return{convert:i}}class Xw extends hi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ef extends mn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _P={type:"move"};class V0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ef,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ef,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ef,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const l=this._targetRay,f=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){a=!0;for(const w of e.hand.values()){const S=t.getJointPose(w,n),C=this._getHandJoint(d,w);S!==null&&(C.matrix.fromArray(S.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.jointRadius=S.radius),C.visible=S!==null}const p=d.joints["index-finger-tip"],g=d.joints["thumb-tip"],v=p.position.distanceTo(g.position),x=.02,M=.005;d.inputState.pinching&&v>x+M?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&v<=x-M&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(f.matrix.fromArray(r.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),r.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(r.linearVelocity)):f.hasLinearVelocity=!1,r.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(r.angularVelocity)):f.hasAngularVelocity=!1));l!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&r!==null&&(i=r),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(_P)))}return l!==null&&(l.visible=i!==null),f!==null&&(f.visible=r!==null),d!==null&&(d.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Ef;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Yw extends Jn{constructor(e,t,n,i,r,a,l,f,d,p){if(p=p!==void 0?p:Dl,p!==Dl&&p!==Ku)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===Dl&&(n=Al),n===void 0&&p===Ku&&(n=Yu),super(null,i,r,a,l,f,p,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:ci,this.minFilter=f!==void 0?f:ci,this.flipY=!1,this.generateMipmaps=!1}}class SP extends Ba{constructor(e,t){super();const n=this;let i=null,r=1,a=null,l="local-floor",f=1,d=null,p=null,g=null,v=null,x=null,M=null;const w=t.getContextAttributes();let S=null,C=null;const E=[],A=[],L=new Set,D=new Map,F=new hi;F.layers.enable(1),F.viewport=new gn;const B=new hi;B.layers.enable(2),B.viewport=new gn;const I=[F,B],z=new Xw;z.layers.enable(1),z.layers.enable(2);let V=null,te=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let re=E[O];return re===void 0&&(re=new V0,E[O]=re),re.getTargetRaySpace()},this.getControllerGrip=function(O){let re=E[O];return re===void 0&&(re=new V0,E[O]=re),re.getGripSpace()},this.getHand=function(O){let re=E[O];return re===void 0&&(re=new V0,E[O]=re),re.getHandSpace()};function X(O){const re=A.indexOf(O.inputSource);if(re===-1)return;const se=E[re];se!==void 0&&se.dispatchEvent({type:O.type,data:O.inputSource})}function K(){i.removeEventListener("select",X),i.removeEventListener("selectstart",X),i.removeEventListener("selectend",X),i.removeEventListener("squeeze",X),i.removeEventListener("squeezestart",X),i.removeEventListener("squeezeend",X),i.removeEventListener("end",K),i.removeEventListener("inputsourceschange",q);for(let O=0;O<E.length;O++){const re=A[O];re!==null&&(A[O]=null,E[O].disconnect(re))}V=null,te=null,e.setRenderTarget(S),x=null,v=null,g=null,i=null,C=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){r=O,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){l=O,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||a},this.setReferenceSpace=function(O){d=O},this.getBaseLayer=function(){return v!==null?v:x},this.getBinding=function(){return g},this.getFrame=function(){return M},this.getSession=function(){return i},this.setSession=async function(O){if(i=O,i!==null){if(S=e.getRenderTarget(),i.addEventListener("select",X),i.addEventListener("selectstart",X),i.addEventListener("selectend",X),i.addEventListener("squeeze",X),i.addEventListener("squeezestart",X),i.addEventListener("squeezeend",X),i.addEventListener("end",K),i.addEventListener("inputsourceschange",q),w.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const re={antialias:i.renderState.layers===void 0?w.antialias:!0,alpha:w.alpha,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:r};x=new XRWebGLLayer(i,t,re),i.updateRenderState({baseLayer:x}),C=new xo(x.framebufferWidth,x.framebufferHeight,{format:es,type:Oa,encoding:e.outputEncoding,stencilBuffer:w.stencil})}else{let re=null,se=null,Z=null;w.depth&&(Z=w.stencil?35056:33190,re=w.stencil?Ku:Dl,se=w.stencil?Yu:Al);const he={colorFormat:32856,depthFormat:Z,scaleFactor:r};g=new XRWebGLBinding(i,t),v=g.createProjectionLayer(he),i.updateRenderState({layers:[v]}),C=new xo(v.textureWidth,v.textureHeight,{format:es,type:Oa,depthTexture:new Yw(v.textureWidth,v.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:w.stencil,encoding:e.outputEncoding,samples:w.antialias?4:0});const ue=e.properties.get(C);ue.__ignoreDepthValues=v.ignoreDepthValues}C.isXRRenderTarget=!0,this.setFoveation(f),d=null,a=await i.requestReferenceSpace(l),N.setContext(i),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function q(O){for(let re=0;re<O.removed.length;re++){const se=O.removed[re],Z=A.indexOf(se);Z>=0&&(A[Z]=null,E[Z].disconnect(se))}for(let re=0;re<O.added.length;re++){const se=O.added[re];let Z=A.indexOf(se);if(Z===-1){for(let ue=0;ue<E.length;ue++)if(ue>=A.length){A.push(se),Z=ue;break}else if(A[ue]===null){A[ue]=se,Z=ue;break}if(Z===-1)break}const he=E[Z];he&&he.connect(se)}}const oe=new J,ce=new J;function ye(O,re,se){oe.setFromMatrixPosition(re.matrixWorld),ce.setFromMatrixPosition(se.matrixWorld);const Z=oe.distanceTo(ce),he=re.projectionMatrix.elements,ue=se.projectionMatrix.elements,me=he[14]/(he[10]-1),we=he[14]/(he[10]+1),Oe=(he[9]+1)/he[5],ke=(he[9]-1)/he[5],ae=(he[8]-1)/he[0],be=(ue[8]+1)/ue[0],Ge=me*ae,He=me*be,Ue=Z/(-ae+be),ut=Ue*-ae;re.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(ut),O.translateZ(Ue),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const Ie=me+Ue,Qe=we+Ue,tt=Ge-ut,Re=He+(Z-ut),W=Oe*we/Qe*Ie,G=ke*we/Qe*Ie;O.projectionMatrix.makePerspective(tt,Re,W,G,Ie,Qe)}function H(O,re){re===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(re.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(i===null)return;z.near=B.near=F.near=O.near,z.far=B.far=F.far=O.far,(V!==z.near||te!==z.far)&&(i.updateRenderState({depthNear:z.near,depthFar:z.far}),V=z.near,te=z.far);const re=O.parent,se=z.cameras;H(z,re);for(let he=0;he<se.length;he++)H(se[he],re);z.matrixWorld.decompose(z.position,z.quaternion,z.scale),O.matrix.copy(z.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale);const Z=O.children;for(let he=0,ue=Z.length;he<ue;he++)Z[he].updateMatrixWorld(!0);se.length===2?ye(z,F,B):z.projectionMatrix.copy(F.projectionMatrix)},this.getCamera=function(){return z},this.getFoveation=function(){if(!(v===null&&x===null))return f},this.setFoveation=function(O){f=O,v!==null&&(v.fixedFoveation=O),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=O)},this.getPlanes=function(){return L};let Q=null;function Y(O,re){if(p=re.getViewerPose(d||a),M=re,p!==null){const se=p.views;x!==null&&(e.setRenderTargetFramebuffer(C,x.framebuffer),e.setRenderTarget(C));let Z=!1;se.length!==z.cameras.length&&(z.cameras.length=0,Z=!0);for(let he=0;he<se.length;he++){const ue=se[he];let me=null;if(x!==null)me=x.getViewport(ue);else{const Oe=g.getViewSubImage(v,ue);me=Oe.viewport,he===0&&(e.setRenderTargetTextures(C,Oe.colorTexture,v.ignoreDepthValues?void 0:Oe.depthStencilTexture),e.setRenderTarget(C))}let we=I[he];we===void 0&&(we=new hi,we.layers.enable(he),we.viewport=new gn,I[he]=we),we.matrix.fromArray(ue.transform.matrix),we.projectionMatrix.fromArray(ue.projectionMatrix),we.viewport.set(me.x,me.y,me.width,me.height),he===0&&z.matrix.copy(we.matrix),Z===!0&&z.cameras.push(we)}}for(let se=0;se<E.length;se++){const Z=A[se],he=E[se];Z!==null&&he!==void 0&&he.update(Z,re,d||a)}if(Q&&Q(O,re),re.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:re.detectedPlanes});let se=null;for(const Z of L)re.detectedPlanes.has(Z)||(se===null&&(se=[]),se.push(Z));if(se!==null)for(const Z of se)L.delete(Z),D.delete(Z),n.dispatchEvent({type:"planeremoved",data:Z});for(const Z of re.detectedPlanes)if(!L.has(Z))L.add(Z),D.set(Z,re.lastChangedTime),n.dispatchEvent({type:"planeadded",data:Z});else{const he=D.get(Z);Z.lastChangedTime>he&&(D.set(Z,Z.lastChangedTime),n.dispatchEvent({type:"planechanged",data:Z}))}}M=null}const N=new Bw;N.setAnimationLoop(Y),this.setAnimationLoop=function(O){Q=O},this.dispose=function(){}}}function wP(o,e){function t(w,S){S.color.getRGB(w.fogColor.value,Ow(o)),S.isFog?(w.fogNear.value=S.near,w.fogFar.value=S.far):S.isFogExp2&&(w.fogDensity.value=S.density)}function n(w,S,C,E,A){S.isMeshBasicMaterial||S.isMeshLambertMaterial?i(w,S):S.isMeshToonMaterial?(i(w,S),p(w,S)):S.isMeshPhongMaterial?(i(w,S),d(w,S)):S.isMeshStandardMaterial?(i(w,S),g(w,S),S.isMeshPhysicalMaterial&&v(w,S,A)):S.isMeshMatcapMaterial?(i(w,S),x(w,S)):S.isMeshDepthMaterial?i(w,S):S.isMeshDistanceMaterial?(i(w,S),M(w,S)):S.isMeshNormalMaterial?i(w,S):S.isLineBasicMaterial?(r(w,S),S.isLineDashedMaterial&&a(w,S)):S.isPointsMaterial?l(w,S,C,E):S.isSpriteMaterial?f(w,S):S.isShadowMaterial?(w.color.value.copy(S.color),w.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function i(w,S){w.opacity.value=S.opacity,S.color&&w.diffuse.value.copy(S.color),S.emissive&&w.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(w.map.value=S.map),S.alphaMap&&(w.alphaMap.value=S.alphaMap),S.bumpMap&&(w.bumpMap.value=S.bumpMap,w.bumpScale.value=S.bumpScale,S.side===Or&&(w.bumpScale.value*=-1)),S.displacementMap&&(w.displacementMap.value=S.displacementMap,w.displacementScale.value=S.displacementScale,w.displacementBias.value=S.displacementBias),S.emissiveMap&&(w.emissiveMap.value=S.emissiveMap),S.normalMap&&(w.normalMap.value=S.normalMap,w.normalScale.value.copy(S.normalScale),S.side===Or&&w.normalScale.value.negate()),S.specularMap&&(w.specularMap.value=S.specularMap),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest);const C=e.get(S).envMap;if(C&&(w.envMap.value=C,w.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=S.reflectivity,w.ior.value=S.ior,w.refractionRatio.value=S.refractionRatio),S.lightMap){w.lightMap.value=S.lightMap;const L=o.useLegacyLights===!0?Math.PI:1;w.lightMapIntensity.value=S.lightMapIntensity*L}S.aoMap&&(w.aoMap.value=S.aoMap,w.aoMapIntensity.value=S.aoMapIntensity);let E;S.map?E=S.map:S.specularMap?E=S.specularMap:S.displacementMap?E=S.displacementMap:S.normalMap?E=S.normalMap:S.bumpMap?E=S.bumpMap:S.roughnessMap?E=S.roughnessMap:S.metalnessMap?E=S.metalnessMap:S.alphaMap?E=S.alphaMap:S.emissiveMap?E=S.emissiveMap:S.clearcoatMap?E=S.clearcoatMap:S.clearcoatNormalMap?E=S.clearcoatNormalMap:S.clearcoatRoughnessMap?E=S.clearcoatRoughnessMap:S.iridescenceMap?E=S.iridescenceMap:S.iridescenceThicknessMap?E=S.iridescenceThicknessMap:S.specularIntensityMap?E=S.specularIntensityMap:S.specularColorMap?E=S.specularColorMap:S.transmissionMap?E=S.transmissionMap:S.thicknessMap?E=S.thicknessMap:S.sheenColorMap?E=S.sheenColorMap:S.sheenRoughnessMap&&(E=S.sheenRoughnessMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),w.uvTransform.value.copy(E.matrix));let A;S.aoMap?A=S.aoMap:S.lightMap&&(A=S.lightMap),A!==void 0&&(A.isWebGLRenderTarget&&(A=A.texture),A.matrixAutoUpdate===!0&&A.updateMatrix(),w.uv2Transform.value.copy(A.matrix))}function r(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity}function a(w,S){w.dashSize.value=S.dashSize,w.totalSize.value=S.dashSize+S.gapSize,w.scale.value=S.scale}function l(w,S,C,E){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.size.value=S.size*C,w.scale.value=E*.5,S.map&&(w.map.value=S.map),S.alphaMap&&(w.alphaMap.value=S.alphaMap),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest);let A;S.map?A=S.map:S.alphaMap&&(A=S.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),w.uvTransform.value.copy(A.matrix))}function f(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.rotation.value=S.rotation,S.map&&(w.map.value=S.map),S.alphaMap&&(w.alphaMap.value=S.alphaMap),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest);let C;S.map?C=S.map:S.alphaMap&&(C=S.alphaMap),C!==void 0&&(C.matrixAutoUpdate===!0&&C.updateMatrix(),w.uvTransform.value.copy(C.matrix))}function d(w,S){w.specular.value.copy(S.specular),w.shininess.value=Math.max(S.shininess,1e-4)}function p(w,S){S.gradientMap&&(w.gradientMap.value=S.gradientMap)}function g(w,S){w.roughness.value=S.roughness,w.metalness.value=S.metalness,S.roughnessMap&&(w.roughnessMap.value=S.roughnessMap),S.metalnessMap&&(w.metalnessMap.value=S.metalnessMap),e.get(S).envMap&&(w.envMapIntensity.value=S.envMapIntensity)}function v(w,S,C){w.ior.value=S.ior,S.sheen>0&&(w.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),w.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(w.sheenColorMap.value=S.sheenColorMap),S.sheenRoughnessMap&&(w.sheenRoughnessMap.value=S.sheenRoughnessMap)),S.clearcoat>0&&(w.clearcoat.value=S.clearcoat,w.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(w.clearcoatMap.value=S.clearcoatMap),S.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap),S.clearcoatNormalMap&&(w.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),w.clearcoatNormalMap.value=S.clearcoatNormalMap,S.side===Or&&w.clearcoatNormalScale.value.negate())),S.iridescence>0&&(w.iridescence.value=S.iridescence,w.iridescenceIOR.value=S.iridescenceIOR,w.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(w.iridescenceMap.value=S.iridescenceMap),S.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=S.iridescenceThicknessMap)),S.transmission>0&&(w.transmission.value=S.transmission,w.transmissionSamplerMap.value=C.texture,w.transmissionSamplerSize.value.set(C.width,C.height),S.transmissionMap&&(w.transmissionMap.value=S.transmissionMap),w.thickness.value=S.thickness,S.thicknessMap&&(w.thicknessMap.value=S.thicknessMap),w.attenuationDistance.value=S.attenuationDistance,w.attenuationColor.value.copy(S.attenuationColor)),w.specularIntensity.value=S.specularIntensity,w.specularColor.value.copy(S.specularColor),S.specularIntensityMap&&(w.specularIntensityMap.value=S.specularIntensityMap),S.specularColorMap&&(w.specularColorMap.value=S.specularColorMap)}function x(w,S){S.matcap&&(w.matcap.value=S.matcap)}function M(w,S){w.referencePosition.value.copy(S.referencePosition),w.nearDistance.value=S.nearDistance,w.farDistance.value=S.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function MP(o,e,t,n){let i={},r={},a=[];const l=t.isWebGL2?o.getParameter(35375):0;function f(E,A){const L=A.program;n.uniformBlockBinding(E,L)}function d(E,A){let L=i[E.id];L===void 0&&(M(E),L=p(E),i[E.id]=L,E.addEventListener("dispose",S));const D=A.program;n.updateUBOMapping(E,D);const F=e.render.frame;r[E.id]!==F&&(v(E),r[E.id]=F)}function p(E){const A=g();E.__bindingPointIndex=A;const L=o.createBuffer(),D=E.__size,F=E.usage;return o.bindBuffer(35345,L),o.bufferData(35345,D,F),o.bindBuffer(35345,null),o.bindBufferBase(35345,A,L),L}function g(){for(let E=0;E<l;E++)if(a.indexOf(E)===-1)return a.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(E){const A=i[E.id],L=E.uniforms,D=E.__cache;o.bindBuffer(35345,A);for(let F=0,B=L.length;F<B;F++){const I=L[F];if(x(I,F,D)===!0){const z=I.__offset,V=Array.isArray(I.value)?I.value:[I.value];let te=0;for(let X=0;X<V.length;X++){const K=V[X],q=w(K);typeof K=="number"?(I.__data[0]=K,o.bufferSubData(35345,z+te,I.__data)):K.isMatrix3?(I.__data[0]=K.elements[0],I.__data[1]=K.elements[1],I.__data[2]=K.elements[2],I.__data[3]=K.elements[0],I.__data[4]=K.elements[3],I.__data[5]=K.elements[4],I.__data[6]=K.elements[5],I.__data[7]=K.elements[0],I.__data[8]=K.elements[6],I.__data[9]=K.elements[7],I.__data[10]=K.elements[8],I.__data[11]=K.elements[0]):(K.toArray(I.__data,te),te+=q.storage/Float32Array.BYTES_PER_ELEMENT)}o.bufferSubData(35345,z,I.__data)}}o.bindBuffer(35345,null)}function x(E,A,L){const D=E.value;if(L[A]===void 0){if(typeof D=="number")L[A]=D;else{const F=Array.isArray(D)?D:[D],B=[];for(let I=0;I<F.length;I++)B.push(F[I].clone());L[A]=B}return!0}else if(typeof D=="number"){if(L[A]!==D)return L[A]=D,!0}else{const F=Array.isArray(L[A])?L[A]:[L[A]],B=Array.isArray(D)?D:[D];for(let I=0;I<F.length;I++){const z=F[I];if(z.equals(B[I])===!1)return z.copy(B[I]),!0}}return!1}function M(E){const A=E.uniforms;let L=0;const D=16;let F=0;for(let B=0,I=A.length;B<I;B++){const z=A[B],V={boundary:0,storage:0},te=Array.isArray(z.value)?z.value:[z.value];for(let X=0,K=te.length;X<K;X++){const q=te[X],oe=w(q);V.boundary+=oe.boundary,V.storage+=oe.storage}if(z.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=L,B>0){F=L%D;const X=D-F;F!==0&&X-V.boundary<0&&(L+=D-F,z.__offset=L)}L+=V.storage}return F=L%D,F>0&&(L+=D-F),E.__size=L,E.__cache={},this}function w(E){const A={boundary:0,storage:0};return typeof E=="number"?(A.boundary=4,A.storage=4):E.isVector2?(A.boundary=8,A.storage=8):E.isVector3||E.isColor?(A.boundary=16,A.storage=12):E.isVector4?(A.boundary=16,A.storage=16):E.isMatrix3?(A.boundary=48,A.storage=48):E.isMatrix4?(A.boundary=64,A.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),A}function S(E){const A=E.target;A.removeEventListener("dispose",S);const L=a.indexOf(A.__bindingPointIndex);a.splice(L,1),o.deleteBuffer(i[A.id]),delete i[A.id],delete r[A.id]}function C(){for(const E in i)o.deleteBuffer(i[E]);a=[],i={},r={}}return{bind:f,update:d,dispose:C}}function bP(){const o=Ed("canvas");return o.style.display="block",o}function Mg(o={}){this.isWebGLRenderer=!0;const e=o.canvas!==void 0?o.canvas:bP(),t=o.context!==void 0?o.context:null,n=o.depth!==void 0?o.depth:!0,i=o.stencil!==void 0?o.stencil:!0,r=o.antialias!==void 0?o.antialias:!1,a=o.premultipliedAlpha!==void 0?o.premultipliedAlpha:!0,l=o.preserveDrawingBuffer!==void 0?o.preserveDrawingBuffer:!1,f=o.powerPreference!==void 0?o.powerPreference:"default",d=o.failIfMajorPerformanceCaveat!==void 0?o.failIfMajorPerformanceCaveat:!1;let p;t!==null?p=t.getContextAttributes().alpha:p=o.alpha!==void 0?o.alpha:!1;let g=null,v=null;const x=[],M=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ul,this.useLegacyLights=!0,this.toneMapping=yo,this.toneMappingExposure=1;const w=this;let S=!1,C=0,E=0,A=null,L=-1,D=null;const F=new gn,B=new gn;let I=null,z=e.width,V=e.height,te=1,X=null,K=null;const q=new gn(0,0,z,V),oe=new gn(0,0,z,V);let ce=!1;const ye=new xg;let H=!1,Q=!1,Y=null;const N=new Jt,O=new J,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function se(){return A===null?te:1}let Z=t;function he(j,_e){for(let Ce=0;Ce<j.length;Ce++){const ge=j[Ce],Ne=e.getContext(ge,_e);if(Ne!==null)return Ne}return null}try{const j={alpha:!0,depth:n,stencil:i,antialias:r,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:f,failIfMajorPerformanceCaveat:d};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${pg}`),e.addEventListener("webglcontextlost",ct,!1),e.addEventListener("webglcontextrestored",et,!1),e.addEventListener("webglcontextcreationerror",Ze,!1),Z===null){const _e=["webgl2","webgl","experimental-webgl"];if(w.isWebGL1Renderer===!0&&_e.shift(),Z=he(_e,j),Z===null)throw he(_e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(j){throw console.error("THREE.WebGLRenderer: "+j.message),j}let ue,me,we,Oe,ke,ae,be,Ge,He,Ue,ut,Ie,Qe,tt,Re,W,G,fe,Te,je,Ye,qe,Ke,Le;function lt(){ue=new BC(Z),me=new kC(Z,ue,o),ue.init(me),qe=new jw(Z,ue,me),we=new yP(Z,ue,me),Oe=new WC,ke=new oP,ae=new xP(Z,ue,we,ke,me,qe,Oe),be=new NC(w),Ge=new UC(w),He=new Kb(Z,me),Ke=new IC(Z,ue,He,me),Ue=new GC(Z,He,Oe,Ke),ut=new YC(Z,Ue,He,Oe),Te=new XC(Z,me,ae),W=new FC(ke),Ie=new sP(w,be,Ge,ue,me,Ke,W),Qe=new wP(w,ke),tt=new lP,Re=new pP(ue,me),fe=new RC(w,be,Ge,we,ut,p,a),G=new vP(w,ut,me),Le=new MP(Z,Oe,me,we),je=new DC(Z,ue,Oe,me),Ye=new VC(Z,ue,Oe,me),Oe.programs=Ie.programs,w.capabilities=me,w.extensions=ue,w.properties=ke,w.renderLists=tt,w.shadowMap=G,w.state=we,w.info=Oe}lt();const Je=new SP(w,Z);this.xr=Je,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const j=ue.get("WEBGL_lose_context");j&&j.loseContext()},this.forceContextRestore=function(){const j=ue.get("WEBGL_lose_context");j&&j.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(j){j!==void 0&&(te=j,this.setSize(z,V,!1))},this.getSize=function(j){return j.set(z,V)},this.setSize=function(j,_e,Ce=!0){if(Je.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=j,V=_e,e.width=Math.floor(j*te),e.height=Math.floor(_e*te),Ce===!0&&(e.style.width=j+"px",e.style.height=_e+"px"),this.setViewport(0,0,j,_e)},this.getDrawingBufferSize=function(j){return j.set(z*te,V*te).floor()},this.setDrawingBufferSize=function(j,_e,Ce){z=j,V=_e,te=Ce,e.width=Math.floor(j*Ce),e.height=Math.floor(_e*Ce),this.setViewport(0,0,j,_e)},this.getCurrentViewport=function(j){return j.copy(F)},this.getViewport=function(j){return j.copy(q)},this.setViewport=function(j,_e,Ce,ge){j.isVector4?q.set(j.x,j.y,j.z,j.w):q.set(j,_e,Ce,ge),we.viewport(F.copy(q).multiplyScalar(te).floor())},this.getScissor=function(j){return j.copy(oe)},this.setScissor=function(j,_e,Ce,ge){j.isVector4?oe.set(j.x,j.y,j.z,j.w):oe.set(j,_e,Ce,ge),we.scissor(B.copy(oe).multiplyScalar(te).floor())},this.getScissorTest=function(){return ce},this.setScissorTest=function(j){we.setScissorTest(ce=j)},this.setOpaqueSort=function(j){X=j},this.setTransparentSort=function(j){K=j},this.getClearColor=function(j){return j.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(j=!0,_e=!0,Ce=!0){let ge=0;j&&(ge|=16384),_e&&(ge|=256),Ce&&(ge|=1024),Z.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ct,!1),e.removeEventListener("webglcontextrestored",et,!1),e.removeEventListener("webglcontextcreationerror",Ze,!1),tt.dispose(),Re.dispose(),ke.dispose(),be.dispose(),Ge.dispose(),ut.dispose(),Ke.dispose(),Le.dispose(),Ie.dispose(),Je.dispose(),Je.removeEventListener("sessionstart",Be),Je.removeEventListener("sessionend",rt),Y&&(Y.dispose(),Y=null),mt.stop()};function ct(j){j.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const j=Oe.autoReset,_e=G.enabled,Ce=G.autoUpdate,ge=G.needsUpdate,Ne=G.type;lt(),Oe.autoReset=j,G.enabled=_e,G.autoUpdate=Ce,G.needsUpdate=ge,G.type=Ne}function Ze(j){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",j.statusMessage)}function ie(j){const _e=j.target;_e.removeEventListener("dispose",ie),Fe(_e)}function Fe(j){st(j),ke.remove(j)}function st(j){const _e=ke.get(j).programs;_e!==void 0&&(_e.forEach(function(Ce){Ie.releaseProgram(Ce)}),j.isShaderMaterial&&Ie.releaseShaderCache(j))}this.renderBufferDirect=function(j,_e,Ce,ge,Ne,St){_e===null&&(_e=re);const Ct=Ne.isMesh&&Ne.matrixWorld.determinant()<0,At=Ei(j,_e,Ce,ge,Ne);we.setMaterial(ge,Ct);let Wt=Ce.index,tn=1;ge.wireframe===!0&&(Wt=Ue.getWireframeAttribute(Ce),tn=2);const Ht=Ce.drawRange,qt=Ce.attributes.position;let Tn=Ht.start*tn,ii=(Ht.start+Ht.count)*tn;St!==null&&(Tn=Math.max(Tn,St.start*tn),ii=Math.min(ii,(St.start+St.count)*tn)),Wt!==null?(Tn=Math.max(Tn,0),ii=Math.min(ii,Wt.count)):qt!=null&&(Tn=Math.max(Tn,0),ii=Math.min(ii,qt.count));const Ti=ii-Tn;if(Ti<0||Ti===1/0)return;Ke.setup(Ne,ge,At,Ce,Wt);let Sr,Sn=je;if(Wt!==null&&(Sr=He.get(Wt),Sn=Ye,Sn.setIndex(Sr)),Ne.isMesh)ge.wireframe===!0?(we.setLineWidth(ge.wireframeLinewidth*se()),Sn.setMode(1)):Sn.setMode(4);else if(Ne.isLine){let Xe=ge.linewidth;Xe===void 0&&(Xe=1),we.setLineWidth(Xe*se()),Ne.isLineSegments?Sn.setMode(1):Ne.isLineLoop?Sn.setMode(2):Sn.setMode(3)}else Ne.isPoints?Sn.setMode(0):Ne.isSprite&&Sn.setMode(4);if(Ne.isInstancedMesh)Sn.renderInstances(Tn,Ti,Ne.count);else if(Ce.isInstancedBufferGeometry){const Xe=Ce._maxInstanceCount!==void 0?Ce._maxInstanceCount:1/0,Yi=Math.min(Ce.instanceCount,Xe);Sn.renderInstances(Tn,Ti,Yi)}else Sn.render(Tn,Ti)},this.compile=function(j,_e){function Ce(ge,Ne,St){ge.transparent===!0&&ge.side===go&&ge.forceSinglePass===!1?(ge.side=Or,ge.needsUpdate=!0,Ot(ge,Ne,St),ge.side=Xo,ge.needsUpdate=!0,Ot(ge,Ne,St),ge.side=go):Ot(ge,Ne,St)}v=Re.get(j),v.init(),M.push(v),j.traverseVisible(function(ge){ge.isLight&&ge.layers.test(_e.layers)&&(v.pushLight(ge),ge.castShadow&&v.pushShadow(ge))}),v.setupLights(w.useLegacyLights),j.traverse(function(ge){const Ne=ge.material;if(Ne)if(Array.isArray(Ne))for(let St=0;St<Ne.length;St++){const Ct=Ne[St];Ce(Ct,j,ge)}else Ce(Ne,j,ge)}),M.pop(),v=null};let ee=null;function xe(j){ee&&ee(j)}function Be(){mt.stop()}function rt(){mt.start()}const mt=new Bw;mt.setAnimationLoop(xe),typeof self<"u"&&mt.setContext(self),this.setAnimationLoop=function(j){ee=j,Je.setAnimationLoop(j),j===null?mt.stop():mt.start()},Je.addEventListener("sessionstart",Be),Je.addEventListener("sessionend",rt),this.render=function(j,_e){if(_e!==void 0&&_e.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;j.matrixWorldAutoUpdate===!0&&j.updateMatrixWorld(),_e.parent===null&&_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),Je.enabled===!0&&Je.isPresenting===!0&&(Je.cameraAutoUpdate===!0&&Je.updateCamera(_e),_e=Je.getCamera()),j.isScene===!0&&j.onBeforeRender(w,j,_e,A),v=Re.get(j,M.length),v.init(),M.push(v),N.multiplyMatrices(_e.projectionMatrix,_e.matrixWorldInverse),ye.setFromProjectionMatrix(N),Q=this.localClippingEnabled,H=W.init(this.clippingPlanes,Q),g=tt.get(j,x.length),g.init(),x.push(g),Yt(j,_e,0,w.sortObjects),g.finish(),w.sortObjects===!0&&g.sort(X,K),H===!0&&W.beginShadows();const Ce=v.state.shadowsArray;if(G.render(Ce,j,_e),H===!0&&W.endShadows(),this.info.autoReset===!0&&this.info.reset(),fe.render(g,j),v.setupLights(w.useLegacyLights),_e.isArrayCamera){const ge=_e.cameras;for(let Ne=0,St=ge.length;Ne<St;Ne++){const Ct=ge[Ne];kt(g,j,Ct,Ct.viewport)}}else kt(g,j,_e);A!==null&&(ae.updateMultisampleRenderTarget(A),ae.updateRenderTargetMipmap(A)),j.isScene===!0&&j.onAfterRender(w,j,_e),Ke.resetDefaultState(),L=-1,D=null,M.pop(),M.length>0?v=M[M.length-1]:v=null,x.pop(),x.length>0?g=x[x.length-1]:g=null};function Yt(j,_e,Ce,ge){if(j.visible===!1)return;if(j.layers.test(_e.layers)){if(j.isGroup)Ce=j.renderOrder;else if(j.isLOD)j.autoUpdate===!0&&j.update(_e);else if(j.isLight)v.pushLight(j),j.castShadow&&v.pushShadow(j);else if(j.isSprite){if(!j.frustumCulled||ye.intersectsSprite(j)){ge&&O.setFromMatrixPosition(j.matrixWorld).applyMatrix4(N);const Ct=ut.update(j),At=j.material;At.visible&&g.push(j,Ct,At,Ce,O.z,null)}}else if((j.isMesh||j.isLine||j.isPoints)&&(j.isSkinnedMesh&&j.skeleton.frame!==Oe.render.frame&&(j.skeleton.update(),j.skeleton.frame=Oe.render.frame),!j.frustumCulled||ye.intersectsObject(j))){ge&&O.setFromMatrixPosition(j.matrixWorld).applyMatrix4(N);const Ct=ut.update(j),At=j.material;if(Array.isArray(At)){const Wt=Ct.groups;for(let tn=0,Ht=Wt.length;tn<Ht;tn++){const qt=Wt[tn],Tn=At[qt.materialIndex];Tn&&Tn.visible&&g.push(j,Ct,Tn,Ce,O.z,qt)}}else At.visible&&g.push(j,Ct,At,Ce,O.z,null)}}const St=j.children;for(let Ct=0,At=St.length;Ct<At;Ct++)Yt(St[Ct],_e,Ce,ge)}function kt(j,_e,Ce,ge){const Ne=j.opaque,St=j.transmissive,Ct=j.transparent;v.setupLightsView(Ce),H===!0&&W.setGlobalState(w.clippingPlanes,Ce),St.length>0&&Vt(Ne,_e,Ce),ge&&we.viewport(F.copy(ge)),Ne.length>0&&Gt(Ne,_e,Ce),St.length>0&&Gt(St,_e,Ce),Ct.length>0&&Gt(Ct,_e,Ce),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1)}function Vt(j,_e,Ce){const ge=me.isWebGL2;Y===null&&(Y=new xo(1024,1024,{generateMipmaps:!0,type:ue.has("EXT_color_buffer_half_float")?kf:Oa,minFilter:zl,samples:ge&&r===!0?4:0}));const Ne=w.getRenderTarget();w.setRenderTarget(Y),w.clear();const St=w.toneMapping;w.toneMapping=yo,Gt(j,_e,Ce),w.toneMapping=St,ae.updateMultisampleRenderTarget(Y),ae.updateRenderTargetMipmap(Y),w.setRenderTarget(Ne)}function Gt(j,_e,Ce){const ge=_e.isScene===!0?_e.overrideMaterial:null;for(let Ne=0,St=j.length;Ne<St;Ne++){const Ct=j[Ne],At=Ct.object,Wt=Ct.geometry,tn=ge===null?Ct.material:ge,Ht=Ct.group;At.layers.test(Ce.layers)&&en(At,_e,Ce,Wt,tn,Ht)}}function en(j,_e,Ce,ge,Ne,St){j.onBeforeRender(w,_e,Ce,ge,Ne,St),j.modelViewMatrix.multiplyMatrices(Ce.matrixWorldInverse,j.matrixWorld),j.normalMatrix.getNormalMatrix(j.modelViewMatrix),Ne.onBeforeRender(w,_e,Ce,ge,j,St),Ne.transparent===!0&&Ne.side===go&&Ne.forceSinglePass===!1?(Ne.side=Or,Ne.needsUpdate=!0,w.renderBufferDirect(Ce,_e,ge,Ne,j,St),Ne.side=Xo,Ne.needsUpdate=!0,w.renderBufferDirect(Ce,_e,ge,Ne,j,St),Ne.side=go):w.renderBufferDirect(Ce,_e,ge,Ne,j,St),j.onAfterRender(w,_e,Ce,ge,Ne,St)}function Ot(j,_e,Ce){_e.isScene!==!0&&(_e=re);const ge=ke.get(j),Ne=v.state.lights,St=v.state.shadowsArray,Ct=Ne.state.version,At=Ie.getParameters(j,Ne.state,St,_e,Ce),Wt=Ie.getProgramCacheKey(At);let tn=ge.programs;ge.environment=j.isMeshStandardMaterial?_e.environment:null,ge.fog=_e.fog,ge.envMap=(j.isMeshStandardMaterial?Ge:be).get(j.envMap||ge.environment),tn===void 0&&(j.addEventListener("dispose",ie),tn=new Map,ge.programs=tn);let Ht=tn.get(Wt);if(Ht!==void 0){if(ge.currentProgram===Ht&&ge.lightsStateVersion===Ct)return zt(j,At),Ht}else At.uniforms=Ie.getUniforms(j),j.onBuild(Ce,At,w),j.onBeforeCompile(At,w),Ht=Ie.acquireProgram(At,Wt),tn.set(Wt,Ht),ge.uniforms=At.uniforms;const qt=ge.uniforms;(!j.isShaderMaterial&&!j.isRawShaderMaterial||j.clipping===!0)&&(qt.clippingPlanes=W.uniform),zt(j,At),ge.needsLights=un(j),ge.lightsStateVersion=Ct,ge.needsLights&&(qt.ambientLightColor.value=Ne.state.ambient,qt.lightProbe.value=Ne.state.probe,qt.directionalLights.value=Ne.state.directional,qt.directionalLightShadows.value=Ne.state.directionalShadow,qt.spotLights.value=Ne.state.spot,qt.spotLightShadows.value=Ne.state.spotShadow,qt.rectAreaLights.value=Ne.state.rectArea,qt.ltc_1.value=Ne.state.rectAreaLTC1,qt.ltc_2.value=Ne.state.rectAreaLTC2,qt.pointLights.value=Ne.state.point,qt.pointLightShadows.value=Ne.state.pointShadow,qt.hemisphereLights.value=Ne.state.hemi,qt.directionalShadowMap.value=Ne.state.directionalShadowMap,qt.directionalShadowMatrix.value=Ne.state.directionalShadowMatrix,qt.spotShadowMap.value=Ne.state.spotShadowMap,qt.spotLightMatrix.value=Ne.state.spotLightMatrix,qt.spotLightMap.value=Ne.state.spotLightMap,qt.pointShadowMap.value=Ne.state.pointShadowMap,qt.pointShadowMatrix.value=Ne.state.pointShadowMatrix);const Tn=Ht.getUniforms(),ii=Qm.seqWithValue(Tn.seq,qt);return ge.currentProgram=Ht,ge.uniformsList=ii,Ht}function zt(j,_e){const Ce=ke.get(j);Ce.outputEncoding=_e.outputEncoding,Ce.instancing=_e.instancing,Ce.skinning=_e.skinning,Ce.morphTargets=_e.morphTargets,Ce.morphNormals=_e.morphNormals,Ce.morphColors=_e.morphColors,Ce.morphTargetsCount=_e.morphTargetsCount,Ce.numClippingPlanes=_e.numClippingPlanes,Ce.numIntersection=_e.numClipIntersection,Ce.vertexAlphas=_e.vertexAlphas,Ce.vertexTangents=_e.vertexTangents,Ce.toneMapping=_e.toneMapping}function Ei(j,_e,Ce,ge,Ne){_e.isScene!==!0&&(_e=re),ae.resetTextureUnits();const St=_e.fog,Ct=ge.isMeshStandardMaterial?_e.environment:null,At=A===null?w.outputEncoding:A.isXRRenderTarget===!0?A.texture.encoding:Ul,Wt=(ge.isMeshStandardMaterial?Ge:be).get(ge.envMap||Ct),tn=ge.vertexColors===!0&&!!Ce.attributes.color&&Ce.attributes.color.itemSize===4,Ht=!!ge.normalMap&&!!Ce.attributes.tangent,qt=!!Ce.morphAttributes.position,Tn=!!Ce.morphAttributes.normal,ii=!!Ce.morphAttributes.color,Ti=ge.toneMapped?w.toneMapping:yo,Sr=Ce.morphAttributes.position||Ce.morphAttributes.normal||Ce.morphAttributes.color,Sn=Sr!==void 0?Sr.length:0,Xe=ke.get(ge),Yi=v.state.lights;if(H===!0&&(Q===!0||j!==D)){const nn=j===D&&ge.id===L;W.setState(ge,j,nn)}let wn=!1;ge.version===Xe.__version?(Xe.needsLights&&Xe.lightsStateVersion!==Yi.state.version||Xe.outputEncoding!==At||Ne.isInstancedMesh&&Xe.instancing===!1||!Ne.isInstancedMesh&&Xe.instancing===!0||Ne.isSkinnedMesh&&Xe.skinning===!1||!Ne.isSkinnedMesh&&Xe.skinning===!0||Xe.envMap!==Wt||ge.fog===!0&&Xe.fog!==St||Xe.numClippingPlanes!==void 0&&(Xe.numClippingPlanes!==W.numPlanes||Xe.numIntersection!==W.numIntersection)||Xe.vertexAlphas!==tn||Xe.vertexTangents!==Ht||Xe.morphTargets!==qt||Xe.morphNormals!==Tn||Xe.morphColors!==ii||Xe.toneMapping!==Ti||me.isWebGL2===!0&&Xe.morphTargetsCount!==Sn)&&(wn=!0):(wn=!0,Xe.__version=ge.version);let ri=Xe.currentProgram;wn===!0&&(ri=Ot(ge,_e,Ne));let Ur=!1,Br=!1,qi=!1;const cn=ri.getUniforms(),Dt=Xe.uniforms;if(we.useProgram(ri.program)&&(Ur=!0,Br=!0,qi=!0),ge.id!==L&&(L=ge.id,Br=!0),Ur||D!==j){if(cn.setValue(Z,"projectionMatrix",j.projectionMatrix),me.logarithmicDepthBuffer&&cn.setValue(Z,"logDepthBufFC",2/(Math.log(j.far+1)/Math.LN2)),D!==j&&(D=j,Br=!0,qi=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){const nn=cn.map.cameraPosition;nn!==void 0&&nn.setValue(Z,O.setFromMatrixPosition(j.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&cn.setValue(Z,"isOrthographic",j.isOrthographicCamera===!0),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||Ne.isSkinnedMesh)&&cn.setValue(Z,"viewMatrix",j.matrixWorldInverse)}if(Ne.isSkinnedMesh){cn.setOptional(Z,Ne,"bindMatrix"),cn.setOptional(Z,Ne,"bindMatrixInverse");const nn=Ne.skeleton;nn&&(me.floatVertexTextures?(nn.boneTexture===null&&nn.computeBoneTexture(),cn.setValue(Z,"boneTexture",nn.boneTexture,ae),cn.setValue(Z,"boneTextureSize",nn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const an=Ce.morphAttributes;if((an.position!==void 0||an.normal!==void 0||an.color!==void 0&&me.isWebGL2===!0)&&Te.update(Ne,Ce,ri),(Br||Xe.receiveShadow!==Ne.receiveShadow)&&(Xe.receiveShadow=Ne.receiveShadow,cn.setValue(Z,"receiveShadow",Ne.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(Dt.envMap.value=Wt,Dt.flipEnvMap.value=Wt.isCubeTexture&&Wt.isRenderTargetTexture===!1?-1:1),Br&&(cn.setValue(Z,"toneMappingExposure",w.toneMappingExposure),Xe.needsLights&&Wn(Dt,qi),St&&ge.fog===!0&&Qe.refreshFogUniforms(Dt,St),Qe.refreshMaterialUniforms(Dt,ge,te,V,Y),Qm.upload(Z,Xe.uniformsList,Dt,ae)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(Qm.upload(Z,Xe.uniformsList,Dt,ae),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&cn.setValue(Z,"center",Ne.center),cn.setValue(Z,"modelViewMatrix",Ne.modelViewMatrix),cn.setValue(Z,"normalMatrix",Ne.normalMatrix),cn.setValue(Z,"modelMatrix",Ne.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const nn=ge.uniformsGroups;for(let Fn=0,Qn=nn.length;Fn<Qn;Fn++)if(me.isWebGL2){const wr=nn[Fn];Le.update(wr,ri),Le.bind(wr,ri)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ri}function Wn(j,_e){j.ambientLightColor.needsUpdate=_e,j.lightProbe.needsUpdate=_e,j.directionalLights.needsUpdate=_e,j.directionalLightShadows.needsUpdate=_e,j.pointLights.needsUpdate=_e,j.pointLightShadows.needsUpdate=_e,j.spotLights.needsUpdate=_e,j.spotLightShadows.needsUpdate=_e,j.rectAreaLights.needsUpdate=_e,j.hemisphereLights.needsUpdate=_e}function un(j){return j.isMeshLambertMaterial||j.isMeshToonMaterial||j.isMeshPhongMaterial||j.isMeshStandardMaterial||j.isShadowMaterial||j.isShaderMaterial&&j.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(j,_e,Ce){ke.get(j.texture).__webglTexture=_e,ke.get(j.depthTexture).__webglTexture=Ce;const ge=ke.get(j);ge.__hasExternalTextures=!0,ge.__hasExternalTextures&&(ge.__autoAllocateDepthBuffer=Ce===void 0,ge.__autoAllocateDepthBuffer||ue.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(j,_e){const Ce=ke.get(j);Ce.__webglFramebuffer=_e,Ce.__useDefaultFramebuffer=_e===void 0},this.setRenderTarget=function(j,_e=0,Ce=0){A=j,C=_e,E=Ce;let ge=!0,Ne=null,St=!1,Ct=!1;if(j){const Wt=ke.get(j);Wt.__useDefaultFramebuffer!==void 0?(we.bindFramebuffer(36160,null),ge=!1):Wt.__webglFramebuffer===void 0?ae.setupRenderTarget(j):Wt.__hasExternalTextures&&ae.rebindTextures(j,ke.get(j.texture).__webglTexture,ke.get(j.depthTexture).__webglTexture);const tn=j.texture;(tn.isData3DTexture||tn.isDataArrayTexture||tn.isCompressedArrayTexture)&&(Ct=!0);const Ht=ke.get(j).__webglFramebuffer;j.isWebGLCubeRenderTarget?(Ne=Ht[_e],St=!0):me.isWebGL2&&j.samples>0&&ae.useMultisampledRTT(j)===!1?Ne=ke.get(j).__webglMultisampledFramebuffer:Ne=Ht,F.copy(j.viewport),B.copy(j.scissor),I=j.scissorTest}else F.copy(q).multiplyScalar(te).floor(),B.copy(oe).multiplyScalar(te).floor(),I=ce;if(we.bindFramebuffer(36160,Ne)&&me.drawBuffers&&ge&&we.drawBuffers(j,Ne),we.viewport(F),we.scissor(B),we.setScissorTest(I),St){const Wt=ke.get(j.texture);Z.framebufferTexture2D(36160,36064,34069+_e,Wt.__webglTexture,Ce)}else if(Ct){const Wt=ke.get(j.texture),tn=_e||0;Z.framebufferTextureLayer(36160,36064,Wt.__webglTexture,Ce||0,tn)}L=-1},this.readRenderTargetPixels=function(j,_e,Ce,ge,Ne,St,Ct){if(!(j&&j.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let At=ke.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&Ct!==void 0&&(At=At[Ct]),At){we.bindFramebuffer(36160,At);try{const Wt=j.texture,tn=Wt.format,Ht=Wt.type;if(tn!==es&&qe.convert(tn)!==Z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const qt=Ht===kf&&(ue.has("EXT_color_buffer_half_float")||me.isWebGL2&&ue.has("EXT_color_buffer_float"));if(Ht!==Oa&&qe.convert(Ht)!==Z.getParameter(35738)&&!(Ht===ka&&(me.isWebGL2||ue.has("OES_texture_float")||ue.has("WEBGL_color_buffer_float")))&&!qt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_e>=0&&_e<=j.width-ge&&Ce>=0&&Ce<=j.height-Ne&&Z.readPixels(_e,Ce,ge,Ne,qe.convert(tn),qe.convert(Ht),St)}finally{const Wt=A!==null?ke.get(A).__webglFramebuffer:null;we.bindFramebuffer(36160,Wt)}}},this.copyFramebufferToTexture=function(j,_e,Ce=0){const ge=Math.pow(2,-Ce),Ne=Math.floor(_e.image.width*ge),St=Math.floor(_e.image.height*ge);ae.setTexture2D(_e,0),Z.copyTexSubImage2D(3553,Ce,0,0,j.x,j.y,Ne,St),we.unbindTexture()},this.copyTextureToTexture=function(j,_e,Ce,ge=0){const Ne=_e.image.width,St=_e.image.height,Ct=qe.convert(Ce.format),At=qe.convert(Ce.type);ae.setTexture2D(Ce,0),Z.pixelStorei(37440,Ce.flipY),Z.pixelStorei(37441,Ce.premultiplyAlpha),Z.pixelStorei(3317,Ce.unpackAlignment),_e.isDataTexture?Z.texSubImage2D(3553,ge,j.x,j.y,Ne,St,Ct,At,_e.image.data):_e.isCompressedTexture?Z.compressedTexSubImage2D(3553,ge,j.x,j.y,_e.mipmaps[0].width,_e.mipmaps[0].height,Ct,_e.mipmaps[0].data):Z.texSubImage2D(3553,ge,j.x,j.y,Ct,At,_e.image),ge===0&&Ce.generateMipmaps&&Z.generateMipmap(3553),we.unbindTexture()},this.copyTextureToTexture3D=function(j,_e,Ce,ge,Ne=0){if(w.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const St=j.max.x-j.min.x+1,Ct=j.max.y-j.min.y+1,At=j.max.z-j.min.z+1,Wt=qe.convert(ge.format),tn=qe.convert(ge.type);let Ht;if(ge.isData3DTexture)ae.setTexture3D(ge,0),Ht=32879;else if(ge.isDataArrayTexture)ae.setTexture2DArray(ge,0),Ht=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(37440,ge.flipY),Z.pixelStorei(37441,ge.premultiplyAlpha),Z.pixelStorei(3317,ge.unpackAlignment);const qt=Z.getParameter(3314),Tn=Z.getParameter(32878),ii=Z.getParameter(3316),Ti=Z.getParameter(3315),Sr=Z.getParameter(32877),Sn=Ce.isCompressedTexture?Ce.mipmaps[0]:Ce.image;Z.pixelStorei(3314,Sn.width),Z.pixelStorei(32878,Sn.height),Z.pixelStorei(3316,j.min.x),Z.pixelStorei(3315,j.min.y),Z.pixelStorei(32877,j.min.z),Ce.isDataTexture||Ce.isData3DTexture?Z.texSubImage3D(Ht,Ne,_e.x,_e.y,_e.z,St,Ct,At,Wt,tn,Sn.data):Ce.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(Ht,Ne,_e.x,_e.y,_e.z,St,Ct,At,Wt,Sn.data)):Z.texSubImage3D(Ht,Ne,_e.x,_e.y,_e.z,St,Ct,At,Wt,tn,Sn),Z.pixelStorei(3314,qt),Z.pixelStorei(32878,Tn),Z.pixelStorei(3316,ii),Z.pixelStorei(3315,Ti),Z.pixelStorei(32877,Sr),Ne===0&&ge.generateMipmaps&&Z.generateMipmap(Ht),we.unbindTexture()},this.initTexture=function(j){j.isCubeTexture?ae.setTextureCube(j,0):j.isData3DTexture?ae.setTexture3D(j,0):j.isDataArrayTexture||j.isCompressedArrayTexture?ae.setTexture2DArray(j,0):ae.setTexture2D(j,0),we.unbindTexture()},this.resetState=function(){C=0,E=0,A=null,we.reset(),Ke.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(Mg.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(o){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!o}}});class qw extends Mg{}qw.prototype.isWebGL1Renderer=!0;class bg{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new vt(e),this.density=t}clone(){return new bg(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Eg{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new vt(e),this.near=t,this.far=n}clone(){return new Eg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class rg extends mn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Tg{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Md,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=gs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fr=new J;class $u{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Fr.fromBufferAttribute(this,t),Fr.applyMatrix4(e),this.setXYZ(t,Fr.x,Fr.y,Fr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Fr.fromBufferAttribute(this,t),Fr.applyNormalMatrix(e),this.setXYZ(t,Fr.x,Fr.y,Fr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Fr.fromBufferAttribute(this,t),Fr.transformDirection(e),this.setXYZ(t,Fr.x,Fr.y,Fr.z);return this}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Fa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Fa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Fa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Fa(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),i=Pn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),i=Pn(i,this.array),r=Pn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new Ln(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new $u(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Oy extends ar{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let df;const Yh=new J,pf=new J,mf=new J,gf=new Ve,qh=new Ve,Zw=new Jt,gm=new J,Zh=new J,vm=new J,H1=new Ve,W0=new Ve,j1=new Ve;class Jw extends mn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",df===void 0){df=new $t;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Tg(t,5);df.setIndex([0,1,2,0,2,3]),df.setAttribute("position",new $u(n,3,0,!1)),df.setAttribute("uv",new $u(n,2,3,!1))}this.geometry=df,this.material=e!==void 0?e:new Oy,this.center=new Ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),pf.setFromMatrixScale(this.matrixWorld),Zw.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),mf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&pf.multiplyScalar(-mf.z);const n=this.material.rotation;let i,r;n!==0&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;ym(gm.set(-.5,-.5,0),mf,a,pf,i,r),ym(Zh.set(.5,-.5,0),mf,a,pf,i,r),ym(vm.set(.5,.5,0),mf,a,pf,i,r),H1.set(0,0),W0.set(1,0),j1.set(1,1);let l=e.ray.intersectTriangle(gm,Zh,vm,!1,Yh);if(l===null&&(ym(Zh.set(-.5,.5,0),mf,a,pf,i,r),W0.set(0,1),l=e.ray.intersectTriangle(gm,vm,Zh,!1,Yh),l===null))return;const f=e.ray.origin.distanceTo(Yh);f<e.near||f>e.far||t.push({distance:f,point:Yh.clone(),uv:Ds.getUV(Yh,gm,Zh,vm,H1,W0,j1,new Ve),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function ym(o,e,t,n,i,r){gf.subVectors(o,t).addScalar(.5).multiply(n),i!==void 0?(qh.x=r*gf.x-i*gf.y,qh.y=i*gf.x+r*gf.y):qh.copy(gf),o.copy(e),o.x+=qh.x,o.y+=qh.y,o.applyMatrix4(Zw)}const xm=new J,X1=new J;class Qw extends mn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){xm.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(xm);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){xm.setFromMatrixPosition(e.matrixWorld),X1.setFromMatrixPosition(this.matrixWorld);const n=xm.distanceTo(X1)/e.zoom;t[0].object.visible=!0;let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),n>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const Y1=new J,q1=new gn,Z1=new gn,EP=new J,J1=new Jt;class Kw extends bi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Jt,this.bindMatrixInverse=new Jt}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new gn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;q1.fromBufferAttribute(i.attributes.skinIndex,e),Z1.fromBufferAttribute(i.attributes.skinWeight,e),Y1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const a=Z1.getComponent(r);if(a!==0){const l=q1.getComponent(r);J1.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(EP.copy(Y1).applyMatrix4(J1),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class zy extends mn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Lf extends Jn{constructor(e=null,t=1,n=1,i,r,a,l,f,d=ci,p=ci,g,v){super(null,a,l,f,d,p,i,r,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Q1=new Jt,TP=new Jt;class Cg{constructor(e=[],t=[]){this.uuid=gs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Jt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const l=e[r]?e[r].matrixWorld:TP;Q1.multiplyMatrices(l,t[r]),Q1.toArray(n,r*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Cg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Dw(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Lf(t,e,e,es,ka);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const r=e.bones[n];let a=t[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new zy),this.bones.push(a),this.boneInverses.push(new Jt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const a=t[i];e.bones.push(a.uuid);const l=n[i];e.boneInverses.push(l.toArray())}return e}}class ec extends Ln{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const K1=new Jt,$1=new Jt,_m=[],CP=new Jt,Jh=new bi;class $w extends bi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ec(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let i=0;i<n;i++)this.setMatrixAt(i,CP)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Jh.geometry=this.geometry,Jh.material=this.material,Jh.material!==void 0)for(let r=0;r<i;r++){this.getMatrixAt(r,K1),$1.multiplyMatrices(n,K1),Jh.matrixWorld=$1,Jh.raycast(e,_m);for(let a=0,l=_m.length;a<l;a++){const f=_m[a];f.instanceId=r,f.object=this,t.push(f)}_m.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ec(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class zr extends ar{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const e_=new J,t_=new J,n_=new Jt,H0=new Gf,Sm=new Wl;class Bl extends mn{constructor(e=new $t,t=new zr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,r=t.count;i<r;i++)e_.fromBufferAttribute(t,i-1),t_.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=e_.distanceTo(t_);e.setAttribute("lineDistance",new bt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Sm.copy(n.boundingSphere),Sm.applyMatrix4(i),Sm.radius+=r,e.ray.intersectsSphere(Sm)===!1)return;n_.copy(i).invert(),H0.copy(e.ray).applyMatrix4(n_);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),f=l*l,d=new J,p=new J,g=new J,v=new J,x=this.isLineSegments?2:1,M=n.index,S=n.attributes.position;if(M!==null){const C=Math.max(0,a.start),E=Math.min(M.count,a.start+a.count);for(let A=C,L=E-1;A<L;A+=x){const D=M.getX(A),F=M.getX(A+1);if(d.fromBufferAttribute(S,D),p.fromBufferAttribute(S,F),H0.distanceSqToSegment(d,p,v,g)>f)continue;v.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(v);I<e.near||I>e.far||t.push({distance:I,point:g.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const C=Math.max(0,a.start),E=Math.min(S.count,a.start+a.count);for(let A=C,L=E-1;A<L;A+=x){if(d.fromBufferAttribute(S,A),p.fromBufferAttribute(S,A+1),H0.distanceSqToSegment(d,p,v,g)>f)continue;v.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(v);F<e.near||F>e.far||t.push({distance:F,point:g.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}const i_=new J,r_=new J;class Zo extends Bl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,r=t.count;i<r;i+=2)i_.fromBufferAttribute(t,i),r_.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+i_.distanceTo(r_);e.setAttribute("lineDistance",new bt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class eM extends Bl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Uy extends ar{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const s_=new Jt,ey=new Gf,wm=new Wl,Mm=new J;class tM extends mn{constructor(e=new $t,t=new Uy){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),wm.copy(n.boundingSphere),wm.applyMatrix4(i),wm.radius+=r,e.ray.intersectsSphere(wm)===!1)return;s_.copy(i).invert(),ey.copy(e.ray).applyMatrix4(s_);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),f=l*l,d=n.index,g=n.attributes.position;if(d!==null){const v=Math.max(0,a.start),x=Math.min(d.count,a.start+a.count);for(let M=v,w=x;M<w;M++){const S=d.getX(M);Mm.fromBufferAttribute(g,S),o_(Mm,S,f,i,e,t,this)}}else{const v=Math.max(0,a.start),x=Math.min(g.count,a.start+a.count);for(let M=v,w=x;M<w;M++)Mm.fromBufferAttribute(g,M),o_(Mm,M,f,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function o_(o,e,t,n,i,r,a){const l=ey.distanceSqToPoint(o);if(l<t){const f=new J;ey.closestPointToPoint(o,f),f.applyMatrix4(n);const d=i.ray.origin.distanceTo(f);if(d<i.near||d>i.far)return;r.push({distance:d,distanceToRay:Math.sqrt(l),point:f,index:e,face:null,object:a})}}class AP extends Jn{constructor(e,t,n,i,r,a,l,f,d){super(e,t,n,i,r,a,l,f,d),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:qn,this.magFilter=r!==void 0?r:qn,this.generateMipmaps=!1;const p=this;function g(){p.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class PP extends Jn{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=ci,this.minFilter=ci,this.generateMipmaps=!1,this.needsUpdate=!0}}class By extends Jn{constructor(e,t,n,i,r,a,l,f,d,p,g,v){super(null,a,l,f,d,p,i,r,g,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class LP extends By{constructor(e,t,n,i,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=xr}}class RP extends Jn{constructor(e,t,n,i,r,a,l,f,d){super(e,t,n,i,r,a,l,f,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class _o{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let a;t?a=t:a=e*n[r-1];let l=0,f=r-1,d;for(;l<=f;)if(i=Math.floor(l+(f-l)/2),d=n[i]-a,d<0)l=i+1;else if(d>0)f=i-1;else{f=i;break}if(i=f,n[i]===a)return i/(r-1);const p=n[i],v=n[i+1]-p,x=(a-p)/v;return(i+x)/(r-1)}getTangent(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),l=this.getPoint(r),f=t||(a.isVector2?new Ve:new J);return f.copy(l).sub(a).normalize(),f}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new J,i=[],r=[],a=[],l=new J,f=new Jt;for(let x=0;x<=e;x++){const M=x/e;i[x]=this.getTangentAt(M,new J)}r[0]=new J,a[0]=new J;let d=Number.MAX_VALUE;const p=Math.abs(i[0].x),g=Math.abs(i[0].y),v=Math.abs(i[0].z);p<=d&&(d=p,n.set(1,0,0)),g<=d&&(d=g,n.set(0,1,0)),v<=d&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],l),a[0].crossVectors(i[0],r[0]);for(let x=1;x<=e;x++){if(r[x]=r[x-1].clone(),a[x]=a[x-1].clone(),l.crossVectors(i[x-1],i[x]),l.length()>Number.EPSILON){l.normalize();const M=Math.acos(fi(i[x-1].dot(i[x]),-1,1));r[x].applyMatrix4(f.makeRotationAxis(l,M))}a[x].crossVectors(i[x],r[x])}if(t===!0){let x=Math.acos(fi(r[0].dot(r[e]),-1,1));x/=e,i[0].dot(l.crossVectors(r[0],r[e]))>0&&(x=-x);for(let M=1;M<=e;M++)r[M].applyMatrix4(f.makeRotationAxis(i[M],x*M)),a[M].crossVectors(i[M],r[M])}return{tangents:i,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ag extends _o{constructor(e=0,t=0,n=1,i=1,r=0,a=Math.PI*2,l=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=l,this.aRotation=f}getPoint(e,t){const n=t||new Ve,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(a?r=0:r=i),this.aClockwise===!0&&!a&&(r===i?r=-i:r=r-i);const l=this.aStartAngle+e*r;let f=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=f-this.aX,x=d-this.aY;f=v*p-x*g+this.aX,d=v*g+x*p+this.aY}return n.set(f,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class nM extends Ag{constructor(e,t,n,i,r,a){super(e,t,n,n,i,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Gy(){let o=0,e=0,t=0,n=0;function i(r,a,l,f){o=r,e=l,t=-3*r+3*a-2*l-f,n=2*r-2*a+l+f}return{initCatmullRom:function(r,a,l,f,d){i(a,l,d*(l-r),d*(f-a))},initNonuniformCatmullRom:function(r,a,l,f,d,p,g){let v=(a-r)/d-(l-r)/(d+p)+(l-a)/p,x=(l-a)/p-(f-a)/(p+g)+(f-l)/g;v*=p,x*=p,i(a,l,v,x)},calc:function(r){const a=r*r,l=a*r;return o+e*r+t*a+n*l}}}const bm=new J,j0=new Gy,X0=new Gy,Y0=new Gy;class iM extends _o{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new J){const n=t,i=this.points,r=i.length,a=(r-(this.closed?0:1))*e;let l=Math.floor(a),f=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:f===0&&l===r-1&&(l=r-2,f=1);let d,p;this.closed||l>0?d=i[(l-1)%r]:(bm.subVectors(i[0],i[1]).add(i[0]),d=bm);const g=i[l%r],v=i[(l+1)%r];if(this.closed||l+2<r?p=i[(l+2)%r]:(bm.subVectors(i[r-1],i[r-2]).add(i[r-1]),p=bm),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let M=Math.pow(d.distanceToSquared(g),x),w=Math.pow(g.distanceToSquared(v),x),S=Math.pow(v.distanceToSquared(p),x);w<1e-4&&(w=1),M<1e-4&&(M=w),S<1e-4&&(S=w),j0.initNonuniformCatmullRom(d.x,g.x,v.x,p.x,M,w,S),X0.initNonuniformCatmullRom(d.y,g.y,v.y,p.y,M,w,S),Y0.initNonuniformCatmullRom(d.z,g.z,v.z,p.z,M,w,S)}else this.curveType==="catmullrom"&&(j0.initCatmullRom(d.x,g.x,v.x,p.x,this.tension),X0.initCatmullRom(d.y,g.y,v.y,p.y,this.tension),Y0.initCatmullRom(d.z,g.z,v.z,p.z,this.tension));return n.set(j0.calc(f),X0.calc(f),Y0.calc(f)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new J().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function a_(o,e,t,n,i){const r=(n-e)*.5,a=(i-t)*.5,l=o*o,f=o*l;return(2*t-2*n+r+a)*f+(-3*t+3*n-2*r-a)*l+r*o+t}function IP(o,e){const t=1-o;return t*t*e}function DP(o,e){return 2*(1-o)*o*e}function kP(o,e){return o*o*e}function ud(o,e,t,n){return IP(o,e)+DP(o,t)+kP(o,n)}function FP(o,e){const t=1-o;return t*t*t*e}function NP(o,e){const t=1-o;return 3*t*t*o*e}function OP(o,e){return 3*(1-o)*o*o*e}function zP(o,e){return o*o*o*e}function cd(o,e,t,n,i){return FP(o,e)+NP(o,t)+OP(o,n)+zP(o,i)}class Vy extends _o{constructor(e=new Ve,t=new Ve,n=new Ve,i=new Ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ve){const n=t,i=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(cd(e,i.x,r.x,a.x,l.x),cd(e,i.y,r.y,a.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rM extends _o{constructor(e=new J,t=new J,n=new J,i=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new J){const n=t,i=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(cd(e,i.x,r.x,a.x,l.x),cd(e,i.y,r.y,a.y,l.y),cd(e,i.z,r.z,a.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Pg extends _o{constructor(e=new Ve,t=new Ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ve){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sM extends _o{constructor(e=new J,t=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new J){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new J){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Wy extends _o{constructor(e=new Ve,t=new Ve,n=new Ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ve){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(ud(e,i.x,r.x,a.x),ud(e,i.y,r.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hy extends _o{constructor(e=new J,t=new J,n=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new J){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(ud(e,i.x,r.x,a.x),ud(e,i.y,r.y,a.y),ud(e,i.z,r.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jy extends _o{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ve){const n=t,i=this.points,r=(i.length-1)*e,a=Math.floor(r),l=r-a,f=i[a===0?a:a-1],d=i[a],p=i[a>i.length-2?i.length-1:a+1],g=i[a>i.length-3?i.length-1:a+2];return n.set(a_(l,f.x,d.x,p.x,g.x),a_(l,f.y,d.y,p.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Ve().fromArray(i))}return this}}var Xy=Object.freeze({__proto__:null,ArcCurve:nM,CatmullRomCurve3:iM,CubicBezierCurve:Vy,CubicBezierCurve3:rM,EllipseCurve:Ag,LineCurve:Pg,LineCurve3:sM,QuadraticBezierCurve:Wy,QuadraticBezierCurve3:Hy,SplineCurve:jy});class oM extends _o{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Pg(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const a=i[r]-n,l=this.curves[r],f=l.getLength(),d=f===0?0:1-a/f;return l.getPointAt(d,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,f=a.getPoints(l);for(let d=0;d<f.length;d++){const p=f[d];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new Xy[i.type]().fromJSON(i))}return this}}class Td extends oM{constructor(e){super(),this.type="Path",this.currentPoint=new Ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Pg(this.currentPoint.clone(),new Ve(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new Wy(this.currentPoint.clone(),new Ve(e,t),new Ve(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,a){const l=new Vy(this.currentPoint.clone(),new Ve(e,t),new Ve(n,i),new Ve(r,a));return this.curves.push(l),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new jy(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,a){const l=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+l,t+f,n,i,r,a),this}absarc(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}ellipse(e,t,n,i,r,a,l,f){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+d,t+p,n,i,r,a,l,f),this}absellipse(e,t,n,i,r,a,l,f){const d=new Ag(e,t,n,i,r,a,l,f);if(this.curves.length>0){const g=d.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Wf extends $t{constructor(e=[new Ve(0,-.5),new Ve(.5,0),new Ve(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=fi(i,0,Math.PI*2);const r=[],a=[],l=[],f=[],d=[],p=1/t,g=new J,v=new Ve,x=new J,M=new J,w=new J;let S=0,C=0;for(let E=0;E<=e.length-1;E++)switch(E){case 0:S=e[E+1].x-e[E].x,C=e[E+1].y-e[E].y,x.x=C*1,x.y=-S,x.z=C*0,w.copy(x),x.normalize(),f.push(x.x,x.y,x.z);break;case e.length-1:f.push(w.x,w.y,w.z);break;default:S=e[E+1].x-e[E].x,C=e[E+1].y-e[E].y,x.x=C*1,x.y=-S,x.z=C*0,M.copy(x),x.x+=w.x,x.y+=w.y,x.z+=w.z,x.normalize(),f.push(x.x,x.y,x.z),w.copy(M)}for(let E=0;E<=t;E++){const A=n+E*p*i,L=Math.sin(A),D=Math.cos(A);for(let F=0;F<=e.length-1;F++){g.x=e[F].x*L,g.y=e[F].y,g.z=e[F].x*D,a.push(g.x,g.y,g.z),v.x=E/t,v.y=F/(e.length-1),l.push(v.x,v.y);const B=f[3*F+0]*L,I=f[3*F+1],z=f[3*F+0]*D;d.push(B,I,z)}}for(let E=0;E<t;E++)for(let A=0;A<e.length-1;A++){const L=A+E*e.length,D=L,F=L+e.length,B=L+e.length+1,I=L+1;r.push(D,F,I),r.push(B,I,F)}this.setIndex(r),this.setAttribute("position",new bt(a,3)),this.setAttribute("uv",new bt(l,2)),this.setAttribute("normal",new bt(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wf(e.points,e.segments,e.phiStart,e.phiLength)}}class Wd extends Wf{constructor(e=1,t=1,n=4,i=8){const r=new Td;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Wd(e.radius,e.length,e.capSegments,e.radialSegments)}}class Hd extends $t{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],a=[],l=[],f=[],d=new J,p=new Ve;a.push(0,0,0),l.push(0,0,1),f.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const x=n+g/t*i;d.x=e*Math.cos(x),d.y=e*Math.sin(x),a.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(a[v]/e+1)/2,p.y=(a[v+1]/e+1)/2,f.push(p.x,p.y)}for(let g=1;g<=t;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new bt(a,3)),this.setAttribute("normal",new bt(l,3)),this.setAttribute("uv",new bt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hd(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class sc extends $t{constructor(e=1,t=1,n=1,i=32,r=1,a=!1,l=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:f};const d=this;i=Math.floor(i),r=Math.floor(r);const p=[],g=[],v=[],x=[];let M=0;const w=[],S=n/2;let C=0;E(),a===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(p),this.setAttribute("position",new bt(g,3)),this.setAttribute("normal",new bt(v,3)),this.setAttribute("uv",new bt(x,2));function E(){const L=new J,D=new J;let F=0;const B=(t-e)/n;for(let I=0;I<=r;I++){const z=[],V=I/r,te=V*(t-e)+e;for(let X=0;X<=i;X++){const K=X/i,q=K*f+l,oe=Math.sin(q),ce=Math.cos(q);D.x=te*oe,D.y=-V*n+S,D.z=te*ce,g.push(D.x,D.y,D.z),L.set(oe,B,ce).normalize(),v.push(L.x,L.y,L.z),x.push(K,1-V),z.push(M++)}w.push(z)}for(let I=0;I<i;I++)for(let z=0;z<r;z++){const V=w[z][I],te=w[z+1][I],X=w[z+1][I+1],K=w[z][I+1];p.push(V,te,K),p.push(te,X,K),F+=6}d.addGroup(C,F,0),C+=F}function A(L){const D=M,F=new Ve,B=new J;let I=0;const z=L===!0?e:t,V=L===!0?1:-1;for(let X=1;X<=i;X++)g.push(0,S*V,0),v.push(0,V,0),x.push(.5,.5),M++;const te=M;for(let X=0;X<=i;X++){const q=X/i*f+l,oe=Math.cos(q),ce=Math.sin(q);B.x=z*ce,B.y=S*V,B.z=z*oe,g.push(B.x,B.y,B.z),v.push(0,V,0),F.x=oe*.5+.5,F.y=ce*.5*V+.5,x.push(F.x,F.y),M++}for(let X=0;X<i;X++){const K=D+X,q=te+X;L===!0?p.push(q,q+1,K):p.push(q+1,q,K),I+=3}d.addGroup(C,I,L===!0?1:2),C+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jd extends sc{constructor(e=1,t=1,n=32,i=1,r=!1,a=0,l=Math.PI*2){super(0,e,t,n,i,r,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:l}}static fromJSON(e){return new jd(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Wa extends $t{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],a=[];l(i),d(n),p(),this.setAttribute("position",new bt(r,3)),this.setAttribute("normal",new bt(r.slice(),3)),this.setAttribute("uv",new bt(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(E){const A=new J,L=new J,D=new J;for(let F=0;F<t.length;F+=3)x(t[F+0],A),x(t[F+1],L),x(t[F+2],D),f(A,L,D,E)}function f(E,A,L,D){const F=D+1,B=[];for(let I=0;I<=F;I++){B[I]=[];const z=E.clone().lerp(L,I/F),V=A.clone().lerp(L,I/F),te=F-I;for(let X=0;X<=te;X++)X===0&&I===F?B[I][X]=z:B[I][X]=z.clone().lerp(V,X/te)}for(let I=0;I<F;I++)for(let z=0;z<2*(F-I)-1;z++){const V=Math.floor(z/2);z%2===0?(v(B[I][V+1]),v(B[I+1][V]),v(B[I][V])):(v(B[I][V+1]),v(B[I+1][V+1]),v(B[I+1][V]))}}function d(E){const A=new J;for(let L=0;L<r.length;L+=3)A.x=r[L+0],A.y=r[L+1],A.z=r[L+2],A.normalize().multiplyScalar(E),r[L+0]=A.x,r[L+1]=A.y,r[L+2]=A.z}function p(){const E=new J;for(let A=0;A<r.length;A+=3){E.x=r[A+0],E.y=r[A+1],E.z=r[A+2];const L=S(E)/2/Math.PI+.5,D=C(E)/Math.PI+.5;a.push(L,1-D)}M(),g()}function g(){for(let E=0;E<a.length;E+=6){const A=a[E+0],L=a[E+2],D=a[E+4],F=Math.max(A,L,D),B=Math.min(A,L,D);F>.9&&B<.1&&(A<.2&&(a[E+0]+=1),L<.2&&(a[E+2]+=1),D<.2&&(a[E+4]+=1))}}function v(E){r.push(E.x,E.y,E.z)}function x(E,A){const L=E*3;A.x=e[L+0],A.y=e[L+1],A.z=e[L+2]}function M(){const E=new J,A=new J,L=new J,D=new J,F=new Ve,B=new Ve,I=new Ve;for(let z=0,V=0;z<r.length;z+=9,V+=6){E.set(r[z+0],r[z+1],r[z+2]),A.set(r[z+3],r[z+4],r[z+5]),L.set(r[z+6],r[z+7],r[z+8]),F.set(a[V+0],a[V+1]),B.set(a[V+2],a[V+3]),I.set(a[V+4],a[V+5]),D.copy(E).add(A).add(L).divideScalar(3);const te=S(D);w(F,V+0,E,te),w(B,V+2,A,te),w(I,V+4,L,te)}}function w(E,A,L,D){D<0&&E.x===1&&(a[A]=E.x-1),L.x===0&&L.z===0&&(a[A]=D/2/Math.PI+.5)}function S(E){return Math.atan2(E.z,-E.x)}function C(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wa(e.vertices,e.indices,e.radius,e.details)}}class Xd extends Wa{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xd(e.radius,e.detail)}}const Em=new J,Tm=new J,q0=new J,Cm=new Ds;class aM extends $t{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),r=Math.cos(qu*t),a=e.getIndex(),l=e.getAttribute("position"),f=a?a.count:l.count,d=[0,0,0],p=["a","b","c"],g=new Array(3),v={},x=[];for(let M=0;M<f;M+=3){a?(d[0]=a.getX(M),d[1]=a.getX(M+1),d[2]=a.getX(M+2)):(d[0]=M,d[1]=M+1,d[2]=M+2);const{a:w,b:S,c:C}=Cm;if(w.fromBufferAttribute(l,d[0]),S.fromBufferAttribute(l,d[1]),C.fromBufferAttribute(l,d[2]),Cm.getNormal(q0),g[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,g[1]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,g[2]=`${Math.round(C.x*i)},${Math.round(C.y*i)},${Math.round(C.z*i)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let E=0;E<3;E++){const A=(E+1)%3,L=g[E],D=g[A],F=Cm[p[E]],B=Cm[p[A]],I=`${L}_${D}`,z=`${D}_${L}`;z in v&&v[z]?(q0.dot(v[z].normal)<=r&&(x.push(F.x,F.y,F.z),x.push(B.x,B.y,B.z)),v[z]=null):I in v||(v[I]={index0:d[E],index1:d[A],normal:q0.clone()})}}for(const M in v)if(v[M]){const{index0:w,index1:S}=v[M];Em.fromBufferAttribute(l,w),Tm.fromBufferAttribute(l,S),x.push(Em.x,Em.y,Em.z),x.push(Tm.x,Tm.y,Tm.z)}this.setAttribute("position",new bt(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ju extends Td{constructor(e){super(e),this.uuid=gs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Td().fromJSON(i))}return this}}const UP={triangulate:function(o,e,t=2){const n=e&&e.length,i=n?e[0]*t:o.length;let r=lM(o,0,i,t,!0);const a=[];if(!r||r.next===r.prev)return a;let l,f,d,p,g,v,x;if(n&&(r=HP(o,e,r,t)),o.length>80*t){l=d=o[0],f=p=o[1];for(let M=t;M<i;M+=t)g=o[M],v=o[M+1],g<l&&(l=g),v<f&&(f=v),g>d&&(d=g),v>p&&(p=v);x=Math.max(d-l,p-f),x=x!==0?32767/x:0}return Cd(r,a,t,l,f,x,0),a}};function lM(o,e,t,n,i){let r,a;if(i===tL(o,e,t,n)>0)for(r=e;r<t;r+=n)a=l_(r,o[r],o[r+1],a);else for(r=t-n;r>=e;r-=n)a=l_(r,o[r],o[r+1],a);return a&&Lg(a,a.next)&&(Pd(a),a=a.next),a}function tc(o,e){if(!o)return o;e||(e=o);let t=o,n;do if(n=!1,!t.steiner&&(Lg(t,t.next)||Zn(t.prev,t,t.next)===0)){if(Pd(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Cd(o,e,t,n,i,r,a){if(!o)return;!a&&r&&ZP(o,n,i,r);let l=o,f,d;for(;o.prev!==o.next;){if(f=o.prev,d=o.next,r?GP(o,n,i,r):BP(o)){e.push(f.i/t|0),e.push(o.i/t|0),e.push(d.i/t|0),Pd(o),o=d.next,l=d.next;continue}if(o=d,o===l){a?a===1?(o=VP(tc(o),e,t),Cd(o,e,t,n,i,r,2)):a===2&&WP(o,e,t,n,i,r):Cd(tc(o),e,t,n,i,r,1);break}}}function BP(o){const e=o.prev,t=o,n=o.next;if(Zn(e,t,n)>=0)return!1;const i=e.x,r=t.x,a=n.x,l=e.y,f=t.y,d=n.y,p=i<r?i<a?i:a:r<a?r:a,g=l<f?l<d?l:d:f<d?f:d,v=i>r?i>a?i:a:r>a?r:a,x=l>f?l>d?l:d:f>d?f:d;let M=n.next;for(;M!==e;){if(M.x>=p&&M.x<=v&&M.y>=g&&M.y<=x&&Tf(i,l,r,f,a,d,M.x,M.y)&&Zn(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function GP(o,e,t,n){const i=o.prev,r=o,a=o.next;if(Zn(i,r,a)>=0)return!1;const l=i.x,f=r.x,d=a.x,p=i.y,g=r.y,v=a.y,x=l<f?l<d?l:d:f<d?f:d,M=p<g?p<v?p:v:g<v?g:v,w=l>f?l>d?l:d:f>d?f:d,S=p>g?p>v?p:v:g>v?g:v,C=ty(x,M,e,t,n),E=ty(w,S,e,t,n);let A=o.prevZ,L=o.nextZ;for(;A&&A.z>=C&&L&&L.z<=E;){if(A.x>=x&&A.x<=w&&A.y>=M&&A.y<=S&&A!==i&&A!==a&&Tf(l,p,f,g,d,v,A.x,A.y)&&Zn(A.prev,A,A.next)>=0||(A=A.prevZ,L.x>=x&&L.x<=w&&L.y>=M&&L.y<=S&&L!==i&&L!==a&&Tf(l,p,f,g,d,v,L.x,L.y)&&Zn(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;A&&A.z>=C;){if(A.x>=x&&A.x<=w&&A.y>=M&&A.y<=S&&A!==i&&A!==a&&Tf(l,p,f,g,d,v,A.x,A.y)&&Zn(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;L&&L.z<=E;){if(L.x>=x&&L.x<=w&&L.y>=M&&L.y<=S&&L!==i&&L!==a&&Tf(l,p,f,g,d,v,L.x,L.y)&&Zn(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function VP(o,e,t){let n=o;do{const i=n.prev,r=n.next.next;!Lg(i,r)&&uM(i,n,n.next,r)&&Ad(i,r)&&Ad(r,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(r.i/t|0),Pd(n),Pd(n.next),n=o=r),n=n.next}while(n!==o);return tc(n)}function WP(o,e,t,n,i,r){let a=o;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&KP(a,l)){let f=cM(a,l);a=tc(a,a.next),f=tc(f,f.next),Cd(a,e,t,n,i,r,0),Cd(f,e,t,n,i,r,0);return}l=l.next}a=a.next}while(a!==o)}function HP(o,e,t,n){const i=[];let r,a,l,f,d;for(r=0,a=e.length;r<a;r++)l=e[r]*n,f=r<a-1?e[r+1]*n:o.length,d=lM(o,l,f,n,!1),d===d.next&&(d.steiner=!0),i.push(QP(d));for(i.sort(jP),r=0;r<i.length;r++)t=XP(i[r],t);return t}function jP(o,e){return o.x-e.x}function XP(o,e){const t=YP(o,e);if(!t)return e;const n=cM(t,o);return tc(n,n.next),tc(t,t.next)}function YP(o,e){let t=e,n=-1/0,i;const r=o.x,a=o.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const v=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=r&&v>n&&(n=v,i=t.x<t.next.x?t:t.next,v===r))return i}t=t.next}while(t!==e);if(!i)return null;const l=i,f=i.x,d=i.y;let p=1/0,g;t=i;do r>=t.x&&t.x>=f&&r!==t.x&&Tf(a<d?r:n,a,f,d,a<d?n:r,a,t.x,t.y)&&(g=Math.abs(a-t.y)/(r-t.x),Ad(t,o)&&(g<p||g===p&&(t.x>i.x||t.x===i.x&&qP(i,t)))&&(i=t,p=g)),t=t.next;while(t!==l);return i}function qP(o,e){return Zn(o.prev,o,e.prev)<0&&Zn(e.next,o,o.next)<0}function ZP(o,e,t,n){let i=o;do i.z===0&&(i.z=ty(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==o);i.prevZ.nextZ=null,i.prevZ=null,JP(i)}function JP(o){let e,t,n,i,r,a,l,f,d=1;do{for(t=o,o=null,r=null,a=0;t;){for(a++,n=t,l=0,e=0;e<d&&(l++,n=n.nextZ,!!n);e++);for(f=d;l>0||f>0&&n;)l!==0&&(f===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,l--):(i=n,n=n.nextZ,f--),r?r.nextZ=i:o=i,i.prevZ=r,r=i;t=n}r.nextZ=null,d*=2}while(a>1);return o}function ty(o,e,t,n,i){return o=(o-t)*i|0,e=(e-n)*i|0,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,o|e<<1}function QP(o){let e=o,t=o;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==o);return t}function Tf(o,e,t,n,i,r,a,l){return(i-a)*(e-l)>=(o-a)*(r-l)&&(o-a)*(n-l)>=(t-a)*(e-l)&&(t-a)*(r-l)>=(i-a)*(n-l)}function KP(o,e){return o.next.i!==e.i&&o.prev.i!==e.i&&!$P(o,e)&&(Ad(o,e)&&Ad(e,o)&&eL(o,e)&&(Zn(o.prev,o,e.prev)||Zn(o,e.prev,e))||Lg(o,e)&&Zn(o.prev,o,o.next)>0&&Zn(e.prev,e,e.next)>0)}function Zn(o,e,t){return(e.y-o.y)*(t.x-e.x)-(e.x-o.x)*(t.y-e.y)}function Lg(o,e){return o.x===e.x&&o.y===e.y}function uM(o,e,t,n){const i=Pm(Zn(o,e,t)),r=Pm(Zn(o,e,n)),a=Pm(Zn(t,n,o)),l=Pm(Zn(t,n,e));return!!(i!==r&&a!==l||i===0&&Am(o,t,e)||r===0&&Am(o,n,e)||a===0&&Am(t,o,n)||l===0&&Am(t,e,n))}function Am(o,e,t){return e.x<=Math.max(o.x,t.x)&&e.x>=Math.min(o.x,t.x)&&e.y<=Math.max(o.y,t.y)&&e.y>=Math.min(o.y,t.y)}function Pm(o){return o>0?1:o<0?-1:0}function $P(o,e){let t=o;do{if(t.i!==o.i&&t.next.i!==o.i&&t.i!==e.i&&t.next.i!==e.i&&uM(t,t.next,o,e))return!0;t=t.next}while(t!==o);return!1}function Ad(o,e){return Zn(o.prev,o,o.next)<0?Zn(o,e,o.next)>=0&&Zn(o,o.prev,e)>=0:Zn(o,e,o.prev)<0||Zn(o,o.next,e)<0}function eL(o,e){let t=o,n=!1;const i=(o.x+e.x)/2,r=(o.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&i<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==o);return n}function cM(o,e){const t=new ny(o.i,o.x,o.y),n=new ny(e.i,e.x,e.y),i=o.next,r=e.prev;return o.next=e,e.prev=o,t.next=i,i.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function l_(o,e,t,n){const i=new ny(o,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Pd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function ny(o,e,t){this.i=o,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tL(o,e,t,n){let i=0;for(let r=e,a=t-n;r<t;r+=n)i+=(o[a]-o[r])*(o[r+1]+o[a+1]),a=r;return i}class jo{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return n*.5}static isClockWise(e){return jo.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];u_(e),c_(n,e);let a=e.length;t.forEach(u_);for(let f=0;f<t.length;f++)i.push(a),a+=t[f].length,c_(n,t[f]);const l=UP.triangulate(n,i);for(let f=0;f<l.length;f+=3)r.push(l.slice(f,f+3));return r}}function u_(o){const e=o.length;e>2&&o[e-1].equals(o[0])&&o.pop()}function c_(o,e){for(let t=0;t<e.length;t++)o.push(e[t].x),o.push(e[t].y)}class Yd extends $t{constructor(e=new Ju([new Ve(.5,.5),new Ve(-.5,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let l=0,f=e.length;l<f;l++){const d=e[l];a(d)}this.setAttribute("position",new bt(i,3)),this.setAttribute("uv",new bt(r,2)),this.computeVertexNormals();function a(l){const f=[],d=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,M=t.bevelSize!==void 0?t.bevelSize:x-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const C=t.extrudePath,E=t.UVGenerator!==void 0?t.UVGenerator:nL;let A,L=!1,D,F,B,I;C&&(A=C.getSpacedPoints(p),L=!0,v=!1,D=C.computeFrenetFrames(p,!1),F=new J,B=new J,I=new J),v||(S=0,x=0,M=0,w=0);const z=l.extractPoints(d);let V=z.shape;const te=z.holes;if(!jo.isClockWise(V)){V=V.reverse();for(let ae=0,be=te.length;ae<be;ae++){const Ge=te[ae];jo.isClockWise(Ge)&&(te[ae]=Ge.reverse())}}const K=jo.triangulateShape(V,te),q=V;for(let ae=0,be=te.length;ae<be;ae++){const Ge=te[ae];V=V.concat(Ge)}function oe(ae,be,Ge){return be||console.error("THREE.ExtrudeGeometry: vec does not exist"),ae.clone().addScaledVector(be,Ge)}const ce=V.length,ye=K.length;function H(ae,be,Ge){let He,Ue,ut;const Ie=ae.x-be.x,Qe=ae.y-be.y,tt=Ge.x-ae.x,Re=Ge.y-ae.y,W=Ie*Ie+Qe*Qe,G=Ie*Re-Qe*tt;if(Math.abs(G)>Number.EPSILON){const fe=Math.sqrt(W),Te=Math.sqrt(tt*tt+Re*Re),je=be.x-Qe/fe,Ye=be.y+Ie/fe,qe=Ge.x-Re/Te,Ke=Ge.y+tt/Te,Le=((qe-je)*Re-(Ke-Ye)*tt)/(Ie*Re-Qe*tt);He=je+Ie*Le-ae.x,Ue=Ye+Qe*Le-ae.y;const lt=He*He+Ue*Ue;if(lt<=2)return new Ve(He,Ue);ut=Math.sqrt(lt/2)}else{let fe=!1;Ie>Number.EPSILON?tt>Number.EPSILON&&(fe=!0):Ie<-Number.EPSILON?tt<-Number.EPSILON&&(fe=!0):Math.sign(Qe)===Math.sign(Re)&&(fe=!0),fe?(He=-Qe,Ue=Ie,ut=Math.sqrt(W)):(He=Ie,Ue=Qe,ut=Math.sqrt(W/2))}return new Ve(He/ut,Ue/ut)}const Q=[];for(let ae=0,be=q.length,Ge=be-1,He=ae+1;ae<be;ae++,Ge++,He++)Ge===be&&(Ge=0),He===be&&(He=0),Q[ae]=H(q[ae],q[Ge],q[He]);const Y=[];let N,O=Q.concat();for(let ae=0,be=te.length;ae<be;ae++){const Ge=te[ae];N=[];for(let He=0,Ue=Ge.length,ut=Ue-1,Ie=He+1;He<Ue;He++,ut++,Ie++)ut===Ue&&(ut=0),Ie===Ue&&(Ie=0),N[He]=H(Ge[He],Ge[ut],Ge[Ie]);Y.push(N),O=O.concat(N)}for(let ae=0;ae<S;ae++){const be=ae/S,Ge=x*Math.cos(be*Math.PI/2),He=M*Math.sin(be*Math.PI/2)+w;for(let Ue=0,ut=q.length;Ue<ut;Ue++){const Ie=oe(q[Ue],Q[Ue],He);ue(Ie.x,Ie.y,-Ge)}for(let Ue=0,ut=te.length;Ue<ut;Ue++){const Ie=te[Ue];N=Y[Ue];for(let Qe=0,tt=Ie.length;Qe<tt;Qe++){const Re=oe(Ie[Qe],N[Qe],He);ue(Re.x,Re.y,-Ge)}}}const re=M+w;for(let ae=0;ae<ce;ae++){const be=v?oe(V[ae],O[ae],re):V[ae];L?(B.copy(D.normals[0]).multiplyScalar(be.x),F.copy(D.binormals[0]).multiplyScalar(be.y),I.copy(A[0]).add(B).add(F),ue(I.x,I.y,I.z)):ue(be.x,be.y,0)}for(let ae=1;ae<=p;ae++)for(let be=0;be<ce;be++){const Ge=v?oe(V[be],O[be],re):V[be];L?(B.copy(D.normals[ae]).multiplyScalar(Ge.x),F.copy(D.binormals[ae]).multiplyScalar(Ge.y),I.copy(A[ae]).add(B).add(F),ue(I.x,I.y,I.z)):ue(Ge.x,Ge.y,g/p*ae)}for(let ae=S-1;ae>=0;ae--){const be=ae/S,Ge=x*Math.cos(be*Math.PI/2),He=M*Math.sin(be*Math.PI/2)+w;for(let Ue=0,ut=q.length;Ue<ut;Ue++){const Ie=oe(q[Ue],Q[Ue],He);ue(Ie.x,Ie.y,g+Ge)}for(let Ue=0,ut=te.length;Ue<ut;Ue++){const Ie=te[Ue];N=Y[Ue];for(let Qe=0,tt=Ie.length;Qe<tt;Qe++){const Re=oe(Ie[Qe],N[Qe],He);L?ue(Re.x,Re.y+A[p-1].y,A[p-1].x+Ge):ue(Re.x,Re.y,g+Ge)}}}se(),Z();function se(){const ae=i.length/3;if(v){let be=0,Ge=ce*be;for(let He=0;He<ye;He++){const Ue=K[He];me(Ue[2]+Ge,Ue[1]+Ge,Ue[0]+Ge)}be=p+S*2,Ge=ce*be;for(let He=0;He<ye;He++){const Ue=K[He];me(Ue[0]+Ge,Ue[1]+Ge,Ue[2]+Ge)}}else{for(let be=0;be<ye;be++){const Ge=K[be];me(Ge[2],Ge[1],Ge[0])}for(let be=0;be<ye;be++){const Ge=K[be];me(Ge[0]+ce*p,Ge[1]+ce*p,Ge[2]+ce*p)}}n.addGroup(ae,i.length/3-ae,0)}function Z(){const ae=i.length/3;let be=0;he(q,be),be+=q.length;for(let Ge=0,He=te.length;Ge<He;Ge++){const Ue=te[Ge];he(Ue,be),be+=Ue.length}n.addGroup(ae,i.length/3-ae,1)}function he(ae,be){let Ge=ae.length;for(;--Ge>=0;){const He=Ge;let Ue=Ge-1;Ue<0&&(Ue=ae.length-1);for(let ut=0,Ie=p+S*2;ut<Ie;ut++){const Qe=ce*ut,tt=ce*(ut+1),Re=be+He+Qe,W=be+Ue+Qe,G=be+Ue+tt,fe=be+He+tt;we(Re,W,G,fe)}}}function ue(ae,be,Ge){f.push(ae),f.push(be),f.push(Ge)}function me(ae,be,Ge){Oe(ae),Oe(be),Oe(Ge);const He=i.length/3,Ue=E.generateTopUV(n,i,He-3,He-2,He-1);ke(Ue[0]),ke(Ue[1]),ke(Ue[2])}function we(ae,be,Ge,He){Oe(ae),Oe(be),Oe(He),Oe(be),Oe(Ge),Oe(He);const Ue=i.length/3,ut=E.generateSideWallUV(n,i,Ue-6,Ue-3,Ue-2,Ue-1);ke(ut[0]),ke(ut[1]),ke(ut[3]),ke(ut[1]),ke(ut[2]),ke(ut[3])}function Oe(ae){i.push(f[ae*3+0]),i.push(f[ae*3+1]),i.push(f[ae*3+2])}function ke(ae){r.push(ae.x),r.push(ae.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return iL(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,a=e.shapes.length;r<a;r++){const l=t[e.shapes[r]];n.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Xy[i.type]().fromJSON(i)),new Yd(n,e.options)}}const nL={generateTopUV:function(o,e,t,n,i){const r=e[t*3],a=e[t*3+1],l=e[n*3],f=e[n*3+1],d=e[i*3],p=e[i*3+1];return[new Ve(r,a),new Ve(l,f),new Ve(d,p)]},generateSideWallUV:function(o,e,t,n,i,r){const a=e[t*3],l=e[t*3+1],f=e[t*3+2],d=e[n*3],p=e[n*3+1],g=e[n*3+2],v=e[i*3],x=e[i*3+1],M=e[i*3+2],w=e[r*3],S=e[r*3+1],C=e[r*3+2];return Math.abs(l-p)<Math.abs(a-d)?[new Ve(a,1-f),new Ve(d,1-g),new Ve(v,1-M),new Ve(w,1-C)]:[new Ve(l,1-f),new Ve(p,1-g),new Ve(x,1-M),new Ve(S,1-C)]}};function iL(o,e,t){if(t.shapes=[],Array.isArray(o))for(let n=0,i=o.length;n<i;n++){const r=o[n];t.shapes.push(r.uuid)}else t.shapes.push(o.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class qd extends Wa{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qd(e.radius,e.detail)}}class Hf extends Wa{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hf(e.radius,e.detail)}}class Zd extends $t{constructor(e=.5,t=1,n=32,i=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const l=[],f=[],d=[],p=[];let g=e;const v=(t-e)/i,x=new J,M=new Ve;for(let w=0;w<=i;w++){for(let S=0;S<=n;S++){const C=r+S/n*a;x.x=g*Math.cos(C),x.y=g*Math.sin(C),f.push(x.x,x.y,x.z),d.push(0,0,1),M.x=(x.x/t+1)/2,M.y=(x.y/t+1)/2,p.push(M.x,M.y)}g+=v}for(let w=0;w<i;w++){const S=w*(n+1);for(let C=0;C<n;C++){const E=C+S,A=E,L=E+n+1,D=E+n+2,F=E+1;l.push(A,L,F),l.push(L,D,F)}}this.setIndex(l),this.setAttribute("position",new bt(f,3)),this.setAttribute("normal",new bt(d,3)),this.setAttribute("uv",new bt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zd(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Jd extends $t{constructor(e=new Ju([new Ve(0,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],a=[];let l=0,f=0;if(Array.isArray(e)===!1)d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(l,f,p),l+=f,f=0;this.setIndex(n),this.setAttribute("position",new bt(i,3)),this.setAttribute("normal",new bt(r,3)),this.setAttribute("uv",new bt(a,2));function d(p){const g=i.length/3,v=p.extractPoints(t);let x=v.shape;const M=v.holes;jo.isClockWise(x)===!1&&(x=x.reverse());for(let S=0,C=M.length;S<C;S++){const E=M[S];jo.isClockWise(E)===!0&&(M[S]=E.reverse())}const w=jo.triangulateShape(x,M);for(let S=0,C=M.length;S<C;S++){const E=M[S];x=x.concat(E)}for(let S=0,C=x.length;S<C;S++){const E=x[S];i.push(E.x,E.y,0),r.push(0,0,1),a.push(E.x,E.y)}for(let S=0,C=w.length;S<C;S++){const E=w[S],A=E[0]+g,L=E[1]+g,D=E[2]+g;n.push(A,L,D),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return rL(t,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const a=t[e.shapes[i]];n.push(a)}return new Jd(n,e.curveSegments)}}function rL(o,e){if(e.shapes=[],Array.isArray(o))for(let t=0,n=o.length;t<n;t++){const i=o[t];e.shapes.push(i.uuid)}else e.shapes.push(o.uuid);return e}class jf extends $t{constructor(e=1,t=32,n=16,i=0,r=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const f=Math.min(a+l,Math.PI);let d=0;const p=[],g=new J,v=new J,x=[],M=[],w=[],S=[];for(let C=0;C<=n;C++){const E=[],A=C/n;let L=0;C==0&&a==0?L=.5/t:C==n&&f==Math.PI&&(L=-.5/t);for(let D=0;D<=t;D++){const F=D/t;g.x=-e*Math.cos(i+F*r)*Math.sin(a+A*l),g.y=e*Math.cos(a+A*l),g.z=e*Math.sin(i+F*r)*Math.sin(a+A*l),M.push(g.x,g.y,g.z),v.copy(g).normalize(),w.push(v.x,v.y,v.z),S.push(F+L,1-A),E.push(d++)}p.push(E)}for(let C=0;C<n;C++)for(let E=0;E<t;E++){const A=p[C][E+1],L=p[C][E],D=p[C+1][E],F=p[C+1][E+1];(C!==0||a>0)&&x.push(A,L,F),(C!==n-1||f<Math.PI)&&x.push(L,D,F)}this.setIndex(x),this.setAttribute("position",new bt(M,3)),this.setAttribute("normal",new bt(w,3)),this.setAttribute("uv",new bt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Qd extends Wa{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qd(e.radius,e.detail)}}class Kd extends $t{constructor(e=1,t=.4,n=12,i=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const a=[],l=[],f=[],d=[],p=new J,g=new J,v=new J;for(let x=0;x<=n;x++)for(let M=0;M<=i;M++){const w=M/i*r,S=x/n*Math.PI*2;g.x=(e+t*Math.cos(S))*Math.cos(w),g.y=(e+t*Math.cos(S))*Math.sin(w),g.z=t*Math.sin(S),l.push(g.x,g.y,g.z),p.x=e*Math.cos(w),p.y=e*Math.sin(w),v.subVectors(g,p).normalize(),f.push(v.x,v.y,v.z),d.push(M/i),d.push(x/n)}for(let x=1;x<=n;x++)for(let M=1;M<=i;M++){const w=(i+1)*x+M-1,S=(i+1)*(x-1)+M-1,C=(i+1)*(x-1)+M,E=(i+1)*x+M;a.push(w,S,E),a.push(S,C,E)}this.setIndex(a),this.setAttribute("position",new bt(l,3)),this.setAttribute("normal",new bt(f,3)),this.setAttribute("uv",new bt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kd(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class $d extends $t{constructor(e=1,t=.4,n=64,i=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},n=Math.floor(n),i=Math.floor(i);const l=[],f=[],d=[],p=[],g=new J,v=new J,x=new J,M=new J,w=new J,S=new J,C=new J;for(let A=0;A<=n;++A){const L=A/n*r*Math.PI*2;E(L,r,a,e,x),E(L+.01,r,a,e,M),S.subVectors(M,x),C.addVectors(M,x),w.crossVectors(S,C),C.crossVectors(w,S),w.normalize(),C.normalize();for(let D=0;D<=i;++D){const F=D/i*Math.PI*2,B=-t*Math.cos(F),I=t*Math.sin(F);g.x=x.x+(B*C.x+I*w.x),g.y=x.y+(B*C.y+I*w.y),g.z=x.z+(B*C.z+I*w.z),f.push(g.x,g.y,g.z),v.subVectors(g,x).normalize(),d.push(v.x,v.y,v.z),p.push(A/n),p.push(D/i)}}for(let A=1;A<=n;A++)for(let L=1;L<=i;L++){const D=(i+1)*(A-1)+(L-1),F=(i+1)*A+(L-1),B=(i+1)*A+L,I=(i+1)*(A-1)+L;l.push(D,F,I),l.push(F,B,I)}this.setIndex(l),this.setAttribute("position",new bt(f,3)),this.setAttribute("normal",new bt(d,3)),this.setAttribute("uv",new bt(p,2));function E(A,L,D,F,B){const I=Math.cos(A),z=Math.sin(A),V=D/L*A,te=Math.cos(V);B.x=F*(2+te)*.5*I,B.y=F*(2+te)*z*.5,B.z=F*Math.sin(V)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $d(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ep extends $t{constructor(e=new Hy(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),t=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new J,f=new J,d=new Ve;let p=new J;const g=[],v=[],x=[],M=[];w(),this.setIndex(M),this.setAttribute("position",new bt(g,3)),this.setAttribute("normal",new bt(v,3)),this.setAttribute("uv",new bt(x,2));function w(){for(let A=0;A<t;A++)S(A);S(r===!1?t:0),E(),C()}function S(A){p=e.getPointAt(A/t,p);const L=a.normals[A],D=a.binormals[A];for(let F=0;F<=i;F++){const B=F/i*Math.PI*2,I=Math.sin(B),z=-Math.cos(B);f.x=z*L.x+I*D.x,f.y=z*L.y+I*D.y,f.z=z*L.z+I*D.z,f.normalize(),v.push(f.x,f.y,f.z),l.x=p.x+n*f.x,l.y=p.y+n*f.y,l.z=p.z+n*f.z,g.push(l.x,l.y,l.z)}}function C(){for(let A=1;A<=t;A++)for(let L=1;L<=i;L++){const D=(i+1)*(A-1)+(L-1),F=(i+1)*A+(L-1),B=(i+1)*A+L,I=(i+1)*(A-1)+L;M.push(D,F,I),M.push(F,B,I)}}function E(){for(let A=0;A<=t;A++)for(let L=0;L<=i;L++)d.x=A/t,d.y=L/i,x.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ep(new Xy[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class fM extends $t{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new J,r=new J;if(e.index!==null){const a=e.attributes.position,l=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,p=f.length;d<p;++d){const g=f[d],v=g.start,x=g.count;for(let M=v,w=v+x;M<w;M+=3)for(let S=0;S<3;S++){const C=l.getX(M+S),E=l.getX(M+(S+1)%3);i.fromBufferAttribute(a,C),r.fromBufferAttribute(a,E),f_(i,r,n)===!0&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const a=e.attributes.position;for(let l=0,f=a.count/3;l<f;l++)for(let d=0;d<3;d++){const p=3*l+d,g=3*l+(d+1)%3;i.fromBufferAttribute(a,p),r.fromBufferAttribute(a,g),f_(i,r,n)===!0&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new bt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function f_(o,e,t){const n=`${o.x},${o.y},${o.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${o.x},${o.y},${o.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var h_=Object.freeze({__proto__:null,BoxGeometry:Hl,CapsuleGeometry:Wd,CircleGeometry:Hd,ConeGeometry:jd,CylinderGeometry:sc,DodecahedronGeometry:Xd,EdgesGeometry:aM,ExtrudeGeometry:Yd,IcosahedronGeometry:qd,LatheGeometry:Wf,OctahedronGeometry:Hf,PlaneGeometry:Va,PolyhedronGeometry:Wa,RingGeometry:Zd,ShapeGeometry:Jd,SphereGeometry:jf,TetrahedronGeometry:Qd,TorusGeometry:Kd,TorusKnotGeometry:$d,TubeGeometry:ep,WireframeGeometry:fM});class hM extends ar{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class dM extends Yo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Yy extends ar{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pM extends Yy{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class mM extends ar{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ud,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gM extends ar{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class vM extends ar{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class yM extends ar{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ud,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xM extends ar{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _M extends zr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Rs(o,e,t){return qy(o)?new o.constructor(o.subarray(e,t!==void 0?t:o.length)):o.slice(e,t)}function ju(o,e,t){return!o||!t&&o.constructor===e?o:typeof e.BYTES_PER_ELEMENT=="number"?new e(o):Array.prototype.slice.call(o)}function qy(o){return ArrayBuffer.isView(o)&&!(o instanceof DataView)}function SM(o){function e(i,r){return o[i]-o[r]}const t=o.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function iy(o,e,t){const n=o.length,i=new o.constructor(n);for(let r=0,a=0;a!==n;++r){const l=t[r]*e;for(let f=0;f!==e;++f)i[a++]=o[l+f]}return i}function Zy(o,e,t,n){let i=1,r=o[0];for(;r!==void 0&&r[n]===void 0;)r=o[i++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(e.push(r.time),t.push.apply(t,a)),r=o[i++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(e.push(r.time),a.toArray(t,t.length)),r=o[i++];while(r!==void 0);else do a=r[n],a!==void 0&&(e.push(r.time),t.push(a)),r=o[i++];while(r!==void 0)}function sL(o,e,t,n,i=30){const r=o.clone();r.name=e;const a=[];for(let f=0;f<r.tracks.length;++f){const d=r.tracks[f],p=d.getValueSize(),g=[],v=[];for(let x=0;x<d.times.length;++x){const M=d.times[x]*i;if(!(M<t||M>=n)){g.push(d.times[x]);for(let w=0;w<p;++w)v.push(d.values[x*p+w])}}g.length!==0&&(d.times=ju(g,d.times.constructor),d.values=ju(v,d.values.constructor),a.push(d))}r.tracks=a;let l=1/0;for(let f=0;f<r.tracks.length;++f)l>r.tracks[f].times[0]&&(l=r.tracks[f].times[0]);for(let f=0;f<r.tracks.length;++f)r.tracks[f].shift(-1*l);return r.resetDuration(),r}function oL(o,e=0,t=o,n=30){n<=0&&(n=30);const i=t.tracks.length,r=e/n;for(let a=0;a<i;++a){const l=t.tracks[a],f=l.ValueTypeName;if(f==="bool"||f==="string")continue;const d=o.tracks.find(function(C){return C.name===l.name&&C.ValueTypeName===f});if(d===void 0)continue;let p=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let v=0;const x=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=x/3);const M=l.times.length-1;let w;if(r<=l.times[0]){const C=p,E=g-p;w=Rs(l.values,C,E)}else if(r>=l.times[M]){const C=M*g+p,E=C+g-p;w=Rs(l.values,C,E)}else{const C=l.createInterpolant(),E=p,A=g-p;C.evaluate(r),w=Rs(C.resultBuffer,E,A)}f==="quaternion"&&new _r().fromArray(w).normalize().conjugate().toArray(w);const S=d.times.length;for(let C=0;C<S;++C){const E=C*x+v;if(f==="quaternion")_r.multiplyQuaternionsFlat(d.values,E,w,0,d.values,E);else{const A=x-v*2;for(let L=0;L<A;++L)d.values[E+L]-=w[L]}}}return o.blendMode=Cy,o}const aL={arraySlice:Rs,convertArray:ju,isTypedArray:qy,getKeyframeOrder:SM,sortedArray:iy,flattenJSON:Zy,subclip:sL,makeClipAdditive:oL};class tp{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let l=n+2;;){if(i===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=r)){const l=t[1];e<l&&(n=2,r=l);for(let f=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0;break n}break e}for(;n<a;){const l=n+a>>>1;e<t[l]?a=l:n=l+1}if(i=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let a=0;a!==i;++a)t[a]=n[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class wM extends tp{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Vu,endingEnd:Vu}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,l=i[r],f=i[a];if(l===void 0)switch(this.getSettings_().endingStart){case Wu:r=e,l=2*t-n;break;case wd:r=i.length-2,l=t+i[r]-i[r+1];break;default:r=e,l=n}if(f===void 0)switch(this.getSettings_().endingEnd){case Wu:a=e,f=2*n-t;break;case wd:a=1,f=n+i[1]-i[0];break;default:a=e-1,f=t}const d=(n-t)*.5,p=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(f-n),this._offsetPrev=r*p,this._offsetNext=a*p}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,f=e*l,d=f-l,p=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,x=this._weightNext,M=(n-t)/(i-t),w=M*M,S=w*M,C=-v*S+2*v*w-v*M,E=(1+v)*S+(-1.5-2*v)*w+(-.5+v)*M+1,A=(-1-x)*S+(1.5+x)*w+.5*M,L=x*S-x*w;for(let D=0;D!==l;++D)r[D]=C*a[p+D]+E*a[d+D]+A*a[f+D]+L*a[g+D];return r}}class Jy extends tp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,f=e*l,d=f-l,p=(n-t)/(i-t),g=1-p;for(let v=0;v!==l;++v)r[v]=a[d+v]*g+a[f+v]*p;return r}}class MM extends tp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class So{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ju(t,this.TimeBufferType),this.values=ju(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ju(e.times,Array),values:ju(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new MM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new wM(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case _d:t=this.InterpolantFactoryMethodDiscrete;break;case Sd:t=this.InterpolantFactoryMethodLinear;break;case Zm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _d;case this.InterpolantFactoryMethodLinear:return Sd;case this.InterpolantFactoryMethodSmooth:return Zm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<e;)++r;for(;a!==-1&&n[a]>t;)--a;if(++a,r!==0||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const l=this.getValueSize();this.times=Rs(n,r,a),this.values=Rs(this.values,r*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==r;l++){const f=n[l];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,f),e=!1;break}if(a!==null&&a>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,f,a),e=!1;break}a=f}if(i!==void 0&&qy(i))for(let l=0,f=i.length;l!==f;++l){const d=i[l];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=Rs(this.times),t=Rs(this.values),n=this.getValueSize(),i=this.getInterpolation()===Zm,r=e.length-1;let a=1;for(let l=1;l<r;++l){let f=!1;const d=e[l],p=e[l+1];if(d!==p&&(l!==1||d!==e[0]))if(i)f=!0;else{const g=l*n,v=g-n,x=g+n;for(let M=0;M!==n;++M){const w=t[g+M];if(w!==t[v+M]||w!==t[x+M]){f=!0;break}}}if(f){if(l!==a){e[a]=e[l];const g=l*n,v=a*n;for(let x=0;x!==n;++x)t[v+x]=t[g+x]}++a}}if(r>0){e[a]=e[r];for(let l=r*n,f=a*n,d=0;d!==n;++d)t[f+d]=t[l+d];++a}return a!==e.length?(this.times=Rs(e,0,a),this.values=Rs(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=Rs(this.times,0),t=Rs(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}So.prototype.TimeBufferType=Float32Array;So.prototype.ValueBufferType=Float32Array;So.prototype.DefaultInterpolation=Sd;class oc extends So{}oc.prototype.ValueTypeName="bool";oc.prototype.ValueBufferType=Array;oc.prototype.DefaultInterpolation=_d;oc.prototype.InterpolantFactoryMethodLinear=void 0;oc.prototype.InterpolantFactoryMethodSmooth=void 0;class Qy extends So{}Qy.prototype.ValueTypeName="color";class Ld extends So{}Ld.prototype.ValueTypeName="number";class bM extends tp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,f=(n-t)/(i-t);let d=e*l;for(let p=d+l;d!==p;d+=4)_r.slerpFlat(r,0,a,d-l,a,d,f);return r}}class Xf extends So{InterpolantFactoryMethodLinear(e){return new bM(this.times,this.values,this.getValueSize(),e)}}Xf.prototype.ValueTypeName="quaternion";Xf.prototype.DefaultInterpolation=Sd;Xf.prototype.InterpolantFactoryMethodSmooth=void 0;class ac extends So{}ac.prototype.ValueTypeName="string";ac.prototype.ValueBufferType=Array;ac.prototype.DefaultInterpolation=_d;ac.prototype.InterpolantFactoryMethodLinear=void 0;ac.prototype.InterpolantFactoryMethodSmooth=void 0;class Rd extends So{}Rd.prototype.ValueTypeName="vector";class Id{constructor(e,t=-1,n,i=vg){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=gs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,l=n.length;a!==l;++a)t.push(uL(n[a]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=n.length;r!==a;++r)t.push(So.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,a=[];for(let l=0;l<r;l++){let f=[],d=[];f.push((l+r-1)%r,l,(l+1)%r),d.push(0,1,0);const p=SM(f);f=iy(f,1,p),d=iy(d,1,p),!i&&f[0]===0&&(f.push(r),d.push(d[0])),a.push(new Ld(".morphTargetInfluences["+t[l].name+"]",f,d).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,f=e.length;l<f;l++){const d=e[l],p=d.name.match(r);if(p&&p.length>1){const g=p[1];let v=i[g];v||(i[g]=v=[]),v.push(d)}}const a=[];for(const l in i)a.push(this.CreateFromMorphTargetSequence(l,i[l],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,x,M,w){if(x.length!==0){const S=[],C=[];Zy(x,S,C,M),S.length!==0&&w.push(new g(v,S,C))}},i=[],r=e.name||"default",a=e.fps||30,l=e.blendMode;let f=e.length||-1;const d=e.hierarchy||[];for(let g=0;g<d.length;g++){const v=d[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const x={};let M;for(M=0;M<v.length;M++)if(v[M].morphTargets)for(let w=0;w<v[M].morphTargets.length;w++)x[v[M].morphTargets[w]]=-1;for(const w in x){const S=[],C=[];for(let E=0;E!==v[M].morphTargets.length;++E){const A=v[M];S.push(A.time),C.push(A.morphTarget===w?1:0)}i.push(new Ld(".morphTargetInfluence["+w+"]",S,C))}f=x.length*a}else{const x=".bones["+t[g].name+"]";n(Rd,x+".position",v,"pos",i),n(Xf,x+".quaternion",v,"rot",i),n(Rd,x+".scale",v,"scl",i)}}return i.length===0?null:new this(r,f,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function lL(o){switch(o.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ld;case"vector":case"vector2":case"vector3":case"vector4":return Rd;case"color":return Qy;case"quaternion":return Xf;case"bool":case"boolean":return oc;case"string":return ac}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+o)}function uL(o){if(o.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=lL(o.type);if(o.times===void 0){const t=[],n=[];Zy(o.keys,t,n,"value"),o.times=t,o.values=n}return e.parse!==void 0?e.parse(o):new e(o.name,o.times,o.values,o.interpolation)}const nc={enabled:!1,files:{},add:function(o,e){this.enabled!==!1&&(this.files[o]=e)},get:function(o){if(this.enabled!==!1)return this.files[o]},remove:function(o){delete this.files[o]},clear:function(){this.files={}}};class Ky{constructor(e,t,n){const i=this;let r=!1,a=0,l=0,f;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){l++,r===!1&&i.onStart!==void 0&&i.onStart(p,a,l),r=!0},this.itemEnd=function(p){a++,i.onProgress!==void 0&&i.onProgress(p,a,l),a===l&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(p){i.onError!==void 0&&i.onError(p)},this.resolveURL=function(p){return f?f(p):p},this.setURLModifier=function(p){return f=p,this},this.addHandler=function(p,g){return d.push(p,g),this},this.removeHandler=function(p){const g=d.indexOf(p);return g!==-1&&d.splice(g,2),this},this.getHandler=function(p){for(let g=0,v=d.length;g<v;g+=2){const x=d[g],M=d[g+1];if(x.global&&(x.lastIndex=0),x.test(p))return M}return null}}}const EM=new Ky;class vs{constructor(e){this.manager=e!==void 0?e:EM,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Pa={};class cL extends Error{constructor(e,t){super(e),this.response=t}}class za extends vs{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=nc.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Pa[e]!==void 0){Pa[e].push({onLoad:t,onProgress:n,onError:i});return}Pa[e]=[],Pa[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,f=this.responseType;fetch(a).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const p=Pa[e],g=d.body.getReader(),v=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),x=v?parseInt(v):0,M=x!==0;let w=0;const S=new ReadableStream({start(C){E();function E(){g.read().then(({done:A,value:L})=>{if(A)C.close();else{w+=L.byteLength;const D=new ProgressEvent("progress",{lengthComputable:M,loaded:w,total:x});for(let F=0,B=p.length;F<B;F++){const I=p[F];I.onProgress&&I.onProgress(D)}C.enqueue(L),E()}})}}});return new Response(S)}else throw new cL(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(f){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return d.json();default:if(l===void 0)return d.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,x=new TextDecoder(v);return d.arrayBuffer().then(M=>x.decode(M))}}}).then(d=>{nc.add(e,d);const p=Pa[e];delete Pa[e];for(let g=0,v=p.length;g<v;g++){const x=p[g];x.onLoad&&x.onLoad(d)}}).catch(d=>{const p=Pa[e];if(p===void 0)throw this.manager.itemError(e),d;delete Pa[e];for(let g=0,v=p.length;g<v;g++){const x=p[g];x.onError&&x.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class fL extends vs{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new za(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(r.parse(JSON.parse(l)))}catch(f){i?i(f):console.error(f),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Id.parse(e[n]);t.push(i)}return t}}class hL extends vs{constructor(e){super(e)}load(e,t,n,i){const r=this,a=[],l=new By,f=new za(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(r.withCredentials);let d=0;function p(g){f.load(e[g],function(v){const x=r.parse(v,!0);a[g]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},d+=1,d===6&&(x.mipmapCount===1&&(l.minFilter=qn),l.image=a,l.format=x.format,l.needsUpdate=!0,t&&t(l))},n,i)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)p(g);else f.load(e,function(g){const v=r.parse(g,!0);if(v.isCubemap){const x=v.mipmaps.length/v.mipmapCount;for(let M=0;M<x;M++){a[M]={mipmaps:[]};for(let w=0;w<v.mipmapCount;w++)a[M].mipmaps.push(v.mipmaps[M*v.mipmapCount+w]),a[M].format=v.format,a[M].width=v.width,a[M].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=qn),l.format=v.format,l.needsUpdate=!0,t&&t(l)},n,i);return l}}class Dd extends vs{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=nc.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const l=Ed("img");function f(){p(),nc.add(e,this),t&&t(this),r.manager.itemEnd(e)}function d(g){p(),i&&i(g),r.manager.itemError(e),r.manager.itemEnd(e)}function p(){l.removeEventListener("load",f,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",f,!1),l.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),r.manager.itemStart(e),l.src=e,l}}class dL extends vs{constructor(e){super(e)}load(e,t,n,i){const r=new Vd,a=new Dd(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function f(d){a.load(e[d],function(p){r.images[d]=p,l++,l===6&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let d=0;d<e.length;++d)f(d);return r}}class pL extends vs{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new Lf,l=new za(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(r.withCredentials),l.load(e,function(f){const d=r.parse(f);d&&(d.image!==void 0?a.image=d.image:d.data!==void 0&&(a.image.width=d.width,a.image.height=d.height,a.image.data=d.data),a.wrapS=d.wrapS!==void 0?d.wrapS:xr,a.wrapT=d.wrapT!==void 0?d.wrapT:xr,a.magFilter=d.magFilter!==void 0?d.magFilter:qn,a.minFilter=d.minFilter!==void 0?d.minFilter:qn,a.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.encoding!==void 0&&(a.encoding=d.encoding),d.flipY!==void 0&&(a.flipY=d.flipY),d.format!==void 0&&(a.format=d.format),d.type!==void 0&&(a.type=d.type),d.mipmaps!==void 0&&(a.mipmaps=d.mipmaps,a.minFilter=zl),d.mipmapCount===1&&(a.minFilter=qn),d.generateMipmaps!==void 0&&(a.generateMipmaps=d.generateMipmaps),a.needsUpdate=!0,t&&t(a,d))},n,i),a}}class mL extends vs{constructor(e){super(e)}load(e,t,n,i){const r=new Jn,a=new Dd(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){r.image=l,r.needsUpdate=!0,t!==void 0&&t(r)},n,i),r}}class jl extends mn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new vt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class TM extends jl{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(mn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Z0=new Jt,d_=new J,p_=new J;class $y{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new Jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xg,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new gn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;d_.setFromMatrixPosition(e.matrixWorld),t.position.copy(d_),p_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(p_),t.updateMatrixWorld(),Z0.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z0),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Z0)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gL extends $y{constructor(){super(new hi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=bd*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class CM extends jl{constructor(e,t,n=0,i=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(mn.DEFAULT_UP),this.updateMatrix(),this.target=new mn,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new gL}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const m_=new Jt,Qh=new J,J0=new J;class vL extends $y{constructor(){super(new hi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new gn(2,1,1,1),new gn(0,1,1,1),new gn(3,1,1,1),new gn(1,1,1,1),new gn(3,0,1,1),new gn(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Qh.setFromMatrixPosition(e.matrixWorld),n.position.copy(Qh),J0.copy(n.position),J0.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(J0),n.updateMatrixWorld(),i.makeTranslation(-Qh.x,-Qh.y,-Qh.z),m_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(m_)}}class AM extends jl{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new vL}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class yL extends $y{constructor(){super(new kl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class PM extends jl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(mn.DEFAULT_UP),this.updateMatrix(),this.target=new mn,this.shadow=new yL}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class LM extends jl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class RM extends jl{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class IM{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*i)),t.addScaledVector(a[5],1.092548*(i*r)),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],1.092548*(n*r)),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*r),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*i),t.addScaledVector(a[5],2*.429043*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],2*.429043*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class Rg extends jl{constructor(e=new IM,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Ig extends vs{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,a=new za(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(l){try{t(r.parse(JSON.parse(l)))}catch(f){i?i(f):console.error(f),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const i=Ig.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new vt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const a=e.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=new vt().setHex(a.value);break;case"v2":i.uniforms[r].value=new Ve().fromArray(a.value);break;case"v3":i.uniforms[r].value=new J().fromArray(a.value);break;case"v4":i.uniforms[r].value=new gn().fromArray(a.value);break;case"m3":i.uniforms[r].value=new ji().fromArray(a.value);break;case"m4":i.uniforms[r].value=new Jt().fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new Ve().fromArray(r)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:hM,SpriteMaterial:Oy,RawShaderMaterial:dM,ShaderMaterial:Yo,PointsMaterial:Uy,MeshPhysicalMaterial:pM,MeshStandardMaterial:Yy,MeshPhongMaterial:mM,MeshToonMaterial:gM,MeshNormalMaterial:vM,MeshLambertMaterial:yM,MeshDepthMaterial:Sg,MeshDistanceMaterial:wg,MeshBasicMaterial:Ga,MeshMatcapMaterial:xM,LineDashedMaterial:_M,LineBasicMaterial:zr,Material:ar};return new t[e]}}class ry{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ex extends $t{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class DM extends vs{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new za(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(l){try{t(r.parse(JSON.parse(l)))}catch(f){i?i(f):console.error(f),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(x,M){if(t[M]!==void 0)return t[M];const S=x.interleavedBuffers[M],C=r(x,S.buffer),E=Mf(S.type,C),A=new Tg(E,S.stride);return A.uuid=S.uuid,t[M]=A,A}function r(x,M){if(n[M]!==void 0)return n[M];const S=x.arrayBuffers[M],C=new Uint32Array(S).buffer;return n[M]=C,C}const a=e.isInstancedBufferGeometry?new ex:new $t,l=e.data.index;if(l!==void 0){const x=Mf(l.type,l.array);a.setIndex(new Ln(x,1))}const f=e.data.attributes;for(const x in f){const M=f[x];let w;if(M.isInterleavedBufferAttribute){const S=i(e.data,M.data);w=new $u(S,M.itemSize,M.offset,M.normalized)}else{const S=Mf(M.type,M.array),C=M.isInstancedBufferAttribute?ec:Ln;w=new C(S,M.itemSize,M.normalized)}M.name!==void 0&&(w.name=M.name),M.usage!==void 0&&w.setUsage(M.usage),M.updateRange!==void 0&&(w.updateRange.offset=M.updateRange.offset,w.updateRange.count=M.updateRange.count),a.setAttribute(x,w)}const d=e.data.morphAttributes;if(d)for(const x in d){const M=d[x],w=[];for(let S=0,C=M.length;S<C;S++){const E=M[S];let A;if(E.isInterleavedBufferAttribute){const L=i(e.data,E.data);A=new $u(L,E.itemSize,E.offset,E.normalized)}else{const L=Mf(E.type,E.array);A=new Ln(L,E.itemSize,E.normalized)}E.name!==void 0&&(A.name=E.name),w.push(A)}a.morphAttributes[x]=w}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let x=0,M=g.length;x!==M;++x){const w=g[x];a.addGroup(w.start,w.count,w.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const x=new J;v.center!==void 0&&x.fromArray(v.center),a.boundingSphere=new Wl(x,v.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class xL extends vs{constructor(e){super(e)}load(e,t,n,i){const r=this,a=this.path===""?ry.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new za(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){let d=null;try{d=JSON.parse(f)}catch(g){i!==void 0&&i(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const p=d.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(d,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?ry.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const r=new za(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(e,t),l=JSON.parse(a),f=l.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(d)}),l=this.parseTextures(e.textures,a),f=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,r,f,l,n),p=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,p),t!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),l=this.parseMaterials(e.materials,a),f=this.parseObject(e.object,i,l,a,t),d=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,d),f}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const r=new Ju().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(r){r.isBone&&(i[r.uuid]=r)}),e!==void 0)for(let r=0,a=e.length;r<a;r++){const l=new Cg().fromJSON(e[r],i);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new DM;for(let r=0,a=e.length;r<a;r++){let l;const f=e[r];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(f);break;default:f.type in h_?l=h_[f.type].fromJSON(f,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${f.type}"`)}l.uuid=f.uuid,f.name!==void 0&&(l.name=f.name),f.userData!==void 0&&(l.userData=f.userData),n[f.uuid]=l}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const r=new Ig;r.setTextures(t);for(let a=0,l=e.length;a<l;a++){const f=e[a];n[f.uuid]===void 0&&(n[f.uuid]=r.parse(f)),i[f.uuid]=n[f.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],r=Id.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function a(f){return n.manager.itemStart(f),r.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemError(f),n.manager.itemEnd(f)})}function l(f){if(typeof f=="string"){const d=f,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return a(p)}else return f.data?{data:Mf(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new Ky(t);r=new Dd(f),r.setCrossOrigin(this.crossOrigin);for(let d=0,p=e.length;d<p;d++){const g=e[d],v=g.url;if(Array.isArray(v)){const x=[];for(let M=0,w=v.length;M<w;M++){const S=v[M],C=l(S);C!==null&&(C instanceof HTMLImageElement?x.push(C):x.push(new Lf(C.data,C.width,C.height)))}i[g.uuid]=new Hu(x)}else{const x=l(g.url);i[g.uuid]=new Hu(x)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(a){if(typeof a=="string"){const l=a,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await i.loadAsync(f)}else return a.data?{data:Mf(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new Dd(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const f=e[a],d=f.url;if(Array.isArray(d)){const p=[];for(let g=0,v=d.length;g<v;g++){const x=d[g],M=await r(x);M!==null&&(M instanceof HTMLImageElement?p.push(M):p.push(new Lf(M.data,M.width,M.height)))}n[f.uuid]=new Hu(p)}else{const p=await r(f.url);n[f.uuid]=new Hu(p)}}}return n}parseTextures(e,t){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const i={};if(e!==void 0)for(let r=0,a=e.length;r<a;r++){const l=e[r];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const f=t[l.image],d=f.data;let p;Array.isArray(d)?(p=new Vd,d.length===6&&(p.needsUpdate=!0)):(d&&d.data?p=new Lf:p=new Jn,d&&(p.needsUpdate=!0)),p.source=f,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=n(l.mapping,_L)),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=n(l.wrap[0],g_),p.wrapT=n(l.wrap[1],g_)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.encoding!==void 0&&(p.encoding=l.encoding),l.minFilter!==void 0&&(p.minFilter=n(l.minFilter,v_)),l.magFilter!==void 0&&(p.magFilter=n(l.magFilter,v_)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.userData!==void 0&&(p.userData=l.userData),i[l.uuid]=p}return i}parseObject(e,t,n,i,r){let a;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function f(v){if(v!==void 0){if(Array.isArray(v)){const x=[];for(let M=0,w=v.length;M<w;M++){const S=v[M];n[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),x.push(n[S])}return x}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function d(v){return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),i[v]}let p,g;switch(e.type){case"Scene":a=new rg,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new vt(e.background):a.background=d(e.background)),e.environment!==void 0&&(a.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Eg(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new bg(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new hi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new kl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new LM(e.color,e.intensity);break;case"DirectionalLight":a=new PM(e.color,e.intensity);break;case"PointLight":a=new AM(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new RM(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new CM(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new TM(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new Rg().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),g=f(e.material),a=new Kw(p,g),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),g=f(e.material),a=new bi(p,g);break;case"InstancedMesh":p=l(e.geometry),g=f(e.material);const v=e.count,x=e.instanceMatrix,M=e.instanceColor;a=new $w(p,g,v),a.instanceMatrix=new ec(new Float32Array(x.array),16),M!==void 0&&(a.instanceColor=new ec(new Float32Array(M.array),M.itemSize));break;case"LOD":a=new Qw;break;case"Line":a=new Bl(l(e.geometry),f(e.material));break;case"LineLoop":a=new eM(l(e.geometry),f(e.material));break;case"LineSegments":a=new Zo(l(e.geometry),f(e.material));break;case"PointCloud":case"Points":a=new tM(l(e.geometry),f(e.material));break;case"Sprite":a=new Jw(f(e.material));break;case"Group":a=new Ef;break;case"Bone":a=new zy;break;default:a=new mn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let x=0;x<v.length;x++)a.add(this.parseObject(v[x],t,n,i,r))}if(e.animations!==void 0){const v=e.animations;for(let x=0;x<v.length;x++){const M=v[x];a.animations.push(r[M])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const v=e.levels;for(let x=0;x<v.length;x++){const M=v[x],w=a.getObjectByProperty("uuid",M.object);w!==void 0&&a.addLevel(w,M.distance,M.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}}const _L={UVMapping:gg,CubeReflectionMapping:Nl,CubeRefractionMapping:Ol,EquirectangularReflectionMapping:gd,EquirectangularRefractionMapping:vd,CubeUVReflectionMapping:Bf},g_={RepeatWrapping:yd,ClampToEdgeWrapping:xr,MirroredRepeatWrapping:xd},v_={NearestFilter:ci,NearestMipmapNearestFilter:ng,NearestMipmapLinearFilter:ad,LinearFilter:qn,LinearMipmapNearestFilter:Ey,LinearMipmapLinearFilter:zl};class SL extends vs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=nc.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(f){nc.add(e,f),t&&t(f),r.manager.itemEnd(e)}).catch(function(f){i&&i(f),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}let Lm;class tx{static getContext(){return Lm===void 0&&(Lm=new(window.AudioContext||window.webkitAudioContext)),Lm}static setContext(e){Lm=e}}class wL extends vs{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new za(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const f=l.slice(0);tx.getContext().decodeAudioData(f,function(p){t(p)})}catch(f){i?i(f):console.error(f),r.manager.itemError(e)}},n,i)}}class ML extends Rg{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const i=new vt().set(e),r=new vt().set(t),a=new J(i.r,i.g,i.b),l=new J(r.r,r.g,r.b),f=Math.sqrt(Math.PI),d=f*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(l).multiplyScalar(f),this.sh.coefficients[1].copy(a).sub(l).multiplyScalar(d)}}class bL extends Rg{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=new vt().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const y_=new Jt,x_=new Jt,Au=new Jt;class EL{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new hi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new hi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Au.copy(e.projectionMatrix);const i=t.eyeSep/2,r=i*t.near/t.focus,a=t.near*Math.tan(qu*t.fov*.5)/t.zoom;let l,f;x_.elements[12]=-i,y_.elements[12]=i,l=-a*t.aspect+r,f=a*t.aspect+r,Au.elements[0]=2*t.near/(f-l),Au.elements[8]=(f+l)/(f-l),this.cameraL.projectionMatrix.copy(Au),l=-a*t.aspect-r,f=a*t.aspect-r,Au.elements[0]=2*t.near/(f-l),Au.elements[8]=(f+l)/(f-l),this.cameraR.projectionMatrix.copy(Au)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(x_),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(y_)}}class nx{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=__(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=__();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function __(){return(typeof performance>"u"?Date:performance).now()}const Pu=new J,S_=new _r,TL=new J,Lu=new J;class CL extends mn{constructor(){super(),this.type="AudioListener",this.context=tx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new nx}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Pu,S_,TL),Lu.set(0,0,-1).applyQuaternion(S_),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Pu.x,i),t.positionY.linearRampToValueAtTime(Pu.y,i),t.positionZ.linearRampToValueAtTime(Pu.z,i),t.forwardX.linearRampToValueAtTime(Lu.x,i),t.forwardY.linearRampToValueAtTime(Lu.y,i),t.forwardZ.linearRampToValueAtTime(Lu.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Pu.x,Pu.y,Pu.z),t.setOrientation(Lu.x,Lu.y,Lu.z,n.x,n.y,n.z)}}class kM extends mn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ru=new J,w_=new _r,AL=new J,Iu=new J;class PL extends kM{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ru,w_,AL),Iu.set(0,0,1).applyQuaternion(w_);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ru.x,n),t.positionY.linearRampToValueAtTime(Ru.y,n),t.positionZ.linearRampToValueAtTime(Ru.z,n),t.orientationX.linearRampToValueAtTime(Iu.x,n),t.orientationY.linearRampToValueAtTime(Iu.y,n),t.orientationZ.linearRampToValueAtTime(Iu.z,n)}else t.setPosition(Ru.x,Ru.y,Ru.z),t.setOrientation(Iu.x,Iu.y,Iu.z)}}class LL{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class FM{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,r,a;switch(t){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==i;++l)n[r+l]=n[l];a=t}else{a+=t;const l=t/a;this._mixBufferRegion(n,r,0,l,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const f=t*this._origIndex;this._mixBufferRegion(n,i,f,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let f=t,d=t+t;f!==d;++f)if(n[f]!==n[f+t]){l.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let a=0;a!==r;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){_r.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const a=this._workIndex*r;_r.multiplyQuaternionsFlat(e,a,e,t,e,n),_r.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,r){const a=1-i;for(let l=0;l!==r;++l){const f=t+l;e[f]=e[f]*a+e[n+l]*i}}_lerpAdditive(e,t,n,i,r){for(let a=0;a!==r;++a){const l=t+a;e[l]=e[l]+e[n+a]*i}}}const ix="\\[\\]\\.:\\/",RL=new RegExp("["+ix+"]","g"),rx="[^"+ix+"]",IL="[^"+ix.replace("\\.","")+"]",DL=/((?:WC+[\/:])*)/.source.replace("WC",rx),kL=/(WCOD+)?/.source.replace("WCOD",IL),FL=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",rx),NL=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",rx),OL=new RegExp("^"+DL+kL+FL+NL+"$"),zL=["material","materials","bones","map"];class UL{constructor(e,t,n){const i=n||dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class dn{constructor(e,t,n){this.path=t,this.parsedPath=n||dn.parseTrackName(t),this.node=dn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new dn.Composite(e,t,n):new dn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(RL,"")}static parseTrackName(e){const t=OL.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);zL.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let a=0;a<r.length;a++){const l=r[a];if(l.name===t||l.uuid===t)return l;const f=n(l.children);if(f)return f}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=dn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const a=e[i];if(a===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}f=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(f=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}dn.Composite=UL;dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};dn.prototype.GetterByBindingType=[dn.prototype._getValue_direct,dn.prototype._getValue_array,dn.prototype._getValue_arrayElement,dn.prototype._getValue_toArray];dn.prototype.SetterByBindingTypeAndVersioning=[[dn.prototype._setValue_direct,dn.prototype._setValue_direct_setNeedsUpdate,dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_array,dn.prototype._setValue_array_setNeedsUpdate,dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_arrayElement,dn.prototype._setValue_arrayElement_setNeedsUpdate,dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_fromArray,dn.prototype._setValue_fromArray_setNeedsUpdate,dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class BL{constructor(){this.isAnimationObjectGroup=!0,this.uuid=gs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let l,f=e.length,d=this.nCachedObjects_;for(let p=0,g=arguments.length;p!==g;++p){const v=arguments[p],x=v.uuid;let M=t[x];if(M===void 0){M=f++,t[x]=M,e.push(v);for(let w=0,S=a;w!==S;++w)r[w].push(new dn(v,n[w],i[w]))}else if(M<d){l=e[M];const w=--d,S=e[w];t[S.uuid]=M,e[M]=S,t[x]=w,e[w]=v;for(let C=0,E=a;C!==E;++C){const A=r[C],L=A[w];let D=A[M];A[M]=L,D===void 0&&(D=new dn(v,n[C],i[C])),A[w]=D}}else e[M]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const f=arguments[a],d=f.uuid,p=t[d];if(p!==void 0&&p>=r){const g=r++,v=e[g];t[v.uuid]=p,e[p]=v,t[d]=g,e[g]=f;for(let x=0,M=i;x!==M;++x){const w=n[x],S=w[g],C=w[p];w[p]=S,w[g]=C}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=e.length;for(let l=0,f=arguments.length;l!==f;++l){const d=arguments[l],p=d.uuid,g=t[p];if(g!==void 0)if(delete t[p],g<r){const v=--r,x=e[v],M=--a,w=e[M];t[x.uuid]=g,e[g]=x,t[w.uuid]=v,e[v]=w,e.pop();for(let S=0,C=i;S!==C;++S){const E=n[S],A=E[v],L=E[M];E[g]=A,E[v]=L,E.pop()}}else{const v=--a,x=e[v];v>0&&(t[x.uuid]=g),e[g]=x,e.pop();for(let M=0,w=i;M!==w;++M){const S=n[M];S[g]=S[v],S.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(i!==void 0)return r[i];const a=this._paths,l=this._parsedPaths,f=this._objects,d=f.length,p=this.nCachedObjects_,g=new Array(d);i=r.length,n[e]=i,a.push(e),l.push(t),r.push(g);for(let v=p,x=f.length;v!==x;++v){const M=f[v];g[v]=new dn(M,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length-1,f=a[l],d=e[l];t[d]=n,a[n]=f,a.pop(),r[n]=r[l],r.pop(),i[n]=i[l],i.pop()}}}class GL{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,a=r.length,l=new Array(a),f={endingStart:Vu,endingEnd:Vu};for(let d=0;d!==a;++d){const p=r[d].createInterpolant(null);l[d]=p,p.settings=f}this._interpolantSettings=f,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Aw,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,r=e._clip.duration,a=r/i,l=i/r;e.warp(1,a,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const f=l.parameterPositions,d=l.sampleValues;return f[0]=r,f[1]=r+n,d[0]=e/a,d[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const f=(e-r)*n;f<0||n===0?t=0:(this._startTime=null,t=n*f)}t*=this._updateTimeScale(e);const a=this._updateTime(t),l=this._updateWeight(e);if(l>0){const f=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case Cy:for(let p=0,g=f.length;p!==g;++p)f[p].evaluate(a),d[p].accumulateAdditive(l);break;case vg:default:for(let p=0,g=f.length;p!==g;++p)f[p].evaluate(a),d[p].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const a=n===Pw;if(e===0)return r===-1?i:a&&(r&1)===1?t-i:i;if(n===Cw){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,r+=Math.abs(l);const f=this.repetitions-r;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const d=e<0;this._setEndings(d,!d,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(a&&(r&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Wu,i.endingEnd=Wu):(e?i.endingStart=this.zeroSlopeAtStart?Wu:Vu:i.endingStart=wd,t?i.endingEnd=this.zeroSlopeAtEnd?Wu:Vu:i.endingEnd=wd)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,f=a.sampleValues;return l[0]=r,f[0]=t,l[1]=r+e,f[1]=n,this}}const VL=new Float32Array(1);class WL extends Ba{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,l=e._interpolants,f=n.uuid,d=this._bindingsByRootAndName;let p=d[f];p===void 0&&(p={},d[f]=p);for(let g=0;g!==r;++g){const v=i[g],x=v.name;let M=p[x];if(M!==void 0)++M.referenceCount,a[g]=M;else{if(M=a[g],M!==void 0){M._cacheIndex===null&&(++M.referenceCount,this._addInactiveBinding(M,f,x));continue}const w=t&&t._propertyBindings[g].binding.parsedPath;M=new FM(dn.create(n,x,w),v.ValueTypeName,v.getValueSize()),++M.referenceCount,this._addInactiveBinding(M,f,x),a[g]=M}l[g].resultBuffer=M.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let a=r[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,l=a[r],f=l.knownActions,d=f[f.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,f[p]=d,f.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],f.length===0&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,l=a[i],f=t[t.length-1],d=e._cacheIndex;f._cacheIndex=d,t[d]=f,t.pop(),delete l[r],Object.keys(l).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Jy(new Float32Array(2),new Float32Array(2),1,VL),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let a=typeof e=="string"?Id.findByName(i,e):e;const l=a!==null?a.uuid:e,f=this._actionsByClip[l];let d=null;if(n===void 0&&(a!==null?n=a.blendMode:n=vg),f!==void 0){const g=f.actionByRoot[r];if(g!==void 0&&g.blendMode===n)return g;d=f.knownActions[0],a===null&&(a=d._clip)}if(a===null)return null;const p=new GL(this,a,t,n);return this._bindAction(p,d),this._addInactiveAction(p,l,r),p}existingAction(e,t){const n=t||this._root,i=n.uuid,r=typeof e=="string"?Id.findByName(n,e):e,a=r?r.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(i,e,r,a);const l=this._bindings,f=this._nActiveBindings;for(let d=0;d!==f;++d)l[d].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(r!==void 0){const a=r.knownActions;for(let l=0,f=a.length;l!==f;++l){const d=a[l];this._deactivateAction(d);const p=d._cacheIndex,g=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(d)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const l=n[a].actionByRoot,f=l[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const i=this._bindingsByRootAndName,r=i[t];if(r!==void 0)for(const a in r){const l=r[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class sx{constructor(e){this.value=e}clone(){return new sx(this.value.clone===void 0?this.value:this.value.clone())}}let HL=0;class jL extends Ba{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:HL++}),this.name="",this.usage=Md,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class XL extends Tg{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class YL{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class NM{constructor(e,t,n=0,i=1/0){this.ray=new Gf(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Zu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return sy(e,this,n,t),n.sort(M_),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)sy(e[i],this,n,t);return n.sort(M_),n}}function M_(o,e){return o.distance-e.distance}function sy(o,e,t,n){if(o.layers.test(e.layers)&&o.raycast(e,t),n===!0){const i=o.children;for(let r=0,a=i.length;r<a;r++)sy(i[r],e,t,!0)}}class oy{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(fi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class qL{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const b_=new Ve;class ZL{constructor(e=new Ve(1/0,1/0),t=new Ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=b_.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,b_).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const E_=new J,Rm=new J;class JL{constructor(e=new J,t=new J){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){E_.subVectors(e,this.start),Rm.subVectors(this.end,this.start);const n=Rm.dot(Rm);let r=Rm.dot(E_)/n;return t&&(r=fi(r,0,1)),r}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const T_=new J;class QL extends mn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new $t,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,f=32;a<f;a++,l++){const d=a/f*Math.PI*2,p=l/f*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new bt(i,3));const r=new zr({fog:!1,toneMapped:!1});this.cone=new Zo(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),T_.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(T_),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const El=new J,Im=new Jt,Q0=new Jt;class KL extends Zo{constructor(e){const t=OM(e),n=new $t,i=[],r=[],a=new vt(0,0,1),l=new vt(0,1,0);for(let d=0;d<t.length;d++){const p=t[d];p.parent&&p.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(l.r,l.g,l.b))}n.setAttribute("position",new bt(i,3)),n.setAttribute("color",new bt(r,3));const f=new zr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,f),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Q0.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<t.length;r++){const l=t[r];l.parent&&l.parent.isBone&&(Im.multiplyMatrices(Q0,l.matrixWorld),El.setFromMatrixPosition(Im),i.setXYZ(a,El.x,El.y,El.z),Im.multiplyMatrices(Q0,l.parent.matrixWorld),El.setFromMatrixPosition(Im),i.setXYZ(a+1,El.x,El.y,El.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function OM(o){const e=[];o.isBone===!0&&e.push(o);for(let t=0;t<o.children.length;t++)e.push.apply(e,OM(o.children[t]));return e}class $L extends bi{constructor(e,t,n){const i=new jf(t,4,2),r=new Ga({wireframe:!0,fog:!1,toneMapped:!1});super(i,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const eR=new J,C_=new vt,A_=new vt;class tR extends mn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Hf(t);i.rotateY(Math.PI*.5),this.material=new Ga({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),a=new Float32Array(r.count*3);i.setAttribute("color",new Ln(a,3)),this.add(new bi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");C_.copy(this.light.color),A_.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const r=n<i/2?C_:A_;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(eR.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nR extends Zo{constructor(e=10,t=10,n=4473924,i=8947848){n=new vt(n),i=new vt(i);const r=t/2,a=e/t,l=e/2,f=[],d=[];for(let v=0,x=0,M=-l;v<=t;v++,M+=a){f.push(-l,0,M,l,0,M),f.push(M,0,-l,M,0,l);const w=v===r?n:i;w.toArray(d,x),x+=3,w.toArray(d,x),x+=3,w.toArray(d,x),x+=3,w.toArray(d,x),x+=3}const p=new $t;p.setAttribute("position",new bt(f,3)),p.setAttribute("color",new bt(d,3));const g=new zr({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class iR extends Zo{constructor(e=10,t=16,n=8,i=64,r=4473924,a=8947848){r=new vt(r),a=new vt(a);const l=[],f=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),x=Math.sin(v)*e,M=Math.cos(v)*e;l.push(0,0,0),l.push(x,0,M);const w=g&1?r:a;f.push(w.r,w.g,w.b),f.push(w.r,w.g,w.b)}for(let g=0;g<n;g++){const v=g&1?r:a,x=e-e/n*g;for(let M=0;M<i;M++){let w=M/i*(Math.PI*2),S=Math.sin(w)*x,C=Math.cos(w)*x;l.push(S,0,C),f.push(v.r,v.g,v.b),w=(M+1)/i*(Math.PI*2),S=Math.sin(w)*x,C=Math.cos(w)*x,l.push(S,0,C),f.push(v.r,v.g,v.b)}}const d=new $t;d.setAttribute("position",new bt(l,3)),d.setAttribute("color",new bt(f,3));const p=new zr({vertexColors:!0,toneMapped:!1});super(d,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const P_=new J,Dm=new J,L_=new J;class rR extends mn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new $t;i.setAttribute("position",new bt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new zr({fog:!1,toneMapped:!1});this.lightPlane=new Bl(i,r),this.add(this.lightPlane),i=new $t,i.setAttribute("position",new bt([0,0,0,0,0,1],3)),this.targetLine=new Bl(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),P_.setFromMatrixPosition(this.light.matrixWorld),Dm.setFromMatrixPosition(this.light.target.matrixWorld),L_.subVectors(Dm,P_),this.lightPlane.lookAt(Dm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Dm),this.targetLine.scale.z=L_.length()}}const km=new J,ni=new Gd;class sR extends Zo{constructor(e){const t=new $t,n=new zr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(M,w){f(M),f(w)}function f(M){i.push(0,0,0),r.push(0,0,0),a[M]===void 0&&(a[M]=[]),a[M].push(i.length/3-1)}t.setAttribute("position",new bt(i,3)),t.setAttribute("color",new bt(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const d=new vt(16755200),p=new vt(16711680),g=new vt(43775),v=new vt(16777215),x=new vt(3355443);this.setColors(d,p,g,v,x)}setColors(e,t,n,i,r){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,r.r,r.g,r.b),l.setXYZ(41,r.r,r.g,r.b),l.setXYZ(42,r.r,r.g,r.b),l.setXYZ(43,r.r,r.g,r.b),l.setXYZ(44,r.r,r.g,r.b),l.setXYZ(45,r.r,r.g,r.b),l.setXYZ(46,r.r,r.g,r.b),l.setXYZ(47,r.r,r.g,r.b),l.setXYZ(48,r.r,r.g,r.b),l.setXYZ(49,r.r,r.g,r.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;ni.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ui("c",t,e,ni,0,0,-1),ui("t",t,e,ni,0,0,1),ui("n1",t,e,ni,-1,-1,-1),ui("n2",t,e,ni,n,-1,-1),ui("n3",t,e,ni,-1,i,-1),ui("n4",t,e,ni,n,i,-1),ui("f1",t,e,ni,-1,-1,1),ui("f2",t,e,ni,n,-1,1),ui("f3",t,e,ni,-1,i,1),ui("f4",t,e,ni,n,i,1),ui("u1",t,e,ni,n*.7,i*1.1,-1),ui("u2",t,e,ni,-1*.7,i*1.1,-1),ui("u3",t,e,ni,0,i*2,-1),ui("cf1",t,e,ni,-1,0,1),ui("cf2",t,e,ni,n,0,1),ui("cf3",t,e,ni,0,-1,1),ui("cf4",t,e,ni,0,i,1),ui("cn1",t,e,ni,-1,0,-1),ui("cn2",t,e,ni,n,0,-1),ui("cn3",t,e,ni,0,-1,-1),ui("cn4",t,e,ni,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ui(o,e,t,n,i,r,a){km.set(i,r,a).unproject(n);const l=e[o];if(l!==void 0){const f=t.getAttribute("position");for(let d=0,p=l.length;d<p;d++)f.setXYZ(l[d],km.x,km.y,km.z)}}const Fm=new Vl;class oR extends Zo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),r=new $t;r.setIndex(new Ln(n,1)),r.setAttribute("position",new Ln(i,3)),super(r,new zr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Fm.setFromObject(this.object),Fm.isEmpty())return;const t=Fm.min,n=Fm.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aR extends Zo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new $t;r.setIndex(new Ln(n,1)),r.setAttribute("position",new bt(i,3)),super(r,new zr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class lR extends Bl{constructor(e,t=1,n=16776960){const i=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new $t;a.setAttribute("position",new bt(r,3)),a.computeBoundingSphere(),super(a,new zr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new $t;f.setAttribute("position",new bt(l,3)),f.computeBoundingSphere(),this.add(new bi(f,new Ga({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const R_=new J;let Nm,K0;class uR extends mn{constructor(e=new J(0,0,1),t=new J(0,0,0),n=1,i=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",Nm===void 0&&(Nm=new $t,Nm.setAttribute("position",new bt([0,0,0,0,1,0],3)),K0=new sc(0,.5,1,5,1),K0.translate(0,-.5,0)),this.position.copy(t),this.line=new Bl(Nm,new zr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new bi(K0,new Ga({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{R_.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(R_,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class cR extends Zo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new $t;i.setAttribute("position",new bt(t,3)),i.setAttribute("color",new bt(n,3));const r=new zr({vertexColors:!0,toneMapped:!1});super(i,r),this.type="AxesHelper"}setColors(e,t,n){const i=new vt,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fR{constructor(){this.type="ShapePath",this.color=new vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Td,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(C){const E=[];for(let A=0,L=C.length;A<L;A++){const D=C[A],F=new Ju;F.curves=D.curves,E.push(F)}return E}function n(C,E){const A=E.length;let L=!1;for(let D=A-1,F=0;F<A;D=F++){let B=E[D],I=E[F],z=I.x-B.x,V=I.y-B.y;if(Math.abs(V)>Number.EPSILON){if(V<0&&(B=E[F],z=-z,I=E[D],V=-V),C.y<B.y||C.y>I.y)continue;if(C.y===B.y){if(C.x===B.x)return!0}else{const te=V*(C.x-B.x)-z*(C.y-B.y);if(te===0)return!0;if(te<0)continue;L=!L}}else{if(C.y!==B.y)continue;if(I.x<=C.x&&C.x<=B.x||B.x<=C.x&&C.x<=I.x)return!0}}return L}const i=jo.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,l,f;const d=[];if(r.length===1)return l=r[0],f=new Ju,f.curves=l.curves,d.push(f),d;let p=!i(r[0].getPoints());p=e?!p:p;const g=[],v=[];let x=[],M=0,w;v[M]=void 0,x[M]=[];for(let C=0,E=r.length;C<E;C++)l=r[C],w=l.getPoints(),a=i(w),a=e?!a:a,a?(!p&&v[M]&&M++,v[M]={s:new Ju,p:w},v[M].s.curves=l.curves,p&&M++,x[M]=[]):x[M].push({h:l,p:w[0]});if(!v[0])return t(r);if(v.length>1){let C=!1,E=0;for(let A=0,L=v.length;A<L;A++)g[A]=[];for(let A=0,L=v.length;A<L;A++){const D=x[A];for(let F=0;F<D.length;F++){const B=D[F];let I=!0;for(let z=0;z<v.length;z++)n(B.p,v[z].p)&&(A!==z&&E++,I?(I=!1,g[z].push(B)):C=!0);I&&g[A].push(B)}}E>0&&C===!1&&(x=g)}let S;for(let C=0,E=v.length;C<E;C++){f=v[C].s,d.push(f),S=x[C];for(let A=0,L=S.length;A<L;A++)f.holes.push(S[A].h)}return d}}const Da=hR();function hR(){const o=new ArrayBuffer(4),e=new Float32Array(o),t=new Uint32Array(o),n=new Uint32Array(512),i=new Uint32Array(512);for(let f=0;f<256;++f){const d=f-127;d<-27?(n[f]=0,n[f|256]=32768,i[f]=24,i[f|256]=24):d<-14?(n[f]=1024>>-d-14,n[f|256]=1024>>-d-14|32768,i[f]=-d-1,i[f|256]=-d-1):d<=15?(n[f]=d+15<<10,n[f|256]=d+15<<10|32768,i[f]=13,i[f|256]=13):d<128?(n[f]=31744,n[f|256]=64512,i[f]=24,i[f|256]=24):(n[f]=31744,n[f|256]=64512,i[f]=13,i[f|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let f=1;f<1024;++f){let d=f<<13,p=0;for(;(d&8388608)===0;)d<<=1,p-=8388608;d&=-8388609,p+=947912704,r[f]=d|p}for(let f=1024;f<2048;++f)r[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)a[f]=f<<23;a[31]=1199570944,a[32]=2147483648;for(let f=33;f<63;++f)a[f]=2147483648+(f-32<<23);a[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(l[f]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:r,exponentTable:a,offsetTable:l}}function dR(o){Math.abs(o)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),o=fi(o,-65504,65504),Da.floatView[0]=o;const e=Da.uint32View[0],t=e>>23&511;return Da.baseTable[t]+((e&8388607)>>Da.shiftTable[t])}function pR(o){const e=o>>10;return Da.uint32View[0]=Da.mantissaTable[Da.offsetTable[e]+(o&1023)]+Da.exponentTable[e],Da.floatView[0]}const mR={toHalfFloat:dR,fromHalfFloat:pR};class gR extends Hl{constructor(e,t,n,i,r,a){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,i,r,a)}}class vR extends Wd{constructor(e,t,n,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,i)}}class yR extends Hd{constructor(e,t,n,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,i)}}class xR extends jd{constructor(e,t,n,i,r,a,l){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,i,r,a,l)}}class _R extends sc{constructor(e,t,n,i,r,a,l,f){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,i,r,a,l,f)}}class SR extends Xd{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class wR extends Yd{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class MR extends qd{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class bR extends Wf{constructor(e,t,n,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,i)}}class ER extends Hf{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class TR extends Va{constructor(e,t,n,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,i)}}class CR extends Wa{constructor(e,t,n,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,i)}}class AR extends Zd{constructor(e,t,n,i,r,a){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,i,r,a)}}class PR extends Jd{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class LR extends jf{constructor(e,t,n,i,r,a,l){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,i,r,a,l)}}class RR extends Qd{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class IR extends Kd{constructor(e,t,n,i,r){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,i,r)}}class DR extends $d{constructor(e,t,n,i,r,a){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,i,r,a)}}class kR extends ep{constructor(e,t,n,i,r){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pg);const zM=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:by,AddEquation:zu,AddOperation:aw,AdditiveAnimationBlendMode:Cy,AdditiveBlending:wv,AlphaFormat:vw,AlwaysDepth:ew,AlwaysStencilFunc:Iw,AmbientLight:LM,AmbientLightProbe:bL,AnimationClip:Id,AnimationLoader:fL,AnimationMixer:WL,AnimationObjectGroup:BL,AnimationUtils:aL,ArcCurve:nM,ArrayCamera:Xw,ArrowHelper:uR,Audio:kM,AudioAnalyser:LL,AudioContext:tx,AudioListener:CL,AudioLoader:wL,AxesHelper:cR,BackSide:Or,BasicDepthPacking:Lw,BasicShadowMap:BS,Bone:zy,BooleanKeyframeTrack:oc,Box2:ZL,Box3:Vl,Box3Helper:aR,BoxBufferGeometry:gR,BoxGeometry:Hl,BoxHelper:oR,BufferAttribute:Ln,BufferGeometry:$t,BufferGeometryLoader:DM,ByteType:hw,Cache:nc,Camera:Gd,CameraHelper:sR,CanvasTexture:RP,CapsuleBufferGeometry:vR,CapsuleGeometry:Wd,CatmullRomCurve3:iM,CineonToneMapping:cw,CircleBufferGeometry:yR,CircleGeometry:Hd,ClampToEdgeWrapping:xr,Clock:nx,Color:vt,ColorKeyframeTrack:Qy,ColorManagement:yr,CompressedArrayTexture:LP,CompressedTexture:By,CompressedTextureLoader:hL,ConeBufferGeometry:xR,ConeGeometry:jd,CubeCamera:zw,CubeReflectionMapping:Nl,CubeRefractionMapping:Ol,CubeTexture:Vd,CubeTextureLoader:dL,CubeUVReflectionMapping:Bf,CubicBezierCurve:Vy,CubicBezierCurve3:rM,CubicInterpolant:wM,CullFaceBack:Sv,CullFaceFront:US,CullFaceFrontBack:T3,CullFaceNone:zS,Curve:_o,CurvePath:oM,CustomBlending:GS,CustomToneMapping:fw,CylinderBufferGeometry:_R,CylinderGeometry:sc,Cylindrical:qL,Data3DTexture:Iy,DataArrayTexture:yg,DataTexture:Lf,DataTextureLoader:pL,DataUtils:mR,DecrementStencilOp:U3,DecrementWrapStencilOp:G3,DefaultLoadingManager:EM,DepthFormat:Dl,DepthStencilFormat:Ku,DepthTexture:Yw,DirectionalLight:PM,DirectionalLightHelper:rR,DiscreteInterpolant:MM,DisplayP3ColorSpace:Py,DodecahedronBufferGeometry:SR,DodecahedronGeometry:Xd,DoubleSide:go,DstAlphaFactor:qS,DstColorFactor:JS,DynamicCopyUsage:nb,DynamicDrawUsage:J3,DynamicReadUsage:$3,EdgesGeometry:aM,EllipseCurve:Ag,EqualDepth:nw,EqualStencilFunc:j3,EquirectangularReflectionMapping:gd,EquirectangularRefractionMapping:vd,Euler:Bd,EventDispatcher:Ba,ExtrudeBufferGeometry:wR,ExtrudeGeometry:Yd,FileLoader:za,Float16BufferAttribute:Wb,Float32BufferAttribute:bt,Float64BufferAttribute:Hb,FloatType:ka,Fog:Eg,FogExp2:bg,FramebufferTexture:PP,FrontSide:Xo,Frustum:xg,GLBufferAttribute:YL,GLSL1:rb,GLSL3:Jv,GreaterDepth:rw,GreaterEqualDepth:iw,GreaterEqualStencilFunc:Z3,GreaterStencilFunc:Y3,GridHelper:nR,Group:Ef,HalfFloatType:kf,HemisphereLight:TM,HemisphereLightHelper:tR,HemisphereLightProbe:ML,IcosahedronBufferGeometry:MR,IcosahedronGeometry:qd,ImageBitmapLoader:SL,ImageLoader:Dd,ImageUtils:Ry,IncrementStencilOp:z3,IncrementWrapStencilOp:B3,InstancedBufferAttribute:ec,InstancedBufferGeometry:ex,InstancedInterleavedBuffer:XL,InstancedMesh:$w,Int16BufferAttribute:Gb,Int32BufferAttribute:Vb,Int8BufferAttribute:zb,IntType:pw,InterleavedBuffer:Tg,InterleavedBufferAttribute:$u,Interpolant:tp,InterpolateDiscrete:_d,InterpolateLinear:Sd,InterpolateSmooth:Zm,InvertStencilOp:V3,KeepStencilOp:Jm,KeyframeTrack:So,LOD:Qw,LatheBufferGeometry:bR,LatheGeometry:Wf,Layers:Zu,LessDepth:tw,LessEqualDepth:tg,LessEqualStencilFunc:X3,LessStencilFunc:H3,Light:jl,LightProbe:Rg,Line:Bl,Line3:JL,LineBasicMaterial:zr,LineCurve:Pg,LineCurve3:sM,LineDashedMaterial:_M,LineLoop:eM,LineSegments:Zo,LinearEncoding:Ul,LinearFilter:qn,LinearInterpolant:Jy,LinearMipMapLinearFilter:R3,LinearMipMapNearestFilter:L3,LinearMipmapLinearFilter:zl,LinearMipmapNearestFilter:Ey,LinearSRGBColorSpace:Ff,LinearToneMapping:lw,Loader:vs,LoaderUtils:ry,LoadingManager:Ky,LoopOnce:Cw,LoopPingPong:Pw,LoopRepeat:Aw,LuminanceAlphaFormat:xw,LuminanceFormat:yw,MOUSE:ku,Material:ar,MaterialLoader:Ig,MathUtils:yb,Matrix3:ji,Matrix4:Jt,MaxEquation:Tv,Mesh:bi,MeshBasicMaterial:Ga,MeshDepthMaterial:Sg,MeshDistanceMaterial:wg,MeshLambertMaterial:yM,MeshMatcapMaterial:xM,MeshNormalMaterial:vM,MeshPhongMaterial:mM,MeshPhysicalMaterial:pM,MeshStandardMaterial:Yy,MeshToonMaterial:gM,MinEquation:Ev,MirroredRepeatWrapping:xd,MixOperation:ow,MultiplyBlending:bv,MultiplyOperation:Ud,NearestFilter:ci,NearestMipMapLinearFilter:P3,NearestMipMapNearestFilter:A3,NearestMipmapLinearFilter:ad,NearestMipmapNearestFilter:ng,NeverDepth:$S,NeverStencilFunc:W3,NoBlending:Na,NoColorSpace:F3,NoToneMapping:yo,NormalAnimationBlendMode:vg,NormalBlending:Xu,NotEqualDepth:sw,NotEqualStencilFunc:q3,NumberKeyframeTrack:Ld,Object3D:mn,ObjectLoader:xL,ObjectSpaceNormalMap:Rw,OctahedronBufferGeometry:ER,OctahedronGeometry:Hf,OneFactor:jS,OneMinusDstAlphaFactor:ZS,OneMinusDstColorFactor:QS,OneMinusSrcAlphaFactor:My,OneMinusSrcColorFactor:YS,OrthographicCamera:kl,PCFShadowMap:mg,PCFSoftShadowMap:od,PMREMGenerator:Kv,Path:Td,PerspectiveCamera:hi,Plane:Ia,PlaneBufferGeometry:TR,PlaneGeometry:Va,PlaneHelper:lR,PointLight:AM,PointLightHelper:$L,Points:tM,PointsMaterial:Uy,PolarGridHelper:iR,PolyhedronBufferGeometry:CR,PolyhedronGeometry:Wa,PositionalAudio:PL,PropertyBinding:dn,PropertyMixer:FM,QuadraticBezierCurve:Wy,QuadraticBezierCurve3:Hy,Quaternion:_r,QuaternionKeyframeTrack:Xf,QuaternionLinearInterpolant:bM,RED_GREEN_RGTC2_Format:qv,RED_RGTC1_Format:Tw,REVISION:pg,RGBADepthPacking:Ay,RGBAFormat:es,RGBAIntegerFormat:bw,RGBA_ASTC_10x10_Format:Hv,RGBA_ASTC_10x5_Format:Gv,RGBA_ASTC_10x6_Format:Vv,RGBA_ASTC_10x8_Format:Wv,RGBA_ASTC_12x10_Format:jv,RGBA_ASTC_12x12_Format:Xv,RGBA_ASTC_4x4_Format:Dv,RGBA_ASTC_5x4_Format:kv,RGBA_ASTC_5x5_Format:Fv,RGBA_ASTC_6x5_Format:Nv,RGBA_ASTC_6x6_Format:Ov,RGBA_ASTC_8x5_Format:zv,RGBA_ASTC_8x6_Format:Uv,RGBA_ASTC_8x8_Format:Bv,RGBA_BPTC_Format:qm,RGBA_ETC2_EAC_Format:Iv,RGBA_PVRTC_2BPPV1_Format:Lv,RGBA_PVRTC_4BPPV1_Format:Pv,RGBA_S3TC_DXT1_Format:jm,RGBA_S3TC_DXT3_Format:Xm,RGBA_S3TC_DXT5_Format:Ym,RGB_ETC1_Format:Ew,RGB_ETC2_Format:Rv,RGB_PVRTC_2BPPV1_Format:Av,RGB_PVRTC_4BPPV1_Format:Cv,RGB_S3TC_DXT1_Format:Hm,RGFormat:ww,RGIntegerFormat:Mw,RawShaderMaterial:dM,Ray:Gf,Raycaster:NM,RectAreaLight:RM,RedFormat:_w,RedIntegerFormat:Sw,ReinhardToneMapping:uw,RepeatWrapping:yd,ReplaceStencilOp:O3,ReverseSubtractEquation:WS,RingBufferGeometry:AR,RingGeometry:Zd,SIGNED_RED_GREEN_RGTC2_Format:Zv,SIGNED_RED_RGTC1_Format:Yv,SRGBColorSpace:ho,Scene:rg,ShaderChunk:Kt,ShaderLib:po,ShaderMaterial:Yo,ShadowMaterial:hM,Shape:Ju,ShapeBufferGeometry:PR,ShapeGeometry:Jd,ShapePath:fR,ShapeUtils:jo,ShortType:dw,Skeleton:Cg,SkeletonHelper:KL,SkinnedMesh:Kw,Source:Hu,Sphere:Wl,SphereBufferGeometry:LR,SphereGeometry:jf,Spherical:oy,SphericalHarmonics3:IM,SplineCurve:jy,SpotLight:CM,SpotLightHelper:QL,Sprite:Jw,SpriteMaterial:Oy,SrcAlphaFactor:wy,SrcAlphaSaturateFactor:KS,SrcColorFactor:XS,StaticCopyUsage:tb,StaticDrawUsage:Md,StaticReadUsage:K3,StereoCamera:EL,StreamCopyUsage:ib,StreamDrawUsage:Q3,StreamReadUsage:eb,StringKeyframeTrack:ac,SubtractEquation:VS,SubtractiveBlending:Mv,TOUCH:Fu,TangentSpaceNormalMap:Gl,TetrahedronBufferGeometry:RR,TetrahedronGeometry:Qd,Texture:Jn,TextureLoader:mL,TorusBufferGeometry:IR,TorusGeometry:Kd,TorusKnotBufferGeometry:DR,TorusKnotGeometry:$d,Triangle:Ds,TriangleFanDrawMode:k3,TriangleStripDrawMode:D3,TrianglesDrawMode:I3,TubeBufferGeometry:kR,TubeGeometry:ep,TwoPassDoubleSide:C3,UVMapping:gg,Uint16BufferAttribute:Dy,Uint32BufferAttribute:ky,Uint8BufferAttribute:Ub,Uint8ClampedBufferAttribute:Bb,Uniform:sx,UniformsGroup:jL,UniformsLib:dt,UniformsUtils:Fy,UnsignedByteType:Oa,UnsignedInt248Type:Yu,UnsignedIntType:Al,UnsignedShort4444Type:mw,UnsignedShort5551Type:gw,UnsignedShortType:Ty,VSMShadowMap:Gu,Vector2:Ve,Vector3:J,Vector4:gn,VectorKeyframeTrack:Rd,VideoTexture:AP,WebGL1Renderer:qw,WebGL3DRenderTarget:Ab,WebGLArrayRenderTarget:Cb,WebGLCubeRenderTarget:Uw,WebGLMultipleRenderTargets:Pb,WebGLRenderTarget:xo,WebGLRenderer:Mg,WebGLUtils:jw,WireframeGeometry:fM,WrapAroundEnding:wd,ZeroCurvatureEnding:Vu,ZeroFactor:HS,ZeroSlopeEnding:Wu,ZeroStencilOp:N3,_SRGBAFormat:ig,sRGBEncoding:kn},Symbol.toStringTag,{value:"Module"}));var $0={exports:{}},Tl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function FR(){return I_||(I_=1,Tl.ConcurrentRoot=1,Tl.ContinuousEventPriority=4,Tl.DefaultEventPriority=16,Tl.DiscreteEventPriority=1,Tl.IdleEventPriority=536870912,Tl.LegacyRoot=0),Tl}var D_;function NR(){return D_||(D_=1,$0.exports=FR()),$0.exports}var Cf=NR();function OR(o){let e;const t=new Set,n=(d,p)=>{const g=typeof d=="function"?d(e):d;if(g!==e){const v=e;e=p?g:Object.assign({},e,g),t.forEach(x=>x(e,v))}},i=()=>e,r=(d,p=i,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=p(e);function x(){const M=p(e);if(!g(v,M)){const w=v;d(v=M,w)}}return t.add(x),()=>t.delete(x)},f={setState:n,getState:i,subscribe:(d,p,g)=>p||g?r(d,p,g):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=o(n,i,f),f}const zR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),k_=zR?We.useEffect:We.useLayoutEffect;function UR(o){const e=typeof o=="function"?OR(o):o,t=(n=e.getState,i=Object.is)=>{const[,r]=We.useReducer(S=>S+1,0),a=e.getState(),l=We.useRef(a),f=We.useRef(n),d=We.useRef(i),p=We.useRef(!1),g=We.useRef();g.current===void 0&&(g.current=n(a));let v,x=!1;(l.current!==a||f.current!==n||d.current!==i||p.current)&&(v=n(a),x=!i(g.current,v)),k_(()=>{x&&(g.current=v),l.current=a,f.current=n,d.current=i,p.current=!1});const M=We.useRef(a);k_(()=>{const S=()=>{try{const E=e.getState(),A=f.current(E);d.current(g.current,A)||(l.current=E,g.current=A,r())}catch{p.current=!0,r()}},C=e.subscribe(S);return e.getState()!==M.current&&S(),C},[]);const w=x?v:g.current;return We.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}var ev={exports:{}},tv={exports:{}},nv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function BR(){return F_||(F_=1,function(o){function e(H,Q){var Y=H.length;H.push(Q);e:for(;0<Y;){var N=Y-1>>>1,O=H[N];if(0<i(O,Q))H[N]=Q,H[Y]=O,Y=N;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Q=H[0],Y=H.pop();if(Y!==Q){H[0]=Y;e:for(var N=0,O=H.length,re=O>>>1;N<re;){var se=2*(N+1)-1,Z=H[se],he=se+1,ue=H[he];if(0>i(Z,Y))he<O&&0>i(ue,Z)?(H[N]=ue,H[he]=Y,N=he):(H[N]=Z,H[se]=Y,N=se);else if(he<O&&0>i(ue,Y))H[N]=ue,H[he]=Y,N=he;else break e}}return Q}function i(H,Q){var Y=H.sortIndex-Q.sortIndex;return Y!==0?Y:H.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;o.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();o.unstable_now=function(){return a.now()-l}}var f=[],d=[],p=1,g=null,v=3,x=!1,M=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var Q=t(d);Q!==null;){if(Q.callback===null)n(d);else if(Q.startTime<=H)n(d),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=t(d)}}function L(H){if(w=!1,A(H),!M)if(t(f)!==null)M=!0,ce(D);else{var Q=t(d);Q!==null&&ye(L,Q.startTime-H)}}function D(H,Q){M=!1,w&&(w=!1,C(I),I=-1),x=!0;var Y=v;try{for(A(Q),g=t(f);g!==null&&(!(g.expirationTime>Q)||H&&!te());){var N=g.callback;if(typeof N=="function"){g.callback=null,v=g.priorityLevel;var O=N(g.expirationTime<=Q);Q=o.unstable_now(),typeof O=="function"?g.callback=O:g===t(f)&&n(f),A(Q)}else n(f);g=t(f)}if(g!==null)var re=!0;else{var se=t(d);se!==null&&ye(L,se.startTime-Q),re=!1}return re}finally{g=null,v=Y,x=!1}}var F=!1,B=null,I=-1,z=5,V=-1;function te(){return!(o.unstable_now()-V<z)}function X(){if(B!==null){var H=o.unstable_now();V=H;var Q=!0;try{Q=B(!0,H)}finally{Q?K():(F=!1,B=null)}}else F=!1}var K;if(typeof E=="function")K=function(){E(X)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,oe=q.port2;q.port1.onmessage=X,K=function(){oe.postMessage(null)}}else K=function(){S(X,0)};function ce(H){B=H,F||(F=!0,K())}function ye(H,Q){I=S(function(){H(o.unstable_now())},Q)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(H){H.callback=null},o.unstable_continueExecution=function(){M||x||(M=!0,ce(D))},o.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<H?Math.floor(1e3/H):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_getFirstCallbackNode=function(){return t(f)},o.unstable_next=function(H){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var Y=v;v=Q;try{return H()}finally{v=Y}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Y=v;v=H;try{return Q()}finally{v=Y}},o.unstable_scheduleCallback=function(H,Q,Y){var N=o.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?N+Y:N):Y=N,H){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Y+O,H={id:p++,callback:Q,priorityLevel:H,startTime:Y,expirationTime:O,sortIndex:-1},Y>N?(H.sortIndex=Y,e(d,H),t(f)===null&&H===t(d)&&(w?(C(I),I=-1):w=!0,ye(L,Y-N))):(H.sortIndex=O,e(f,H),M||x||(M=!0,ce(D))),H},o.unstable_shouldYield=te,o.unstable_wrapCallback=function(H){var Q=v;return function(){var Y=v;v=Q;try{return H.apply(this,arguments)}finally{v=Y}}}}(nv)),nv}var N_;function UM(){return N_||(N_=1,tv.exports=BR()),tv.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv,O_;function GR(){return O_||(O_=1,iv=function(e){var t={},n=dg(),i=UM(),r=Object.assign;function a(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),M=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),D=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=D&&c[D]||c["@@iterator"],typeof c=="function"?c:null)}function B(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case p:return"Fragment";case d:return"Portal";case v:return"Profiler";case g:return"StrictMode";case S:return"Suspense";case C:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case M:return(c.displayName||"Context")+".Consumer";case x:return(c._context.displayName||"Context")+".Provider";case w:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case E:return h=c.displayName||null,h!==null?h:B(c.type)||"Memo";case A:h=c._payload,c=c._init;try{return B(c(h))}catch{}}return null}function I(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(h);case 8:return h===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function z(c){var h=c,y=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(y=h.return),c=h.return;while(c)}return h.tag===3?y:null}function V(c){if(z(c)!==c)throw Error(a(188))}function te(c){var h=c.alternate;if(!h){if(h=z(c),h===null)throw Error(a(188));return h!==c?null:c}for(var y=c,b=h;;){var P=y.return;if(P===null)break;var k=P.alternate;if(k===null){if(b=P.return,b!==null){y=b;continue}break}if(P.child===k.child){for(k=P.child;k;){if(k===y)return V(P),c;if(k===b)return V(P),h;k=k.sibling}throw Error(a(188))}if(y.return!==b.return)y=P,b=k;else{for(var $=!1,pe=P.child;pe;){if(pe===y){$=!0,y=P,b=k;break}if(pe===b){$=!0,b=P,y=k;break}pe=pe.sibling}if(!$){for(pe=k.child;pe;){if(pe===y){$=!0,y=k,b=P;break}if(pe===b){$=!0,b=k,y=P;break}pe=pe.sibling}if(!$)throw Error(a(189))}}if(y.alternate!==b)throw Error(a(190))}if(y.tag!==3)throw Error(a(188));return y.stateNode.current===y?c:h}function X(c){return c=te(c),c!==null?K(c):null}function K(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=K(c);if(h!==null)return h;c=c.sibling}return null}function q(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var h=q(c);if(h!==null)return h}c=c.sibling}return null}var oe=Array.isArray,ce=e.getPublicInstance,ye=e.getRootHostContext,H=e.getChildHostContext,Q=e.prepareForCommit,Y=e.resetAfterCommit,N=e.createInstance,O=e.appendInitialChild,re=e.finalizeInitialChildren,se=e.prepareUpdate,Z=e.shouldSetTextContent,he=e.createTextInstance,ue=e.scheduleTimeout,me=e.cancelTimeout,we=e.noTimeout,Oe=e.isPrimaryRenderer,ke=e.supportsMutation,ae=e.supportsPersistence,be=e.supportsHydration,Ge=e.getInstanceFromNode,He=e.preparePortalMount,Ue=e.getCurrentEventPriority,ut=e.detachDeletedInstance,Ie=e.supportsMicrotasks,Qe=e.scheduleMicrotask,tt=e.supportsTestSelectors,Re=e.findFiberRoot,W=e.getBoundingRect,G=e.getTextContent,fe=e.isHiddenSubtree,Te=e.matchAccessibilityRole,je=e.setFocusIfFocusable,Ye=e.setupIntersectionObserver,qe=e.appendChild,Ke=e.appendChildToContainer,Le=e.commitTextUpdate,lt=e.commitMount,Je=e.commitUpdate,ct=e.insertBefore,et=e.insertInContainerBefore,Ze=e.removeChild,ie=e.removeChildFromContainer,Fe=e.resetTextContent,st=e.hideInstance,ee=e.hideTextInstance,xe=e.unhideInstance,Be=e.unhideTextInstance,rt=e.clearContainer,mt=e.cloneInstance,Yt=e.createContainerChildSet,kt=e.appendChildToContainerChildSet,Vt=e.finalizeContainerChildren,Gt=e.replaceContainerChildren,en=e.cloneHiddenInstance,Ot=e.cloneHiddenTextInstance,zt=e.canHydrateInstance,Ei=e.canHydrateTextInstance,Wn=e.canHydrateSuspenseInstance,un=e.isSuspenseInstancePending,j=e.isSuspenseInstanceFallback,_e=e.registerSuspenseInstanceRetry,Ce=e.getNextHydratableSibling,ge=e.getFirstHydratableChild,Ne=e.getFirstHydratableChildWithinContainer,St=e.getFirstHydratableChildWithinSuspenseInstance,Ct=e.hydrateInstance,At=e.hydrateTextInstance,Wt=e.hydrateSuspenseInstance,tn=e.getNextHydratableInstanceAfterSuspenseInstance,Ht=e.commitHydratedContainer,qt=e.commitHydratedSuspenseInstance,Tn=e.clearSuspenseBoundary,ii=e.clearSuspenseBoundaryFromContainer,Ti=e.shouldDeleteUnhydratedTailInstances,Sr=e.didNotMatchHydratedContainerTextInstance,Sn=e.didNotMatchHydratedTextInstance,Xe;function Yi(c){if(Xe===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);Xe=h&&h[1]||""}return`
`+Xe+c}var wn=!1;function ri(c,h){if(!c||wn)return"";wn=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(ot){var b=ot}Reflect.construct(c,[],h)}else{try{h.call()}catch(ot){b=ot}c.call(h.prototype)}else{try{throw Error()}catch(ot){b=ot}c()}}catch(ot){if(ot&&b&&typeof ot.stack=="string"){for(var P=ot.stack.split(`
`),k=b.stack.split(`
`),$=P.length-1,pe=k.length-1;1<=$&&0<=pe&&P[$]!==k[pe];)pe--;for(;1<=$&&0<=pe;$--,pe--)if(P[$]!==k[pe]){if($!==1||pe!==1)do if($--,pe--,0>pe||P[$]!==k[pe]){var ze=`
`+P[$].replace(" at new "," at ");return c.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",c.displayName)),ze}while(1<=$&&0<=pe);break}}}finally{wn=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?Yi(c):""}var Ur=Object.prototype.hasOwnProperty,Br=[],qi=-1;function cn(c){return{current:c}}function Dt(c){0>qi||(c.current=Br[qi],Br[qi]=null,qi--)}function an(c,h){qi++,Br[qi]=c.current,c.current=h}var nn={},Fn=cn(nn),Qn=cn(!1),wr=nn;function Zi(c,h){var y=c.type.contextTypes;if(!y)return nn;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var P={},k;for(k in y)P[k]=h[k];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=P),P}function Hn(c){return c=c.childContextTypes,c!=null}function Ji(){Dt(Qn),Dt(Fn)}function Ns(c,h,y){if(Fn.current!==nn)throw Error(a(168));an(Fn,h),an(Qn,y)}function Ha(c,h,y){var b=c.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return y;b=b.getChildContext();for(var P in b)if(!(P in h))throw Error(a(108,I(c)||"Unknown",P));return r({},y,b)}function wo(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||nn,wr=Fn.current,an(Fn,c),an(Qn,Qn.current),!0}function Qi(c,h,y){var b=c.stateNode;if(!b)throw Error(a(169));y?(c=Ha(c,h,wr),b.__reactInternalMemoizedMergedChildContext=c,Dt(Qn),Dt(Fn),an(Fn,c)):Dt(Qn),an(Qn,y)}var lr=Math.clz32?Math.clz32:lc,Mo=Math.log,ts=Math.LN2;function lc(c){return c>>>=0,c===0?32:31-(Mo(c)/ts|0)|0}var ns=64,rn=4194304;function ys(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function bo(c,h){var y=c.pendingLanes;if(y===0)return 0;var b=0,P=c.suspendedLanes,k=c.pingedLanes,$=y&268435455;if($!==0){var pe=$&~P;pe!==0?b=ys(pe):(k&=$,k!==0&&(b=ys(k)))}else $=y&~P,$!==0?b=ys($):k!==0&&(b=ys(k));if(b===0)return 0;if(h!==0&&h!==b&&(h&P)===0&&(P=b&-b,k=h&-h,P>=k||P===16&&(k&4194240)!==0))return h;if((b&4)!==0&&(b|=y&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=b;0<h;)y=31-lr(h),P=1<<y,b|=c[y],h&=~P;return b}function ja(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xa(c,h){for(var y=c.suspendedLanes,b=c.pingedLanes,P=c.expirationTimes,k=c.pendingLanes;0<k;){var $=31-lr(k),pe=1<<$,ze=P[$];ze===-1?((pe&y)===0||(pe&b)!==0)&&(P[$]=ja(pe,h)):ze<=h&&(c.expiredLanes|=pe),k&=~pe}}function xs(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Jo(c){for(var h=[],y=0;31>y;y++)h.push(c);return h}function Gr(c,h,y){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-lr(h),c[h]=y}function is(c,h){var y=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<y;){var P=31-lr(y),k=1<<P;h[P]=0,b[P]=-1,c[P]=-1,y&=~k}}function Ci(c,h){var y=c.entangledLanes|=h;for(c=c.entanglements;y;){var b=31-lr(y),P=1<<b;P&h|c[b]&h&&(c[b]|=h),y&=~P}}var Ft=0;function Vr(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Mr=i.unstable_scheduleCallback,_s=i.unstable_cancelCallback,Wr=i.unstable_shouldYield,uc=i.unstable_requestPaint,Rn=i.unstable_now,rs=i.unstable_ImmediatePriority,cc=i.unstable_UserBlockingPriority,Oi=i.unstable_NormalPriority,Eo=i.unstable_IdlePriority,To=null,br=null;function Os(c){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(To,c,void 0,(c.current.flags&128)===128)}catch{}}function Co(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var di=typeof Object.is=="function"?Object.is:Co,pi=null,Ss=!1,Hr=!1;function Qo(c){pi===null?pi=[c]:pi.push(c)}function Ao(c){Ss=!0,Qo(c)}function zi(){if(!Hr&&pi!==null){Hr=!0;var c=0,h=Ft;try{var y=pi;for(Ft=1;c<y.length;c++){var b=y[c];do b=b(!0);while(b!==null)}pi=null,Ss=!1}catch(P){throw pi!==null&&(pi=pi.slice(c+1)),Mr(rs,zi),P}finally{Ft=h,Hr=!1}}return null}var Po=l.ReactCurrentBatchConfig;function ur(c,h){if(di(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var y=Object.keys(c),b=Object.keys(h);if(y.length!==b.length)return!1;for(b=0;b<y.length;b++){var P=y[b];if(!Ur.call(h,P)||!di(c[P],h[P]))return!1}return!0}function zs(c){switch(c.tag){case 5:return Yi(c.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 2:case 15:return c=ri(c.type,!1),c;case 11:return c=ri(c.type.render,!1),c;case 1:return c=ri(c.type,!0),c;default:return""}}function mi(c,h){if(c&&c.defaultProps){h=r({},h),c=c.defaultProps;for(var y in c)h[y]===void 0&&(h[y]=c[y]);return h}return h}var si=cn(null),Us=null,cr=null,Bs=null;function gi(){Bs=cr=Us=null}function Gs(c,h,y){Oe?(an(si,h._currentValue),h._currentValue=y):(an(si,h._currentValue2),h._currentValue2=y)}function Kn(c){var h=si.current;Dt(si),Oe?c._currentValue=h:c._currentValue2=h}function oi(c,h,y){for(;c!==null;){var b=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),c===y)break;c=c.return}}function jn(c,h){Us=c,Bs=cr=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(_i=!0),c.firstContext=null)}function Nn(c){var h=Oe?c._currentValue:c._currentValue2;if(Bs!==c)if(c={context:c,memoizedValue:h,next:null},cr===null){if(Us===null)throw Error(a(308));cr=c,Us.dependencies={lanes:0,firstContext:c}}else cr=cr.next=c;return h}var Ki=null,jr=!1;function Ya(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qf(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Vs(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Lo(c,h){var y=c.updateQueue;y!==null&&(y=y.shared,Yn!==null&&(c.mode&1)!==0&&(Zt&2)===0?(c=y.interleaved,c===null?(h.next=h,Ki===null?Ki=[y]:Ki.push(y)):(h.next=c.next,c.next=h),y.interleaved=h):(c=y.pending,c===null?h.next=h:(h.next=c.next,c.next=h),y.pending=h))}function fc(c,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194240)!==0)){var b=h.lanes;b&=c.pendingLanes,y|=b,h.lanes=y,Ci(c,y)}}function hc(c,h){var y=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,y===b)){var P=null,k=null;if(y=y.firstBaseUpdate,y!==null){do{var $={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};k===null?P=k=$:k=k.next=$,y=y.next}while(y!==null);k===null?P=k=h:k=k.next=h}else P=k=h;y={baseState:b.baseState,firstBaseUpdate:P,lastBaseUpdate:k,shared:b.shared,effects:b.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=h:c.next=h,y.lastBaseUpdate=h}function dc(c,h,y,b){var P=c.updateQueue;jr=!1;var k=P.firstBaseUpdate,$=P.lastBaseUpdate,pe=P.shared.pending;if(pe!==null){P.shared.pending=null;var ze=pe,ot=ze.next;ze.next=null,$===null?k=ot:$.next=ot,$=ze;var xt=c.alternate;xt!==null&&(xt=xt.updateQueue,pe=xt.lastBaseUpdate,pe!==$&&(pe===null?xt.firstBaseUpdate=ot:pe.next=ot,xt.lastBaseUpdate=ze))}if(k!==null){var Ut=P.baseState;$=0,xt=ot=ze=null,pe=k;do{var Pt=pe.lane,Qt=pe.eventTime;if((b&Pt)===Pt){xt!==null&&(xt=xt.next={eventTime:Qt,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var gt=c,Di=pe;switch(Pt=h,Qt=y,Di.tag){case 1:if(gt=Di.payload,typeof gt=="function"){Ut=gt.call(Qt,Ut,Pt);break e}Ut=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=Di.payload,Pt=typeof gt=="function"?gt.call(Qt,Ut,Pt):gt,Pt==null)break e;Ut=r({},Ut,Pt);break e;case 2:jr=!0}}pe.callback!==null&&pe.lane!==0&&(c.flags|=64,Pt=P.effects,Pt===null?P.effects=[pe]:Pt.push(pe))}else Qt={eventTime:Qt,lane:Pt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},xt===null?(ot=xt=Qt,ze=Ut):xt=xt.next=Qt,$|=Pt;if(pe=pe.next,pe===null){if(pe=P.shared.pending,pe===null)break;Pt=pe,pe=Pt.next,Pt.next=null,P.lastBaseUpdate=Pt,P.shared.pending=null}}while(!0);if(xt===null&&(ze=Ut),P.baseState=ze,P.firstBaseUpdate=ot,P.lastBaseUpdate=xt,h=P.shared.interleaved,h!==null){P=h;do $|=P.lane,P=P.next;while(P!==h)}else k===null&&(P.shared.lanes=0);Es|=$,c.lanes=$,c.memoizedState=Ut}}function ap(c,h,y){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var b=c[h],P=b.callback;if(P!==null){if(b.callback=null,b=y,typeof P!="function")throw Error(a(191,P));P.call(b)}}}var lp=new n.Component().refs;function Zf(c,h,y,b){h=c.memoizedState,y=y(b,h),y=y==null?h:r({},h,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var pc={isMounted:function(c){return(c=c._reactInternals)?z(c)===c:!1},enqueueSetState:function(c,h,y){c=c._reactInternals;var b=fn(),P=fs(c),k=Vs(b,P);k.payload=h,y!=null&&(k.callback=y),Lo(c,k),h=Gi(c,P,b),h!==null&&fc(h,c,P)},enqueueReplaceState:function(c,h,y){c=c._reactInternals;var b=fn(),P=fs(c),k=Vs(b,P);k.tag=1,k.payload=h,y!=null&&(k.callback=y),Lo(c,k),h=Gi(c,P,b),h!==null&&fc(h,c,P)},enqueueForceUpdate:function(c,h){c=c._reactInternals;var y=fn(),b=fs(c),P=Vs(y,b);P.tag=2,h!=null&&(P.callback=h),Lo(c,P),h=Gi(c,b,y),h!==null&&fc(h,c,b)}};function Jf(c,h,y,b,P,k,$){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,k,$):h.prototype&&h.prototype.isPureReactComponent?!ur(y,b)||!ur(P,k):!0}function up(c,h,y){var b=!1,P=nn,k=h.contextType;return typeof k=="object"&&k!==null?k=Nn(k):(P=Hn(h)?wr:Fn.current,b=h.contextTypes,k=(b=b!=null)?Zi(c,P):nn),h=new h(y,k),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=pc,c.stateNode=h,h._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=P,c.__reactInternalMemoizedMaskedChildContext=k),h}function cp(c,h,y,b){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,b),h.state!==c&&pc.enqueueReplaceState(h,h.state,null)}function Qf(c,h,y,b){var P=c.stateNode;P.props=y,P.state=c.memoizedState,P.refs=lp,Ya(c);var k=h.contextType;typeof k=="object"&&k!==null?P.context=Nn(k):(k=Hn(h)?wr:Fn.current,P.context=Zi(c,k)),P.state=c.memoizedState,k=h.getDerivedStateFromProps,typeof k=="function"&&(Zf(c,h,k,y),P.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(h=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),h!==P.state&&pc.enqueueReplaceState(P,P.state,null),dc(c,y,P,b),P.state=c.memoizedState),typeof P.componentDidMount=="function"&&(c.flags|=4194308)}var qa=[],Ro=0,mc=null,gc=0,Xr=[],Er=0,Ko=null,Ws=1,Hs="";function $o(c,h){qa[Ro++]=gc,qa[Ro++]=mc,mc=c,gc=h}function fp(c,h,y){Xr[Er++]=Ws,Xr[Er++]=Hs,Xr[Er++]=Ko,Ko=c;var b=Ws;c=Hs;var P=32-lr(b)-1;b&=~(1<<P),y+=1;var k=32-lr(h)+P;if(30<k){var $=P-P%5;k=(b&(1<<$)-1).toString(32),b>>=$,P-=$,Ws=1<<32-lr(h)+P|y<<P|b,Hs=k+c}else Ws=1<<k|y<<P|b,Hs=c}function Kf(c){c.return!==null&&($o(c,1),fp(c,1,0))}function $f(c){for(;c===mc;)mc=qa[--Ro],qa[Ro]=null,gc=qa[--Ro],qa[Ro]=null;for(;c===Ko;)Ko=Xr[--Er],Xr[Er]=null,Hs=Xr[--Er],Xr[Er]=null,Ws=Xr[--Er],Xr[Er]=null}var $i=null,Ai=null,In=!1,Za=!1,Yr=null;function eh(c,h){var y=Ir(5,null,null,0);y.elementType="DELETED",y.stateNode=h,y.return=c,h=c.deletions,h===null?(c.deletions=[y],c.flags|=16):h.push(y)}function th(c,h){switch(c.tag){case 5:return h=zt(h,c.type,c.pendingProps),h!==null?(c.stateNode=h,$i=c,Ai=ge(h),!0):!1;case 6:return h=Ei(h,c.pendingProps),h!==null?(c.stateNode=h,$i=c,Ai=null,!0):!1;case 13:if(h=Wn(h),h!==null){var y=Ko!==null?{id:Ws,overflow:Hs}:null;return c.memoizedState={dehydrated:h,treeContext:y,retryLane:1073741824},y=Ir(18,null,null,0),y.stateNode=h,y.return=c,c.child=y,$i=c,Ai=null,!0}return!1;default:return!1}}function vc(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Io(c){if(In){var h=Ai;if(h){var y=h;if(!th(c,h)){if(vc(c))throw Error(a(418));h=Ce(y);var b=$i;h&&th(c,h)?eh(b,y):(c.flags=c.flags&-4097|2,In=!1,$i=c)}}else{if(vc(c))throw Error(a(418));c.flags=c.flags&-4097|2,In=!1,$i=c}}}function hp(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;$i=c}function Xl(c){if(!be||c!==$i)return!1;if(!In)return hp(c),In=!0,!1;if(c.tag!==3&&(c.tag!==5||Ti(c.type)&&!Z(c.type,c.memoizedProps))){var h=Ai;if(h){if(vc(c)){for(c=Ai;c;)c=Ce(c);throw Error(a(418))}for(;h;)eh(c,h),h=Ce(h)}}if(hp(c),c.tag===13){if(!be)throw Error(a(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Ai=tn(c)}else Ai=$i?Ce(c.stateNode):null;return!0}function Ja(){be&&(Ai=$i=null,Za=In=!1)}function yc(c){Yr===null?Yr=[c]:Yr.push(c)}function Qa(c,h,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(a(309));var b=y.stateNode}if(!b)throw Error(a(147,c));var P=b,k=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===k?h.ref:(h=function($){var pe=P.refs;pe===lp&&(pe=P.refs={}),$===null?delete pe[k]:pe[k]=$},h._stringRef=k,h)}if(typeof c!="string")throw Error(a(284));if(!y._owner)throw Error(a(290,c))}return c}function Do(c,h){throw c=Object.prototype.toString.call(h),Error(a(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function Ka(c){var h=c._init;return h(c._payload)}function dp(c){function h(Ee,ve){if(c){var De=Ee.deletions;De===null?(Ee.deletions=[ve],Ee.flags|=16):De.push(ve)}}function y(Ee,ve){if(!c)return null;for(;ve!==null;)h(Ee,ve),ve=ve.sibling;return null}function b(Ee,ve){for(Ee=new Map;ve!==null;)ve.key!==null?Ee.set(ve.key,ve):Ee.set(ve.index,ve),ve=ve.sibling;return Ee}function P(Ee,ve){return Ee=ro(Ee,ve),Ee.index=0,Ee.sibling=null,Ee}function k(Ee,ve,De){return Ee.index=De,c?(De=Ee.alternate,De!==null?(De=De.index,De<ve?(Ee.flags|=2,ve):De):(Ee.flags|=2,ve)):(Ee.flags|=1048576,ve)}function $(Ee){return c&&Ee.alternate===null&&(Ee.flags|=2),Ee}function pe(Ee,ve,De,pt){return ve===null||ve.tag!==6?(ve=jc(De,Ee.mode,pt),ve.return=Ee,ve):(ve=P(ve,De),ve.return=Ee,ve)}function ze(Ee,ve,De,pt){var Et=De.type;return Et===p?xt(Ee,ve,De.props.children,pt,De.key):ve!==null&&(ve.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===A&&Ka(Et)===ve.type)?(pt=P(ve,De.props),pt.ref=Qa(Ee,ve,De),pt.return=Ee,pt):(pt=Hc(De.type,De.key,De.props,null,Ee.mode,pt),pt.ref=Qa(Ee,ve,De),pt.return=Ee,pt)}function ot(Ee,ve,De,pt){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==De.containerInfo||ve.stateNode.implementation!==De.implementation?(ve=Xc(De,Ee.mode,pt),ve.return=Ee,ve):(ve=P(ve,De.children||[]),ve.return=Ee,ve)}function xt(Ee,ve,De,pt,Et){return ve===null||ve.tag!==7?(ve=Sa(De,Ee.mode,pt,Et),ve.return=Ee,ve):(ve=P(ve,De),ve.return=Ee,ve)}function Ut(Ee,ve,De){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=jc(""+ve,Ee.mode,De),ve.return=Ee,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case f:return De=Hc(ve.type,ve.key,ve.props,null,Ee.mode,De),De.ref=Qa(Ee,null,ve),De.return=Ee,De;case d:return ve=Xc(ve,Ee.mode,De),ve.return=Ee,ve;case A:var pt=ve._init;return Ut(Ee,pt(ve._payload),De)}if(oe(ve)||F(ve))return ve=Sa(ve,Ee.mode,De,null),ve.return=Ee,ve;Do(Ee,ve)}return null}function Pt(Ee,ve,De,pt){var Et=ve!==null?ve.key:null;if(typeof De=="string"&&De!==""||typeof De=="number")return Et!==null?null:pe(Ee,ve,""+De,pt);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case f:return De.key===Et?ze(Ee,ve,De,pt):null;case d:return De.key===Et?ot(Ee,ve,De,pt):null;case A:return Et=De._init,Pt(Ee,ve,Et(De._payload),pt)}if(oe(De)||F(De))return Et!==null?null:xt(Ee,ve,De,pt,null);Do(Ee,De)}return null}function Qt(Ee,ve,De,pt,Et){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return Ee=Ee.get(De)||null,pe(ve,Ee,""+pt,Et);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case f:return Ee=Ee.get(pt.key===null?De:pt.key)||null,ze(ve,Ee,pt,Et);case d:return Ee=Ee.get(pt.key===null?De:pt.key)||null,ot(ve,Ee,pt,Et);case A:var jt=pt._init;return Qt(Ee,ve,De,jt(pt._payload),Et)}if(oe(pt)||F(pt))return Ee=Ee.get(De)||null,xt(ve,Ee,pt,Et,null);Do(ve,pt)}return null}function gt(Ee,ve,De,pt){for(var Et=null,jt=null,Bt=ve,ln=ve=0,ei=null;Bt!==null&&ln<De.length;ln++){Bt.index>ln?(ei=Bt,Bt=null):ei=Bt.sibling;var on=Pt(Ee,Bt,De[ln],pt);if(on===null){Bt===null&&(Bt=ei);break}c&&Bt&&on.alternate===null&&h(Ee,Bt),ve=k(on,ve,ln),jt===null?Et=on:jt.sibling=on,jt=on,Bt=ei}if(ln===De.length)return y(Ee,Bt),In&&$o(Ee,ln),Et;if(Bt===null){for(;ln<De.length;ln++)Bt=Ut(Ee,De[ln],pt),Bt!==null&&(ve=k(Bt,ve,ln),jt===null?Et=Bt:jt.sibling=Bt,jt=Bt);return In&&$o(Ee,ln),Et}for(Bt=b(Ee,Bt);ln<De.length;ln++)ei=Qt(Bt,Ee,ln,De[ln],pt),ei!==null&&(c&&ei.alternate!==null&&Bt.delete(ei.key===null?ln:ei.key),ve=k(ei,ve,ln),jt===null?Et=ei:jt.sibling=ei,jt=ei);return c&&Bt.forEach(function(so){return h(Ee,so)}),In&&$o(Ee,ln),Et}function Di(Ee,ve,De,pt){var Et=F(De);if(typeof Et!="function")throw Error(a(150));if(De=Et.call(De),De==null)throw Error(a(151));for(var jt=Et=null,Bt=ve,ln=ve=0,ei=null,on=De.next();Bt!==null&&!on.done;ln++,on=De.next()){Bt.index>ln?(ei=Bt,Bt=null):ei=Bt.sibling;var so=Pt(Ee,Bt,on.value,pt);if(so===null){Bt===null&&(Bt=ei);break}c&&Bt&&so.alternate===null&&h(Ee,Bt),ve=k(so,ve,ln),jt===null?Et=so:jt.sibling=so,jt=so,Bt=ei}if(on.done)return y(Ee,Bt),In&&$o(Ee,ln),Et;if(Bt===null){for(;!on.done;ln++,on=De.next())on=Ut(Ee,on.value,pt),on!==null&&(ve=k(on,ve,ln),jt===null?Et=on:jt.sibling=on,jt=on);return In&&$o(Ee,ln),Et}for(Bt=b(Ee,Bt);!on.done;ln++,on=De.next())on=Qt(Bt,Ee,ln,on.value,pt),on!==null&&(c&&on.alternate!==null&&Bt.delete(on.key===null?ln:on.key),ve=k(on,ve,ln),jt===null?Et=on:jt.sibling=on,jt=on);return c&&Bt.forEach(function(Ih){return h(Ee,Ih)}),In&&$o(Ee,ln),Et}function Dr(Ee,ve,De,pt){if(typeof De=="object"&&De!==null&&De.type===p&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case f:e:{for(var Et=De.key,jt=ve;jt!==null;){if(jt.key===Et){if(Et=De.type,Et===p){if(jt.tag===7){y(Ee,jt.sibling),ve=P(jt,De.props.children),ve.return=Ee,Ee=ve;break e}}else if(jt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===A&&Ka(Et)===jt.type){y(Ee,jt.sibling),ve=P(jt,De.props),ve.ref=Qa(Ee,jt,De),ve.return=Ee,Ee=ve;break e}y(Ee,jt);break}else h(Ee,jt);jt=jt.sibling}De.type===p?(ve=Sa(De.props.children,Ee.mode,pt,De.key),ve.return=Ee,Ee=ve):(pt=Hc(De.type,De.key,De.props,null,Ee.mode,pt),pt.ref=Qa(Ee,ve,De),pt.return=Ee,Ee=pt)}return $(Ee);case d:e:{for(jt=De.key;ve!==null;){if(ve.key===jt)if(ve.tag===4&&ve.stateNode.containerInfo===De.containerInfo&&ve.stateNode.implementation===De.implementation){y(Ee,ve.sibling),ve=P(ve,De.children||[]),ve.return=Ee,Ee=ve;break e}else{y(Ee,ve);break}else h(Ee,ve);ve=ve.sibling}ve=Xc(De,Ee.mode,pt),ve.return=Ee,Ee=ve}return $(Ee);case A:return jt=De._init,Dr(Ee,ve,jt(De._payload),pt)}if(oe(De))return gt(Ee,ve,De,pt);if(F(De))return Di(Ee,ve,De,pt);Do(Ee,De)}return typeof De=="string"&&De!==""||typeof De=="number"?(De=""+De,ve!==null&&ve.tag===6?(y(Ee,ve.sibling),ve=P(ve,De),ve.return=Ee,Ee=ve):(y(Ee,ve),ve=jc(De,Ee.mode,pt),ve.return=Ee,Ee=ve),$(Ee)):y(Ee,ve)}return Dr}var js=dp(!0),pp=dp(!1),$a={},fr=cn($a),ea=cn($a),ta=cn($a);function ss(c){if(c===$a)throw Error(a(174));return c}function xc(c,h){an(ta,h),an(ea,c),an(fr,$a),c=ye(h),Dt(fr),an(fr,c)}function el(){Dt(fr),Dt(ea),Dt(ta)}function mp(c){var h=ss(ta.current),y=ss(fr.current);h=H(y,c.type,h),y!==h&&(an(ea,c),an(fr,h))}function nh(c){ea.current===c&&(Dt(fr),Dt(ea))}var On=cn(0);function _c(c){for(var h=c;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||un(y)||j(y)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Tr=[];function na(){for(var c=0;c<Tr.length;c++){var h=Tr[c];Oe?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Tr.length=0}var Yl=l.ReactCurrentDispatcher,Cr=l.ReactCurrentBatchConfig,ia=0,zn=null,vi=null,yi=null,Sc=!1,ws=!1,ra=0,ql=0;function xi(){throw Error(a(321))}function wc(c,h){if(h===null)return!1;for(var y=0;y<h.length&&y<c.length;y++)if(!di(c[y],h[y]))return!1;return!0}function tl(c,h,y,b,P,k){if(ia=k,zn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Yl.current=c===null||c.memoizedState===null?lh:uh,c=y(b,P),ws){k=0;do{if(ws=!1,ra=0,25<=k)throw Error(a(301));k+=1,yi=vi=null,h.updateQueue=null,Yl.current=ch,c=y(b,P)}while(ws)}if(Yl.current=sl,h=vi!==null&&vi.next!==null,ia=0,yi=vi=zn=null,Sc=!1,h)throw Error(a(300));return c}function ko(){var c=ra!==0;return ra=0,c}function os(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?zn.memoizedState=yi=c:yi=yi.next=c,yi}function as(){if(vi===null){var c=zn.alternate;c=c!==null?c.memoizedState:null}else c=vi.next;var h=yi===null?zn.memoizedState:yi.next;if(h!==null)yi=h,vi=c;else{if(c===null)throw Error(a(310));vi=c,c={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},yi===null?zn.memoizedState=yi=c:yi=yi.next=c}return yi}function Ms(c,h){return typeof h=="function"?h(c):h}function Zl(c){var h=as(),y=h.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=c;var b=vi,P=b.baseQueue,k=y.pending;if(k!==null){if(P!==null){var $=P.next;P.next=k.next,k.next=$}b.baseQueue=P=k,y.pending=null}if(P!==null){k=P.next,b=b.baseState;var pe=$=null,ze=null,ot=k;do{var xt=ot.lane;if((ia&xt)===xt)ze!==null&&(ze=ze.next={lane:0,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),b=ot.hasEagerState?ot.eagerState:c(b,ot.action);else{var Ut={lane:xt,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null};ze===null?(pe=ze=Ut,$=b):ze=ze.next=Ut,zn.lanes|=xt,Es|=xt}ot=ot.next}while(ot!==null&&ot!==k);ze===null?$=b:ze.next=pe,di(b,h.memoizedState)||(_i=!0),h.memoizedState=b,h.baseState=$,h.baseQueue=ze,y.lastRenderedState=b}if(c=y.interleaved,c!==null){P=c;do k=P.lane,zn.lanes|=k,Es|=k,P=P.next;while(P!==c)}else P===null&&(y.lanes=0);return[h.memoizedState,y.dispatch]}function Jl(c){var h=as(),y=h.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=c;var b=y.dispatch,P=y.pending,k=h.memoizedState;if(P!==null){y.pending=null;var $=P=P.next;do k=c(k,$.action),$=$.next;while($!==P);di(k,h.memoizedState)||(_i=!0),h.memoizedState=k,h.baseQueue===null&&(h.baseState=k),y.lastRenderedState=k}return[k,b]}function ih(){}function rh(c,h){var y=zn,b=as(),P=h(),k=!di(b.memoizedState,P);if(k&&(b.memoizedState=P,_i=!0),b=b.queue,nl(Xs.bind(null,y,b,c),[c]),b.getSnapshot!==h||k||yi!==null&&yi.memoizedState.tag&1){if(y.flags|=2048,Kl(9,oh.bind(null,y,b,P,h),void 0,null),Yn===null)throw Error(a(349));(ia&30)!==0||sh(y,h,P)}return P}function sh(c,h,y){c.flags|=16384,c={getSnapshot:h,value:y},h=zn.updateQueue,h===null?(h={lastEffect:null,stores:null},zn.updateQueue=h,h.stores=[c]):(y=h.stores,y===null?h.stores=[c]:y.push(c))}function oh(c,h,y,b){h.value=y,h.getSnapshot=b,Mc(h)&&Gi(c,1,-1)}function Xs(c,h,y){return y(function(){Mc(h)&&Gi(c,1,-1)})}function Mc(c){var h=c.getSnapshot;c=c.value;try{var y=h();return!di(c,y)}catch{return!0}}function Ql(c){var h=os();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:c},h.queue=c,c=c.dispatch=Vg.bind(null,zn,c),[h.memoizedState,c]}function Kl(c,h,y,b){return c={tag:c,create:h,destroy:y,deps:b,next:null},h=zn.updateQueue,h===null?(h={lastEffect:null,stores:null},zn.updateQueue=h,h.lastEffect=c.next=c):(y=h.lastEffect,y===null?h.lastEffect=c.next=c:(b=y.next,y.next=c,c.next=b,h.lastEffect=c)),c}function gp(){return as().memoizedState}function Fo(c,h,y,b){var P=os();zn.flags|=c,P.memoizedState=Kl(1|h,y,void 0,b===void 0?null:b)}function bc(c,h,y,b){var P=as();b=b===void 0?null:b;var k=void 0;if(vi!==null){var $=vi.memoizedState;if(k=$.destroy,b!==null&&wc(b,$.deps)){P.memoizedState=Kl(h,y,k,b);return}}zn.flags|=c,P.memoizedState=Kl(1|h,y,k,b)}function Ec(c,h){return Fo(8390656,8,c,h)}function nl(c,h){return bc(2048,8,c,h)}function Mn(c,h){return bc(4,2,c,h)}function Tc(c,h){return bc(4,4,c,h)}function $l(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function il(c,h,y){return y=y!=null?y.concat([c]):null,bc(4,4,$l.bind(null,h,c),y)}function Cc(){}function Ac(c,h){var y=as();h=h===void 0?null:h;var b=y.memoizedState;return b!==null&&h!==null&&wc(h,b[1])?b[0]:(y.memoizedState=[c,h],c)}function rl(c,h){var y=as();h=h===void 0?null:h;var b=y.memoizedState;return b!==null&&h!==null&&wc(h,b[1])?b[0]:(c=c(),y.memoizedState=[c,h],c)}function Pc(c,h){var y=Ft;Ft=y!==0&&4>y?y:4,c(!0);var b=Cr.transition;Cr.transition={};try{c(!1),h()}finally{Ft=y,Cr.transition=b}}function sa(){return as().memoizedState}function vp(c,h,y){var b=fs(c);y={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null},yp(c)?ah(h,y):(eu(c,h,y),y=fn(),c=Gi(c,b,y),c!==null&&tu(c,h,b))}function Vg(c,h,y){var b=fs(c),P={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null};if(yp(c))ah(h,P);else{eu(c,h,P);var k=c.alternate;if(c.lanes===0&&(k===null||k.lanes===0)&&(k=h.lastRenderedReducer,k!==null))try{var $=h.lastRenderedState,pe=k($,y);if(P.hasEagerState=!0,P.eagerState=pe,di(pe,$))return}catch{}finally{}y=fn(),c=Gi(c,b,y),c!==null&&tu(c,h,b)}}function yp(c){var h=c.alternate;return c===zn||h!==null&&h===zn}function ah(c,h){ws=Sc=!0;var y=c.pending;y===null?h.next=h:(h.next=y.next,y.next=h),c.pending=h}function eu(c,h,y){Yn!==null&&(c.mode&1)!==0&&(Zt&2)===0?(c=h.interleaved,c===null?(y.next=y,Ki===null?Ki=[h]:Ki.push(h)):(y.next=c.next,c.next=y),h.interleaved=y):(c=h.pending,c===null?y.next=y:(y.next=c.next,c.next=y),h.pending=y)}function tu(c,h,y){if((y&4194240)!==0){var b=h.lanes;b&=c.pendingLanes,y|=b,h.lanes=y,Ci(c,y)}}var sl={readContext:Nn,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},lh={readContext:Nn,useCallback:function(c,h){return os().memoizedState=[c,h===void 0?null:h],c},useContext:Nn,useEffect:Ec,useImperativeHandle:function(c,h,y){return y=y!=null?y.concat([c]):null,Fo(4194308,4,$l.bind(null,h,c),y)},useLayoutEffect:function(c,h){return Fo(4194308,4,c,h)},useInsertionEffect:function(c,h){return Fo(4,2,c,h)},useMemo:function(c,h){var y=os();return h=h===void 0?null:h,c=c(),y.memoizedState=[c,h],c},useReducer:function(c,h,y){var b=os();return h=y!==void 0?y(h):h,b.memoizedState=b.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},b.queue=c,c=c.dispatch=vp.bind(null,zn,c),[b.memoizedState,c]},useRef:function(c){var h=os();return c={current:c},h.memoizedState=c},useState:Ql,useDebugValue:Cc,useDeferredValue:function(c){var h=Ql(c),y=h[0],b=h[1];return Ec(function(){var P=Cr.transition;Cr.transition={};try{b(c)}finally{Cr.transition=P}},[c]),y},useTransition:function(){var c=Ql(!1),h=c[0];return c=Pc.bind(null,c[1]),os().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,y){var b=zn,P=os();if(In){if(y===void 0)throw Error(a(407));y=y()}else{if(y=h(),Yn===null)throw Error(a(349));(ia&30)!==0||sh(b,h,y)}P.memoizedState=y;var k={value:y,getSnapshot:h};return P.queue=k,Ec(Xs.bind(null,b,k,c),[c]),b.flags|=2048,Kl(9,oh.bind(null,b,k,y,h),void 0,null),y},useId:function(){var c=os(),h=Yn.identifierPrefix;if(In){var y=Hs,b=Ws;y=(b&~(1<<32-lr(b)-1)).toString(32)+y,h=":"+h+"R"+y,y=ra++,0<y&&(h+="H"+y.toString(32)),h+=":"}else y=ql++,h=":"+h+"r"+y.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},uh={readContext:Nn,useCallback:Ac,useContext:Nn,useEffect:nl,useImperativeHandle:il,useInsertionEffect:Mn,useLayoutEffect:Tc,useMemo:rl,useReducer:Zl,useRef:gp,useState:function(){return Zl(Ms)},useDebugValue:Cc,useDeferredValue:function(c){var h=Zl(Ms),y=h[0],b=h[1];return nl(function(){var P=Cr.transition;Cr.transition={};try{b(c)}finally{Cr.transition=P}},[c]),y},useTransition:function(){var c=Zl(Ms)[0],h=as().memoizedState;return[c,h]},useMutableSource:ih,useSyncExternalStore:rh,useId:sa,unstable_isNewReconciler:!1},ch={readContext:Nn,useCallback:Ac,useContext:Nn,useEffect:nl,useImperativeHandle:il,useInsertionEffect:Mn,useLayoutEffect:Tc,useMemo:rl,useReducer:Jl,useRef:gp,useState:function(){return Jl(Ms)},useDebugValue:Cc,useDeferredValue:function(c){var h=Jl(Ms),y=h[0],b=h[1];return nl(function(){var P=Cr.transition;Cr.transition={};try{b(c)}finally{Cr.transition=P}},[c]),y},useTransition:function(){var c=Jl(Ms)[0],h=as().memoizedState;return[c,h]},useMutableSource:ih,useSyncExternalStore:rh,useId:sa,unstable_isNewReconciler:!1};function fh(c,h){try{var y="",b=h;do y+=zs(b),b=b.return;while(b);var P=y}catch(k){P=`
Error generating stack: `+k.message+`
`+k.stack}return{value:c,source:h,stack:P}}function Lc(c,h){try{console.error(h.value)}catch(y){setTimeout(function(){throw y})}}var Wg=typeof WeakMap=="function"?WeakMap:Map;function xp(c,h,y){y=Vs(-1,y),y.tag=3,y.payload={element:null};var b=h.value;return y.callback=function(){fl||(fl=!0,An=b),Lc(c,h)},y}function Rc(c,h,y){y=Vs(-1,y),y.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var P=h.value;y.payload=function(){return b(P)},y.callback=function(){Lc(c,h)}}var k=c.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(y.callback=function(){Lc(c,h),typeof b!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var $=h.stack;this.componentDidCatch(h.value,{componentStack:$!==null?$:""})}),y}function Ys(c,h,y){var b=c.pingCache;if(b===null){b=c.pingCache=new Wg;var P=new Set;b.set(h,P)}else P=b.get(h),P===void 0&&(P=new Set,b.set(h,P));P.has(y)||(P.add(y),c=Ph.bind(null,c,h,y),h.then(c,c))}function hh(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function oa(c,h,y,b,P){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(h=Vs(-1,1),h.tag=2,Lo(y,h))),y.lanes|=1),c):(c.flags|=65536,c.lanes=P,c)}function ai(c){c.flags|=4}function ol(c,h){if(c!==null&&c.child===h.child)return!0;if((h.flags&16)!==0)return!1;for(c=h.child;c!==null;){if((c.flags&12854)!==0||(c.subtreeFlags&12854)!==0)return!1;c=c.sibling}return!0}var Ar,aa,Ic,Dc;if(ke)Ar=function(c,h){for(var y=h.child;y!==null;){if(y.tag===5||y.tag===6)O(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===h)break;for(;y.sibling===null;){if(y.return===null||y.return===h)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},aa=function(){},Ic=function(c,h,y,b,P){if(c=c.memoizedProps,c!==b){var k=h.stateNode,$=ss(fr.current);y=se(k,y,c,b,P,$),(h.updateQueue=y)&&ai(h)}},Dc=function(c,h,y,b){y!==b&&ai(h)};else if(ae){Ar=function(c,h,y,b){for(var P=h.child;P!==null;){if(P.tag===5){var k=P.stateNode;y&&b&&(k=en(k,P.type,P.memoizedProps,P)),O(c,k)}else if(P.tag===6)k=P.stateNode,y&&b&&(k=Ot(k,P.memoizedProps,P)),O(c,k);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)k=P.child,k!==null&&(k.return=P),Ar(c,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===h)break;for(;P.sibling===null;){if(P.return===null||P.return===h)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var No=function(c,h,y,b){for(var P=h.child;P!==null;){if(P.tag===5){var k=P.stateNode;y&&b&&(k=en(k,P.type,P.memoizedProps,P)),kt(c,k)}else if(P.tag===6)k=P.stateNode,y&&b&&(k=Ot(k,P.memoizedProps,P)),kt(c,k);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)k=P.child,k!==null&&(k.return=P),No(c,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===h)break;for(;P.sibling===null;){if(P.return===null||P.return===h)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};aa=function(c,h){var y=h.stateNode;if(!ol(c,h)){c=y.containerInfo;var b=Yt(c);No(b,h,!1,!1),y.pendingChildren=b,ai(h),Vt(c,b)}},Ic=function(c,h,y,b,P){var k=c.stateNode,$=c.memoizedProps;if((c=ol(c,h))&&$===b)h.stateNode=k;else{var pe=h.stateNode,ze=ss(fr.current),ot=null;$!==b&&(ot=se(pe,y,$,b,P,ze)),c&&ot===null?h.stateNode=k:(k=mt(k,ot,y,$,b,h,c,pe),re(k,y,b,P,ze)&&ai(h),h.stateNode=k,c?ai(h):Ar(k,h,!1,!1))}},Dc=function(c,h,y,b){y!==b?(c=ss(ta.current),y=ss(fr.current),h.stateNode=he(b,c,y,h),ai(h)):h.stateNode=c.stateNode}}else aa=function(){},Ic=function(){},Dc=function(){};function qs(c,h){if(!In)switch(c.tailMode){case"hidden":h=c.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var b=null;y!==null;)y.alternate!==null&&(b=y),y=y.sibling;b===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function Xn(c){var h=c.alternate!==null&&c.alternate.child===c.child,y=0,b=0;if(h)for(var P=c.child;P!==null;)y|=P.lanes|P.childLanes,b|=P.subtreeFlags&14680064,b|=P.flags&14680064,P.return=c,P=P.sibling;else for(P=c.child;P!==null;)y|=P.lanes|P.childLanes,b|=P.subtreeFlags,b|=P.flags,P.return=c,P=P.sibling;return c.subtreeFlags|=b,c.childLanes=y,h}function kc(c,h,y){var b=h.pendingProps;switch($f(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(h),null;case 1:return Hn(h.type)&&Ji(),Xn(h),null;case 3:return b=h.stateNode,el(),Dt(Qn),Dt(Fn),na(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(Xl(h)?ai(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Yr!==null&&(pu(Yr),Yr=null))),aa(c,h),Xn(h),null;case 5:nh(h),y=ss(ta.current);var P=h.type;if(c!==null&&h.stateNode!=null)Ic(c,h,P,b,y),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(a(166));return Xn(h),null}if(c=ss(fr.current),Xl(h)){if(!be)throw Error(a(175));c=Ct(h.stateNode,h.type,h.memoizedProps,y,c,h,!Za),h.updateQueue=c,c!==null&&ai(h)}else{var k=N(P,b,y,c,h);Ar(k,h,!1,!1),h.stateNode=k,re(k,P,b,y,c)&&ai(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Xn(h),null;case 6:if(c&&h.stateNode!=null)Dc(c,h,c.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(a(166));if(c=ss(ta.current),y=ss(fr.current),Xl(h)){if(!be)throw Error(a(176));if(c=h.stateNode,b=h.memoizedProps,(y=At(c,b,h,!Za))&&(P=$i,P!==null))switch(k=(P.mode&1)!==0,P.tag){case 3:Sr(P.stateNode.containerInfo,c,b,k);break;case 5:Sn(P.type,P.memoizedProps,P.stateNode,c,b,k)}y&&ai(h)}else h.stateNode=he(b,c,y,h)}return Xn(h),null;case 13:if(Dt(On),b=h.memoizedState,In&&Ai!==null&&(h.mode&1)!==0&&(h.flags&128)===0){for(c=Ai;c;)c=Ce(c);return Ja(),h.flags|=98560,h}if(b!==null&&b.dehydrated!==null){if(b=Xl(h),c===null){if(!b)throw Error(a(318));if(!be)throw Error(a(344));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Wt(c,h)}else Ja(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;return Xn(h),null}return Yr!==null&&(pu(Yr),Yr=null),(h.flags&128)!==0?(h.lanes=y,h):(b=b!==null,y=!1,c===null?Xl(h):y=c.memoizedState!==null,b&&!y&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(On.current&1)!==0?Bn===0&&(Bn=3):Gc())),h.updateQueue!==null&&(h.flags|=4),Xn(h),null);case 4:return el(),aa(c,h),c===null&&He(h.stateNode.containerInfo),Xn(h),null;case 10:return Kn(h.type._context),Xn(h),null;case 17:return Hn(h.type)&&Ji(),Xn(h),null;case 19:if(Dt(On),P=h.memoizedState,P===null)return Xn(h),null;if(b=(h.flags&128)!==0,k=P.rendering,k===null)if(b)qs(P,!1);else{if(Bn!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(k=_c(c),k!==null){for(h.flags|=128,qs(P,!1),c=k.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),h.subtreeFlags=0,c=y,b=h.child;b!==null;)y=b,P=c,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=P,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,P=k.dependencies,y.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),b=b.sibling;return an(On,On.current&1|2),h.child}c=c.sibling}P.tail!==null&&Rn()>Uo&&(h.flags|=128,b=!0,qs(P,!1),h.lanes=4194304)}else{if(!b)if(c=_c(k),c!==null){if(h.flags|=128,b=!0,c=c.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),qs(P,!0),P.tail===null&&P.tailMode==="hidden"&&!k.alternate&&!In)return Xn(h),null}else 2*Rn()-P.renderingStartTime>Uo&&y!==1073741824&&(h.flags|=128,b=!0,qs(P,!1),h.lanes=4194304);P.isBackwards?(k.sibling=h.child,h.child=k):(c=P.last,c!==null?c.sibling=k:h.child=k,P.last=k)}return P.tail!==null?(h=P.tail,P.rendering=h,P.tail=h.sibling,P.renderingStartTime=Rn(),h.sibling=null,c=On.current,an(On,b?c&1|2:c&1),h):(Xn(h),null);case 22:case 23:return mu(),b=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==b&&(h.flags|=8192),b&&(h.mode&1)!==0?(Bi&1073741824)!==0&&(Xn(h),ke&&h.subtreeFlags&6&&(h.flags|=8192)):Xn(h),null;case 24:return null;case 25:return null}throw Error(a(156,h.tag))}var dh=l.ReactCurrentOwner,_i=!1;function Un(c,h,y,b){h.child=c===null?pp(h,null,y,b):js(h,c.child,y,b)}function bn(c,h,y,b,P){y=y.render;var k=h.ref;return jn(h,P),b=tl(c,h,y,b,k,P),y=ko(),c!==null&&!_i?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~P,hr(c,h,P)):(In&&y&&Kf(h),h.flags|=1,Un(c,h,b,P),h.child)}function _n(c,h,y,b,P){if(c===null){var k=y.type;return typeof k=="function"&&!Wc(k)&&k.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(h.tag=15,h.type=k,Zs(c,h,k,b,P)):(c=Hc(y.type,null,b,h,h.mode,P),c.ref=h.ref,c.return=h,h.child=c)}if(k=c.child,(c.lanes&P)===0){var $=k.memoizedProps;if(y=y.compare,y=y!==null?y:ur,y($,b)&&c.ref===h.ref)return hr(c,h,P)}return h.flags|=1,c=ro(k,b),c.ref=h.ref,c.return=h,h.child=c}function Zs(c,h,y,b,P){if(c!==null&&ur(c.memoizedProps,b)&&c.ref===h.ref)if(_i=!1,(c.lanes&P)!==0)(c.flags&131072)!==0&&(_i=!0);else return h.lanes=c.lanes,hr(c,h,P);return Js(c,h,y,b,P)}function Pi(c,h,y){var b=h.pendingProps,P=b.children,k=c!==null?c.memoizedState:null;if(b.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null},an(ga,Bi),Bi|=y;else if((y&1073741824)!==0)h.memoizedState={baseLanes:0,cachePool:null},b=k!==null?k.baseLanes:y,an(ga,Bi),Bi|=b;else return c=k!==null?k.baseLanes|y:y,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null},h.updateQueue=null,an(ga,Bi),Bi|=c,null;else k!==null?(b=k.baseLanes|y,h.memoizedState=null):b=y,an(ga,Bi),Bi|=b;return Un(c,h,P,y),h.child}function er(c,h){var y=h.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(h.flags|=512,h.flags|=2097152)}function Js(c,h,y,b,P){var k=Hn(y)?wr:Fn.current;return k=Zi(h,k),jn(h,P),y=tl(c,h,y,b,k,P),b=ko(),c!==null&&!_i?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~P,hr(c,h,P)):(In&&b&&Kf(h),h.flags|=1,Un(c,h,y,P),h.child)}function la(c,h,y,b,P){if(Hn(y)){var k=!0;wo(h)}else k=!1;if(jn(h,P),h.stateNode===null)c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),up(h,y,b),Qf(h,y,b,P),b=!0;else if(c===null){var $=h.stateNode,pe=h.memoizedProps;$.props=pe;var ze=$.context,ot=y.contextType;typeof ot=="object"&&ot!==null?ot=Nn(ot):(ot=Hn(y)?wr:Fn.current,ot=Zi(h,ot));var xt=y.getDerivedStateFromProps,Ut=typeof xt=="function"||typeof $.getSnapshotBeforeUpdate=="function";Ut||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(pe!==b||ze!==ot)&&cp(h,$,b,ot),jr=!1;var Pt=h.memoizedState;$.state=Pt,dc(h,b,$,P),ze=h.memoizedState,pe!==b||Pt!==ze||Qn.current||jr?(typeof xt=="function"&&(Zf(h,y,xt,b),ze=h.memoizedState),(pe=jr||Jf(h,y,pe,b,Pt,ze,ot))?(Ut||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(h.flags|=4194308)):(typeof $.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=ze),$.props=b,$.state=ze,$.context=ot,b=pe):(typeof $.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{$=h.stateNode,qf(c,h),pe=h.memoizedProps,ot=h.type===h.elementType?pe:mi(h.type,pe),$.props=ot,Ut=h.pendingProps,Pt=$.context,ze=y.contextType,typeof ze=="object"&&ze!==null?ze=Nn(ze):(ze=Hn(y)?wr:Fn.current,ze=Zi(h,ze));var Qt=y.getDerivedStateFromProps;(xt=typeof Qt=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(pe!==Ut||Pt!==ze)&&cp(h,$,b,ze),jr=!1,Pt=h.memoizedState,$.state=Pt,dc(h,b,$,P);var gt=h.memoizedState;pe!==Ut||Pt!==gt||Qn.current||jr?(typeof Qt=="function"&&(Zf(h,y,Qt,b),gt=h.memoizedState),(ot=jr||Jf(h,y,ot,b,Pt,gt,ze)||!1)?(xt||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(b,gt,ze),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(b,gt,ze)),typeof $.componentDidUpdate=="function"&&(h.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof $.componentDidUpdate!="function"||pe===c.memoizedProps&&Pt===c.memoizedState||(h.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||pe===c.memoizedProps&&Pt===c.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=gt),$.props=b,$.state=gt,$.context=ze,b=ot):(typeof $.componentDidUpdate!="function"||pe===c.memoizedProps&&Pt===c.memoizedState||(h.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||pe===c.memoizedProps&&Pt===c.memoizedState||(h.flags|=1024),b=!1)}return Ui(c,h,y,b,k,P)}function Ui(c,h,y,b,P,k){er(c,h);var $=(h.flags&128)!==0;if(!b&&!$)return P&&Qi(h,y,!1),hr(c,h,k);b=h.stateNode,dh.current=h;var pe=$&&typeof y.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,c!==null&&$?(h.child=js(h,c.child,null,k),h.child=js(h,null,pe,k)):Un(c,h,pe,k),h.memoizedState=b.state,P&&Qi(h,y,!0),h.child}function nu(c){var h=c.stateNode;h.pendingContext?Ns(c,h.pendingContext,h.pendingContext!==h.context):h.context&&Ns(c,h.context,!1),xc(c,h.containerInfo)}function ph(c,h,y,b,P){return Ja(),yc(P),h.flags|=256,Un(c,h,y,b),h.child}var iu={dehydrated:null,treeContext:null,retryLane:0};function ua(c){return{baseLanes:c,cachePool:null}}function mh(c,h,y){var b=h.pendingProps,P=On.current,k=!1,$=(h.flags&128)!==0,pe;if((pe=$)||(pe=c!==null&&c.memoizedState===null?!1:(P&2)!==0),pe?(k=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(P|=1),an(On,P&1),c===null)return Io(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:j(c)?h.lanes=8:h.lanes=1073741824,null):(P=b.children,c=b.fallback,k?(b=h.mode,k=h.child,P={mode:"hidden",children:P},(b&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=P):k=yu(P,b,0,null),c=Sa(c,b,y,null),k.return=h,c.return=h,k.sibling=c,h.child=k,h.child.memoizedState=ua(y),h.memoizedState=iu,c):ls(h,P));if(P=c.memoizedState,P!==null){if(pe=P.dehydrated,pe!==null){if($)return h.flags&256?(h.flags&=-257,su(c,h,y,Error(a(422)))):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(k=b.fallback,P=h.mode,b=yu({mode:"visible",children:b.children},P,0,null),k=Sa(k,P,y,null),k.flags|=2,b.return=h,k.return=h,b.sibling=k,h.child=b,(h.mode&1)!==0&&js(h,c.child,null,y),h.child.memoizedState=ua(y),h.memoizedState=iu,k);if((h.mode&1)===0)h=su(c,h,y,null);else if(j(pe))h=su(c,h,y,Error(a(419)));else if(b=(y&c.childLanes)!==0,_i||b){if(b=Yn,b!==null){switch(y&-y){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}b=(k&(b.suspendedLanes|y))!==0?0:k,b!==0&&b!==P.retryLane&&(P.retryLane=b,Gi(c,b,-1))}Gc(),h=su(c,h,y,Error(a(421)))}else un(pe)?(h.flags|=128,h.child=c.child,h=bp.bind(null,c),_e(pe,h),h=null):(y=P.treeContext,be&&(Ai=St(pe),$i=h,In=!0,Yr=null,Za=!1,y!==null&&(Xr[Er++]=Ws,Xr[Er++]=Hs,Xr[Er++]=Ko,Ws=y.id,Hs=y.overflow,Ko=h)),h=ls(h,h.pendingProps.children),h.flags|=4096);return h}return k?(b=Fc(c,h,b.children,b.fallback,y),k=h.child,P=c.child.memoizedState,k.memoizedState=P===null?ua(y):{baseLanes:P.baseLanes|y,cachePool:null},k.childLanes=c.childLanes&~y,h.memoizedState=iu,b):(y=ru(c,h,b.children,y),h.memoizedState=null,y)}return k?(b=Fc(c,h,b.children,b.fallback,y),k=h.child,P=c.child.memoizedState,k.memoizedState=P===null?ua(y):{baseLanes:P.baseLanes|y,cachePool:null},k.childLanes=c.childLanes&~y,h.memoizedState=iu,b):(y=ru(c,h,b.children,y),h.memoizedState=null,y)}function ls(c,h){return h=yu({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function ru(c,h,y,b){var P=c.child;return c=P.sibling,y=ro(P,{mode:"visible",children:y}),(h.mode&1)===0&&(y.lanes=b),y.return=h,y.sibling=null,c!==null&&(b=h.deletions,b===null?(h.deletions=[c],h.flags|=16):b.push(c)),h.child=y}function Fc(c,h,y,b,P){var k=h.mode;c=c.child;var $=c.sibling,pe={mode:"hidden",children:y};return(k&1)===0&&h.child!==c?(y=h.child,y.childLanes=0,y.pendingProps=pe,h.deletions=null):(y=ro(c,pe),y.subtreeFlags=c.subtreeFlags&14680064),$!==null?b=ro($,b):(b=Sa(b,k,P,null),b.flags|=2),b.return=h,y.return=h,y.sibling=b,h.child=y,b}function su(c,h,y,b){return b!==null&&yc(b),js(h,c.child,null,y),c=ls(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function _p(c,h,y){c.lanes|=h;var b=c.alternate;b!==null&&(b.lanes|=h),oi(c.return,h,y)}function bs(c,h,y,b,P){var k=c.memoizedState;k===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:y,tailMode:P}:(k.isBackwards=h,k.rendering=null,k.renderingStartTime=0,k.last=b,k.tail=y,k.tailMode=P)}function ca(c,h,y){var b=h.pendingProps,P=b.revealOrder,k=b.tail;if(Un(c,h,b.children,y),b=On.current,(b&2)!==0)b=b&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&_p(c,y,h);else if(c.tag===19)_p(c,y,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(an(On,b),(h.mode&1)===0)h.memoizedState=null;else switch(P){case"forwards":for(y=h.child,P=null;y!==null;)c=y.alternate,c!==null&&_c(c)===null&&(P=y),y=y.sibling;y=P,y===null?(P=h.child,h.child=null):(P=y.sibling,y.sibling=null),bs(h,!1,P,y,k);break;case"backwards":for(y=null,P=h.child,h.child=null;P!==null;){if(c=P.alternate,c!==null&&_c(c)===null){h.child=P;break}c=P.sibling,P.sibling=y,y=P,P=c}bs(h,!0,y,null,k);break;case"together":bs(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function hr(c,h,y){if(c!==null&&(h.dependencies=c.dependencies),Es|=h.lanes,(y&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(a(153));if(h.child!==null){for(c=h.child,y=ro(c,c.pendingProps),h.child=y,y.return=h;c.sibling!==null;)c=c.sibling,y=y.sibling=ro(c,c.pendingProps),y.return=h;y.sibling=null}return h.child}function Nc(c,h,y){switch(h.tag){case 3:nu(h),Ja();break;case 5:mp(h);break;case 1:Hn(h.type)&&wo(h);break;case 4:xc(h,h.stateNode.containerInfo);break;case 10:Gs(h,h.type._context,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(an(On,On.current&1),h.flags|=128,null):(y&h.child.childLanes)!==0?mh(c,h,y):(an(On,On.current&1),c=hr(c,h,y),c!==null?c.sibling:null);an(On,On.current&1);break;case 19:if(b=(y&h.childLanes)!==0,(c.flags&128)!==0){if(b)return ca(c,h,y);h.flags|=128}var P=h.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),an(On,On.current),b)break;return null;case 22:case 23:return h.lanes=0,Pi(c,h,y)}return hr(c,h,y)}function Oc(c,h){switch($f(h),h.tag){case 1:return Hn(h.type)&&Ji(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return el(),Dt(Qn),Dt(Fn),na(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return nh(h),null;case 13:if(Dt(On),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Ja()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Dt(On),null;case 4:return el(),null;case 10:return Kn(h.type._context),null;case 22:case 23:return mu(),null;case 24:return null;default:return null}}var tr=!1,Si=!1,fa=typeof WeakSet=="function"?WeakSet:Set,ft=null;function qr(c,h){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(b){ir(c,h,b)}else y.current=null}function Qs(c,h,y){try{y()}catch(b){ir(c,h,b)}}var gh=!1;function vh(c,h){for(Q(c.containerInfo),ft=h;ft!==null;)if(c=ft,h=c.child,(c.subtreeFlags&1028)!==0&&h!==null)h.return=c,ft=h;else for(;ft!==null;){c=ft;try{var y=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,P=y.memoizedState,k=c.stateNode,$=k.getSnapshotBeforeUpdate(c.elementType===c.type?b:mi(c.type,b),P);k.__reactInternalSnapshotBeforeUpdate=$}break;case 3:ke&&rt(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(pe){ir(c,c.return,pe)}if(h=c.sibling,h!==null){h.return=c.return,ft=h;break}ft=c.return}return y=gh,gh=!1,y}function Ks(c,h,y){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var P=b=b.next;do{if((P.tag&c)===c){var k=P.destroy;P.destroy=void 0,k!==void 0&&Qs(h,y,k)}P=P.next}while(P!==b)}}function Li(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var y=h=h.next;do{if((y.tag&c)===c){var b=y.create;y.destroy=b()}y=y.next}while(y!==h)}}function nr(c){var h=c.ref;if(h!==null){var y=c.stateNode;switch(c.tag){case 5:c=ce(y);break;default:c=y}typeof h=="function"?h(c):h.current=c}}function Cn(c,h,y){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(To,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(c=h.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var b=c=c.next;do{var P=b,k=P.destroy;P=P.tag,k!==void 0&&((P&2)!==0||(P&4)!==0)&&Qs(h,y,k),b=b.next}while(b!==c)}break;case 1:if(qr(h,y),c=h.stateNode,typeof c.componentWillUnmount=="function")try{c.props=h.memoizedProps,c.state=h.memoizedState,c.componentWillUnmount()}catch($){ir(h,y,$)}break;case 5:qr(h,y);break;case 4:ke?_h(c,h,y):ae&&ae&&(h=h.stateNode.containerInfo,y=Yt(h),Gt(h,y))}}function Zr(c,h,y){for(var b=h;;)if(Cn(c,b,y),b.child===null||ke&&b.tag===4){if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function yh(c){var h=c.alternate;h!==null&&(c.alternate=null,yh(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&ut(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function xh(c){return c.tag===5||c.tag===3||c.tag===4}function zc(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||xh(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Uc(c){if(ke){e:{for(var h=c.return;h!==null;){if(xh(h))break e;h=h.return}throw Error(a(160))}var y=h;switch(y.tag){case 5:h=y.stateNode,y.flags&32&&(Fe(h),y.flags&=-33),y=zc(c),al(c,y,h);break;case 3:case 4:h=y.stateNode.containerInfo,y=zc(c),Bc(c,y,h);break;default:throw Error(a(161))}}}function Bc(c,h,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?et(y,c,h):Ke(y,c);else if(b!==4&&(c=c.child,c!==null))for(Bc(c,h,y),c=c.sibling;c!==null;)Bc(c,h,y),c=c.sibling}function al(c,h,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?ct(y,c,h):qe(y,c);else if(b!==4&&(c=c.child,c!==null))for(al(c,h,y),c=c.sibling;c!==null;)al(c,h,y),c=c.sibling}function _h(c,h,y){for(var b=h,P=!1,k,$;;){if(!P){P=b.return;e:for(;;){if(P===null)throw Error(a(160));switch(k=P.stateNode,P.tag){case 5:$=!1;break e;case 3:k=k.containerInfo,$=!0;break e;case 4:k=k.containerInfo,$=!0;break e}P=P.return}P=!0}if(b.tag===5||b.tag===6)Zr(c,b,y),$?ie(k,b.stateNode):Ze(k,b.stateNode);else if(b.tag===18)$?ii(k,b.stateNode):Tn(k,b.stateNode);else if(b.tag===4){if(b.child!==null){k=b.stateNode.containerInfo,$=!0,b.child.return=b,b=b.child;continue}}else if(Cn(c,b,y),b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return,b.tag===4&&(P=!1)}b.sibling.return=b.return,b=b.sibling}}function Oo(c,h){if(ke){switch(h.tag){case 0:case 11:case 14:case 15:Ks(3,h,h.return),Li(3,h),Ks(5,h,h.return);return;case 1:return;case 5:var y=h.stateNode;if(y!=null){var b=h.memoizedProps;c=c!==null?c.memoizedProps:b;var P=h.type,k=h.updateQueue;h.updateQueue=null,k!==null&&Je(y,k,P,c,b,h)}return;case 6:if(h.stateNode===null)throw Error(a(162));y=h.memoizedProps,Le(h.stateNode,c!==null?c.memoizedProps:y,y);return;case 3:be&&c!==null&&c.memoizedState.isDehydrated&&Ht(h.stateNode.containerInfo);return;case 12:return;case 13:ll(h);return;case 19:ll(h);return;case 17:return}throw Error(a(163))}switch(h.tag){case 0:case 11:case 14:case 15:Ks(3,h,h.return),Li(3,h),Ks(5,h,h.return);return;case 12:return;case 13:ll(h);return;case 19:ll(h);return;case 3:be&&c!==null&&c.memoizedState.isDehydrated&&Ht(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(ae){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Gt(h.containerInfo,h.pendingChildren);break e}throw Error(a(163))}}function ll(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new fa),h.forEach(function(b){var P=Ep.bind(null,c,b);y.has(b)||(y.add(b),b.then(P,P))})}}function Hg(c,h){for(ft=h;ft!==null;){h=ft;var y=h.deletions;if(y!==null)for(var b=0;b<y.length;b++){var P=y[b];try{var k=c;ke?_h(k,P,h):Zr(k,P,h);var $=P.alternate;$!==null&&($.return=null),P.return=null}catch(Et){ir(P,h,Et)}}if(y=h.child,(h.subtreeFlags&12854)!==0&&y!==null)y.return=h,ft=y;else for(;ft!==null;){h=ft;try{var pe=h.flags;if(pe&32&&ke&&Fe(h.stateNode),pe&512){var ze=h.alternate;if(ze!==null){var ot=ze.ref;ot!==null&&(typeof ot=="function"?ot(null):ot.current=null)}}if(pe&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var xt=h.alternate;(xt===null||xt.memoizedState===null)&&(hu=Rn())}break;case 22:var Ut=h.memoizedState!==null,Pt=h.alternate,Qt=Pt!==null&&Pt.memoizedState!==null;if(y=h,ke){e:if(b=y,P=Ut,k=null,ke)for(var gt=b;;){if(gt.tag===5){if(k===null){k=gt;var Di=gt.stateNode;P?st(Di):xe(gt.stateNode,gt.memoizedProps)}}else if(gt.tag===6){if(k===null){var Dr=gt.stateNode;P?ee(Dr):Be(Dr,gt.memoizedProps)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===b)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===b)break;for(;gt.sibling===null;){if(gt.return===null||gt.return===b)break e;k===gt&&(k=null),gt=gt.return}k===gt&&(k=null),gt.sibling.return=gt.return,gt=gt.sibling}}if(Ut&&!Qt&&(y.mode&1)!==0){ft=y;for(var Ee=y.child;Ee!==null;){for(y=ft=Ee;ft!==null;){b=ft;var ve=b.child;switch(b.tag){case 0:case 11:case 14:case 15:Ks(4,b,b.return);break;case 1:qr(b,b.return);var De=b.stateNode;if(typeof De.componentWillUnmount=="function"){var pt=b.return;try{De.props=b.memoizedProps,De.state=b.memoizedState,De.componentWillUnmount()}catch(Et){ir(b,pt,Et)}}break;case 5:qr(b,b.return);break;case 22:if(b.memoizedState!==null){wh(y);continue}}ve!==null?(ve.return=b,ft=ve):wh(y)}Ee=Ee.sibling}}}switch(pe&4102){case 2:Uc(h),h.flags&=-3;break;case 6:Uc(h),h.flags&=-3,Oo(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Oo(h.alternate,h);break;case 4:Oo(h.alternate,h)}}catch(Et){ir(h,h.return,Et)}if(y=h.sibling,y!==null){y.return=h.return,ft=y;break}ft=h.return}}}function ou(c,h,y){ft=c,au(c)}function au(c,h,y){for(var b=(c.mode&1)!==0;ft!==null;){var P=ft,k=P.child;if(P.tag===22&&b){var $=P.memoizedState!==null||tr;if(!$){var pe=P.alternate,ze=pe!==null&&pe.memoizedState!==null||Si;pe=tr;var ot=Si;if(tr=$,(Si=ze)&&!ot)for(ft=P;ft!==null;)$=ft,ze=$.child,$.tag===22&&$.memoizedState!==null?ha(P):ze!==null?(ze.return=$,ft=ze):ha(P);for(;k!==null;)ft=k,au(k),k=k.sibling;ft=P,tr=pe,Si=ot}Sh(c)}else(P.subtreeFlags&8772)!==0&&k!==null?(k.return=P,ft=k):Sh(c)}}function Sh(c){for(;ft!==null;){var h=ft;if((h.flags&8772)!==0){var y=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Si||Li(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!Si)if(y===null)b.componentDidMount();else{var P=h.elementType===h.type?y.memoizedProps:mi(h.type,y.memoizedProps);b.componentDidUpdate(P,y.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var k=h.updateQueue;k!==null&&ap(h,k,b);break;case 3:var $=h.updateQueue;if($!==null){if(y=null,h.child!==null)switch(h.child.tag){case 5:y=ce(h.child.stateNode);break;case 1:y=h.child.stateNode}ap(h,$,y)}break;case 5:var pe=h.stateNode;y===null&&h.flags&4&&lt(pe,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(be&&h.memoizedState===null){var ze=h.alternate;if(ze!==null){var ot=ze.memoizedState;if(ot!==null){var xt=ot.dehydrated;xt!==null&&qt(xt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Si||h.flags&512&&nr(h)}catch(Ut){ir(h,h.return,Ut)}}if(h===c){ft=null;break}if(y=h.sibling,y!==null){y.return=h.return,ft=y;break}ft=h.return}}function wh(c){for(;ft!==null;){var h=ft;if(h===c){ft=null;break}var y=h.sibling;if(y!==null){y.return=h.return,ft=y;break}ft=h.return}}function ha(c){for(;ft!==null;){var h=ft;try{switch(h.tag){case 0:case 11:case 15:var y=h.return;try{Li(4,h)}catch(ze){ir(h,y,ze)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var P=h.return;try{b.componentDidMount()}catch(ze){ir(h,P,ze)}}var k=h.return;try{nr(h)}catch(ze){ir(h,k,ze)}break;case 5:var $=h.return;try{nr(h)}catch(ze){ir(h,$,ze)}}}catch(ze){ir(h,h.return,ze)}if(h===c){ft=null;break}var pe=h.sibling;if(pe!==null){pe.return=h.return,ft=pe;break}ft=h.return}}var lu=0,da=1,pa=2,$s=3,ul=4;if(typeof Symbol=="function"&&Symbol.for){var ma=Symbol.for;lu=ma("selector.component"),da=ma("selector.has_pseudo_class"),pa=ma("selector.role"),$s=ma("selector.test_id"),ul=ma("selector.text")}function uu(c){var h=Ge(c);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(a(364));return h}if(c=Re(c),c===null)throw Error(a(362));return c.stateNode.current}function cu(c,h){switch(h.$$typeof){case lu:if(c.type===h.value)return!0;break;case da:e:{h=h.value,c=[c,0];for(var y=0;y<c.length;){var b=c[y++],P=c[y++],k=h[P];if(b.tag!==5||!fe(b)){for(;k!=null&&cu(b,k);)P++,k=h[P];if(P===h.length){h=!0;break e}else for(b=b.child;b!==null;)c.push(b,P),b=b.sibling}}h=!1}return h;case pa:if(c.tag===5&&Te(c.stateNode,h.value))return!0;break;case ul:if((c.tag===5||c.tag===6)&&(c=G(c),c!==null&&0<=c.indexOf(h.value)))return!0;break;case $s:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function zo(c){switch(c.$$typeof){case lu:return"<"+(B(c.value)||"Unknown")+">";case da:return":has("+(zo(c)||"")+")";case pa:return'[role="'+c.value+'"]';case ul:return'"'+c.value+'"';case $s:return'[data-testname="'+c.value+'"]';default:throw Error(a(365))}}function Pr(c,h){var y=[];c=[c,0];for(var b=0;b<c.length;){var P=c[b++],k=c[b++],$=h[k];if(P.tag!==5||!fe(P)){for(;$!=null&&cu(P,$);)k++,$=h[k];if(k===h.length)y.push(P);else for(P=P.child;P!==null;)c.push(P,k),P=P.sibling}}return y}function eo(c,h){if(!tt)throw Error(a(363));c=uu(c),c=Pr(c,h),h=[],c=Array.from(c);for(var y=0;y<c.length;){var b=c[y++];if(b.tag===5)fe(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)c.push(b),b=b.sibling}return h}var Mh=Math.ceil,fu=l.ReactCurrentDispatcher,us=l.ReactCurrentOwner,vn=l.ReactCurrentBatchConfig,Zt=0,Yn=null,yn=null,Dn=0,Bi=0,ga=cn(0),Bn=0,cl=null,Es=0,Lr=0,va=0,to=null,$n=null,hu=0,Uo=1/0;function ya(){Uo=Rn()+500}var fl=!1,An=null,cs=null,hl=!1,Ts=null,xa=0,_a=0,no=null,En=-1,Gn=0;function fn(){return(Zt&6)!==0?Rn():En!==-1?En:En=Rn()}function fs(c){return(c.mode&1)===0?1:(Zt&2)!==0&&Dn!==0?Dn&-Dn:Po.transition!==null?(Gn===0&&(c=ns,ns<<=1,(ns&4194240)===0&&(ns=64),Gn=c),Gn):(c=Ft,c!==0?c:Ue())}function Gi(c,h,y){if(50<_a)throw _a=0,no=null,Error(a(185));var b=Bo(c,h);return b===null?null:(Gr(b,h,y),((Zt&2)===0||b!==Yn)&&(b===Yn&&((Zt&2)===0&&(Lr|=h),Bn===4&&Ii(b,Dn)),dr(b,y),h===1&&Zt===0&&(c.mode&1)===0&&(ya(),Ss&&zi())),b)}function Bo(c,h){c.lanes|=h;var y=c.alternate;for(y!==null&&(y.lanes|=h),y=c,c=c.return;c!==null;)c.childLanes|=h,y=c.alternate,y!==null&&(y.childLanes|=h),y=c,c=c.return;return y.tag===3?y.stateNode:null}function dr(c,h){var y=c.callbackNode;Xa(c,h);var b=bo(c,c===Yn?Dn:0);if(b===0)y!==null&&_s(y),c.callbackNode=null,c.callbackPriority=0;else if(h=b&-b,c.callbackPriority!==h){if(y!=null&&_s(y),h===1)c.tag===0?Ao(Rr.bind(null,c)):Qo(Rr.bind(null,c)),Ie?Qe(function(){Zt===0&&zi()}):Mr(rs,zi),y=null;else{switch(Vr(b)){case 1:y=rs;break;case 4:y=cc;break;case 16:y=Oi;break;case 536870912:y=Eo;break;default:y=Oi}y=Vc(y,Ri.bind(null,c))}c.callbackPriority=h,c.callbackNode=y}}function Ri(c,h){if(En=-1,Gn=0,(Zt&6)!==0)throw Error(a(327));var y=c.callbackNode;if(Cs()&&c.callbackNode!==y)return null;var b=bo(c,c===Yn?Dn:0);if(b===0)return null;if((b&30)!==0||(b&c.expiredLanes)!==0||h)h=gu(c,b);else{h=b;var P=Zt;Zt|=2;var k=Th();(Yn!==c||Dn!==h)&&(ya(),io(c,h));do try{wp();break}catch(pe){Eh(c,pe)}while(!0);gi(),fu.current=k,Zt=P,yn!==null?h=0:(Yn=null,Dn=0,h=Bn)}if(h!==0){if(h===2&&(P=xs(c),P!==0&&(b=P,h=du(c,P))),h===1)throw y=cl,io(c,0),Ii(c,b),dr(c,Rn()),y;if(h===6)Ii(c,b);else{if(P=c.current.alternate,(b&30)===0&&!bh(P)&&(h=gu(c,b),h===2&&(k=xs(c),k!==0&&(b=k,h=du(c,k))),h===1))throw y=cl,io(c,0),Ii(c,b),dr(c,Rn()),y;switch(c.finishedWork=P,c.finishedLanes=b,h){case 0:case 1:throw Error(a(345));case 2:hs(c,$n);break;case 3:if(Ii(c,b),(b&130023424)===b&&(h=hu+500-Rn(),10<h)){if(bo(c,0)!==0)break;if(P=c.suspendedLanes,(P&b)!==b){fn(),c.pingedLanes|=c.suspendedLanes&P;break}c.timeoutHandle=ue(hs.bind(null,c,$n),h);break}hs(c,$n);break;case 4:if(Ii(c,b),(b&4194240)===b)break;for(h=c.eventTimes,P=-1;0<b;){var $=31-lr(b);k=1<<$,$=h[$],$>P&&(P=$),b&=~k}if(b=P,b=Rn()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*Mh(b/1960))-b,10<b){c.timeoutHandle=ue(hs.bind(null,c,$n),b);break}hs(c,$n);break;case 5:hs(c,$n);break;default:throw Error(a(329))}}}return dr(c,Rn()),c.callbackNode===y?Ri.bind(null,c):null}function du(c,h){var y=to;return c.current.memoizedState.isDehydrated&&(io(c,h).flags|=256),c=gu(c,h),c!==2&&(h=$n,$n=y,h!==null&&pu(h)),c}function pu(c){$n===null?$n=c:$n.push.apply($n,c)}function bh(c){for(var h=c;;){if(h.flags&16384){var y=h.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var b=0;b<y.length;b++){var P=y[b],k=P.getSnapshot;P=P.value;try{if(!di(k(),P))return!1}catch{return!1}}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ii(c,h){for(h&=~va,h&=~Lr,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var y=31-lr(h),b=1<<y;c[y]=-1,h&=~b}}function Rr(c){if((Zt&6)!==0)throw Error(a(327));Cs();var h=bo(c,0);if((h&1)===0)return dr(c,Rn()),null;var y=gu(c,h);if(c.tag!==0&&y===2){var b=xs(c);b!==0&&(h=b,y=du(c,b))}if(y===1)throw y=cl,io(c,0),Ii(c,h),dr(c,Rn()),y;if(y===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,hs(c,$n),dr(c,Rn()),null}function dl(c){Ts!==null&&Ts.tag===0&&(Zt&6)===0&&Cs();var h=Zt;Zt|=1;var y=vn.transition,b=Ft;try{if(vn.transition=null,Ft=1,c)return c()}finally{Ft=b,vn.transition=y,Zt=h,(Zt&6)===0&&zi()}}function mu(){Bi=ga.current,Dt(ga)}function io(c,h){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==we&&(c.timeoutHandle=we,me(y)),yn!==null)for(y=yn.return;y!==null;){var b=y;switch($f(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Ji();break;case 3:el(),Dt(Qn),Dt(Fn),na();break;case 5:nh(b);break;case 4:el();break;case 13:Dt(On);break;case 19:Dt(On);break;case 10:Kn(b.type._context);break;case 22:case 23:mu()}y=y.return}if(Yn=c,yn=c=ro(c.current,null),Dn=Bi=h,Bn=0,cl=null,va=Lr=Es=0,$n=to=null,Ki!==null){for(h=0;h<Ki.length;h++)if(y=Ki[h],b=y.interleaved,b!==null){y.interleaved=null;var P=b.next,k=y.pending;if(k!==null){var $=k.next;k.next=P,b.next=$}y.pending=b}Ki=null}return c}function Eh(c,h){do{var y=yn;try{if(gi(),Yl.current=sl,Sc){for(var b=zn.memoizedState;b!==null;){var P=b.queue;P!==null&&(P.pending=null),b=b.next}Sc=!1}if(ia=0,yi=vi=zn=null,ws=!1,ra=0,us.current=null,y===null||y.return===null){Bn=1,cl=h,yn=null;break}e:{var k=c,$=y.return,pe=y,ze=h;if(h=Dn,pe.flags|=32768,ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var ot=ze,xt=pe,Ut=xt.tag;if((xt.mode&1)===0&&(Ut===0||Ut===11||Ut===15)){var Pt=xt.alternate;Pt?(xt.updateQueue=Pt.updateQueue,xt.memoizedState=Pt.memoizedState,xt.lanes=Pt.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var Qt=hh($);if(Qt!==null){Qt.flags&=-257,oa(Qt,$,pe,k,h),Qt.mode&1&&Ys(k,ot,h),h=Qt,ze=ot;var gt=h.updateQueue;if(gt===null){var Di=new Set;Di.add(ze),h.updateQueue=Di}else gt.add(ze);break e}else{if((h&1)===0){Ys(k,ot,h),Gc();break e}ze=Error(a(426))}}else if(In&&pe.mode&1){var Dr=hh($);if(Dr!==null){(Dr.flags&65536)===0&&(Dr.flags|=256),oa(Dr,$,pe,k,h),yc(ze);break e}}k=ze,Bn!==4&&(Bn=2),to===null?to=[k]:to.push(k),ze=fh(ze,pe),pe=$;do{switch(pe.tag){case 3:pe.flags|=65536,h&=-h,pe.lanes|=h;var Ee=xp(pe,ze,h);hc(pe,Ee);break e;case 1:k=ze;var ve=pe.type,De=pe.stateNode;if((pe.flags&128)===0&&(typeof ve.getDerivedStateFromError=="function"||De!==null&&typeof De.componentDidCatch=="function"&&(cs===null||!cs.has(De)))){pe.flags|=65536,h&=-h,pe.lanes|=h;var pt=Rc(pe,k,h);hc(pe,pt);break e}}pe=pe.return}while(pe!==null)}Ah(y)}catch(Et){h=Et,yn===y&&y!==null&&(yn=y=y.return);continue}break}while(!0)}function Th(){var c=fu.current;return fu.current=sl,c===null?sl:c}function Gc(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Yn===null||(Es&268435455)===0&&(Lr&268435455)===0||Ii(Yn,Dn)}function gu(c,h){var y=Zt;Zt|=2;var b=Th();Yn===c&&Dn===h||io(c,h);do try{Sp();break}catch(P){Eh(c,P)}while(!0);if(gi(),Zt=y,fu.current=b,yn!==null)throw Error(a(261));return Yn=null,Dn=0,Bn}function Sp(){for(;yn!==null;)Ch(yn)}function wp(){for(;yn!==null&&!Wr();)Ch(yn)}function Ch(c){var h=Rh(c.alternate,c,Bi);c.memoizedProps=c.pendingProps,h===null?Ah(c):yn=h,us.current=null}function Ah(c){var h=c;do{var y=h.alternate;if(c=h.return,(h.flags&32768)===0){if(y=kc(y,h,Bi),y!==null){yn=y;return}}else{if(y=Oc(y,h),y!==null){y.flags&=32767,yn=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Bn=6,yn=null;return}}if(h=h.sibling,h!==null){yn=h;return}yn=h=c}while(h!==null);Bn===0&&(Bn=5)}function hs(c,h){var y=Ft,b=vn.transition;try{vn.transition=null,Ft=1,Mp(c,h,y)}finally{vn.transition=b,Ft=y}return null}function Mp(c,h,y){do Cs();while(Ts!==null);if((Zt&6)!==0)throw Error(a(327));var b=c.finishedWork,P=c.finishedLanes;if(b===null)return null;if(c.finishedWork=null,c.finishedLanes=0,b===c.current)throw Error(a(177));c.callbackNode=null,c.callbackPriority=0;var k=b.lanes|b.childLanes;if(is(c,k),c===Yn&&(yn=Yn=null,Dn=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||hl||(hl=!0,Vc(Oi,function(){return Cs(),null})),k=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||k){k=vn.transition,vn.transition=null;var $=Ft;Ft=1;var pe=Zt;Zt|=4,us.current=null,vh(c,b),Hg(c,b),Y(c.containerInfo),c.current=b,ou(b),uc(),Zt=pe,Ft=$,vn.transition=k}else c.current=b;if(hl&&(hl=!1,Ts=c,xa=P),k=c.pendingLanes,k===0&&(cs=null),Os(b.stateNode),dr(c,Rn()),h!==null)for(y=c.onRecoverableError,b=0;b<h.length;b++)y(h[b]);if(fl)throw fl=!1,c=An,An=null,c;return(xa&1)!==0&&c.tag!==0&&Cs(),k=c.pendingLanes,(k&1)!==0?c===no?_a++:(_a=0,no=c):_a=0,zi(),null}function Cs(){if(Ts!==null){var c=Vr(xa),h=vn.transition,y=Ft;try{if(vn.transition=null,Ft=16>c?16:c,Ts===null)var b=!1;else{if(c=Ts,Ts=null,xa=0,(Zt&6)!==0)throw Error(a(331));var P=Zt;for(Zt|=4,ft=c.current;ft!==null;){var k=ft,$=k.child;if((ft.flags&16)!==0){var pe=k.deletions;if(pe!==null){for(var ze=0;ze<pe.length;ze++){var ot=pe[ze];for(ft=ot;ft!==null;){var xt=ft;switch(xt.tag){case 0:case 11:case 15:Ks(8,xt,k)}var Ut=xt.child;if(Ut!==null)Ut.return=xt,ft=Ut;else for(;ft!==null;){xt=ft;var Pt=xt.sibling,Qt=xt.return;if(yh(xt),xt===ot){ft=null;break}if(Pt!==null){Pt.return=Qt,ft=Pt;break}ft=Qt}}}var gt=k.alternate;if(gt!==null){var Di=gt.child;if(Di!==null){gt.child=null;do{var Dr=Di.sibling;Di.sibling=null,Di=Dr}while(Di!==null)}}ft=k}}if((k.subtreeFlags&2064)!==0&&$!==null)$.return=k,ft=$;else e:for(;ft!==null;){if(k=ft,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:Ks(9,k,k.return)}var Ee=k.sibling;if(Ee!==null){Ee.return=k.return,ft=Ee;break e}ft=k.return}}var ve=c.current;for(ft=ve;ft!==null;){$=ft;var De=$.child;if(($.subtreeFlags&2064)!==0&&De!==null)De.return=$,ft=De;else e:for($=ve;ft!==null;){if(pe=ft,(pe.flags&2048)!==0)try{switch(pe.tag){case 0:case 11:case 15:Li(9,pe)}}catch(Et){ir(pe,pe.return,Et)}if(pe===$){ft=null;break e}var pt=pe.sibling;if(pt!==null){pt.return=pe.return,ft=pt;break e}ft=pe.return}}if(Zt=P,zi(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(To,c)}catch{}b=!0}return b}finally{Ft=y,vn.transition=h}}return!1}function vu(c,h,y){h=fh(y,h),h=xp(c,h,1),Lo(c,h),h=fn(),c=Bo(c,1),c!==null&&(Gr(c,1,h),dr(c,h))}function ir(c,h,y){if(c.tag===3)vu(c,c,y);else for(;h!==null;){if(h.tag===3){vu(h,c,y);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(cs===null||!cs.has(b))){c=fh(y,c),c=Rc(h,c,1),Lo(h,c),c=fn(),h=Bo(h,1),h!==null&&(Gr(h,1,c),dr(h,c));break}}h=h.return}}function Ph(c,h,y){var b=c.pingCache;b!==null&&b.delete(h),h=fn(),c.pingedLanes|=c.suspendedLanes&y,Yn===c&&(Dn&y)===y&&(Bn===4||Bn===3&&(Dn&130023424)===Dn&&500>Rn()-hu?io(c,0):va|=y),dr(c,h)}function Lh(c,h){h===0&&((c.mode&1)===0?h=1:(h=rn,rn<<=1,(rn&130023424)===0&&(rn=4194304)));var y=fn();c=Bo(c,h),c!==null&&(Gr(c,h,y),dr(c,y))}function bp(c){var h=c.memoizedState,y=0;h!==null&&(y=h.retryLane),Lh(c,y)}function Ep(c,h){var y=0;switch(c.tag){case 13:var b=c.stateNode,P=c.memoizedState;P!==null&&(y=P.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(a(314))}b!==null&&b.delete(h),Lh(c,y)}var Rh;Rh=function(c,h,y){if(c!==null)if(c.memoizedProps!==h.pendingProps||Qn.current)_i=!0;else{if((c.lanes&y)===0&&(h.flags&128)===0)return _i=!1,Nc(c,h,y);_i=(c.flags&131072)!==0}else _i=!1,In&&(h.flags&1048576)!==0&&fp(h,gc,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),c=h.pendingProps;var P=Zi(h,Fn.current);jn(h,y),P=tl(null,h,b,c,P,y);var k=ko();return h.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Hn(b)?(k=!0,wo(h)):k=!1,h.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,Ya(h),P.updater=pc,h.stateNode=P,P._reactInternals=h,Qf(h,b,c,y),h=Ui(null,h,b,!0,k,y)):(h.tag=0,In&&k&&Kf(h),Un(null,h,P,y),h=h.child),h;case 16:b=h.elementType;e:{switch(c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),c=h.pendingProps,P=b._init,b=P(b._payload),h.type=b,P=h.tag=jg(b),c=mi(b,c),P){case 0:h=Js(null,h,b,c,y);break e;case 1:h=la(null,h,b,c,y);break e;case 11:h=bn(null,h,b,c,y);break e;case 14:h=_n(null,h,b,mi(b.type,c),y);break e}throw Error(a(306,b,""))}return h;case 0:return b=h.type,P=h.pendingProps,P=h.elementType===b?P:mi(b,P),Js(c,h,b,P,y);case 1:return b=h.type,P=h.pendingProps,P=h.elementType===b?P:mi(b,P),la(c,h,b,P,y);case 3:e:{if(nu(h),c===null)throw Error(a(387));b=h.pendingProps,k=h.memoizedState,P=k.element,qf(c,h),dc(h,b,null,y);var $=h.memoizedState;if(b=$.element,be&&k.isDehydrated)if(k={element:b,isDehydrated:!1,cache:$.cache,transitions:$.transitions},h.updateQueue.baseState=k,h.memoizedState=k,h.flags&256){P=Error(a(423)),h=ph(c,h,b,y,P);break e}else if(b!==P){P=Error(a(424)),h=ph(c,h,b,y,P);break e}else for(be&&(Ai=Ne(h.stateNode.containerInfo),$i=h,In=!0,Yr=null,Za=!1),y=pp(h,null,b,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ja(),b===P){h=hr(c,h,y);break e}Un(c,h,b,y)}h=h.child}return h;case 5:return mp(h),c===null&&Io(h),b=h.type,P=h.pendingProps,k=c!==null?c.memoizedProps:null,$=P.children,Z(b,P)?$=null:k!==null&&Z(b,k)&&(h.flags|=32),er(c,h),Un(c,h,$,y),h.child;case 6:return c===null&&Io(h),null;case 13:return mh(c,h,y);case 4:return xc(h,h.stateNode.containerInfo),b=h.pendingProps,c===null?h.child=js(h,null,b,y):Un(c,h,b,y),h.child;case 11:return b=h.type,P=h.pendingProps,P=h.elementType===b?P:mi(b,P),bn(c,h,b,P,y);case 7:return Un(c,h,h.pendingProps,y),h.child;case 8:return Un(c,h,h.pendingProps.children,y),h.child;case 12:return Un(c,h,h.pendingProps.children,y),h.child;case 10:e:{if(b=h.type._context,P=h.pendingProps,k=h.memoizedProps,$=P.value,Gs(h,b,$),k!==null)if(di(k.value,$)){if(k.children===P.children&&!Qn.current){h=hr(c,h,y);break e}}else for(k=h.child,k!==null&&(k.return=h);k!==null;){var pe=k.dependencies;if(pe!==null){$=k.child;for(var ze=pe.firstContext;ze!==null;){if(ze.context===b){if(k.tag===1){ze=Vs(-1,y&-y),ze.tag=2;var ot=k.updateQueue;if(ot!==null){ot=ot.shared;var xt=ot.pending;xt===null?ze.next=ze:(ze.next=xt.next,xt.next=ze),ot.pending=ze}}k.lanes|=y,ze=k.alternate,ze!==null&&(ze.lanes|=y),oi(k.return,y,h),pe.lanes|=y;break}ze=ze.next}}else if(k.tag===10)$=k.type===h.type?null:k.child;else if(k.tag===18){if($=k.return,$===null)throw Error(a(341));$.lanes|=y,pe=$.alternate,pe!==null&&(pe.lanes|=y),oi($,y,h),$=k.sibling}else $=k.child;if($!==null)$.return=k;else for($=k;$!==null;){if($===h){$=null;break}if(k=$.sibling,k!==null){k.return=$.return,$=k;break}$=$.return}k=$}Un(c,h,P.children,y),h=h.child}return h;case 9:return P=h.type,b=h.pendingProps.children,jn(h,y),P=Nn(P),b=b(P),h.flags|=1,Un(c,h,b,y),h.child;case 14:return b=h.type,P=mi(b,h.pendingProps),P=mi(b.type,P),_n(c,h,b,P,y);case 15:return Zs(c,h,h.type,h.pendingProps,y);case 17:return b=h.type,P=h.pendingProps,P=h.elementType===b?P:mi(b,P),c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Hn(b)?(c=!0,wo(h)):c=!1,jn(h,y),up(h,b,P),Qf(h,b,P,y),Ui(null,h,b,!0,c,y);case 19:return ca(c,h,y);case 22:return Pi(c,h,y)}throw Error(a(156,h.tag))};function Vc(c,h){return Mr(c,h)}function Tp(c,h,y,b){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(c,h,y,b){return new Tp(c,h,y,b)}function Wc(c){return c=c.prototype,!(!c||!c.isReactComponent)}function jg(c){if(typeof c=="function")return Wc(c)?1:0;if(c!=null){if(c=c.$$typeof,c===w)return 11;if(c===E)return 14}return 2}function ro(c,h){var y=c.alternate;return y===null?(y=Ir(c.tag,h,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=h,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,h=c.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function Hc(c,h,y,b,P,k){var $=2;if(b=c,typeof c=="function")Wc(c)&&($=1);else if(typeof c=="string")$=5;else e:switch(c){case p:return Sa(y.children,P,k,h);case g:$=8,P|=8;break;case v:return c=Ir(12,y,h,P|2),c.elementType=v,c.lanes=k,c;case S:return c=Ir(13,y,h,P),c.elementType=S,c.lanes=k,c;case C:return c=Ir(19,y,h,P),c.elementType=C,c.lanes=k,c;case L:return yu(y,P,k,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:$=10;break e;case M:$=9;break e;case w:$=11;break e;case E:$=14;break e;case A:$=16,b=null;break e}throw Error(a(130,c==null?c:typeof c,""))}return h=Ir($,y,h,P),h.elementType=c,h.type=b,h.lanes=k,h}function Sa(c,h,y,b){return c=Ir(7,c,b,h),c.lanes=y,c}function yu(c,h,y,b){return c=Ir(22,c,b,h),c.elementType=L,c.lanes=y,c.stateNode={},c}function jc(c,h,y){return c=Ir(6,c,null,h),c.lanes=y,c}function Xc(c,h,y){return h=Ir(4,c.children!==null?c.children:[],c.key,h),h.lanes=y,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function Yc(c,h,y,b,P){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=we,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jo(0),this.expirationTimes=Jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jo(0),this.identifierPrefix=b,this.onRecoverableError=P,be&&(this.mutableSourceEagerHydrationData=null)}function Cp(c,h,y,b,P,k,$,pe,ze){return c=new Yc(c,h,y,pe,ze),h===1?(h=1,k===!0&&(h|=8)):h=0,k=Ir(3,null,null,h),c.current=k,k.stateNode=c,k.memoizedState={element:b,isDehydrated:y,cache:null,transitions:null},Ya(k),c}function Ap(c){if(!c)return nn;c=c._reactInternals;e:{if(z(c)!==c||c.tag!==1)throw Error(a(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Hn(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(a(171))}if(c.tag===1){var y=c.type;if(Hn(y))return Ha(c,y,h)}return h}function Pp(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=X(h),c===null?null:c.stateNode}function Jr(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<h?y:h}}function xu(c,h){Jr(c,h),(c=c.alternate)&&Jr(c,h)}function qc(c){return c=X(c),c===null?null:c.stateNode}function Lp(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var h=fn();Gi(c,134217728,h),xu(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var h=fn(),y=fs(c);Gi(c,y,h),xu(c,y)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var y=ys(h.pendingLanes);y!==0&&(Ci(h,y|1),dr(h,Rn()),(Zt&6)===0&&(ya(),zi()))}break;case 13:var b=fn();dl(function(){return Gi(c,1,b)}),xu(c,1)}},t.batchedUpdates=function(c,h){var y=Zt;Zt|=1;try{return c(h)}finally{Zt=y,Zt===0&&(ya(),Ss&&zi())}},t.createComponentSelector=function(c){return{$$typeof:lu,value:c}},t.createContainer=function(c,h,y,b,P,k,$){return Cp(c,h,!1,null,y,b,P,k,$)},t.createHasPseudoClassSelector=function(c){return{$$typeof:da,value:c}},t.createHydrationContainer=function(c,h,y,b,P,k,$,pe,ze){return c=Cp(y,b,!0,c,P,k,$,pe,ze),c.context=Ap(null),y=c.current,b=fn(),P=fs(y),k=Vs(b,P),k.callback=h??null,Lo(y,k),c.current.lanes=P,Gr(c,P,b),dr(c,b),c},t.createPortal=function(c,h,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:b==null?null:""+b,children:c,containerInfo:h,implementation:y}},t.createRoleSelector=function(c){return{$$typeof:pa,value:c}},t.createTestNameSelector=function(c){return{$$typeof:$s,value:c}},t.createTextSelector=function(c){return{$$typeof:ul,value:c}},t.deferredUpdates=function(c){var h=Ft,y=vn.transition;try{return vn.transition=null,Ft=16,c()}finally{Ft=h,vn.transition=y}},t.discreteUpdates=function(c,h,y,b,P){var k=Ft,$=vn.transition;try{return vn.transition=null,Ft=1,c(h,y,b,P)}finally{Ft=k,vn.transition=$,Zt===0&&ya()}},t.findAllNodes=eo,t.findBoundingRects=function(c,h){if(!tt)throw Error(a(363));h=eo(c,h),c=[];for(var y=0;y<h.length;y++)c.push(W(h[y]));for(h=c.length-1;0<h;h--){y=c[h];for(var b=y.x,P=b+y.width,k=y.y,$=k+y.height,pe=h-1;0<=pe;pe--)if(h!==pe){var ze=c[pe],ot=ze.x,xt=ot+ze.width,Ut=ze.y,Pt=Ut+ze.height;if(b>=ot&&k>=Ut&&P<=xt&&$<=Pt){c.splice(h,1);break}else if(b!==ot||y.width!==ze.width||Pt<k||Ut>$){if(!(k!==Ut||y.height!==ze.height||xt<b||ot>P)){ot>b&&(ze.width+=ot-b,ze.x=b),xt<P&&(ze.width=P-ot),c.splice(h,1);break}}else{Ut>k&&(ze.height+=Ut-k,ze.y=k),Pt<$&&(ze.height=$-Ut),c.splice(h,1);break}}}return c},t.findHostInstance=Pp,t.findHostInstanceWithNoPortals=function(c){return c=te(c),c=c!==null?q(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return Pp(c)},t.flushControlled=function(c){var h=Zt;Zt|=1;var y=vn.transition,b=Ft;try{vn.transition=null,Ft=1,c()}finally{Ft=b,vn.transition=y,Zt=h,Zt===0&&(ya(),zi())}},t.flushPassiveEffects=Cs,t.flushSync=dl,t.focusWithin=function(c,h){if(!tt)throw Error(a(363));for(c=uu(c),h=Pr(c,h),h=Array.from(h),c=0;c<h.length;){var y=h[c++];if(!fe(y)){if(y.tag===5&&je(y.stateNode))return!0;for(y=y.child;y!==null;)h.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ft},t.getFindAllNodesFailureDescription=function(c,h){if(!tt)throw Error(a(363));var y=0,b=[];c=[uu(c),0];for(var P=0;P<c.length;){var k=c[P++],$=c[P++],pe=h[$];if((k.tag!==5||!fe(k))&&(cu(k,pe)&&(b.push(zo(pe)),$++,$>y&&(y=$)),$<h.length))for(k=k.child;k!==null;)c.push(k,$),k=k.sibling}if(y<h.length){for(c=[];y<h.length;y++)c.push(zo(h[y]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ce(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:qc,findFiberByHostInstance:c.findFiberByHostInstance||Lp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)c=!0;else{try{To=h.inject(c),br=h}catch{}c=!!h.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,h,y,b){if(!tt)throw Error(a(363));c=eo(c,h);var P=Ye(c,y,b).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(c,h){var y=h._getVersion;y=y(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,y]:c.mutableSourceEagerHydrationData.push(h,y)},t.runWithPriority=function(c,h){var y=Ft;try{return Ft=c,h()}finally{Ft=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,h,y,b){var P=h.current,k=fn(),$=fs(P);return y=Ap(y),h.context===null?h.context=y:h.pendingContext=y,h=Vs(k,$),h.payload={element:c},b=b===void 0?null:b,b!==null&&(h.callback=b),Lo(P,h),c=Gi(P,$,k),c!==null&&fc(c,P,$),$},t}),iv}var z_;function VR(){return z_||(z_=1,ev.exports=GR()),ev.exports}var WR=VR();const HR=g3(WR);var U_=UM();const jR=o=>typeof o=="object"&&typeof o.then=="function",Om=[];function XR(o,e,t=(n,i)=>n===i){if(o===e)return!0;if(!o||!e)return!1;const n=o.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(o[i],e[i]))return!1;return!0}function YR(o,e=null,t=!1,n={}){e===null&&(e=[o]);for(const r of Om)if(XR(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const i={keys:e,equal:n.equal,remove:()=>{const r=Om.indexOf(i);r!==-1&&Om.splice(r,1)},promise:(jR(o)?o:o(...e)).then(r=>{i.response=r,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(r=>i.error=r)};if(Om.push(i),!t)throw i.promise}const qR=(o,e,t)=>YR(o,e,!1,t),ox={},ZR=o=>void Object.assign(ox,o);function JR(o,e){function t(p,{args:g=[],attach:v,...x},M){let w=`${p[0].toUpperCase()}${p.slice(1)}`,S;if(p==="primitive"){if(x.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const C=x.object;S=Sf(C,{type:p,root:M,attach:v,primitive:!0})}else{const C=ox[w];if(!C)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");S=Sf(new C(...g),{type:p,root:M,attach:v,memoizedProps:{args:g}})}return S.__r3f.attach===void 0&&(S instanceof $t?S.__r3f.attach="geometry":S instanceof ar&&(S.__r3f.attach="material")),w!=="inject"&&ov(S,x),S}function n(p,g){let v=!1;if(g){var x,M;(x=g.__r3f)!=null&&x.attach?sv(p,g,g.__r3f.attach):g.isObject3D&&p.isObject3D&&(p.add(g),v=!0),v||(M=p.__r3f)==null||M.objects.push(g),g.__r3f||Sf(g,{}),g.__r3f.parent=p,ly(g),wf(g)}}function i(p,g,v){let x=!1;if(g){var M,w;if((M=g.__r3f)!=null&&M.attach)sv(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){g.parent=p,g.dispatchEvent({type:"added"});const S=p.children.filter(E=>E!==g),C=S.indexOf(v);p.children=[...S.slice(0,C),g,...S.slice(C)],x=!0}x||(w=p.__r3f)==null||w.objects.push(g),g.__r3f||Sf(g,{}),g.__r3f.parent=p,ly(g),wf(g)}}function r(p,g,v=!1){p&&[...p].forEach(x=>a(g,x,v))}function a(p,g,v){if(g){var x,M,w;if(g.__r3f&&(g.__r3f.parent=null),(x=p.__r3f)!=null&&x.objects&&(p.__r3f.objects=p.__r3f.objects.filter(L=>L!==g)),(M=g.__r3f)!=null&&M.attach)H_(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){var S;p.remove(g),(S=g.__r3f)!=null&&S.root&&iI(g.__r3f.root,g)}const E=(w=g.__r3f)==null?void 0:w.primitive,A=v===void 0?g.dispose!==null&&!E:v;if(!E){var C;r((C=g.__r3f)==null?void 0:C.objects,g,A),r(g.children,g,A)}delete g.__r3f,A&&g.dispose&&g.type!=="Scene"&&U_.unstable_scheduleCallback(U_.unstable_IdlePriority,()=>{try{g.dispose()}catch{}}),wf(p)}}function l(p,g,v,x){var M;const w=(M=p.__r3f)==null?void 0:M.parent;if(!w)return;const S=t(g,v,p.__r3f.root);if(p.children){for(const C of p.children)C.__r3f&&n(S,C);p.children=p.children.filter(C=>!C.__r3f)}p.__r3f.objects.forEach(C=>n(S,C)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||a(w,p),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),n(w,S),S.raycast&&S.__r3f.eventCount&&S.__r3f.root.getState().internal.interaction.push(S),[x,x.alternate].forEach(C=>{C!==null&&(C.stateNode=S,C.ref&&(typeof C.ref=="function"?C.ref(S):C.ref.current=S))})}const f=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:HR({createInstance:t,removeChild:a,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,g)=>{if(!g)return;const v=p.getState().scene;v.__r3f&&(v.__r3f.root=p,n(v,g))},removeChildFromContainer:(p,g)=>{g&&a(p.getState().scene,g)},insertInContainerBefore:(p,g,v)=>{if(!g||!v)return;const x=p.getState().scene;x.__r3f&&i(x,g,v)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var g;return!!((g=p==null?void 0:p.__r3f)!=null?g:{}).handlers},prepareUpdate(p,g,v,x){var M;if(((M=p==null?void 0:p.__r3f)!=null?M:{}).primitive&&x.object&&x.object!==p)return[!0];{const{args:S=[],children:C,...E}=x,{args:A=[],children:L,...D}=v;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((B,I)=>B!==A[I]))return[!0];const F=XM(p,E,D,!0);return F.changes.length?[!1,F]:null}},commitUpdate(p,[g,v],x,M,w,S){g?l(p,x,w,S):ov(p,v)},commitMount(p,g,v,x){var M;const w=(M=p.__r3f)!=null?M:{};p.raycast&&w.handlers&&w.eventCount&&p.__r3f.root.getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>Sf(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var g;const{attach:v,parent:x}=(g=p.__r3f)!=null?g:{};v&&x&&H_(x,p,v),p.isObject3D&&(p.visible=!1),wf(p)},unhideInstance(p,g){var v;const{attach:x,parent:M}=(v=p.__r3f)!=null?v:{};x&&M&&sv(M,p,x),(p.isObject3D&&g.visible==null||g.visible)&&(p.visible=!0),wf(p)},createTextInstance:f,hideTextInstance:f,unhideTextInstance:f,getCurrentEventPriority:()=>e?e():Cf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Vn.fun(performance.now)?performance.now:Vn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Vn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Vn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ov}}var B_,G_;const rv=o=>"colorSpace"in o||"outputColorSpace"in o,BM=()=>{var o;return(o=ox.ColorManagement)!=null?o:null},GM=o=>o&&o.isOrthographicCamera,QR=o=>o&&o.hasOwnProperty("current"),np=typeof window<"u"&&((B_=window.document)!=null&&B_.createElement||((G_=window.navigator)==null?void 0:G_.product)==="ReactNative")?We.useLayoutEffect:We.useEffect;function VM(o){const e=We.useRef(o);return np(()=>void(e.current=o),[o]),e}function KR({set:o}){return np(()=>(o(new Promise(()=>null)),()=>o(!1)),[o]),null}class WM extends We.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}WM.getDerivedStateFromError=()=>({error:!0});const HM="__default",V_=new Map,$R=o=>o&&!!o.memoized&&!!o.changes;function jM(o){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(o)?Math.min(Math.max(o[0],t),o[1]):o}const Kh=o=>{var e;return(e=o.__r3f)==null?void 0:e.root.getState()},Vn={obj:o=>o===Object(o)&&!Vn.arr(o)&&typeof o!="function",fun:o=>typeof o=="function",str:o=>typeof o=="string",num:o=>typeof o=="number",boo:o=>typeof o=="boolean",und:o=>o===void 0,arr:o=>Array.isArray(o),equ(o,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof o!=typeof e||!!o!=!!e)return!1;if(Vn.str(o)||Vn.num(o))return o===e;const r=Vn.obj(o);if(r&&n==="reference")return o===e;const a=Vn.arr(o);if(a&&t==="reference")return o===e;if((a||r)&&o===e)return!0;let l;for(l in o)if(!(l in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(l in i?e:o)if(!Vn.equ(o[l],e[l],{strict:i,objects:"reference"}))return!1}else for(l in i?e:o)if(o[l]!==e[l])return!1;if(Vn.und(l)){if(a&&o.length===0&&e.length===0||r&&Object.keys(o).length===0&&Object.keys(e).length===0)return!0;if(o!==e)return!1}return!0}};function eI(o){o.dispose&&o.type!=="Scene"&&o.dispose();for(const e in o)e.dispose==null||e.dispose(),delete o[e]}function Sf(o,e){const t=o;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},o}function ay(o,e){let t=o;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((r,a)=>r[a],o),{target:t,key:i}}else return{target:t,key:e}}const W_=/-\d+$/;function sv(o,e,t){if(Vn.str(t)){if(W_.test(t)){const r=t.replace(W_,""),{target:a,key:l}=ay(o,r);Array.isArray(a[l])||(a[l]=[])}const{target:n,key:i}=ay(o,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(o,e)}function H_(o,e,t){var n,i;if(Vn.str(t)){const{target:r,key:a}=ay(o,t),l=e.__r3f.previousAttach;l===void 0?delete r[a]:r[a]=l}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(o,e);(i=e.__r3f)==null||delete i.previousAttach}function XM(o,{children:e,key:t,ref:n,...i},{children:r,key:a,ref:l,...f}={},d=!1){var p;const g=(p=o==null?void 0:o.__r3f)!=null?p:{},v=Object.entries(i),x=[];if(d){const w=Object.keys(f);for(let S=0;S<w.length;S++)i.hasOwnProperty(w[S])||v.unshift([w[S],HM+"remove"])}v.forEach(([w,S])=>{var C;if((C=o.__r3f)!=null&&C.primitive&&w==="object"||Vn.equ(S,f[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return x.push([w,S,!0,[]]);let E=[];w.includes("-")&&(E=w.split("-")),x.push([w,S,!1,E]);for(const A in i){const L=i[A];A.startsWith(`${w}-`)&&x.push([A,L,!1,A.split("-")])}});const M={...i};return g.memoizedProps&&g.memoizedProps.args&&(M.args=g.memoizedProps.args),g.memoizedProps&&g.memoizedProps.attach&&(M.attach=g.memoizedProps.attach),{memoized:M,changes:x}}function ov(o,e){var t,n,i;const r=(t=o.__r3f)!=null?t:{},a=r.root,l=(n=a==null||a.getState==null?void 0:a.getState())!=null?n:{},{memoized:f,changes:d}=$R(e)?e:XM(o,e),p=r.eventCount;o.__r3f&&(o.__r3f.memoizedProps=f);for(let v=0;v<d.length;v++){let[x,M,w,S]=d[v];if(rv(o)){const L="srgb",D="srgb-linear";x==="encoding"?(x="colorSpace",M=M===3001?L:D):x==="outputEncoding"&&(x="outputColorSpace",M=M===3001?L:D)}let C=o,E=C[x];if(S.length&&(E=S.reduce((A,L)=>A[L],o),!(E&&E.set))){const[A,...L]=S.reverse();C=L.reverse().reduce((D,F)=>D[F],o),x=A}if(M===HM+"remove")if(C.constructor){let A=V_.get(C.constructor);A||(A=new C.constructor,V_.set(C.constructor,A)),M=A[x]}else M=0;if(w)M?r.handlers[x]=M:delete r.handlers[x],r.eventCount=Object.keys(r.handlers).length;else if(E&&E.set&&(E.copy||E instanceof Zu)){if(Array.isArray(M))E.fromArray?E.fromArray(M):E.set(...M);else if(E.copy&&M&&M.constructor&&E.constructor===M.constructor)E.copy(M);else if(M!==void 0){const A=E instanceof vt;!A&&E.setScalar?E.setScalar(M):E instanceof Zu&&M instanceof Zu?E.mask=M.mask:E.set(M),!BM()&&!l.linear&&A&&E.convertSRGBToLinear()}}else if(C[x]=M,C[x]instanceof Jn&&C[x].format===es&&C[x].type===Oa){const A=C[x];rv(A)&&rv(l.gl)?A.colorSpace=l.gl.outputColorSpace:A.encoding=l.gl.outputEncoding}wf(o)}if(r.parent&&l.internal&&o.raycast&&p!==r.eventCount){const v=l.internal.interaction.indexOf(o);v>-1&&l.internal.interaction.splice(v,1),r.eventCount&&l.internal.interaction.push(o)}return!(d.length===1&&d[0][0]==="onUpdate")&&d.length&&(i=o.__r3f)!=null&&i.parent&&ly(o),o}function wf(o){var e,t;const n=(e=o.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function ly(o){o.onUpdate==null||o.onUpdate(o)}function tI(o,e){o.manual||(GM(o)?(o.left=e.width/-2,o.right=e.width/2,o.top=e.height/2,o.bottom=e.height/-2):o.aspect=e.width/e.height,o.updateProjectionMatrix(),o.updateMatrixWorld())}function zm(o){return(o.eventObject||o.object).uuid+"/"+o.index+o.instanceId}function nI(){var o;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Cf.DefaultEventPriority;switch((o=e.event)==null?void 0:o.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Cf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Cf.ContinuousEventPriority;default:return Cf.DefaultEventPriority}}function YM(o,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(o.delete(n),i.target.releasePointerCapture(n)))}function iI(o,e){const{internal:t}=o.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{YM(t.capturedMap,e,n,i)})}function rI(o){function e(f){const{internal:d}=o.getState(),p=f.offsetX-d.initialClick[0],g=f.offsetY-d.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function t(f){return f.filter(d=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=d.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function n(f,d){const p=o.getState(),g=new Set,v=[],x=d?d(p.internal.interaction):p.internal.interaction;for(let C=0;C<x.length;C++){const E=Kh(x[C]);E&&(E.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(f,p);function M(C){const E=Kh(C);if(!E||!E.events.enabled||E.raycaster.camera===null)return[];if(E.raycaster.camera===void 0){var A;E.events.compute==null||E.events.compute(f,E,(A=E.previousRoot)==null?void 0:A.getState()),E.raycaster.camera===void 0&&(E.raycaster.camera=null)}return E.raycaster.camera?E.raycaster.intersectObject(C,!0):[]}let w=x.flatMap(M).sort((C,E)=>{const A=Kh(C.object),L=Kh(E.object);return!A||!L?C.distance-E.distance:L.events.priority-A.events.priority||C.distance-E.distance}).filter(C=>{const E=zm(C);return g.has(E)?!1:(g.add(E),!0)});p.events.filter&&(w=p.events.filter(w,p));for(const C of w){let E=C.object;for(;E;){var S;(S=E.__r3f)!=null&&S.eventCount&&v.push({...C,eventObject:E}),E=E.parent}}if("pointerId"in f&&p.internal.capturedMap.has(f.pointerId))for(let C of p.internal.capturedMap.get(f.pointerId).values())g.has(zm(C.intersection))||v.push(C.intersection);return v}function i(f,d,p,g){const v=o.getState();if(f.length){const x={stopped:!1};for(const M of f){const w=Kh(M.object)||v,{raycaster:S,pointer:C,camera:E,internal:A}=w,L=new J(C.x,C.y,0).unproject(E),D=V=>{var te,X;return(te=(X=A.capturedMap.get(V))==null?void 0:X.has(M.eventObject))!=null?te:!1},F=V=>{const te={intersection:M,target:d.target};A.capturedMap.has(V)?A.capturedMap.get(V).set(M.eventObject,te):A.capturedMap.set(V,new Map([[M.eventObject,te]])),d.target.setPointerCapture(V)},B=V=>{const te=A.capturedMap.get(V);te&&YM(A.capturedMap,M.eventObject,te,V)};let I={};for(let V in d){let te=d[V];typeof te!="function"&&(I[V]=te)}let z={...M,...I,pointer:C,intersections:f,stopped:x.stopped,delta:p,unprojectedPoint:L,ray:S.ray,camera:E,stopPropagation(){const V="pointerId"in d&&A.capturedMap.get(d.pointerId);if((!V||V.has(M.eventObject))&&(z.stopped=x.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(te=>te.eventObject===M.eventObject))){const te=f.slice(0,f.indexOf(M));r([...te,M])}},target:{hasPointerCapture:D,setPointerCapture:F,releasePointerCapture:B},currentTarget:{hasPointerCapture:D,setPointerCapture:F,releasePointerCapture:B},nativeEvent:d};if(g(z),x.stopped===!0)break}}return f}function r(f){const{internal:d}=o.getState();for(const p of d.hovered.values())if(!f.length||!f.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const v=p.eventObject.__r3f,x=v==null?void 0:v.handlers;if(d.hovered.delete(zm(p)),v!=null&&v.eventCount){const M={...p,intersections:f};x.onPointerOut==null||x.onPointerOut(M),x.onPointerLeave==null||x.onPointerLeave(M)}}}function a(f,d){for(let p=0;p<d.length;p++){const g=d[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(f)}}function l(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return d=>{const{internal:p}=o.getState();"pointerId"in d&&p.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(d.pointerId)&&(p.capturedMap.delete(d.pointerId),r([]))})}}return function(p){const{onPointerMissed:g,internal:v}=o.getState();v.lastEvent.current=p;const x=f==="onPointerMove",M=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",S=n(p,x?t:void 0),C=M?e(p):0;f==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=S.map(A=>A.eventObject)),M&&!S.length&&C<=2&&(a(p,v.interaction),g&&g(p)),x&&r(S);function E(A){const L=A.eventObject,D=L.__r3f,F=D==null?void 0:D.handlers;if(D!=null&&D.eventCount)if(x){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const B=zm(A),I=v.hovered.get(B);I?I.stopped&&A.stopPropagation():(v.hovered.set(B,A),F.onPointerOver==null||F.onPointerOver(A),F.onPointerEnter==null||F.onPointerEnter(A))}F.onPointerMove==null||F.onPointerMove(A)}else{const B=F[f];B?(!M||v.initialHits.includes(L))&&(a(p,v.interaction.filter(I=>!v.initialHits.includes(I))),B(A)):M&&v.initialHits.includes(L)&&a(p,v.interaction.filter(I=>!v.initialHits.includes(I)))}}i(S,p,C,E)}}return{handlePointer:l}}const qM=o=>!!(o!=null&&o.render),ZM=We.createContext(null),sI=(o,e)=>{const t=UR((l,f)=>{const d=new J,p=new J,g=new J;function v(C=f().camera,E=p,A=f().size){const{width:L,height:D,top:F,left:B}=A,I=L/D;E instanceof J?g.copy(E):g.set(...E);const z=C.getWorldPosition(d).distanceTo(g);if(GM(C))return{width:L/C.zoom,height:D/C.zoom,top:F,left:B,factor:1,distance:z,aspect:I};{const V=C.fov*Math.PI/180,te=2*Math.tan(V/2)*z,X=te*(L/D);return{width:X,height:te,top:F,left:B,factor:L/X,distance:z,aspect:I}}}let x;const M=C=>l(E=>({performance:{...E.performance,current:C}})),w=new Ve;return{set:l,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(C=1)=>o(f(),C),advance:(C,E)=>e(C,E,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new nx,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const C=f();x&&clearTimeout(x),C.performance.current!==C.performance.min&&M(C.performance.min),x=setTimeout(()=>M(f().performance.max),C.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:C=>l(E=>({...E,events:{...E.events,...C}})),setSize:(C,E,A,L,D)=>{const F=f().camera,B={width:C,height:E,top:L||0,left:D||0,updateStyle:A};l(I=>({size:B,viewport:{...I.viewport,...v(F,p,B)}}))},setDpr:C=>l(E=>{const A=jM(C);return{viewport:{...E.viewport,dpr:A,initialDpr:E.viewport.initialDpr||A}}}),setFrameloop:(C="always")=>{const E=f().clock;E.stop(),E.elapsedTime=0,C!=="never"&&(E.start(),E.elapsedTime=0),l(()=>({frameloop:C}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:We.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(C,E,A)=>{const L=f().internal;return L.priority=L.priority+(E>0?1:0),L.subscribers.push({ref:C,priority:E,store:A}),L.subscribers=L.subscribers.sort((D,F)=>D.priority-F.priority),()=>{const D=f().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(E>0?1:0),D.subscribers=D.subscribers.filter(F=>F.ref!==C))}}}}}),n=t.getState();let i=n.size,r=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:l,size:f,viewport:d,gl:p,set:g}=t.getState();if(f!==i||d.dpr!==r){var v;i=f,r=d.dpr,tI(l,f),p.setPixelRatio(d.dpr);const x=(v=f.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(f.width,f.height,x)}l!==a&&(a=l,g(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>o(l)),t};function oI(o,e){const t={callback:o};return e.add(t),()=>void e.delete(t)}let Um,JM=new Set,aI=new Set,lI=new Set;const uI=o=>oI(o,JM);function av(o,e){if(o.size)for(const{callback:t}of o.values())t(e)}function $h(o,e){switch(o){case"before":return av(JM,e);case"after":return av(aI,e);case"tail":return av(lI,e)}}let lv,uv;function cv(o,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof o=="number"&&(n=o-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=o),lv=e.internal.subscribers,Um=0;Um<lv.length;Um++)uv=lv[Um],uv.ref.current(uv.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function cI(o){let e=!1,t,n,i;function r(f){n=requestAnimationFrame(r),e=!0,t=0,$h("before",f);for(const p of o.values()){var d;i=p.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((d=i.gl.xr)!=null&&d.isPresenting)&&(t+=cv(f,i))}if($h("after",f),t===0)return $h("tail",f),e=!1,cancelAnimationFrame(n)}function a(f,d=1){var p;if(!f)return o.forEach(g=>a(g.store.getState()),d);(p=f.gl.xr)!=null&&p.isPresenting||!f.internal.active||f.frameloop==="never"||(f.internal.frames=Math.min(60,f.internal.frames+d),e||(e=!0,requestAnimationFrame(r)))}function l(f,d=!0,p,g){if(d&&$h("before",f),p)cv(f,p,g);else for(const v of o.values())cv(f,v.store.getState());d&&$h("after",f)}return{loop:r,invalidate:a,advance:l}}function QM(){const o=We.useContext(ZM);if(!o)throw new Error("R3F: Hooks can only be used within the Canvas component!");return o}function La(o=t=>t,e){return QM()(o,e)}function Dg(o,e=0){const t=QM(),n=t.getState().internal.subscribe,i=VM(o);return np(()=>n(i,e,t),[e,n,t]),null}const Of=new Map,{invalidate:j_,advance:X_}=cI(Of),{reconciler:sg,applyProps:Ou}=JR(Of,nI),vf={objects:"shallow",strict:!1},fI=(o,e)=>{const t=typeof o=="function"?o(e):o;return qM(t)?t:new Mg({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...o})};function hI(o,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&o.parentElement){const{width:t,height:n,top:i,left:r}=o.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:r}}else if(typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas)return{width:o.width,height:o.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function dI(o){const e=Of.get(o),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,r=n||sI(j_,X_),a=t||sg.createContainer(r,Cf.ConcurrentRoot,null,!1,null,"",i,null);e||Of.set(o,{fiber:a,store:r});let l,f=!1,d;return{configure(p={}){let{gl:g,size:v,scene:x,events:M,onCreated:w,shadows:S=!1,linear:C=!1,flat:E=!1,legacy:A=!1,orthographic:L=!1,frameloop:D="always",dpr:F=[1,2],performance:B,raycaster:I,camera:z,onPointerMissed:V}=p,te=r.getState(),X=te.gl;te.gl||te.set({gl:X=fI(g,o)});let K=te.raycaster;K||te.set({raycaster:K=new NM});const{params:q,...oe}=I||{};if(Vn.equ(oe,K,vf)||Ou(K,{...oe}),Vn.equ(q,K.params,vf)||Ou(K,{params:{...K.params,...q}}),!te.camera||te.camera===d&&!Vn.equ(d,z,vf)){d=z;const N=z instanceof Gd,O=N?z:L?new kl(0,0,0,0,.1,1e3):new hi(75,0,.1,1e3);N||(O.position.z=5,z&&Ou(O,z),!te.camera&&!(z!=null&&z.rotation)&&O.lookAt(0,0,0)),te.set({camera:O})}if(!te.scene){let N;x instanceof rg?N=x:(N=new rg,x&&Ou(N,x)),te.set({scene:Sf(N)})}if(!te.xr){const N=(se,Z)=>{const he=r.getState();he.frameloop!=="never"&&X_(se,!0,he,Z)},O=()=>{const se=r.getState();se.gl.xr.enabled=se.gl.xr.isPresenting,se.gl.xr.setAnimationLoop(se.gl.xr.isPresenting?N:null),se.gl.xr.isPresenting||j_(se)},re={connect(){const se=r.getState().gl;se.xr.addEventListener("sessionstart",O),se.xr.addEventListener("sessionend",O)},disconnect(){const se=r.getState().gl;se.xr.removeEventListener("sessionstart",O),se.xr.removeEventListener("sessionend",O)}};X.xr&&re.connect(),te.set({xr:re})}if(X.shadowMap){const N=X.shadowMap.enabled,O=X.shadowMap.type;if(X.shadowMap.enabled=!!S,Vn.boo(S))X.shadowMap.type=od;else if(Vn.str(S)){var ce;const re={basic:BS,percentage:mg,soft:od,variance:Gu};X.shadowMap.type=(ce=re[S])!=null?ce:od}else Vn.obj(S)&&Object.assign(X.shadowMap,S);(N!==X.shadowMap.enabled||O!==X.shadowMap.type)&&(X.shadowMap.needsUpdate=!0)}const ye=BM();ye&&("enabled"in ye?ye.enabled=!A:"legacyMode"in ye&&(ye.legacyMode=A)),Ou(X,{outputEncoding:C?3e3:3001,toneMapping:E?yo:by}),te.legacy!==A&&te.set(()=>({legacy:A})),te.linear!==C&&te.set(()=>({linear:C})),te.flat!==E&&te.set(()=>({flat:E})),g&&!Vn.fun(g)&&!qM(g)&&!Vn.equ(g,X,vf)&&Ou(X,g),M&&!te.events.handlers&&te.set({events:M(r)});const Y=hI(o,v);return Vn.equ(Y,te.size,vf)||te.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),F&&te.viewport.dpr!==jM(F)&&te.setDpr(F),te.frameloop!==D&&te.setFrameloop(D),te.onPointerMissed||te.set({onPointerMissed:V}),B&&!Vn.equ(B,te.performance,vf)&&te.set(N=>({performance:{...N.performance,...B}})),l=w,f=!0,this},render(p){return f||this.configure(),sg.updateContainer(We.createElement(pI,{store:r,children:p,onCreated:l,rootElement:o}),a,null,()=>{}),r},unmount(){KM(o)}}}function pI({store:o,children:e,onCreated:t,rootElement:n}){return np(()=>{const i=o.getState();i.set(r=>({internal:{...r.internal,active:!0}})),t&&t(i),o.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),We.createElement(ZM.Provider,{value:o},e)}function KM(o,e){const t=Of.get(o),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),sg.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var r,a,l,f;i.events.disconnect==null||i.events.disconnect(),(r=i.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(f=i.gl)!=null&&f.xr&&i.xr.disconnect(),eI(i),Of.delete(o)}catch{}},500)})}}sg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:We.version});function Y_(o,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>o(...n),e)}}function mI({debounce:o,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=We.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=We.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),f=o?typeof o=="number"?o:o.scroll:null,d=o?typeof o=="number"?o:o.resize:null,p=We.useRef(!1);We.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,x]=We.useMemo(()=>{const C=()=>{if(!l.current.element)return;const{left:E,top:A,width:L,height:D,bottom:F,right:B,x:I,y:z}=l.current.element.getBoundingClientRect(),V={left:E,top:A,width:L,height:D,bottom:F,right:B,x:I,y:z};l.current.element instanceof HTMLElement&&n&&(V.height=l.current.element.offsetHeight,V.width=l.current.element.offsetWidth),Object.freeze(V),p.current&&!xI(l.current.lastBounds,V)&&a(l.current.lastBounds=V)};return[C,d?Y_(C,d):C,f?Y_(C,f):C]},[a,n,f,d]);function M(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function w(){l.current.element&&(l.current.resizeObserver=new i(x),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(C=>C.addEventListener("scroll",x,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const S=C=>{!C||C===l.current.element||(M(),l.current.element=C,l.current.scrollContainers=$M(C),w())};return vI(x,!!e),gI(v),We.useEffect(()=>{M(),w()},[e,x,v]),We.useEffect(()=>M,[]),[S,r,g]}function gI(o){We.useEffect(()=>{const e=o;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[o])}function vI(o,e){We.useEffect(()=>{if(e){const t=o;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[o,e])}function $M(o){const e=[];if(!o||o===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(o);return[t,n,i].some(r=>r==="auto"||r==="scroll")&&e.push(o),[...e,...$M(o.parentElement)]}const yI=["x","y","top","bottom","left","right","width","height"],xI=(o,e)=>yI.every(t=>o[t]===e[t]);var _I=Object.defineProperty,SI=Object.defineProperties,wI=Object.getOwnPropertyDescriptors,q_=Object.getOwnPropertySymbols,MI=Object.prototype.hasOwnProperty,bI=Object.prototype.propertyIsEnumerable,Z_=(o,e,t)=>e in o?_I(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,J_=(o,e)=>{for(var t in e||(e={}))MI.call(e,t)&&Z_(o,t,e[t]);if(q_)for(var t of q_(e))bI.call(e,t)&&Z_(o,t,e[t]);return o},EI=(o,e)=>SI(o,wI(e)),Q_,K_;typeof window<"u"&&((Q_=window.document)!=null&&Q_.createElement||((K_=window.navigator)==null?void 0:K_.product)==="ReactNative")?We.useLayoutEffect:We.useEffect;function e2(o,e,t){if(!o)return;if(t(o)===!0)return o;let n=o.child;for(;n;){const i=e2(n,e,t);if(i)return i;n=n.sibling}}function t2(o){try{return Object.defineProperties(o,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return o}}const $_=console.error;console.error=function(){const o=[...arguments].join("");if(o!=null&&o.startsWith("Warning:")&&o.includes("useContext")){console.error=$_;return}return $_.apply(this,arguments)};const ax=t2(We.createContext(null));class n2 extends We.Component{render(){return We.createElement(ax.Provider,{value:this._reactInternals},this.props.children)}}function TI(){const o=We.useContext(ax);if(o===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=We.useId();return We.useMemo(()=>{for(const n of[o,o==null?void 0:o.alternate]){if(!n)continue;const i=e2(n,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[o,e])}function CI(){const o=TI(),[e]=We.useState(()=>new Map);e.clear();let t=o;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==ax&&!e.has(i)&&e.set(i,We.useContext(t2(i)))}t=t.return}return e}function AI(){const o=CI();return We.useMemo(()=>Array.from(o.keys()).reduce((e,t)=>n=>We.createElement(e,null,We.createElement(t.Provider,EI(J_({},n),{value:o.get(t)}))),e=>We.createElement(n2,J_({},e))),[o])}const fv={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function PI(o){const{handlePointer:e}=rI(o);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(fv).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=o.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:r}=o.getState();r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),Object.entries((n=r.handlers)!=null?n:[]).forEach(([a,l])=>{const[f,d]=fv[a];t.addEventListener(f,l,{passive:d})})},disconnect:()=>{const{set:t,events:n}=o.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([r,a])=>{if(n&&n.connected instanceof HTMLElement){const[l]=fv[r];n.connected.removeEventListener(l,a)}}),t(r=>({events:{...r.events,connected:void 0}}))}}}}const LI=We.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:r,events:a=PI,eventSource:l,eventPrefix:f,shadows:d,linear:p,flat:g,legacy:v,orthographic:x,frameloop:M,dpr:w,performance:S,raycaster:C,camera:E,onPointerMissed:A,onCreated:L,...D},F){We.useMemo(()=>ZR(zM),[]);const B=AI(),[I,z]=mI({scroll:!0,debounce:{scroll:50,resize:0},...n}),V=We.useRef(null),te=We.useRef(null);We.useImperativeHandle(F,()=>V.current);const X=VM(A),[K,q]=We.useState(!1),[oe,ce]=We.useState(!1);if(K)throw K;if(oe)throw oe;const ye=We.useRef(null);np(()=>{const Q=V.current;z.width>0&&z.height>0&&Q&&(ye.current||(ye.current=dI(Q)),ye.current.configure({gl:r,events:a,shadows:d,linear:p,flat:g,legacy:v,orthographic:x,frameloop:M,dpr:w,performance:S,raycaster:C,camera:E,size:z,onPointerMissed:(...Y)=>X.current==null?void 0:X.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(l?QR(l)?l.current:l:te.current),f&&Y.setEvents({compute:(N,O)=>{const re=N[f+"X"],se=N[f+"Y"];O.pointer.set(re/O.size.width*2-1,-(se/O.size.height)*2+1),O.raycaster.setFromCamera(O.pointer,O.camera)}}),L==null||L(Y)}}),ye.current.render(We.createElement(B,null,We.createElement(WM,{set:ce},We.createElement(We.Suspense,{fallback:We.createElement(KR,{set:q})},e)))))}),We.useEffect(()=>{const Q=V.current;if(Q)return()=>KM(Q)},[]);const H=l?"none":"auto";return We.createElement("div",Df({ref:te,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:H,...i}},D),We.createElement("div",{ref:I,style:{width:"100%",height:"100%"}},We.createElement("canvas",{ref:V,style:{display:"block"}},t)))}),RI=We.forwardRef(function(e,t){return We.createElement(n2,null,We.createElement(LI,Df({},e,{ref:t})))});let lx=rp();const Xt=o=>ip(o,lx);let ux=rp();Xt.write=o=>ip(o,ux);let kg=rp();Xt.onStart=o=>ip(o,kg);let cx=rp();Xt.onFrame=o=>ip(o,cx);let fx=rp();Xt.onFinish=o=>ip(o,fx);let Rf=[];Xt.setTimeout=(o,e)=>{let t=Xt.now()+e,n=()=>{let r=Rf.findIndex(a=>a.cancel==n);~r&&Rf.splice(r,1),Rl-=~r?1:0},i={time:t,handler:o,cancel:n};return Rf.splice(i2(t),0,i),Rl+=1,r2(),i};let i2=o=>~(~Rf.findIndex(e=>e.time>o)||~Rf.length);Xt.cancel=o=>{kg.delete(o),cx.delete(o),fx.delete(o),lx.delete(o),ux.delete(o)};Xt.sync=o=>{uy=!0,Xt.batchedUpdates(o),uy=!1};Xt.throttle=o=>{let e;function t(){try{o(...e)}finally{e=null}}function n(...i){e=i,Xt.onStart(t)}return n.handler=o,n.cancel=()=>{kg.delete(t),e=null},n};let hx=typeof window<"u"?window.requestAnimationFrame:()=>{};Xt.use=o=>hx=o;Xt.now=typeof performance<"u"?()=>performance.now():Date.now;Xt.batchedUpdates=o=>o();Xt.catch=console.error;Xt.frameLoop="always";Xt.advance=()=>{Xt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):o2()};let Ll=-1,Rl=0,uy=!1;function ip(o,e){uy?(e.delete(o),o(0)):(e.add(o),r2())}function r2(){Ll<0&&(Ll=0,Xt.frameLoop!=="demand"&&hx(s2))}function II(){Ll=-1}function s2(){~Ll&&(hx(s2),Xt.batchedUpdates(o2))}function o2(){let o=Ll;Ll=Xt.now();let e=i2(Ll);if(e&&(a2(Rf.splice(0,e),t=>t.handler()),Rl-=e),!Rl){II();return}kg.flush(),lx.flush(o?Math.min(64,Ll-o):16.667),cx.flush(),ux.flush(),fx.flush()}function rp(){let o=new Set,e=o;return{add(t){Rl+=e==o&&!o.has(t)?1:0,o.add(t)},delete(t){return Rl-=e==o&&o.has(t)?1:0,o.delete(t)},flush(t){e.size&&(o=new Set,Rl-=e.size,a2(e,n=>n(t)&&o.add(n)),Rl+=o.size,e=o)}}}function a2(o,e){o.forEach(t=>{try{e(t)}catch(n){Xt.catch(n)}})}function cy(){}const DI=(o,e,t)=>Object.defineProperty(o,e,{value:t,writable:!0,configurable:!0}),ht={arr:Array.isArray,obj:o=>!!o&&o.constructor.name==="Object",fun:o=>typeof o=="function",str:o=>typeof o=="string",num:o=>typeof o=="number",und:o=>o===void 0};function Ra(o,e){if(ht.arr(o)){if(!ht.arr(e)||o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(o[t]!==e[t])return!1;return!0}return o===e}const xn=(o,e)=>o.forEach(e);function Ua(o,e,t){if(ht.arr(o)){for(let n=0;n<o.length;n++)e.call(t,o[n],`${n}`);return}for(const n in o)o.hasOwnProperty(n)&&e.call(t,o[n],n)}const Fs=o=>ht.und(o)?[]:ht.arr(o)?o:[o];function fd(o,e){if(o.size){const t=Array.from(o);o.clear(),xn(t,e)}}const sd=(o,...e)=>fd(o,t=>t(...e)),dx=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let px,l2,Fl=null,u2=!1,mx=cy;const kI=o=>{o.to&&(l2=o.to),o.now&&(Xt.now=o.now),o.colors!==void 0&&(Fl=o.colors),o.skipAnimation!=null&&(u2=o.skipAnimation),o.createStringInterpolator&&(px=o.createStringInterpolator),o.requestAnimationFrame&&Xt.use(o.requestAnimationFrame),o.batchedUpdates&&(Xt.batchedUpdates=o.batchedUpdates),o.willAdvance&&(mx=o.willAdvance),o.frameLoop&&(Xt.frameLoop=o.frameLoop)};var qo=Object.freeze({__proto__:null,get createStringInterpolator(){return px},get to(){return l2},get colors(){return Fl},get skipAnimation(){return u2},get willAdvance(){return mx},assign:kI});const hd=new Set;let ks=[],hv=[],og=0;const Fg={get idle(){return!hd.size&&!ks.length},start(o){og>o.priority?(hd.add(o),Xt.onStart(FI)):(c2(o),Xt(fy))},advance:fy,sort(o){if(og)Xt.onFrame(()=>Fg.sort(o));else{const e=ks.indexOf(o);~e&&(ks.splice(e,1),f2(o))}},clear(){ks=[],hd.clear()}};function FI(){hd.forEach(c2),hd.clear(),Xt(fy)}function c2(o){ks.includes(o)||f2(o)}function f2(o){ks.splice(NI(ks,e=>e.priority>o.priority),0,o)}function fy(o){const e=hv;for(let t=0;t<ks.length;t++){const n=ks[t];og=n.priority,n.idle||(mx(n),n.advance(o),n.idle||e.push(n))}return og=0,hv=ks,hv.length=0,ks=e,ks.length>0}function NI(o,e){const t=o.findIndex(e);return t<0?o.length:t}const OI={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},vo="[-+]?\\d*\\.?\\d+",ag=vo+"%";function Ng(...o){return"\\(\\s*("+o.join(")\\s*,\\s*(")+")\\s*\\)"}const zI=new RegExp("rgb"+Ng(vo,vo,vo)),UI=new RegExp("rgba"+Ng(vo,vo,vo,vo)),BI=new RegExp("hsl"+Ng(vo,ag,ag)),GI=new RegExp("hsla"+Ng(vo,ag,ag,vo)),VI=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,WI=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,HI=/^#([0-9a-fA-F]{6})$/,jI=/^#([0-9a-fA-F]{8})$/;function XI(o){let e;return typeof o=="number"?o>>>0===o&&o>=0&&o<=4294967295?o:null:(e=HI.exec(o))?parseInt(e[1]+"ff",16)>>>0:Fl&&Fl[o]!==void 0?Fl[o]:(e=zI.exec(o))?(yf(e[1])<<24|yf(e[2])<<16|yf(e[3])<<8|255)>>>0:(e=UI.exec(o))?(yf(e[1])<<24|yf(e[2])<<16|yf(e[3])<<8|nS(e[4]))>>>0:(e=VI.exec(o))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=jI.exec(o))?parseInt(e[1],16)>>>0:(e=WI.exec(o))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=BI.exec(o))?(eS(tS(e[1]),Bm(e[2]),Bm(e[3]))|255)>>>0:(e=GI.exec(o))?(eS(tS(e[1]),Bm(e[2]),Bm(e[3]))|nS(e[4]))>>>0:null}function dv(o,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+(e-o)*6*t:t<1/2?e:t<2/3?o+(e-o)*(2/3-t)*6:o}function eS(o,e,t){const n=t<.5?t*(1+e):t+e-t*e,i=2*t-n,r=dv(i,n,o+1/3),a=dv(i,n,o),l=dv(i,n,o-1/3);return Math.round(r*255)<<24|Math.round(a*255)<<16|Math.round(l*255)<<8}function yf(o){const e=parseInt(o,10);return e<0?0:e>255?255:e}function tS(o){return(parseFloat(o)%360+360)%360/360}function nS(o){const e=parseFloat(o);return e<0?0:e>1?255:Math.round(e*255)}function Bm(o){const e=parseFloat(o);return e<0?0:e>100?1:e/100}function iS(o){let e=XI(o);if(e===null)return o;e=e||0;let t=(e&4278190080)>>>24,n=(e&16711680)>>>16,i=(e&65280)>>>8,r=(e&255)/255;return`rgba(${t}, ${n}, ${i}, ${r})`}const kd=(o,e,t)=>{if(ht.fun(o))return o;if(ht.arr(o))return kd({range:o,output:e,extrapolate:t});if(ht.str(o.output[0]))return px(o);const n=o,i=n.output,r=n.range||[0,1],a=n.extrapolateLeft||n.extrapolate||"extend",l=n.extrapolateRight||n.extrapolate||"extend",f=n.easing||(d=>d);return d=>{const p=qI(d,r);return YI(d,r[p],r[p+1],i[p],i[p+1],f,a,l,n.map)}};function YI(o,e,t,n,i,r,a,l,f){let d=f?f(o):o;if(d<e){if(a==="identity")return d;a==="clamp"&&(d=e)}if(d>t){if(l==="identity")return d;l==="clamp"&&(d=t)}return n===i?n:e===t?o<=e?n:i:(e===-1/0?d=-d:t===1/0?d=d-e:d=(d-e)/(t-e),d=r(d),n===-1/0?d=-d:i===1/0?d=d+n:d=d*(i-n)+n,d)}function qI(o,e){for(var t=1;t<e.length-1&&!(e[t]>=o);++t);return t-1}const ZI={linear:o=>o};function hy(){return hy=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},hy.apply(this,arguments)}const zf=Symbol.for("FluidValue.get"),ic=Symbol.for("FluidValue.observers"),Ho=o=>!!(o&&o[zf]),Is=o=>o&&o[zf]?o[zf]():o,rS=o=>o[ic]||null;function JI(o,e){o.eventObserved?o.eventObserved(e):o(e)}function lg(o,e){let t=o[ic];t&&t.forEach(n=>{JI(n,e)})}class QI{constructor(e){if(this[zf]=void 0,this[ic]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");KI(this,e)}}const KI=(o,e)=>h2(o,zf,e);function sp(o,e){if(o[zf]){let t=o[ic];t||h2(o,ic,t=new Set),t.has(e)||(t.add(e),o.observerAdded&&o.observerAdded(t.size,e))}return e}function ug(o,e){let t=o[ic];if(t&&t.has(e)){const n=t.size-1;n?t.delete(e):o[ic]=null,o.observerRemoved&&o.observerRemoved(n,e)}}const h2=(o,e,t)=>Object.defineProperty(o,e,{value:t,writable:!0,configurable:!0}),Km=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,$I=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,sS=new RegExp(`(${Km.source})(%|[a-z]+)`,"i"),eD=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Og=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,d2=o=>{const[e,t]=tD(o);if(!e||dx())return o;const n=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(n)return n.trim();if(t&&t.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(t);return i||o}else{if(t&&Og.test(t))return d2(t);if(t)return t}return o},tD=o=>{const e=Og.exec(o);if(!e)return[,];const[,t,n]=e;return[t,n]};let pv;const nD=(o,e,t,n,i)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(n)}, ${i})`,p2=o=>{pv||(pv=Fl?new RegExp(`(${Object.keys(Fl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=o.output.map(r=>Is(r).replace(Og,d2).replace($I,iS).replace(pv,iS)),t=e.map(r=>r.match(Km).map(Number)),i=t[0].map((r,a)=>t.map(l=>{if(!(a in l))throw Error('The arity of each "output" value must be equal');return l[a]})).map(r=>kd(hy({},o,{output:r})));return r=>{var a;const l=!sS.test(e[0])&&((a=e.find(d=>sS.test(d)))==null?void 0:a.replace(Km,""));let f=0;return e[0].replace(Km,()=>`${i[f++](r)}${l||""}`).replace(eD,nD)}},gx="react-spring: ",m2=o=>{const e=o;let t=!1;if(typeof e!="function")throw new TypeError(`${gx}once requires a function parameter`);return(...n)=>{t||(e(...n),t=!0)}},iD=m2(console.warn);function rD(){iD(`${gx}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const sD=m2(console.warn);function oD(){sD(`${gx}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function zg(o){return ht.str(o)&&(o[0]=="#"||/\d/.test(o)||!dx()&&Og.test(o)||o in(Fl||{}))}const vx=dx()?We.useEffect:We.useLayoutEffect,aD=()=>{const o=We.useRef(!1);return vx(()=>(o.current=!0,()=>{o.current=!1}),[]),o};function g2(){const o=We.useState()[1],e=aD();return()=>{e.current&&o(Math.random())}}function lD(o,e){const[t]=We.useState(()=>({inputs:e,result:o()})),n=We.useRef(),i=n.current;let r=i;return r?e&&r.inputs&&uD(e,r.inputs)||(r={inputs:e,result:o()}):r=t,We.useEffect(()=>{n.current=r,i==t&&(t.inputs=t.result=void 0)},[r]),r.result}function uD(o,e){if(o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(o[t]!==e[t])return!1;return!0}const v2=o=>We.useEffect(o,cD),cD=[];function oS(o){const e=We.useRef();return We.useEffect(()=>{e.current=o}),e.current}const Fd=Symbol.for("Animated:node"),fD=o=>!!o&&o[Fd]===o,Wo=o=>o&&o[Fd],yx=(o,e)=>DI(o,Fd,e),Ug=o=>o&&o[Fd]&&o[Fd].getPayload();class y2{constructor(){this.payload=void 0,yx(this,this)}getPayload(){return this.payload||[]}}class Yf extends y2{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,ht.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Yf(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return ht.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,ht.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class Uf extends Yf{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=kd({output:[e,e]})}static create(e){return new Uf(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(ht.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=kd({output:[this.getValue(),e]})),this._value=0,super.reset()}}const cg={dependencies:null};class xx extends y2{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Ua(this.source,(n,i)=>{fD(n)?t[i]=n.getValue(e):Ho(n)?t[i]=Is(n):e||(t[i]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&xn(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Ua(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){cg.dependencies&&Ho(e)&&cg.dependencies.add(e);const t=Ug(e);t&&xn(t,n=>this.add(n))}}class _x extends xx{constructor(e){super(e)}static create(e){return new _x(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,i)=>n.setValue(e[i])).some(Boolean):(super.setValue(e.map(hD)),!0)}}function hD(o){return(zg(o)?Uf:Yf).create(o)}function dy(o){const e=Wo(o);return e?e.constructor:ht.arr(o)?_x:zg(o)?Uf:Yf}function fg(){return fg=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},fg.apply(this,arguments)}const aS=(o,e)=>{const t=!ht.fun(o)||o.prototype&&o.prototype.isReactComponent;return We.forwardRef((n,i)=>{const r=We.useRef(null),a=t&&We.useCallback(M=>{r.current=mD(i,M)},[i]),[l,f]=pD(n,e),d=g2(),p=()=>{const M=r.current;if(t&&!M)return;(M?e.applyAnimatedValues(M,l.getValue(!0)):!1)===!1&&d()},g=new dD(p,f),v=We.useRef();vx(()=>(v.current=g,xn(f,M=>sp(M,g)),()=>{v.current&&(xn(v.current.deps,M=>ug(M,v.current)),Xt.cancel(v.current.update))})),We.useEffect(p,[]),v2(()=>()=>{const M=v.current;xn(M.deps,w=>ug(w,M))});const x=e.getComponentProps(l.getValue());return We.createElement(o,fg({},x,{ref:a}))})};class dD{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Xt.write(this.update)}}function pD(o,e){const t=new Set;return cg.dependencies=t,o.style&&(o=fg({},o,{style:e.createAnimatedStyle(o.style)})),o=new xx(o),cg.dependencies=null,[o,t]}function mD(o,e){return o&&(ht.fun(o)?o(e):o.current=e),e}const lS=Symbol.for("AnimatedComponent"),gD=(o,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=i=>new xx(i),getComponentProps:n=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:n},r=a=>{const l=uS(a)||"Anonymous";return ht.str(a)?a=r[a]||(r[a]=aS(a,i)):a=a[lS]||(a[lS]=aS(a,i)),a.displayName=`Animated(${l})`,a};return Ua(o,(a,l)=>{ht.arr(o)&&(l=uS(a)),r[l]=r(a)}),{animated:r}},uS=o=>ht.str(o)?o:o&&ht.str(o.displayName)?o.displayName:ht.fun(o)&&o.name||null;function Xi(){return Xi=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Xi.apply(this,arguments)}function Bu(o,...e){return ht.fun(o)?o(...e):o}const dd=(o,e)=>o===!0||!!(e&&o&&(ht.fun(o)?o(e):Fs(o).includes(e))),x2=(o,e)=>ht.obj(o)?e&&o[e]:o,_2=(o,e)=>o.default===!0?o[e]:o.default?o.default[e]:void 0,vD=o=>o,Sx=(o,e=vD)=>{let t=yD;o.default&&o.default!==!0&&(o=o.default,t=Object.keys(o));const n={};for(const i of t){const r=e(o[i],i);ht.und(r)||(n[i]=r)}return n},yD=["config","onProps","onStart","onChange","onPause","onResume","onRest"],xD={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function _D(o){const e={};let t=0;if(Ua(o,(n,i)=>{xD[i]||(e[i]=n,t++)}),t)return e}function S2(o){const e=_D(o);if(e){const t={to:e};return Ua(o,(n,i)=>i in e||(t[i]=n)),t}return Xi({},o)}function Nd(o){return o=Is(o),ht.arr(o)?o.map(Nd):zg(o)?qo.createStringInterpolator({range:[0,1],output:[o,o]})(1):o}function SD(o){for(const e in o)return!0;return!1}function py(o){return ht.fun(o)||ht.arr(o)&&ht.obj(o[0])}function wD(o,e){var t;(t=o.ref)==null||t.delete(o),e==null||e.delete(o)}function MD(o,e){if(e&&o.ref!==e){var t;(t=o.ref)==null||t.delete(o),e.add(o),o.ref=e}}const bD={default:{tension:170,friction:26}},my=Xi({},bD.default,{mass:1,damping:1,easing:ZI.linear,clamp:!1});class ED{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,my)}}function TD(o,e,t){t&&(t=Xi({},t),cS(t,e),e=Xi({},t,e)),cS(o,e),Object.assign(o,e);for(const a in my)o[a]==null&&(o[a]=my[a]);let{mass:n,frequency:i,damping:r}=o;return ht.und(i)||(i<.01&&(i=.01),r<0&&(r=0),o.tension=Math.pow(2*Math.PI/i,2)*n,o.friction=4*Math.PI*r*n/i),o}function cS(o,e){if(!ht.und(e.decay))o.duration=void 0;else{const t=!ht.und(e.tension)||!ht.und(e.friction);(t||!ht.und(e.frequency)||!ht.und(e.damping)||!ht.und(e.mass))&&(o.duration=void 0,o.decay=void 0),t&&(o.frequency=void 0)}}const fS=[];class CD{constructor(){this.changed=!1,this.values=fS,this.toValues=null,this.fromValues=fS,this.to=void 0,this.from=void 0,this.config=new ED,this.immediate=!1}}function w2(o,{key:e,props:t,defaultProps:n,state:i,actions:r}){return new Promise((a,l)=>{var f;let d,p,g=dd((f=t.cancel)!=null?f:n==null?void 0:n.cancel,e);if(g)M();else{ht.und(t.pause)||(i.paused=dd(t.pause,e));let w=n==null?void 0:n.pause;w!==!0&&(w=i.paused||dd(w,e)),d=Bu(t.delay||0,e),w?(i.resumeQueue.add(x),r.pause()):(r.resume(),x())}function v(){i.resumeQueue.add(x),i.timeouts.delete(p),p.cancel(),d=p.time-Xt.now()}function x(){d>0&&!qo.skipAnimation?(i.delayed=!0,p=Xt.setTimeout(M,d),i.pauseQueue.add(v),i.timeouts.add(p)):M()}function M(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(v),i.timeouts.delete(p),o<=(i.cancelId||0)&&(g=!0);try{r.start(Xi({},t,{callId:o,cancel:g}),a)}catch(w){l(w)}}})}const wx=(o,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?If(o.get()):e.every(t=>t.noop)?M2(o.get()):mo(o.get(),e.every(t=>t.finished)),M2=o=>({value:o,noop:!0,finished:!0,cancelled:!1}),mo=(o,e,t=!1)=>({value:o,finished:e,cancelled:t}),If=o=>({value:o,cancelled:!0,finished:!1});function b2(o,e,t,n){const{callId:i,parentId:r,onRest:a}=e,{asyncTo:l,promise:f}=t;return!r&&o===l&&!e.reset?f:t.promise=(async()=>{t.asyncId=i,t.asyncTo=o;const d=Sx(e,(S,C)=>C==="onRest"?void 0:S);let p,g;const v=new Promise((S,C)=>(p=S,g=C)),x=S=>{const C=i<=(t.cancelId||0)&&If(n)||i!==t.asyncId&&mo(n,!1);if(C)throw S.result=C,g(S),S},M=(S,C)=>{const E=new hS,A=new dS;return(async()=>{if(qo.skipAnimation)throw Od(t),A.result=mo(n,!1),g(A),A;x(E);const L=ht.obj(S)?Xi({},S):Xi({},C,{to:S});L.parentId=i,Ua(d,(F,B)=>{ht.und(L[B])&&(L[B]=F)});const D=await n.start(L);return x(E),t.paused&&await new Promise(F=>{t.resumeQueue.add(F)}),D})()};let w;if(qo.skipAnimation)return Od(t),mo(n,!1);try{let S;ht.arr(o)?S=(async C=>{for(const E of C)await M(E)})(o):S=Promise.resolve(o(M,n.stop.bind(n))),await Promise.all([S.then(p),v]),w=mo(n.get(),!0,!1)}catch(S){if(S instanceof hS)w=S.result;else if(S instanceof dS)w=S.result;else throw S}finally{i==t.asyncId&&(t.asyncId=r,t.asyncTo=r?l:void 0,t.promise=r?f:void 0)}return ht.fun(a)&&Xt.batchedUpdates(()=>{a(w,n,n.item)}),w})()}function Od(o,e){fd(o.timeouts,t=>t.cancel()),o.pauseQueue.clear(),o.resumeQueue.clear(),o.asyncId=o.asyncTo=o.promise=void 0,e&&(o.cancelId=e)}class hS extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class dS extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const gy=o=>o instanceof Mx;let AD=1;class Mx extends QI{constructor(...e){super(...e),this.id=AD++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Wo(this);return e&&e.getValue()}to(...e){return qo.to(this,e)}interpolate(...e){return rD(),qo.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){lg(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Fg.sort(this),lg(this,{type:"priority",parent:this,priority:e})}}const rc=Symbol.for("SpringPhase"),E2=1,T2=2,C2=4,mv=o=>(o[rc]&E2)>0,Cl=o=>(o[rc]&T2)>0,ed=o=>(o[rc]&C2)>0,pS=(o,e)=>e?o[rc]|=T2|E2:o[rc]&=-3,mS=(o,e)=>e?o[rc]|=C2:o[rc]&=-5;class PD extends Mx{constructor(e,t){if(super(),this.key=void 0,this.animation=new CD,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ht.und(e)||!ht.und(t)){const n=ht.obj(e)?Xi({},e):Xi({},t,{from:e});ht.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Cl(this)||this._state.asyncTo)||ed(this)}get goal(){return Is(this.animation.to)}get velocity(){const e=Wo(this);return e instanceof Yf?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return mv(this)}get isAnimating(){return Cl(this)}get isPaused(){return ed(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const i=this.animation;let{config:r,toValues:a}=i;const l=Ug(i.to);!l&&Ho(i.to)&&(a=Fs(Is(i.to))),i.values.forEach((p,g)=>{if(p.done)return;const v=p.constructor==Uf?1:l?l[g].lastPosition:a[g];let x=i.immediate,M=v;if(!x){if(M=p.lastPosition,r.tension<=0){p.done=!0;return}let w=p.elapsedTime+=e;const S=i.fromValues[g],C=p.v0!=null?p.v0:p.v0=ht.arr(r.velocity)?r.velocity[g]:r.velocity;let E;const A=r.precision||(S==v?.005:Math.min(1,Math.abs(v-S)*.001));if(ht.und(r.duration))if(r.decay){const L=r.decay===!0?.998:r.decay,D=Math.exp(-(1-L)*w);M=S+C/(1-L)*(1-D),x=Math.abs(p.lastPosition-M)<=A,E=C*D}else{E=p.lastVelocity==null?C:p.lastVelocity;const L=r.restVelocity||A/10,D=r.clamp?0:r.bounce,F=!ht.und(D),B=S==v?p.v0>0:S<v;let I,z=!1;const V=1,te=Math.ceil(e/V);for(let X=0;X<te&&(I=Math.abs(E)>L,!(!I&&(x=Math.abs(v-M)<=A,x)));++X){F&&(z=M==v||M>v==B,z&&(E=-E*D,M=v));const K=-r.tension*1e-6*(M-v),q=-r.friction*.001*E,oe=(K+q)/r.mass;E=E+oe*V,M=M+E*V}}else{let L=1;r.duration>0&&(this._memoizedDuration!==r.duration&&(this._memoizedDuration=r.duration,p.durationProgress>0&&(p.elapsedTime=r.duration*p.durationProgress,w=p.elapsedTime+=e)),L=(r.progress||0)+w/this._memoizedDuration,L=L>1?1:L<0?0:L,p.durationProgress=L),M=S+r.easing(L)*(v-S),E=(M-p.lastPosition)/e,x=L==1}p.lastVelocity=E,Number.isNaN(M)&&(console.warn("Got NaN while animating:",this),x=!0)}l&&!l[g].done&&(x=!1),x?p.done=!0:t=!1,p.setValue(M,r.round)&&(n=!0)});const f=Wo(this),d=f.getValue();if(t){const p=Is(i.to);(d!==p||n)&&!r.decay?(f.setValue(p),this._onChange(p)):n&&r.decay&&this._onChange(d),this._stop()}else n&&this._onChange(d)}set(e){return Xt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Cl(this)){const{to:e,config:t}=this.animation;Xt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return ht.und(e)?(n=this.queue||[],this.queue=[]):n=[ht.obj(e)?e:Xi({},t,{to:e})],Promise.all(n.map(i=>this._update(i))).then(i=>wx(this,i))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Od(this._state,e&&this._lastCallId),Xt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:i}=e;n=ht.obj(n)?n[t]:n,(n==null||py(n))&&(n=void 0),i=ht.obj(i)?i[t]:i,i==null&&(i=void 0);const r={to:n,from:i};return mv(this)||(e.reverse&&([n,i]=[i,n]),i=Is(i),ht.und(i)?Wo(this)||this._set(n):this._set(i)),r}_update(e,t){let n=Xi({},e);const{key:i,defaultProps:r}=this;n.default&&Object.assign(r,Sx(n,(f,d)=>/^on/.test(d)?x2(f,i):f)),vS(this,n,"onProps"),nd(this,"onProps",n,this);const a=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const l=this._state;return w2(++this._lastCallId,{key:i,props:n,defaultProps:r,state:l,actions:{pause:()=>{ed(this)||(mS(this,!0),sd(l.pauseQueue),nd(this,"onPause",mo(this,td(this,this.animation.to)),this))},resume:()=>{ed(this)&&(mS(this,!1),Cl(this)&&this._resume(),sd(l.resumeQueue),nd(this,"onResume",mo(this,td(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(f=>{if(n.loop&&f.finished&&!(t&&f.noop)){const d=A2(n);if(d)return this._update(d,!0)}return f})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(If(this));const i=!ht.und(e.to),r=!ht.und(e.from);if(i||r)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(If(this));const{key:a,defaultProps:l,animation:f}=this,{to:d,from:p}=f;let{to:g=d,from:v=p}=e;r&&!i&&(!t.default||ht.und(g))&&(g=v),t.reverse&&([g,v]=[v,g]);const x=!Ra(v,p);x&&(f.from=v),v=Is(v);const M=!Ra(g,d);M&&this._focus(g);const w=py(t.to),{config:S}=f,{decay:C,velocity:E}=S;(i||r)&&(S.velocity=0),t.config&&!w&&TD(S,Bu(t.config,a),t.config!==l.config?Bu(l.config,a):void 0);let A=Wo(this);if(!A||ht.und(g))return n(mo(this,!0));const L=ht.und(t.reset)?r&&!t.default:!ht.und(v)&&dd(t.reset,a),D=L?v:this.get(),F=Nd(g),B=ht.num(F)||ht.arr(F)||zg(F),I=!w&&(!B||dd(l.immediate||t.immediate,a));if(M){const X=dy(g);if(X!==A.constructor)if(I)A=this._set(F);else throw Error(`Cannot animate between ${A.constructor.name} and ${X.name}, as the "to" prop suggests`)}const z=A.constructor;let V=Ho(g),te=!1;if(!V){const X=L||!mv(this)&&x;(M||X)&&(te=Ra(Nd(D),F),V=!te),(!Ra(f.immediate,I)&&!I||!Ra(S.decay,C)||!Ra(S.velocity,E))&&(V=!0)}if(te&&Cl(this)&&(f.changed&&!L?V=!0:V||this._stop(d)),!w&&((V||Ho(d))&&(f.values=A.getPayload(),f.toValues=Ho(g)?null:z==Uf?[1]:Fs(F)),f.immediate!=I&&(f.immediate=I,!I&&!L&&this._set(d)),V)){const{onRest:X}=f;xn(RD,q=>vS(this,t,q));const K=mo(this,td(this,d));sd(this._pendingCalls,K),this._pendingCalls.add(n),f.changed&&Xt.batchedUpdates(()=>{f.changed=!L,X==null||X(K,this),L?Bu(l.onRest,K):f.onStart==null||f.onStart(K,this)})}L&&this._set(D),w?n(b2(t.to,t,this._state,this)):V?this._start():Cl(this)&&!M?this._pendingCalls.add(n):n(M2(D))}_focus(e){const t=this.animation;e!==t.to&&(rS(this)&&this._detach(),t.to=e,rS(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Ho(t)&&(sp(t,this),gy(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Ho(e)&&ug(e,this)}_set(e,t=!0){const n=Is(e);if(!ht.und(n)){const i=Wo(this);if(!i||!Ra(n,i.getValue())){const r=dy(n);!i||i.constructor!=r?yx(this,r.create(n)):i.setValue(n),i&&Xt.batchedUpdates(()=>{this._onChange(n,t)})}}return Wo(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,nd(this,"onStart",mo(this,td(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Bu(this.animation.onChange,e,this)),Bu(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Wo(this).reset(Is(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Cl(this)||(pS(this,!0),ed(this)||this._resume())}_resume(){qo.skipAnimation?this.finish():Fg.start(this)}_stop(e,t){if(Cl(this)){pS(this,!1);const n=this.animation;xn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),lg(this,{type:"idle",parent:this});const i=t?If(this.get()):mo(this.get(),td(this,e??n.to));sd(this._pendingCalls,i),n.changed&&(n.changed=!1,nd(this,"onRest",i,this))}}}function td(o,e){const t=Nd(e),n=Nd(o.get());return Ra(n,t)}function A2(o,e=o.loop,t=o.to){let n=Bu(e);if(n){const i=n!==!0&&S2(n),r=(i||o).reverse,a=!i||i.reset;return zd(Xi({},o,{loop:e,default:!1,pause:void 0,to:!r||py(t)?t:void 0,from:a?o.from:void 0,reset:a},i))}}function zd(o){const{to:e,from:t}=o=S2(o),n=new Set;return ht.obj(e)&&gS(e,n),ht.obj(t)&&gS(t,n),o.keys=n.size?Array.from(n):null,o}function LD(o){const e=zd(o);return ht.und(e.default)&&(e.default=Sx(e)),e}function gS(o,e){Ua(o,(t,n)=>t!=null&&e.add(n))}const RD=["onStart","onRest","onChange","onPause","onResume"];function vS(o,e,t){o.animation[t]=e[t]!==_2(e,t)?x2(e[t],o.key):void 0}function nd(o,e,...t){var n,i,r,a;(n=(i=o.animation)[e])==null||n.call(i,...t),(r=(a=o.defaultProps)[e])==null||r.call(a,...t)}const ID=["onStart","onChange","onRest"];let DD=1;class kD{constructor(e,t){this.id=DD++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(Xi({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];ht.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(zd(e)),this}start(e){let{queue:t}=this;return e?t=Fs(e).map(zd):this.queue=[],this._flush?this._flush(this,t):(D2(this,t),vy(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;xn(Fs(t),i=>n[i].stop(!!e))}else Od(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(ht.und(e))this.start({pause:!0});else{const t=this.springs;xn(Fs(e),n=>t[n].pause())}return this}resume(e){if(ht.und(e))this.start({pause:!1});else{const t=this.springs;xn(Fs(e),n=>t[n].resume())}return this}each(e){Ua(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,fd(e,([f,d])=>{d.value=this.get(),f(d,this,this._item)}));const a=!i&&this._started,l=r||a&&n.size?this.get():null;r&&t.size&&fd(t,([f,d])=>{d.value=l,f(d,this,this._item)}),a&&(this._started=!1,fd(n,([f,d])=>{d.value=l,f(d,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Xt.onFrame(this._onFrame)}}function vy(o,e){return Promise.all(e.map(t=>P2(o,t))).then(t=>wx(o,t))}async function P2(o,e,t){const{keys:n,to:i,from:r,loop:a,onRest:l,onResolve:f}=e,d=ht.obj(e.default)&&e.default;a&&(e.loop=!1),i===!1&&(e.to=null),r===!1&&(e.from=null);const p=ht.arr(i)||ht.fun(i)?i:void 0;p?(e.to=void 0,e.onRest=void 0,d&&(d.onRest=void 0)):xn(ID,w=>{const S=e[w];if(ht.fun(S)){const C=o._events[w];e[w]=({finished:E,cancelled:A})=>{const L=C.get(S);L?(E||(L.finished=!1),A&&(L.cancelled=!0)):C.set(S,{value:null,finished:E||!1,cancelled:A||!1})},d&&(d[w]=e[w])}});const g=o._state;e.pause===!g.paused?(g.paused=e.pause,sd(e.pause?g.pauseQueue:g.resumeQueue)):g.paused&&(e.pause=!0);const v=(n||Object.keys(o.springs)).map(w=>o.springs[w].start(e)),x=e.cancel===!0||_2(e,"cancel")===!0;(p||x&&g.asyncId)&&v.push(w2(++o._lastAsyncId,{props:e,state:g,actions:{pause:cy,resume:cy,start(w,S){x?(Od(g,o._lastAsyncId),S(If(o))):(w.onRest=l,S(b2(p,w,g,o)))}}})),g.paused&&await new Promise(w=>{g.resumeQueue.add(w)});const M=wx(o,await Promise.all(v));if(a&&M.finished&&!(t&&M.noop)){const w=A2(e,a,i);if(w)return D2(o,[w]),P2(o,w,!0)}return f&&Xt.batchedUpdates(()=>f(M,o,o.item)),M}function yS(o,e){const t=Xi({},o.springs);return e&&xn(Fs(e),n=>{ht.und(n.keys)&&(n=zd(n)),ht.obj(n.to)||(n=Xi({},n,{to:void 0})),I2(t,n,i=>R2(i))}),L2(o,t),t}function L2(o,e){Ua(e,(t,n)=>{o.springs[n]||(o.springs[n]=t,sp(t,o))})}function R2(o,e){const t=new PD;return t.key=o,e&&sp(t,e),t}function I2(o,e,t){e.keys&&xn(e.keys,n=>{(o[n]||(o[n]=t(n)))._prepareNode(e)})}function D2(o,e){xn(e,t=>{I2(o.springs,t,n=>R2(n,o))})}function FD(o,e){if(o==null)return{};var t={},n=Object.keys(o),i,r;for(r=0;r<n.length;r++)i=n[r],!(e.indexOf(i)>=0)&&(t[i]=o[i]);return t}const ND=["children"],Bg=o=>{let{children:e}=o,t=FD(o,ND);const n=We.useContext(hg),i=t.pause||!!n.pause,r=t.immediate||!!n.immediate;t=lD(()=>({pause:i,immediate:r}),[i,r]);const{Provider:a}=hg;return We.createElement(a,{value:t},e)},hg=OD(Bg,{});Bg.Provider=hg.Provider;Bg.Consumer=hg.Consumer;function OD(o,e){return Object.assign(o,We.createContext(e)),o.Provider._context=o,o.Consumer._context=o,o}const zD=()=>{const o=[],e=function(i){oD();const r=[];return xn(o,(a,l)=>{if(ht.und(i))r.push(a.start());else{const f=t(i,a,l);f&&r.push(a.start(f))}}),r};e.current=o,e.add=function(n){o.includes(n)||o.push(n)},e.delete=function(n){const i=o.indexOf(n);~i&&o.splice(i,1)},e.pause=function(){return xn(o,n=>n.pause(...arguments)),this},e.resume=function(){return xn(o,n=>n.resume(...arguments)),this},e.set=function(n){xn(o,i=>i.set(n))},e.start=function(n){const i=[];return xn(o,(r,a)=>{if(ht.und(n))i.push(r.start());else{const l=this._getProps(n,r,a);l&&i.push(r.start(l))}}),i},e.stop=function(){return xn(o,n=>n.stop(...arguments)),this},e.update=function(n){return xn(o,(i,r)=>i.update(this._getProps(n,i,r))),this};const t=function(i,r,a){return ht.fun(i)?i(a,r):i};return e._getProps=t,e};function UD(o,e,t){const n=ht.fun(e)&&e;n&&!t&&(t=[]);const i=We.useMemo(()=>n||arguments.length==3?zD():void 0,[]),r=We.useRef(0),a=g2(),l=We.useMemo(()=>({ctrls:[],queue:[],flush(C,E){const A=yS(C,E);return r.current>0&&!l.queue.length&&!Object.keys(A).some(D=>!C.springs[D])?vy(C,E):new Promise(D=>{L2(C,A),l.queue.push(()=>{D(vy(C,E))}),a()})}}),[]),f=We.useRef([...l.ctrls]),d=[],p=oS(o)||0;We.useMemo(()=>{xn(f.current.slice(o,p),C=>{wD(C,i),C.stop(!0)}),f.current.length=o,g(p,o)},[o]),We.useMemo(()=>{g(0,Math.min(p,o))},t);function g(C,E){for(let A=C;A<E;A++){const L=f.current[A]||(f.current[A]=new kD(null,l.flush)),D=n?n(A,L):e[A];D&&(d[A]=LD(D))}}const v=f.current.map((C,E)=>yS(C,d[E])),x=We.useContext(Bg),M=oS(x),w=x!==M&&SD(x);vx(()=>{r.current++,l.ctrls=f.current;const{queue:C}=l;C.length&&(l.queue=[],xn(C,E=>E())),xn(f.current,(E,A)=>{i==null||i.add(E),w&&E.start({default:x});const L=d[A];L&&(MD(E,L.ref),E.ref?E.queue.push(L):E.start(L))})}),v2(()=>()=>{xn(l.ctrls,C=>C.stop(!0))});const S=v.map(C=>Xi({},C));return i?[S,i]:S}function xS(o,e){const t=ht.fun(o),[[n],i]=UD(1,t?o:[o],t?[]:e);return t||arguments.length==2?[n,i]:n}let _S;(function(o){o.MOUNT="mount",o.ENTER="enter",o.UPDATE="update",o.LEAVE="leave"})(_S||(_S={}));class BD extends Mx{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=kd(...t);const n=this._get(),i=dy(n);yx(this,i.create(n))}advance(e){const t=this._get(),n=this.get();Ra(t,n)||(Wo(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&SS(this._active)&&gv(this)}_get(){const e=ht.arr(this.source)?this.source.map(Is):Fs(Is(this.source));return this.calc(...e)}_start(){this.idle&&!SS(this._active)&&(this.idle=!1,xn(Ug(this),e=>{e.done=!1}),qo.skipAnimation?(Xt.batchedUpdates(()=>this.advance()),gv(this)):Fg.start(this))}_attach(){let e=1;xn(Fs(this.source),t=>{Ho(t)&&sp(t,this),gy(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){xn(Fs(this.source),e=>{Ho(e)&&ug(e,this)}),this._active.clear(),gv(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Fs(this.source).reduce((t,n)=>Math.max(t,(gy(n)?n.priority:0)+1),0))}}function GD(o){return o.idle!==!1}function SS(o){return!o.size||Array.from(o).every(GD)}function gv(o){o.idle||(o.idle=!0,xn(Ug(o),e=>{e.done=!0}),lg(o,{type:"idle",parent:o}))}qo.assign({createStringInterpolator:p2,to:(o,e)=>new BD(o,e)});const VD=["primitive"].concat(Object.keys(zM).filter(o=>/^[A-Z]/.test(o)).map(o=>o[0].toLowerCase()+o.slice(1)));qo.assign({createStringInterpolator:p2,colors:OI,frameLoop:"demand"});uI(()=>{Xt.advance()});const WD=gD(VD,{applyAnimatedValues:Ou}),xf=WD.animated;var HD=Object.defineProperty,jD=(o,e,t)=>e in o?HD(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,XD=(o,e,t)=>(jD(o,e+"",t),t);class YD{constructor(){XD(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let r=0,a=i.length;r<a;r++)i[r].call(this,e);e.target=null}}}var qD=Object.defineProperty,ZD=(o,e,t)=>e in o?qD(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,It=(o,e,t)=>(ZD(o,typeof e!="symbol"?e+"":e,t),t);const Gm=new Gf,wS=new Ia,JD=Math.cos(70*(Math.PI/180)),MS=(o,e)=>(o%e+e)%e;let QD=class extends YD{constructor(e,t){super(),It(this,"object"),It(this,"domElement"),It(this,"enabled",!0),It(this,"target",new J),It(this,"minDistance",0),It(this,"maxDistance",1/0),It(this,"minZoom",0),It(this,"maxZoom",1/0),It(this,"minPolarAngle",0),It(this,"maxPolarAngle",Math.PI),It(this,"minAzimuthAngle",-1/0),It(this,"maxAzimuthAngle",1/0),It(this,"enableDamping",!1),It(this,"dampingFactor",.05),It(this,"enableZoom",!0),It(this,"zoomSpeed",1),It(this,"enableRotate",!0),It(this,"rotateSpeed",1),It(this,"enablePan",!0),It(this,"panSpeed",1),It(this,"screenSpacePanning",!0),It(this,"keyPanSpeed",7),It(this,"zoomToCursor",!1),It(this,"autoRotate",!1),It(this,"autoRotateSpeed",2),It(this,"reverseOrbit",!1),It(this,"reverseHorizontalOrbit",!1),It(this,"reverseVerticalOrbit",!1),It(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),It(this,"mouseButtons",{LEFT:ku.ROTATE,MIDDLE:ku.DOLLY,RIGHT:ku.PAN}),It(this,"touches",{ONE:Fu.ROTATE,TWO:Fu.DOLLY_PAN}),It(this,"target0"),It(this,"position0"),It(this,"zoom0"),It(this,"_domElementKeyEvents",null),It(this,"getPolarAngle"),It(this,"getAzimuthalAngle"),It(this,"setPolarAngle"),It(this,"setAzimuthalAngle"),It(this,"getDistance"),It(this,"getZoomScale"),It(this,"listenToKeyEvents"),It(this,"stopListenToKeyEvents"),It(this,"saveState"),It(this,"reset"),It(this,"update"),It(this,"connect"),It(this,"dispose"),It(this,"dollyIn"),It(this,"dollyOut"),It(this,"getScale"),It(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=ie=>{let Fe=MS(ie,2*Math.PI),st=p.phi;st<0&&(st+=2*Math.PI),Fe<0&&(Fe+=2*Math.PI);let ee=Math.abs(Fe-st);2*Math.PI-ee<ee&&(Fe<st?Fe+=2*Math.PI:st+=2*Math.PI),g.phi=Fe-st,n.update()},this.setAzimuthalAngle=ie=>{let Fe=MS(ie,2*Math.PI),st=p.theta;st<0&&(st+=2*Math.PI),Fe<0&&(Fe+=2*Math.PI);let ee=Math.abs(Fe-st);2*Math.PI-ee<ee&&(Fe<st?Fe+=2*Math.PI:st+=2*Math.PI),g.theta=Fe-st,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ie=>{ie.addEventListener("keydown",qe),this._domElementKeyEvents=ie},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",qe),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),f=l.NONE},this.update=(()=>{const ie=new J,Fe=new J(0,1,0),st=new _r().setFromUnitVectors(e.up,Fe),ee=st.clone().invert(),xe=new J,Be=new _r,rt=2*Math.PI;return function(){const Yt=n.object.position;st.setFromUnitVectors(e.up,Fe),ee.copy(st).invert(),ie.copy(Yt).sub(n.target),ie.applyQuaternion(st),p.setFromVector3(ie),n.autoRotate&&f===l.NONE&&q(X()),n.enableDamping?(p.theta+=g.theta*n.dampingFactor,p.phi+=g.phi*n.dampingFactor):(p.theta+=g.theta,p.phi+=g.phi);let kt=n.minAzimuthAngle,Vt=n.maxAzimuthAngle;isFinite(kt)&&isFinite(Vt)&&(kt<-Math.PI?kt+=rt:kt>Math.PI&&(kt-=rt),Vt<-Math.PI?Vt+=rt:Vt>Math.PI&&(Vt-=rt),kt<=Vt?p.theta=Math.max(kt,Math.min(Vt,p.theta)):p.theta=p.theta>(kt+Vt)/2?Math.max(kt,p.theta):Math.min(Vt,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(x,n.dampingFactor):n.target.add(x),n.zoomToCursor&&z||n.object.isOrthographicCamera?p.radius=re(p.radius):p.radius=re(p.radius*v),ie.setFromSpherical(p),ie.applyQuaternion(ee),Yt.copy(n.target).add(ie),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(g.theta*=1-n.dampingFactor,g.phi*=1-n.dampingFactor,x.multiplyScalar(1-n.dampingFactor)):(g.set(0,0,0),x.set(0,0,0));let Gt=!1;if(n.zoomToCursor&&z){let en=null;if(n.object instanceof hi&&n.object.isPerspectiveCamera){const Ot=ie.length();en=re(Ot*v);const zt=Ot-en;n.object.position.addScaledVector(B,zt),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Ot=new J(I.x,I.y,0);Ot.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),Gt=!0;const zt=new J(I.x,I.y,0);zt.unproject(n.object),n.object.position.sub(zt).add(Ot),n.object.updateMatrixWorld(),en=ie.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;en!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(en).add(n.object.position):(Gm.origin.copy(n.object.position),Gm.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Gm.direction))<JD?e.lookAt(n.target):(wS.setFromNormalAndCoplanarPoint(n.object.up,n.target),Gm.intersectPlane(wS,n.target))))}else n.object instanceof kl&&n.object.isOrthographicCamera&&(Gt=v!==1,Gt&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,z=!1,Gt||xe.distanceToSquared(n.object.position)>d||8*(1-Be.dot(n.object.quaternion))>d?(n.dispatchEvent(i),xe.copy(n.object.position),Be.copy(n.object.quaternion),Gt=!1,!0):!1}})(),this.connect=ie=>{n.domElement=ie,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",lt),n.domElement.addEventListener("pointerdown",W),n.domElement.addEventListener("pointercancel",fe),n.domElement.addEventListener("wheel",Ye)},this.dispose=()=>{var ie,Fe,st,ee,xe,Be;n.domElement&&(n.domElement.style.touchAction="auto"),(ie=n.domElement)==null||ie.removeEventListener("contextmenu",lt),(Fe=n.domElement)==null||Fe.removeEventListener("pointerdown",W),(st=n.domElement)==null||st.removeEventListener("pointercancel",fe),(ee=n.domElement)==null||ee.removeEventListener("wheel",Ye),(xe=n.domElement)==null||xe.ownerDocument.removeEventListener("pointermove",G),(Be=n.domElement)==null||Be.ownerDocument.removeEventListener("pointerup",fe),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",qe)};const n=this,i={type:"change"},r={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=l.NONE;const d=1e-6,p=new oy,g=new oy;let v=1;const x=new J,M=new Ve,w=new Ve,S=new Ve,C=new Ve,E=new Ve,A=new Ve,L=new Ve,D=new Ve,F=new Ve,B=new J,I=new Ve;let z=!1;const V=[],te={};function X(){return 2*Math.PI/60/60*n.autoRotateSpeed}function K(){return Math.pow(.95,n.zoomSpeed)}function q(ie){n.reverseOrbit||n.reverseHorizontalOrbit?g.theta+=ie:g.theta-=ie}function oe(ie){n.reverseOrbit||n.reverseVerticalOrbit?g.phi+=ie:g.phi-=ie}const ce=(()=>{const ie=new J;return function(st,ee){ie.setFromMatrixColumn(ee,0),ie.multiplyScalar(-st),x.add(ie)}})(),ye=(()=>{const ie=new J;return function(st,ee){n.screenSpacePanning===!0?ie.setFromMatrixColumn(ee,1):(ie.setFromMatrixColumn(ee,0),ie.crossVectors(n.object.up,ie)),ie.multiplyScalar(st),x.add(ie)}})(),H=(()=>{const ie=new J;return function(st,ee){const xe=n.domElement;if(xe&&n.object instanceof hi&&n.object.isPerspectiveCamera){const Be=n.object.position;ie.copy(Be).sub(n.target);let rt=ie.length();rt*=Math.tan(n.object.fov/2*Math.PI/180),ce(2*st*rt/xe.clientHeight,n.object.matrix),ye(2*ee*rt/xe.clientHeight,n.object.matrix)}else xe&&n.object instanceof kl&&n.object.isOrthographicCamera?(ce(st*(n.object.right-n.object.left)/n.object.zoom/xe.clientWidth,n.object.matrix),ye(ee*(n.object.top-n.object.bottom)/n.object.zoom/xe.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function Q(ie){n.object instanceof hi&&n.object.isPerspectiveCamera||n.object instanceof kl&&n.object.isOrthographicCamera?v=ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Y(ie){Q(v/ie)}function N(ie){Q(v*ie)}function O(ie){if(!n.zoomToCursor||!n.domElement)return;z=!0;const Fe=n.domElement.getBoundingClientRect(),st=ie.clientX-Fe.left,ee=ie.clientY-Fe.top,xe=Fe.width,Be=Fe.height;I.x=st/xe*2-1,I.y=-(ee/Be)*2+1,B.set(I.x,I.y,1).unproject(n.object).sub(n.object.position).normalize()}function re(ie){return Math.max(n.minDistance,Math.min(n.maxDistance,ie))}function se(ie){M.set(ie.clientX,ie.clientY)}function Z(ie){O(ie),L.set(ie.clientX,ie.clientY)}function he(ie){C.set(ie.clientX,ie.clientY)}function ue(ie){w.set(ie.clientX,ie.clientY),S.subVectors(w,M).multiplyScalar(n.rotateSpeed);const Fe=n.domElement;Fe&&(q(2*Math.PI*S.x/Fe.clientHeight),oe(2*Math.PI*S.y/Fe.clientHeight)),M.copy(w),n.update()}function me(ie){D.set(ie.clientX,ie.clientY),F.subVectors(D,L),F.y>0?Y(K()):F.y<0&&N(K()),L.copy(D),n.update()}function we(ie){E.set(ie.clientX,ie.clientY),A.subVectors(E,C).multiplyScalar(n.panSpeed),H(A.x,A.y),C.copy(E),n.update()}function Oe(ie){O(ie),ie.deltaY<0?N(K()):ie.deltaY>0&&Y(K()),n.update()}function ke(ie){let Fe=!1;switch(ie.code){case n.keys.UP:H(0,n.keyPanSpeed),Fe=!0;break;case n.keys.BOTTOM:H(0,-n.keyPanSpeed),Fe=!0;break;case n.keys.LEFT:H(n.keyPanSpeed,0),Fe=!0;break;case n.keys.RIGHT:H(-n.keyPanSpeed,0),Fe=!0;break}Fe&&(ie.preventDefault(),n.update())}function ae(){if(V.length==1)M.set(V[0].pageX,V[0].pageY);else{const ie=.5*(V[0].pageX+V[1].pageX),Fe=.5*(V[0].pageY+V[1].pageY);M.set(ie,Fe)}}function be(){if(V.length==1)C.set(V[0].pageX,V[0].pageY);else{const ie=.5*(V[0].pageX+V[1].pageX),Fe=.5*(V[0].pageY+V[1].pageY);C.set(ie,Fe)}}function Ge(){const ie=V[0].pageX-V[1].pageX,Fe=V[0].pageY-V[1].pageY,st=Math.sqrt(ie*ie+Fe*Fe);L.set(0,st)}function He(){n.enableZoom&&Ge(),n.enablePan&&be()}function Ue(){n.enableZoom&&Ge(),n.enableRotate&&ae()}function ut(ie){if(V.length==1)w.set(ie.pageX,ie.pageY);else{const st=Ze(ie),ee=.5*(ie.pageX+st.x),xe=.5*(ie.pageY+st.y);w.set(ee,xe)}S.subVectors(w,M).multiplyScalar(n.rotateSpeed);const Fe=n.domElement;Fe&&(q(2*Math.PI*S.x/Fe.clientHeight),oe(2*Math.PI*S.y/Fe.clientHeight)),M.copy(w)}function Ie(ie){if(V.length==1)E.set(ie.pageX,ie.pageY);else{const Fe=Ze(ie),st=.5*(ie.pageX+Fe.x),ee=.5*(ie.pageY+Fe.y);E.set(st,ee)}A.subVectors(E,C).multiplyScalar(n.panSpeed),H(A.x,A.y),C.copy(E)}function Qe(ie){const Fe=Ze(ie),st=ie.pageX-Fe.x,ee=ie.pageY-Fe.y,xe=Math.sqrt(st*st+ee*ee);D.set(0,xe),F.set(0,Math.pow(D.y/L.y,n.zoomSpeed)),Y(F.y),L.copy(D)}function tt(ie){n.enableZoom&&Qe(ie),n.enablePan&&Ie(ie)}function Re(ie){n.enableZoom&&Qe(ie),n.enableRotate&&ut(ie)}function W(ie){var Fe,st;n.enabled!==!1&&(V.length===0&&((Fe=n.domElement)==null||Fe.ownerDocument.addEventListener("pointermove",G),(st=n.domElement)==null||st.ownerDocument.addEventListener("pointerup",fe)),Je(ie),ie.pointerType==="touch"?Ke(ie):Te(ie))}function G(ie){n.enabled!==!1&&(ie.pointerType==="touch"?Le(ie):je(ie))}function fe(ie){var Fe,st,ee;ct(ie),V.length===0&&((Fe=n.domElement)==null||Fe.releasePointerCapture(ie.pointerId),(st=n.domElement)==null||st.ownerDocument.removeEventListener("pointermove",G),(ee=n.domElement)==null||ee.ownerDocument.removeEventListener("pointerup",fe)),n.dispatchEvent(a),f=l.NONE}function Te(ie){let Fe;switch(ie.button){case 0:Fe=n.mouseButtons.LEFT;break;case 1:Fe=n.mouseButtons.MIDDLE;break;case 2:Fe=n.mouseButtons.RIGHT;break;default:Fe=-1}switch(Fe){case ku.DOLLY:if(n.enableZoom===!1)return;Z(ie),f=l.DOLLY;break;case ku.ROTATE:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(n.enablePan===!1)return;he(ie),f=l.PAN}else{if(n.enableRotate===!1)return;se(ie),f=l.ROTATE}break;case ku.PAN:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(n.enableRotate===!1)return;se(ie),f=l.ROTATE}else{if(n.enablePan===!1)return;he(ie),f=l.PAN}break;default:f=l.NONE}f!==l.NONE&&n.dispatchEvent(r)}function je(ie){if(n.enabled!==!1)switch(f){case l.ROTATE:if(n.enableRotate===!1)return;ue(ie);break;case l.DOLLY:if(n.enableZoom===!1)return;me(ie);break;case l.PAN:if(n.enablePan===!1)return;we(ie);break}}function Ye(ie){n.enabled===!1||n.enableZoom===!1||f!==l.NONE&&f!==l.ROTATE||(ie.preventDefault(),n.dispatchEvent(r),Oe(ie),n.dispatchEvent(a))}function qe(ie){n.enabled===!1||n.enablePan===!1||ke(ie)}function Ke(ie){switch(et(ie),V.length){case 1:switch(n.touches.ONE){case Fu.ROTATE:if(n.enableRotate===!1)return;ae(),f=l.TOUCH_ROTATE;break;case Fu.PAN:if(n.enablePan===!1)return;be(),f=l.TOUCH_PAN;break;default:f=l.NONE}break;case 2:switch(n.touches.TWO){case Fu.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;He(),f=l.TOUCH_DOLLY_PAN;break;case Fu.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ue(),f=l.TOUCH_DOLLY_ROTATE;break;default:f=l.NONE}break;default:f=l.NONE}f!==l.NONE&&n.dispatchEvent(r)}function Le(ie){switch(et(ie),f){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;ut(ie),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;Ie(ie),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;tt(ie),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Re(ie),n.update();break;default:f=l.NONE}}function lt(ie){n.enabled!==!1&&ie.preventDefault()}function Je(ie){V.push(ie)}function ct(ie){delete te[ie.pointerId];for(let Fe=0;Fe<V.length;Fe++)if(V[Fe].pointerId==ie.pointerId){V.splice(Fe,1);return}}function et(ie){let Fe=te[ie.pointerId];Fe===void 0&&(Fe=new Ve,te[ie.pointerId]=Fe),Fe.set(ie.pageX,ie.pageY)}function Ze(ie){const Fe=ie.pointerId===V[0].pointerId?V[1]:V[0];return te[Fe.pointerId]}this.dollyIn=(ie=K())=>{N(ie),n.update()},this.dollyOut=(ie=K())=>{Y(ie),n.update()},this.getScale=()=>v,this.setScale=ie=>{Q(ie),n.update()},this.getZoomScale=()=>K(),t!==void 0&&this.connect(t),this.update()}};function KD(){var o=Object.create(null);function e(i,r){var a=i.id,l=i.name,f=i.dependencies;f===void 0&&(f=[]);var d=i.init;d===void 0&&(d=function(){});var p=i.getTransferables;if(p===void 0&&(p=null),!o[a])try{f=f.map(function(v){return v&&v.isWorkerModule&&(e(v,function(x){if(x instanceof Error)throw x}),v=o[v.id].value),v}),d=n("<"+l+">.init",d),p&&(p=n("<"+l+">.getTransferables",p));var g=null;typeof d=="function"?g=d.apply(void 0,f):console.error("worker module init function failed to rehydrate"),o[a]={id:a,value:g,getTransferables:p},r(g)}catch(v){v&&v.noLog||console.error(v),r(v)}}function t(i,r){var a,l=i.id,f=i.args;(!o[l]||typeof o[l].value!="function")&&r(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var d=(a=o[l]).value.apply(a,f);d&&typeof d.then=="function"?d.then(p,function(g){return r(g instanceof Error?g:new Error(""+g))}):p(d)}catch(g){r(g)}function p(g){try{var v=o[l].getTransferables&&o[l].getTransferables(g);(!v||!Array.isArray(v)||!v.length)&&(v=void 0),r(g,v)}catch(x){console.error(x),r(x)}}}function n(i,r){var a=void 0;self.troikaDefine=function(f){return a=f};var l=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+r+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(f){console.error(f)}return URL.revokeObjectURL(l),delete self.troikaDefine,a}self.addEventListener("message",function(i){var r=i.data,a=r.messageId,l=r.action,f=r.data;try{l==="registerModule"&&e(f,function(d){d instanceof Error?postMessage({messageId:a,success:!1,error:d.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof d=="function"}})}),l==="callModule"&&t(f,function(d,p){d instanceof Error?postMessage({messageId:a,success:!1,error:d.message}):postMessage({messageId:a,success:!0,result:d},p||void 0)})}catch(d){postMessage({messageId:a,success:!1,error:d.stack})}})}function $D(o){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=o.dependencies,n=o.init;t=Array.isArray(t)?t.map(function(r){return r&&r._getInitResult?r._getInitResult():r}):[];var i=Promise.all(t).then(function(r){return n.apply(null,r)});return e._getInitResult=function(){return i},i},e}var k2=function(){var o=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),o=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return k2=function(){return o},o},ek=0,tk=0,vv=!1,pd=Object.create(null),md=Object.create(null),yy=Object.create(null);function op(o){if((!o||typeof o.init!="function")&&!vv)throw new Error("requires `options.init` function");var e=o.dependencies,t=o.init,n=o.getTransferables,i=o.workerId;if(!k2())return $D(o);i==null&&(i="#default");var r="workerModule"+ ++ek,a=o.name||r,l=null;e=e&&e.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(vv=!0,d=op({workerId:i,name:"<"+a+"> function dependency: "+d.name,init:`function(){return (
`+$m(d)+`
)}`}),vv=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function f(){for(var d=[],p=arguments.length;p--;)d[p]=arguments[p];if(!l){l=bS(i,"registerModule",f.workerModuleData);var g=function(){l=null,md[i].delete(g)};(md[i]||(md[i]=new Set)).add(g)}return l.then(function(v){var x=v.isCallable;if(x)return bS(i,"callModule",{id:r,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return f.workerModuleData={isWorkerModule:!0,id:r,name:a,dependencies:e,init:$m(t),getTransferables:n&&$m(n)},f}function nk(o){md[o]&&md[o].forEach(function(e){e()}),pd[o]&&(pd[o].terminate(),delete pd[o])}function $m(o){var e=o.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function ik(o){var e=pd[o];if(!e){var t=$m(KD);e=pd[o]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+o.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var i=n.data,r=i.messageId,a=yy[r];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete yy[r],a(i)}}return e}function bS(o,e,t){return new Promise(function(n,i){var r=++tk;yy[r]=function(a){a.success?n(a.result):i(new Error("Error in worker "+e+" call: "+a.error))},ik(o).postMessage({messageId:r,action:e,data:t})})}function F2(){var o=function(e){function t(Q,Y,N,O,re,se,Z,he){var ue=1-Z;he.x=ue*ue*Q+2*ue*Z*N+Z*Z*re,he.y=ue*ue*Y+2*ue*Z*O+Z*Z*se}function n(Q,Y,N,O,re,se,Z,he,ue,me){var we=1-ue;me.x=we*we*we*Q+3*we*we*ue*N+3*we*ue*ue*re+ue*ue*ue*Z,me.y=we*we*we*Y+3*we*we*ue*O+3*we*ue*ue*se+ue*ue*ue*he}function i(Q,Y){for(var N=/([MLQCZ])([^MLQCZ]*)/g,O,re,se,Z,he;O=N.exec(Q);){var ue=O[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(me){return parseFloat(me)});switch(O[1]){case"M":Z=re=ue[0],he=se=ue[1];break;case"L":(ue[0]!==Z||ue[1]!==he)&&Y("L",Z,he,Z=ue[0],he=ue[1]);break;case"Q":{Y("Q",Z,he,Z=ue[2],he=ue[3],ue[0],ue[1]);break}case"C":{Y("C",Z,he,Z=ue[4],he=ue[5],ue[0],ue[1],ue[2],ue[3]);break}case"Z":(Z!==re||he!==se)&&Y("L",Z,he,re,se);break}}}function r(Q,Y,N){N===void 0&&(N=16);var O={x:0,y:0};i(Q,function(re,se,Z,he,ue,me,we,Oe,ke){switch(re){case"L":Y(se,Z,he,ue);break;case"Q":{for(var ae=se,be=Z,Ge=1;Ge<N;Ge++)t(se,Z,me,we,he,ue,Ge/(N-1),O),Y(ae,be,O.x,O.y),ae=O.x,be=O.y;break}case"C":{for(var He=se,Ue=Z,ut=1;ut<N;ut++)n(se,Z,me,we,Oe,ke,he,ue,ut/(N-1),O),Y(He,Ue,O.x,O.y),He=O.x,Ue=O.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",f=new WeakMap,d={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function p(Q,Y){var N=Q.getContext?Q.getContext("webgl",d):Q,O=f.get(N);if(!O){let He=function(Re){var W=se[Re];if(!W&&(W=se[Re]=N.getExtension(Re),!W))throw new Error(Re+" not supported");return W},Ue=function(Re,W){var G=N.createShader(W);return N.shaderSource(G,Re),N.compileShader(G),G},ut=function(Re,W,G,fe){if(!Z[Re]){var Te={},je={},Ye=N.createProgram();N.attachShader(Ye,Ue(W,N.VERTEX_SHADER)),N.attachShader(Ye,Ue(G,N.FRAGMENT_SHADER)),N.linkProgram(Ye),Z[Re]={program:Ye,transaction:function(Ke){N.useProgram(Ye),Ke({setUniform:function(lt,Je){for(var ct=[],et=arguments.length-2;et-- >0;)ct[et]=arguments[et+2];var Ze=je[Je]||(je[Je]=N.getUniformLocation(Ye,Je));N["uniform"+lt].apply(N,[Ze].concat(ct))},setAttribute:function(lt,Je,ct,et,Ze){var ie=Te[lt];ie||(ie=Te[lt]={buf:N.createBuffer(),loc:N.getAttribLocation(Ye,lt),data:null}),N.bindBuffer(N.ARRAY_BUFFER,ie.buf),N.vertexAttribPointer(ie.loc,Je,N.FLOAT,!1,0,0),N.enableVertexAttribArray(ie.loc),re?N.vertexAttribDivisor(ie.loc,et):He("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ie.loc,et),Ze!==ie.data&&(N.bufferData(N.ARRAY_BUFFER,Ze,ct),ie.data=Ze)}})}}}Z[Re].transaction(fe)},Ie=function(Re,W){ue++;try{N.activeTexture(N.TEXTURE0+ue);var G=he[Re];G||(G=he[Re]=N.createTexture(),N.bindTexture(N.TEXTURE_2D,G),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.NEAREST),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.NEAREST)),N.bindTexture(N.TEXTURE_2D,G),W(G,ue)}finally{ue--}},Qe=function(Re,W,G){var fe=N.createFramebuffer();me.push(fe),N.bindFramebuffer(N.FRAMEBUFFER,fe),N.activeTexture(N.TEXTURE0+W),N.bindTexture(N.TEXTURE_2D,Re),N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,Re,0);try{G(fe)}finally{N.deleteFramebuffer(fe),N.bindFramebuffer(N.FRAMEBUFFER,me[--me.length-1]||null)}},tt=function(){se={},Z={},he={},ue=-1,me.length=0};var we=He,Oe=Ue,ke=ut,ae=Ie,be=Qe,Ge=tt,re=typeof WebGL2RenderingContext<"u"&&N instanceof WebGL2RenderingContext,se={},Z={},he={},ue=-1,me=[];N.canvas.addEventListener("webglcontextlost",function(Re){tt(),Re.preventDefault()},!1),f.set(N,O={gl:N,isWebGL2:re,getExtension:He,withProgram:ut,withTexture:Ie,withTextureFramebuffer:Qe,handleContextLoss:tt})}Y(O)}function g(Q,Y,N,O,re,se,Z,he){Z===void 0&&(Z=15),he===void 0&&(he=null),p(Q,function(ue){var me=ue.gl,we=ue.withProgram,Oe=ue.withTexture;Oe("copy",function(ke,ae){me.texImage2D(me.TEXTURE_2D,0,me.RGBA,re,se,0,me.RGBA,me.UNSIGNED_BYTE,Y),we("copy",a,l,function(be){var Ge=be.setUniform,He=be.setAttribute;He("aUV",2,me.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ge("1i","image",ae),me.bindFramebuffer(me.FRAMEBUFFER,he||null),me.disable(me.BLEND),me.colorMask(Z&8,Z&4,Z&2,Z&1),me.viewport(N,O,re,se),me.scissor(N,O,re,se),me.drawArrays(me.TRIANGLES,0,3)})})})}function v(Q,Y,N){var O=Q.width,re=Q.height;p(Q,function(se){var Z=se.gl,he=new Uint8Array(O*re*4);Z.readPixels(0,0,O,re,Z.RGBA,Z.UNSIGNED_BYTE,he),Q.width=Y,Q.height=N,g(Z,he,0,0,O,re)})}var x=Object.freeze({__proto__:null,withWebGLContext:p,renderImageData:g,resizeWebGLCanvasWithoutClearing:v});function M(Q,Y,N,O,re,se){se===void 0&&(se=1);var Z=new Uint8Array(Q*Y),he=O[2]-O[0],ue=O[3]-O[1],me=[];r(N,function(He,Ue,ut,Ie){me.push({x1:He,y1:Ue,x2:ut,y2:Ie,minX:Math.min(He,ut),minY:Math.min(Ue,Ie),maxX:Math.max(He,ut),maxY:Math.max(Ue,Ie)})}),me.sort(function(He,Ue){return He.maxX-Ue.maxX});for(var we=0;we<Q;we++)for(var Oe=0;Oe<Y;Oe++){var ke=be(O[0]+he*(we+.5)/Q,O[1]+ue*(Oe+.5)/Y),ae=Math.pow(1-Math.abs(ke)/re,se)/2;ke<0&&(ae=1-ae),ae=Math.max(0,Math.min(255,Math.round(ae*255))),Z[Oe*Q+we]=ae}return Z;function be(He,Ue){for(var ut=1/0,Ie=1/0,Qe=me.length;Qe--;){var tt=me[Qe];if(tt.maxX+Ie<=He)break;if(He+Ie>tt.minX&&Ue-Ie<tt.maxY&&Ue+Ie>tt.minY){var Re=C(He,Ue,tt.x1,tt.y1,tt.x2,tt.y2);Re<ut&&(ut=Re,Ie=Math.sqrt(ut))}}return Ge(He,Ue)&&(Ie=-Ie),Ie}function Ge(He,Ue){for(var ut=0,Ie=me.length;Ie--;){var Qe=me[Ie];if(Qe.maxX<=He)break;var tt=Qe.y1>Ue!=Qe.y2>Ue&&He<(Qe.x2-Qe.x1)*(Ue-Qe.y1)/(Qe.y2-Qe.y1)+Qe.x1;tt&&(ut+=Qe.y1<Qe.y2?1:-1)}return ut!==0}}function w(Q,Y,N,O,re,se,Z,he,ue,me){se===void 0&&(se=1),he===void 0&&(he=0),ue===void 0&&(ue=0),me===void 0&&(me=0),S(Q,Y,N,O,re,se,Z,null,he,ue,me)}function S(Q,Y,N,O,re,se,Z,he,ue,me,we){se===void 0&&(se=1),ue===void 0&&(ue=0),me===void 0&&(me=0),we===void 0&&(we=0);for(var Oe=M(Q,Y,N,O,re,se),ke=new Uint8Array(Oe.length*4),ae=0;ae<Oe.length;ae++)ke[ae*4+we]=Oe[ae];g(Z,ke,ue,me,Q,Y,1<<3-we,he)}function C(Q,Y,N,O,re,se){var Z=re-N,he=se-O,ue=Z*Z+he*he,me=ue?Math.max(0,Math.min(1,((Q-N)*Z+(Y-O)*he)/ue)):0,we=Q-(N+me*Z),Oe=Y-(O+me*he);return we*we+Oe*Oe}var E=Object.freeze({__proto__:null,generate:M,generateIntoCanvas:w,generateIntoFramebuffer:S}),A="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",L="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",D="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",F=new Float32Array([0,0,2,0,0,2]),B=null,I=!1,z={},V=new WeakMap;function te(Q){if(!I&&!oe(Q))throw new Error("WebGL generation not supported")}function X(Q,Y,N,O,re,se,Z){if(se===void 0&&(se=1),Z===void 0&&(Z=null),!Z&&(Z=B,!Z)){var he=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!he)throw new Error("OffscreenCanvas or DOM canvas not supported");Z=B=he.getContext("webgl",{depth:!1})}te(Z);var ue=new Uint8Array(Q*Y*4);p(Z,function(ke){var ae=ke.gl,be=ke.withTexture,Ge=ke.withTextureFramebuffer;be("readable",function(He,Ue){ae.texImage2D(ae.TEXTURE_2D,0,ae.RGBA,Q,Y,0,ae.RGBA,ae.UNSIGNED_BYTE,null),Ge(He,Ue,function(ut){q(Q,Y,N,O,re,se,ae,ut,0,0,0),ae.readPixels(0,0,Q,Y,ae.RGBA,ae.UNSIGNED_BYTE,ue)})})});for(var me=new Uint8Array(Q*Y),we=0,Oe=0;we<ue.length;we+=4)me[Oe++]=ue[we];return me}function K(Q,Y,N,O,re,se,Z,he,ue,me){se===void 0&&(se=1),he===void 0&&(he=0),ue===void 0&&(ue=0),me===void 0&&(me=0),q(Q,Y,N,O,re,se,Z,null,he,ue,me)}function q(Q,Y,N,O,re,se,Z,he,ue,me,we){se===void 0&&(se=1),ue===void 0&&(ue=0),me===void 0&&(me=0),we===void 0&&(we=0),te(Z);var Oe=[];r(N,function(ke,ae,be,Ge){Oe.push(ke,ae,be,Ge)}),Oe=new Float32Array(Oe),p(Z,function(ke){var ae=ke.gl,be=ke.isWebGL2,Ge=ke.getExtension,He=ke.withProgram,Ue=ke.withTexture,ut=ke.withTextureFramebuffer,Ie=ke.handleContextLoss;if(Ue("rawDistances",function(Qe,tt){(Q!==Qe._lastWidth||Y!==Qe._lastHeight)&&ae.texImage2D(ae.TEXTURE_2D,0,ae.RGBA,Qe._lastWidth=Q,Qe._lastHeight=Y,0,ae.RGBA,ae.UNSIGNED_BYTE,null),He("main",A,L,function(Re){var W=Re.setAttribute,G=Re.setUniform,fe=!be&&Ge("ANGLE_instanced_arrays"),Te=!be&&Ge("EXT_blend_minmax");W("aUV",2,ae.STATIC_DRAW,0,F),W("aLineSegment",4,ae.DYNAMIC_DRAW,1,Oe),G.apply(void 0,["4f","uGlyphBounds"].concat(O)),G("1f","uMaxDistance",re),G("1f","uExponent",se),ut(Qe,tt,function(je){ae.enable(ae.BLEND),ae.colorMask(!0,!0,!0,!0),ae.viewport(0,0,Q,Y),ae.scissor(0,0,Q,Y),ae.blendFunc(ae.ONE,ae.ONE),ae.blendEquationSeparate(ae.FUNC_ADD,be?ae.MAX:Te.MAX_EXT),ae.clear(ae.COLOR_BUFFER_BIT),be?ae.drawArraysInstanced(ae.TRIANGLES,0,3,Oe.length/4):fe.drawArraysInstancedANGLE(ae.TRIANGLES,0,3,Oe.length/4)})}),He("post",a,D,function(Re){Re.setAttribute("aUV",2,ae.STATIC_DRAW,0,F),Re.setUniform("1i","tex",tt),ae.bindFramebuffer(ae.FRAMEBUFFER,he),ae.disable(ae.BLEND),ae.colorMask(we===0,we===1,we===2,we===3),ae.viewport(ue,me,Q,Y),ae.scissor(ue,me,Q,Y),ae.drawArrays(ae.TRIANGLES,0,3)})}),ae.isContextLost())throw Ie(),new Error("webgl context lost")})}function oe(Q){var Y=!Q||Q===B?z:Q.canvas||Q,N=V.get(Y);if(N===void 0){I=!0;var O=null;try{var re=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],se=X(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Q);N=se&&re.length===se.length&&se.every(function(Z,he){return Z===re[he]}),N||(O="bad trial run results",console.info(re,se))}catch(Z){N=!1,O=Z.message}O&&console.warn("WebGL SDF generation not supported:",O),I=!1,V.set(Y,N)}return N}var ce=Object.freeze({__proto__:null,generate:X,generateIntoCanvas:K,generateIntoFramebuffer:q,isSupported:oe});function ye(Q,Y,N,O,re,se){re===void 0&&(re=Math.max(O[2]-O[0],O[3]-O[1])/2),se===void 0&&(se=1);try{return X.apply(ce,arguments)}catch(Z){return console.info("WebGL SDF generation failed, falling back to JS",Z),M.apply(E,arguments)}}function H(Q,Y,N,O,re,se,Z,he,ue,me){re===void 0&&(re=Math.max(O[2]-O[0],O[3]-O[1])/2),se===void 0&&(se=1),he===void 0&&(he=0),ue===void 0&&(ue=0),me===void 0&&(me=0);try{return K.apply(ce,arguments)}catch(we){return console.info("WebGL SDF generation failed, falling back to JS",we),w.apply(E,arguments)}}return e.forEachPathCommand=i,e.generate=ye,e.generateIntoCanvas=H,e.javascript=E,e.pathToLineSegments=r,e.webgl=ce,e.webglUtils=x,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return o}function rk(){var o=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},i={};n.L=1,i[1]="L",Object.keys(t).forEach(function(Ie,Qe){n[Ie]=1<<Qe+1,i[n[Ie]]=Ie}),Object.freeze(n);var r=n.LRI|n.RLI|n.FSI,a=n.L|n.R|n.AL,l=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,f=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,d=n.S|n.WS|n.B|r|n.PDI|f,p=null;function g(){if(!p){p=new Map;var Ie=function(tt){if(t.hasOwnProperty(tt)){var Re=0;t[tt].split(",").forEach(function(W){var G=W.split("+"),fe=G[0],Te=G[1];fe=parseInt(fe,36),Te=Te?parseInt(Te,36):0,p.set(Re+=fe,n[tt]);for(var je=0;je<Te;je++)p.set(++Re,n[tt])})}};for(var Qe in t)Ie(Qe)}}function v(Ie){return g(),p.get(Ie.codePointAt(0))||n.L}function x(Ie){return i[v(Ie)]}var M={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function w(Ie,Qe){var tt=36,Re=0,W=new Map,G=Qe&&new Map,fe;return Ie.split(",").forEach(function Te(je){if(je.indexOf("+")!==-1)for(var Ye=+je;Ye--;)Te(fe);else{fe=je;var qe=je.split(">"),Ke=qe[0],Le=qe[1];Ke=String.fromCodePoint(Re+=parseInt(Ke,tt)),Le=String.fromCodePoint(Re+=parseInt(Le,tt)),W.set(Ke,Le),Qe&&G.set(Le,Ke)}}),{map:W,reverseMap:G}}var S,C,E;function A(){if(!S){var Ie=w(M.pairs,!0),Qe=Ie.map,tt=Ie.reverseMap;S=Qe,C=tt,E=w(M.canonical,!1).map}}function L(Ie){return A(),S.get(Ie)||null}function D(Ie){return A(),C.get(Ie)||null}function F(Ie){return A(),E.get(Ie)||null}var B=n.L,I=n.R,z=n.EN,V=n.ES,te=n.ET,X=n.AN,K=n.CS,q=n.B,oe=n.S,ce=n.ON,ye=n.BN,H=n.NSM,Q=n.AL,Y=n.LRO,N=n.RLO,O=n.LRE,re=n.RLE,se=n.PDF,Z=n.LRI,he=n.RLI,ue=n.FSI,me=n.PDI;function we(Ie,Qe){for(var tt=125,Re=new Uint32Array(Ie.length),W=0;W<Ie.length;W++)Re[W]=v(Ie[W]);var G=new Map;function fe(Kn,oi){var jn=Re[Kn];Re[Kn]=oi,G.set(jn,G.get(jn)-1),jn&l&&G.set(l,G.get(l)-1),G.set(oi,(G.get(oi)||0)+1),oi&l&&G.set(l,(G.get(l)||0)+1)}for(var Te=new Uint8Array(Ie.length),je=new Map,Ye=[],qe=null,Ke=0;Ke<Ie.length;Ke++)qe||Ye.push(qe={start:Ke,end:Ie.length-1,level:Qe==="rtl"?1:Qe==="ltr"?0:gi(Ke,!1)}),Re[Ke]&q&&(qe.end=Ke,qe=null);for(var Le=re|O|N|Y|r|me|se|q,lt=function(Kn){return Kn+(Kn&1?1:2)},Je=function(Kn){return Kn+(Kn&1?2:1)},ct=0;ct<Ye.length;ct++){qe=Ye[ct];var et=[{_level:qe.level,_override:0,_isolate:0}],Ze=void 0,ie=0,Fe=0,st=0;G.clear();for(var ee=qe.start;ee<=qe.end;ee++){var xe=Re[ee];if(Ze=et[et.length-1],G.set(xe,(G.get(xe)||0)+1),xe&l&&G.set(l,(G.get(l)||0)+1),xe&Le)if(xe&(re|O)){Te[ee]=Ze._level;var Be=(xe===re?Je:lt)(Ze._level);Be<=tt&&!ie&&!Fe?et.push({_level:Be,_override:0,_isolate:0}):ie||Fe++}else if(xe&(N|Y)){Te[ee]=Ze._level;var rt=(xe===N?Je:lt)(Ze._level);rt<=tt&&!ie&&!Fe?et.push({_level:rt,_override:xe&N?I:B,_isolate:0}):ie||Fe++}else if(xe&r){xe&ue&&(xe=gi(ee+1,!0)===1?he:Z),Te[ee]=Ze._level,Ze._override&&fe(ee,Ze._override);var mt=(xe===he?Je:lt)(Ze._level);mt<=tt&&ie===0&&Fe===0?(st++,et.push({_level:mt,_override:0,_isolate:1,_isolInitIndex:ee})):ie++}else if(xe&me){if(ie>0)ie--;else if(st>0){for(Fe=0;!et[et.length-1]._isolate;)et.pop();var Yt=et[et.length-1]._isolInitIndex;Yt!=null&&(je.set(Yt,ee),je.set(ee,Yt)),et.pop(),st--}Ze=et[et.length-1],Te[ee]=Ze._level,Ze._override&&fe(ee,Ze._override)}else xe&se?(ie===0&&(Fe>0?Fe--:!Ze._isolate&&et.length>1&&(et.pop(),Ze=et[et.length-1])),Te[ee]=Ze._level):xe&q&&(Te[ee]=qe.level);else Te[ee]=Ze._level,Ze._override&&xe!==ye&&fe(ee,Ze._override)}for(var kt=[],Vt=null,Gt=qe.start;Gt<=qe.end;Gt++){var en=Re[Gt];if(!(en&f)){var Ot=Te[Gt],zt=en&r,Ei=en===me;Vt&&Ot===Vt._level?(Vt._end=Gt,Vt._endsWithIsolInit=zt):kt.push(Vt={_start:Gt,_end:Gt,_level:Ot,_startsWithPDI:Ei,_endsWithIsolInit:zt})}}for(var Wn=[],un=0;un<kt.length;un++){var j=kt[un];if(!j._startsWithPDI||j._startsWithPDI&&!je.has(j._start)){for(var _e=[Vt=j],Ce=void 0;Vt&&Vt._endsWithIsolInit&&(Ce=je.get(Vt._end))!=null;)for(var ge=un+1;ge<kt.length;ge++)if(kt[ge]._start===Ce){_e.push(Vt=kt[ge]);break}for(var Ne=[],St=0;St<_e.length;St++)for(var Ct=_e[St],At=Ct._start;At<=Ct._end;At++)Ne.push(At);for(var Wt=Te[Ne[0]],tn=qe.level,Ht=Ne[0]-1;Ht>=0;Ht--)if(!(Re[Ht]&f)){tn=Te[Ht];break}var qt=Ne[Ne.length-1],Tn=Te[qt],ii=qe.level;if(!(Re[qt]&r)){for(var Ti=qt+1;Ti<=qe.end;Ti++)if(!(Re[Ti]&f)){ii=Te[Ti];break}}Wn.push({_seqIndices:Ne,_sosType:Math.max(tn,Wt)%2?I:B,_eosType:Math.max(ii,Tn)%2?I:B})}}for(var Sr=0;Sr<Wn.length;Sr++){var Sn=Wn[Sr],Xe=Sn._seqIndices,Yi=Sn._sosType,wn=Sn._eosType,ri=Te[Xe[0]]&1?I:B;if(G.get(H))for(var Ur=0;Ur<Xe.length;Ur++){var Br=Xe[Ur];if(Re[Br]&H){for(var qi=Yi,cn=Ur-1;cn>=0;cn--)if(!(Re[Xe[cn]]&f)){qi=Re[Xe[cn]];break}fe(Br,qi&(r|me)?ce:qi)}}if(G.get(z))for(var Dt=0;Dt<Xe.length;Dt++){var an=Xe[Dt];if(Re[an]&z)for(var nn=Dt-1;nn>=-1;nn--){var Fn=nn===-1?Yi:Re[Xe[nn]];if(Fn&a){Fn===Q&&fe(an,X);break}}}if(G.get(Q))for(var Qn=0;Qn<Xe.length;Qn++){var wr=Xe[Qn];Re[wr]&Q&&fe(wr,I)}if(G.get(V)||G.get(K))for(var Zi=1;Zi<Xe.length-1;Zi++){var Hn=Xe[Zi];if(Re[Hn]&(V|K)){for(var Ji=0,Ns=0,Ha=Zi-1;Ha>=0&&(Ji=Re[Xe[Ha]],!!(Ji&f));Ha--);for(var wo=Zi+1;wo<Xe.length&&(Ns=Re[Xe[wo]],!!(Ns&f));wo++);Ji===Ns&&(Re[Hn]===V?Ji===z:Ji&(z|X))&&fe(Hn,Ji)}}if(G.get(z))for(var Qi=0;Qi<Xe.length;Qi++){var lr=Xe[Qi];if(Re[lr]&z){for(var Mo=Qi-1;Mo>=0&&Re[Xe[Mo]]&(te|f);Mo--)fe(Xe[Mo],z);for(Qi++;Qi<Xe.length&&Re[Xe[Qi]]&(te|f|z);Qi++)Re[Xe[Qi]]!==z&&fe(Xe[Qi],z)}}if(G.get(te)||G.get(V)||G.get(K))for(var ts=0;ts<Xe.length;ts++){var lc=Xe[ts];if(Re[lc]&(te|V|K)){fe(lc,ce);for(var ns=ts-1;ns>=0&&Re[Xe[ns]]&f;ns--)fe(Xe[ns],ce);for(var rn=ts+1;rn<Xe.length&&Re[Xe[rn]]&f;rn++)fe(Xe[rn],ce)}}if(G.get(z))for(var ys=0,bo=Yi;ys<Xe.length;ys++){var ja=Xe[ys],Xa=Re[ja];Xa&z?bo===B&&fe(ja,B):Xa&a&&(bo=Xa)}if(G.get(l)){var xs=I|z|X,Jo=xs|B,Gr=[];{for(var is=[],Ci=0;Ci<Xe.length;Ci++)if(Re[Xe[Ci]]&l){var Ft=Ie[Xe[Ci]],Vr=void 0;if(L(Ft)!==null)if(is.length<63)is.push({char:Ft,seqIndex:Ci});else break;else if((Vr=D(Ft))!==null)for(var Mr=is.length-1;Mr>=0;Mr--){var _s=is[Mr].char;if(_s===Vr||_s===D(F(Ft))||L(F(_s))===Ft){Gr.push([is[Mr].seqIndex,Ci]),is.length=Mr;break}}}Gr.sort(function(Kn,oi){return Kn[0]-oi[0]})}for(var Wr=0;Wr<Gr.length;Wr++){for(var uc=Gr[Wr],Rn=uc[0],rs=uc[1],cc=!1,Oi=0,Eo=Rn+1;Eo<rs;Eo++){var To=Xe[Eo];if(Re[To]&Jo){cc=!0;var br=Re[To]&xs?I:B;if(br===ri){Oi=br;break}}}if(cc&&!Oi){Oi=Yi;for(var Os=Rn-1;Os>=0;Os--){var Co=Xe[Os];if(Re[Co]&Jo){var di=Re[Co]&xs?I:B;di!==ri?Oi=di:Oi=ri;break}}}if(Oi){if(Re[Xe[Rn]]=Re[Xe[rs]]=Oi,Oi!==ri){for(var pi=Rn+1;pi<Xe.length;pi++)if(!(Re[Xe[pi]]&f)){v(Ie[Xe[pi]])&H&&(Re[Xe[pi]]=Oi);break}}if(Oi!==ri){for(var Ss=rs+1;Ss<Xe.length;Ss++)if(!(Re[Xe[Ss]]&f)){v(Ie[Xe[Ss]])&H&&(Re[Xe[Ss]]=Oi);break}}}}for(var Hr=0;Hr<Xe.length;Hr++)if(Re[Xe[Hr]]&l){for(var Qo=Hr,Ao=Hr,zi=Yi,Po=Hr-1;Po>=0;Po--)if(Re[Xe[Po]]&f)Qo=Po;else{zi=Re[Xe[Po]]&xs?I:B;break}for(var ur=wn,zs=Hr+1;zs<Xe.length;zs++)if(Re[Xe[zs]]&(l|f))Ao=zs;else{ur=Re[Xe[zs]]&xs?I:B;break}for(var mi=Qo;mi<=Ao;mi++)Re[Xe[mi]]=zi===ur?zi:ri;Hr=Ao}}}for(var si=qe.start;si<=qe.end;si++){var Us=Te[si],cr=Re[si];if(Us&1?cr&(B|z|X)&&Te[si]++:cr&I?Te[si]++:cr&(X|z)&&(Te[si]+=2),cr&f&&(Te[si]=si===0?qe.level:Te[si-1]),si===qe.end||v(Ie[si])&(oe|q))for(var Bs=si;Bs>=0&&v(Ie[Bs])&d;Bs--)Te[Bs]=qe.level}}return{levels:Te,paragraphs:Ye};function gi(Kn,oi){for(var jn=Kn;jn<Ie.length;jn++){var Nn=Re[jn];if(Nn&(I|Q))return 1;if(Nn&(q|B)||oi&&Nn===me)return 0;if(Nn&r){var Ki=Gs(jn);jn=Ki===-1?Ie.length:Ki}}return 0}function Gs(Kn){for(var oi=1,jn=Kn+1;jn<Ie.length;jn++){var Nn=Re[jn];if(Nn&q)break;if(Nn&me){if(--oi===0)return jn}else Nn&r&&oi++}return-1}}var Oe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ke;function ae(){if(!ke){var Ie=w(Oe,!0),Qe=Ie.map,tt=Ie.reverseMap;tt.forEach(function(Re,W){Qe.set(W,Re)}),ke=Qe}}function be(Ie){return ae(),ke.get(Ie)||null}function Ge(Ie,Qe,tt,Re){var W=Ie.length;tt=Math.max(0,tt==null?0:+tt),Re=Math.min(W-1,Re==null?W-1:+Re);for(var G=new Map,fe=tt;fe<=Re;fe++)if(Qe[fe]&1){var Te=be(Ie[fe]);Te!==null&&G.set(fe,Te)}return G}function He(Ie,Qe,tt,Re){var W=Ie.length;tt=Math.max(0,tt==null?0:+tt),Re=Math.min(W-1,Re==null?W-1:+Re);var G=[];return Qe.paragraphs.forEach(function(fe){var Te=Math.max(tt,fe.start),je=Math.min(Re,fe.end);if(Te<je){for(var Ye=Qe.levels.slice(Te,je+1),qe=je;qe>=Te&&v(Ie[qe])&d;qe--)Ye[qe]=fe.level;for(var Ke=fe.level,Le=1/0,lt=0;lt<Ye.length;lt++){var Je=Ye[lt];Je>Ke&&(Ke=Je),Je<Le&&(Le=Je|1)}for(var ct=Ke;ct>=Le;ct--)for(var et=0;et<Ye.length;et++)if(Ye[et]>=ct){for(var Ze=et;et+1<Ye.length&&Ye[et+1]>=ct;)et++;et>Ze&&G.push([Ze+Te,et+Te])}}}),G}function Ue(Ie,Qe,tt,Re){var W=ut(Ie,Qe,tt,Re),G=[].concat(Ie);return W.forEach(function(fe,Te){G[Te]=(Qe.levels[fe]&1?be(Ie[fe]):null)||Ie[fe]}),G.join("")}function ut(Ie,Qe,tt,Re){for(var W=He(Ie,Qe,tt,Re),G=[],fe=0;fe<Ie.length;fe++)G[fe]=fe;return W.forEach(function(Te){for(var je=Te[0],Ye=Te[1],qe=G.slice(je,Ye+1),Ke=qe.length;Ke--;)G[Ye-Ke]=qe[Ke]}),G}return e.closingToOpeningBracket=D,e.getBidiCharType=v,e.getBidiCharTypeName=x,e.getCanonicalBracket=F,e.getEmbeddingLevels=we,e.getMirroredCharacter=be,e.getMirroredCharactersMap=Ge,e.getReorderSegments=He,e.getReorderedIndices=ut,e.getReorderedString=Ue,e.openingToClosingBracket=L,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return o}const N2=/\bvoid\s+main\s*\(\s*\)\s*{/g;function xy(o){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,i){let r=Kt[i];return r?xy(r):n}return o.replace(e,t)}const or=[];for(let o=0;o<256;o++)or[o]=(o<16?"0":"")+o.toString(16);function sk(){const o=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(or[o&255]+or[o>>8&255]+or[o>>16&255]+or[o>>24&255]+"-"+or[e&255]+or[e>>8&255]+"-"+or[e>>16&15|64]+or[e>>24&255]+"-"+or[t&63|128]+or[t>>8&255]+"-"+or[t>>16&255]+or[t>>24&255]+or[n&255]+or[n>>8&255]+or[n>>16&255]+or[n>>24&255]).toUpperCase()}const Du=Object.assign||function(){let o=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])}return o},ok=Date.now(),ES=new WeakMap,TS=new Map;let ak=1e10;function _y(o,e){const t=fk(e);let n=ES.get(o);if(n||ES.set(o,n=Object.create(null)),n[t])return new n[t];const i=`_onBeforeCompile${t}`,r=function(d,p){o.onBeforeCompile.call(this,d,p);const g=this.customProgramCacheKey()+"|"+d.vertexShader+"|"+d.fragmentShader;let v=TS[g];if(!v){const x=lk(this,d,e,t);v=TS[g]=x}d.vertexShader=v.vertexShader,d.fragmentShader=v.fragmentShader,Du(d.uniforms,this.uniforms),e.timeUniform&&(d.uniforms[e.timeUniform]={get value(){return Date.now()-ok}}),this[i]&&this[i](d)},a=function(){return l(e.chained?o:o.clone())},l=function(d){const p=Object.create(d,f);return Object.defineProperty(p,"baseMaterial",{value:o}),Object.defineProperty(p,"id",{value:ak++}),p.uuid=sk(),p.uniforms=Du({},d.uniforms,e.uniforms),p.defines=Du({},d.defines,e.defines),p.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",p.extensions=Du({},d.extensions,e.extensions),p._listeners=void 0,p},f={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return o.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return r},set(d){this[i]=d}},copy:{writable:!0,configurable:!0,value:function(d){return o.copy.call(this,d),!o.isShaderMaterial&&!o.isDerivedMaterial&&(Du(this.extensions,d.extensions),Du(this.defines,d.defines),Du(this.uniforms,Fy.clone(d.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const d=new o.constructor;return l(d).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let d=this._depthMaterial;return d||(d=this._depthMaterial=_y(o.isDerivedMaterial?o.getDepthMaterial():new Sg({depthPacking:Ay}),e),d.defines.IS_DEPTH_MATERIAL="",d.uniforms=this.uniforms),d}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let d=this._distanceMaterial;return d||(d=this._distanceMaterial=_y(o.isDerivedMaterial?o.getDistanceMaterial():new wg,e),d.defines.IS_DISTANCE_MATERIAL="",d.uniforms=this.uniforms),d}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:d,_distanceMaterial:p}=this;d&&d.dispose(),p&&p.dispose(),o.dispose.call(this)}}};return n[t]=a,new a}function lk(o,{vertexShader:e,fragmentShader:t},n,i){let{vertexDefs:r,vertexMainIntro:a,vertexMainOutro:l,vertexTransform:f,fragmentDefs:d,fragmentMainIntro:p,fragmentMainOutro:g,fragmentColorTransform:v,customRewriter:x,timeUniform:M}=n;if(r=r||"",a=a||"",l=l||"",d=d||"",p=p||"",g=g||"",(f||x)&&(e=xy(e)),(v||x)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=xy(t)),x){let w=x({vertexShader:e,fragmentShader:t});e=w.vertexShader,t=w.fragmentShader}if(v){let w=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,S=>(w.push(S),"")),g=`${v}
${w.join(`
`)}
${g}`}if(M){const w=`
uniform float ${M};
`;r=w+r,d=w+d}return f&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,r=`${r}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${f}
}
`,a=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(w,S,C,E)=>/\battribute\s+vec[23]\s+$/.test(E.substr(0,C))?S:`troika_${S}_${i}`),o.map&&o.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=CS(e,i,r,a,l),t=CS(t,i,d,p,g),{vertexShader:e,fragmentShader:t}}function CS(o,e,t,n,i){return(n||i||t)&&(o=o.replace(N2,`
${t}
void troikaOrigMain${e}() {`),o+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${i}
}`),o}function uk(o,e){return o==="uniforms"?void 0:typeof e=="function"?e.toString():e}let ck=0;const AS=new Map;function fk(o){const e=JSON.stringify(o,uk);let t=AS.get(e);return t==null&&AS.set(e,t=++ck),t}function hk(o,e,t){const{defaultFontURL:n}=t,i=Object.create(null),r=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,l="[^\\S\\u00A0]",f=new RegExp(`${l}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function d(E,A){function L(){const D=F=>{console.error(`Failure loading font ${E}${E===n?"":"; trying fallback"}`,F),E!==n&&(E=n,L())};try{const F=new XMLHttpRequest;F.open("get",E,!0),F.responseType="arraybuffer",F.onload=function(){if(F.status>=400)D(new Error(F.statusText));else if(F.status>0)try{const B=o(F.response);A(B)}catch(B){D(B)}},F.onerror=D,F.send()}catch(F){D(F)}}L()}function p(E,A){E||(E=n);let L=i[E];L?L.pending?L.pending.push(A):A(L):(i[E]={pending:[A]},d(E,D=>{let F=i[E].pending;i[E]=D,F.forEach(B=>B(D))}))}function g({text:E="",font:A=n,sdfGlyphSize:L=64,fontSize:D=1,letterSpacing:F=0,lineHeight:B="normal",maxWidth:I=r,direction:z,textAlign:V="left",textIndent:te=0,whiteSpace:X="normal",overflowWrap:K="normal",anchorX:q=0,anchorY:oe=0,includeCaretPositions:ce=!1,chunkedBoundsSize:ye=8192,colorRanges:H=null},Q,Y=!1){const N=w(),O={fontLoad:0,typesetting:0};E.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),E=E.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),D=+D,F=+F,I=+I,B=B||"normal",te=+te,p(A,re=>{const se=isFinite(I);let Z=null,he=null,ue=null,me=null,we=null,Oe=null,ke=null,ae=0,be=0,Ge=X!=="nowrap";const{ascender:He,descender:Ue,unitsPerEm:ut,lineGap:Ie,capHeight:Qe,xHeight:tt}=re;O.fontLoad=w()-N;const Re=w(),W=D/ut;B==="normal"&&(B=(He-Ue+Ie)/ut),B=B*D;const G=(B-(He-Ue)*W)/2,fe=-(He*W+G),Te=Math.min(B,(He-Ue)*W),je=(He+Ue)/2*W-Te/2;let Ye=te,qe=new S;const Ke=[qe];re.forEachGlyph(E,D,F,(Je,ct,et)=>{const Ze=E.charAt(et),ie=Je.advanceWidth*W,Fe=qe.count;let st;if("isEmpty"in Je||(Je.isWhitespace=!!Ze&&new RegExp(l).test(Ze),Je.canBreakAfter=!!Ze&&f.test(Ze),Je.isEmpty=Je.xMin===Je.xMax||Je.yMin===Je.yMax||a.test(Ze)),!Je.isWhitespace&&!Je.isEmpty&&be++,Ge&&se&&!Je.isWhitespace&&ct+ie+Ye>I&&Fe){if(qe.glyphAt(Fe-1).glyphObj.canBreakAfter)st=new S,Ye=-ct;else for(let xe=Fe;xe--;)if(xe===0&&K==="break-word"){st=new S,Ye=-ct;break}else if(qe.glyphAt(xe).glyphObj.canBreakAfter){st=qe.splitAt(xe+1);const Be=st.glyphAt(0).x;Ye-=Be;for(let rt=st.count;rt--;)st.glyphAt(rt).x-=Be;break}st&&(qe.isSoftWrapped=!0,qe=st,Ke.push(qe),ae=I)}let ee=qe.glyphAt(qe.count);ee.glyphObj=Je,ee.x=ct+Ye,ee.width=ie,ee.charIndex=et,Ze===`
`&&(qe=new S,Ke.push(qe),Ye=-(ct+ie+F*D)+te)}),Ke.forEach(Je=>{for(let ct=Je.count;ct--;){let{glyphObj:et,x:Ze,width:ie}=Je.glyphAt(ct);if(!et.isWhitespace){Je.width=Ze+ie,Je.width>ae&&(ae=Je.width);return}}});let Le=0,lt=0;if(q&&(typeof q=="number"?Le=-q:typeof q=="string"&&(Le=-ae*(q==="left"?0:q==="center"?.5:q==="right"?1:x(q)))),oe){if(typeof oe=="number")lt=-oe;else if(typeof oe=="string"){let Je=Ke.length*B;lt=oe==="top"?0:oe==="top-baseline"?-fe:oe==="top-cap"?-fe-Qe*W:oe==="top-ex"?-fe-tt*W:oe==="middle"?Je/2:oe==="bottom"?Je:oe==="bottom-baseline"?Je-G+Ue*W:x(oe)*Je}}if(!Y){const Je=e.getEmbeddingLevels(E,z);Z=new Uint16Array(be),he=new Float32Array(be*2),ue={},Oe=[r,r,-r,-r],ke=[];let ct=fe;ce&&(we=new Float32Array(E.length*3)),H&&(me=new Uint8Array(be*3));let et=0,Ze=-1,ie=-1,Fe,st;if(Ke.forEach((ee,xe)=>{let{count:Be,width:rt}=ee;if(Be>0){let mt=0;for(let Ot=Be;Ot--&&ee.glyphAt(Ot).glyphObj.isWhitespace;)mt++;let Yt=0,kt=0;if(V==="center")Yt=(ae-rt)/2;else if(V==="right")Yt=ae-rt;else if(V==="justify"&&ee.isSoftWrapped){let Ot=0;for(let zt=Be-mt;zt--;)ee.glyphAt(zt).glyphObj.isWhitespace&&Ot++;kt=(ae-rt)/Ot}if(kt||Yt){let Ot=0;for(let zt=0;zt<Be;zt++){let Ei=ee.glyphAt(zt);const Wn=Ei.glyphObj;Ei.x+=Yt+Ot,kt!==0&&Wn.isWhitespace&&zt<Be-mt&&(Ot+=kt,Ei.width+=kt)}}const Vt=e.getReorderSegments(E,Je,ee.glyphAt(0).charIndex,ee.glyphAt(ee.count-1).charIndex);for(let Ot=0;Ot<Vt.length;Ot++){const[zt,Ei]=Vt[Ot];let Wn=1/0,un=-1/0;for(let j=0;j<Be;j++)if(ee.glyphAt(j).charIndex>=zt){let _e=j,Ce=j;for(;Ce<Be;Ce++){let ge=ee.glyphAt(Ce);if(ge.charIndex>Ei)break;Ce<Be-mt&&(Wn=Math.min(Wn,ge.x),un=Math.max(un,ge.x+ge.width))}for(let ge=_e;ge<Ce;ge++){const Ne=ee.glyphAt(ge);Ne.x=un-(Ne.x+Ne.width-Wn)}break}}let Gt;const en=Ot=>Gt=Ot;for(let Ot=0;Ot<Be;Ot++){let zt=ee.glyphAt(Ot);Gt=zt.glyphObj;const Ei=Gt.index,Wn=Je.levels[zt.charIndex]&1;if(Wn){const un=e.getMirroredCharacter(E[zt.charIndex]);un&&re.forEachGlyph(un,0,0,en)}if(ce){const{charIndex:un}=zt,j=zt.x+Le,_e=zt.x+zt.width+Le;we[un*3]=Wn?_e:j,we[un*3+1]=Wn?j:_e,we[un*3+2]=ct+je+lt;const Ce=un-Ze;Ce>1&&M(we,Ze,Ce),Ze=un}if(H){const{charIndex:un}=zt;for(;un>ie;)ie++,H.hasOwnProperty(ie)&&(st=H[ie])}if(!Gt.isWhitespace&&!Gt.isEmpty){const un=et++;ue[Ei]||(ue[Ei]={path:Gt.path,pathBounds:[Gt.xMin,Gt.yMin,Gt.xMax,Gt.yMax]});const j=zt.x+Le,_e=ct+lt;he[un*2]=j,he[un*2+1]=_e;const Ce=j+Gt.xMin*W,ge=_e+Gt.yMin*W,Ne=j+Gt.xMax*W,St=_e+Gt.yMax*W;Ce<Oe[0]&&(Oe[0]=Ce),ge<Oe[1]&&(Oe[1]=ge),Ne>Oe[2]&&(Oe[2]=Ne),St>Oe[3]&&(Oe[3]=St),un%ye===0&&(Fe={start:un,end:un,rect:[r,r,-r,-r]},ke.push(Fe)),Fe.end++;const Ct=Fe.rect;if(Ce<Ct[0]&&(Ct[0]=Ce),ge<Ct[1]&&(Ct[1]=ge),Ne>Ct[2]&&(Ct[2]=Ne),St>Ct[3]&&(Ct[3]=St),Z[un]=Ei,H){const At=un*3;me[At]=st>>16&255,me[At+1]=st>>8&255,me[At+2]=st&255}}}}ct-=B}),we){const ee=E.length-Ze;ee>1&&M(we,Ze,ee)}}O.typesetting=w()-Re,Q({glyphIds:Z,glyphPositions:he,glyphData:ue,caretPositions:we,caretHeight:Te,glyphColors:me,chunkedBounds:ke,fontSize:D,unitsPerEm:ut,ascender:He*W,descender:Ue*W,capHeight:Qe*W,xHeight:tt*W,lineHeight:B,topBaseline:fe,blockBounds:[Le,lt-Ke.length*B,Le+ae,lt],visibleBounds:Oe,timings:O})})}function v(E,A){g(E,L=>{const[D,F,B,I]=L.blockBounds;A({width:B-D,height:I-F})},{})}function x(E){let A=E.match(/^([\d.]+)%$/),L=A?parseFloat(A[1]):NaN;return isNaN(L)?0:L/100}function M(E,A,L){const D=E[A*3],F=E[A*3+1],B=E[A*3+2],I=(F-D)/L;for(let z=0;z<L;z++){const V=(A+z)*3;E[V]=D+I*z,E[V+1]=D+I*(z+1),E[V+2]=B}}function w(){return(self.performance||Date).now()}function S(){this.data=[]}const C=["glyphObj","x","width","charIndex"];return S.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/C.length)},glyphAt(E){let A=S.flyweight;return A.data=this.data,A.index=E,A},splitAt(E){let A=new S;return A.data=this.data.splice(E*C.length),A}},S.flyweight=C.reduce((E,A,L,D)=>(Object.defineProperty(E,A,{get(){return this.data[this.index*C.length+L]},set(F){this.data[this.index*C.length+L]=F}}),E),{data:null,index:0}),{typeset:g,measure:v,loadFont:p}}const Qu=()=>(self.performance||Date).now(),Gg=F2();let PS;function dk(o,e,t,n,i,r,a,l,f,d,p=!0){return p?mk(o,e,t,n,i,r,a,l,f,d).then(null,g=>(PS||(console.warn("WebGL SDF generation failed, falling back to JS",g),PS=!0),RS(o,e,t,n,i,r,a,l,f,d))):RS(o,e,t,n,i,r,a,l,f,d)}const eg=[],pk=5;let Sy=0;function O2(){const o=Qu();for(;eg.length&&Qu()-o<pk;)eg.shift()();Sy=eg.length?setTimeout(O2,0):0}const mk=(...o)=>new Promise((e,t)=>{eg.push(()=>{const n=Qu();try{Gg.webgl.generateIntoCanvas(...o),e({timing:Qu()-n})}catch(i){t(i)}}),Sy||(Sy=setTimeout(O2,0))}),gk=4,vk=2e3,LS={};let yk=0;function RS(o,e,t,n,i,r,a,l,f,d){const p="TroikaTextSDFGenerator_JS_"+yk++%gk;let g=LS[p];return g||(g=LS[p]={workerModule:op({name:p,workerId:p,dependencies:[F2,Qu],init(v,x){const M=v().javascript.generate;return function(...w){const S=x();return{textureData:M(...w),timing:x()-S}}},getTransferables(v){return[v.textureData.buffer]}}),requests:0,idleTimer:null}),g.requests++,clearTimeout(g.idleTimer),g.workerModule(o,e,t,n,i,r).then(({textureData:v,timing:x})=>{const M=Qu(),w=new Uint8Array(v.length*4);for(let S=0;S<v.length;S++)w[S*4+d]=v[S];return Gg.webglUtils.renderImageData(a,w,l,f,o,e,1<<3-d),x+=Qu()-M,--g.requests===0&&(g.idleTimer=setTimeout(()=>{nk(p)},vk)),{timing:x}})}function xk(o){o._warm||(Gg.webgl.isSupported(o),o._warm=!0)}const _k=Gg.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Sk(){return typeof window>"u"&&(self.window=self),function(o){var e={parse:function(i){var r=e._bin,a=new Uint8Array(i);if(r.readASCII(a,0,4)=="ttcf"){var l=4;r.readUshort(a,l),l+=2,r.readUshort(a,l),l+=2;var f=r.readUint(a,l);l+=4;for(var d=[],p=0;p<f;p++){var g=r.readUint(a,l);l+=4,d.push(e._readFont(a,g))}return d}return[e._readFont(a,0)]},_readFont:function(i,r){var a=e._bin,l=r;a.readFixed(i,r),r+=4;var f=a.readUshort(i,r);r+=2,a.readUshort(i,r),r+=2,a.readUshort(i,r),r+=2,a.readUshort(i,r),r+=2;for(var d=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],p={_data:i,_offset:l},g={},v=0;v<f;v++){var x=a.readASCII(i,r,4);r+=4,a.readUint(i,r),r+=4;var M=a.readUint(i,r);r+=4;var w=a.readUint(i,r);r+=4,g[x]={offset:M,length:w}}for(v=0;v<d.length;v++){var S=d[v];g[S]&&(p[S.trim()]=e[S.trim()].parse(i,g[S].offset,g[S].length,p))}return p},_tabOffset:function(i,r,a){for(var l=e._bin,f=l.readUshort(i,a+4),d=a+12,p=0;p<f;p++){var g=l.readASCII(i,d,4);d+=4,l.readUint(i,d),d+=4;var v=l.readUint(i,d);if(d+=4,l.readUint(i,d),d+=4,g==r)return v}return 0}};e._bin={readFixed:function(i,r){return(i[r]<<8|i[r+1])+(i[r+2]<<8|i[r+3])/65540},readF2dot14:function(i,r){return e._bin.readShort(i,r)/16384},readInt:function(i,r){return e._bin._view(i).getInt32(r)},readInt8:function(i,r){return e._bin._view(i).getInt8(r)},readShort:function(i,r){return e._bin._view(i).getInt16(r)},readUshort:function(i,r){return e._bin._view(i).getUint16(r)},readUshorts:function(i,r,a){for(var l=[],f=0;f<a;f++)l.push(e._bin.readUshort(i,r+2*f));return l},readUint:function(i,r){return e._bin._view(i).getUint32(r)},readUint64:function(i,r){return 4294967296*e._bin.readUint(i,r)+e._bin.readUint(i,r+4)},readASCII:function(i,r,a){for(var l="",f=0;f<a;f++)l+=String.fromCharCode(i[r+f]);return l},readUnicode:function(i,r,a){for(var l="",f=0;f<a;f++){var d=i[r++]<<8|i[r++];l+=String.fromCharCode(d)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,r,a){var l=e._bin._tdec;return l&&r==0&&a==i.length?l.decode(i):e._bin.readASCII(i,r,a)},readBytes:function(i,r,a){for(var l=[],f=0;f<a;f++)l.push(i[r+f]);return l},readASCIIArray:function(i,r,a){for(var l=[],f=0;f<a;f++)l.push(String.fromCharCode(i[r+f]));return l},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,r,a,l,f){var d=e._bin,p={},g=r;d.readFixed(i,r),r+=4;var v=d.readUshort(i,r);r+=2;var x=d.readUshort(i,r);r+=2;var M=d.readUshort(i,r);return r+=2,p.scriptList=e._lctf.readScriptList(i,g+v),p.featureList=e._lctf.readFeatureList(i,g+x),p.lookupList=e._lctf.readLookupList(i,g+M,f),p},e._lctf.readLookupList=function(i,r,a){var l=e._bin,f=r,d=[],p=l.readUshort(i,r);r+=2;for(var g=0;g<p;g++){var v=l.readUshort(i,r);r+=2;var x=e._lctf.readLookupTable(i,f+v,a);d.push(x)}return d},e._lctf.readLookupTable=function(i,r,a){var l=e._bin,f=r,d={tabs:[]};d.ltype=l.readUshort(i,r),r+=2,d.flag=l.readUshort(i,r),r+=2;var p=l.readUshort(i,r);r+=2;for(var g=d.ltype,v=0;v<p;v++){var x=l.readUshort(i,r);r+=2;var M=a(i,g,f+x,d);d.tabs.push(M)}return d},e._lctf.numOfOnes=function(i){for(var r=0,a=0;a<32;a++)(i>>>a&1)!=0&&r++;return r},e._lctf.readClassDef=function(i,r){var a=e._bin,l=[],f=a.readUshort(i,r);if(r+=2,f==1){var d=a.readUshort(i,r);r+=2;var p=a.readUshort(i,r);r+=2;for(var g=0;g<p;g++)l.push(d+g),l.push(d+g),l.push(a.readUshort(i,r)),r+=2}if(f==2){var v=a.readUshort(i,r);for(r+=2,g=0;g<v;g++)l.push(a.readUshort(i,r)),r+=2,l.push(a.readUshort(i,r)),r+=2,l.push(a.readUshort(i,r)),r+=2}return l},e._lctf.getInterval=function(i,r){for(var a=0;a<i.length;a+=3){var l=i[a],f=i[a+1];if(i[a+2],l<=r&&r<=f)return a}return-1},e._lctf.readCoverage=function(i,r){var a=e._bin,l={};l.fmt=a.readUshort(i,r),r+=2;var f=a.readUshort(i,r);return r+=2,l.fmt==1&&(l.tab=a.readUshorts(i,r,f)),l.fmt==2&&(l.tab=a.readUshorts(i,r,3*f)),l},e._lctf.coverageIndex=function(i,r){var a=i.tab;if(i.fmt==1)return a.indexOf(r);if(i.fmt==2){var l=e._lctf.getInterval(a,r);if(l!=-1)return a[l+2]+(r-a[l])}return-1},e._lctf.readFeatureList=function(i,r){var a=e._bin,l=r,f=[],d=a.readUshort(i,r);r+=2;for(var p=0;p<d;p++){var g=a.readASCII(i,r,4);r+=4;var v=a.readUshort(i,r);r+=2;var x=e._lctf.readFeatureTable(i,l+v);x.tag=g.trim(),f.push(x)}return f},e._lctf.readFeatureTable=function(i,r){var a=e._bin,l=r,f={},d=a.readUshort(i,r);r+=2,d>0&&(f.featureParams=l+d);var p=a.readUshort(i,r);r+=2,f.tab=[];for(var g=0;g<p;g++)f.tab.push(a.readUshort(i,r+2*g));return f},e._lctf.readScriptList=function(i,r){var a=e._bin,l=r,f={},d=a.readUshort(i,r);r+=2;for(var p=0;p<d;p++){var g=a.readASCII(i,r,4);r+=4;var v=a.readUshort(i,r);r+=2,f[g.trim()]=e._lctf.readScriptTable(i,l+v)}return f},e._lctf.readScriptTable=function(i,r){var a=e._bin,l=r,f={},d=a.readUshort(i,r);r+=2,f.default=e._lctf.readLangSysTable(i,l+d);var p=a.readUshort(i,r);r+=2;for(var g=0;g<p;g++){var v=a.readASCII(i,r,4);r+=4;var x=a.readUshort(i,r);r+=2,f[v.trim()]=e._lctf.readLangSysTable(i,l+x)}return f},e._lctf.readLangSysTable=function(i,r){var a=e._bin,l={};a.readUshort(i,r),r+=2,l.reqFeature=a.readUshort(i,r),r+=2;var f=a.readUshort(i,r);return r+=2,l.features=a.readUshorts(i,r,f),l},e.CFF={},e.CFF.parse=function(i,r,a){var l=e._bin;(i=new Uint8Array(i.buffer,r,a))[r=0],i[++r],i[++r],i[++r],r++;var f=[];r=e.CFF.readIndex(i,r,f);for(var d=[],p=0;p<f.length-1;p++)d.push(l.readASCII(i,r+f[p],f[p+1]-f[p]));r+=f[f.length-1];var g=[];r=e.CFF.readIndex(i,r,g);var v=[];for(p=0;p<g.length-1;p++)v.push(e.CFF.readDict(i,r+g[p],r+g[p+1]));r+=g[g.length-1];var x=v[0],M=[];r=e.CFF.readIndex(i,r,M);var w=[];for(p=0;p<M.length-1;p++)w.push(l.readASCII(i,r+M[p],M[p+1]-M[p]));if(r+=M[M.length-1],e.CFF.readSubrs(i,r,x),x.CharStrings){r=x.CharStrings,M=[],r=e.CFF.readIndex(i,r,M);var S=[];for(p=0;p<M.length-1;p++)S.push(l.readBytes(i,r+M[p],M[p+1]-M[p]));x.CharStrings=S}if(x.ROS){r=x.FDArray;var C=[];for(r=e.CFF.readIndex(i,r,C),x.FDArray=[],p=0;p<C.length-1;p++){var E=e.CFF.readDict(i,r+C[p],r+C[p+1]);e.CFF._readFDict(i,E,w),x.FDArray.push(E)}r+=C[C.length-1],r=x.FDSelect,x.FDSelect=[];var A=i[r];if(r++,A!=3)throw A;var L=l.readUshort(i,r);for(r+=2,p=0;p<L+1;p++)x.FDSelect.push(l.readUshort(i,r),i[r+2]),r+=3}return x.Encoding&&(x.Encoding=e.CFF.readEncoding(i,x.Encoding,x.CharStrings.length)),x.charset&&(x.charset=e.CFF.readCharset(i,x.charset,x.CharStrings.length)),e.CFF._readFDict(i,x,w),x},e.CFF._readFDict=function(i,r,a){var l;for(var f in r.Private&&(l=r.Private[1],r.Private=e.CFF.readDict(i,l,l+r.Private[0]),r.Private.Subrs&&e.CFF.readSubrs(i,l+r.Private.Subrs,r.Private)),r)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(f)!=-1&&(r[f]=a[r[f]-426+35])},e.CFF.readSubrs=function(i,r,a){var l=e._bin,f=[];r=e.CFF.readIndex(i,r,f);var d,p=f.length;d=p<1240?107:p<33900?1131:32768,a.Bias=d,a.Subrs=[];for(var g=0;g<f.length-1;g++)a.Subrs.push(l.readBytes(i,r+f[g],f[g+1]-f[g]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,r){for(var a=0;a<i.charset.length;a++)if(i.charset[a]==r)return a;return-1},e.CFF.glyphBySE=function(i,r){return r<0||r>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[r])},e.CFF.readEncoding=function(i,r,a){e._bin;var l=[".notdef"],f=i[r];if(r++,f!=0)throw"error: unknown encoding format: "+f;var d=i[r];r++;for(var p=0;p<d;p++)l.push(i[r+p]);return l},e.CFF.readCharset=function(i,r,a){var l=e._bin,f=[".notdef"],d=i[r];if(r++,d==0)for(var p=0;p<a;p++){var g=l.readUshort(i,r);r+=2,f.push(g)}else{if(d!=1&&d!=2)throw"error: format: "+d;for(;f.length<a;){g=l.readUshort(i,r),r+=2;var v=0;for(d==1?(v=i[r],r++):(v=l.readUshort(i,r),r+=2),p=0;p<=v;p++)f.push(g),g++}}return f},e.CFF.readIndex=function(i,r,a){var l=e._bin,f=l.readUshort(i,r)+1,d=i[r+=2];if(r++,d==1)for(var p=0;p<f;p++)a.push(i[r+p]);else if(d==2)for(p=0;p<f;p++)a.push(l.readUshort(i,r+2*p));else if(d==3)for(p=0;p<f;p++)a.push(16777215&l.readUint(i,r+3*p-1));else if(f!=1)throw"unsupported offset size: "+d+", count: "+f;return(r+=f*d)-1},e.CFF.getCharString=function(i,r,a){var l=e._bin,f=i[r],d=i[r+1];i[r+2],i[r+3],i[r+4];var p=1,g=null,v=null;f<=20&&(g=f,p=1),f==12&&(g=100*f+d,p=2),21<=f&&f<=27&&(g=f,p=1),f==28&&(v=l.readShort(i,r+1),p=3),29<=f&&f<=31&&(g=f,p=1),32<=f&&f<=246&&(v=f-139,p=1),247<=f&&f<=250&&(v=256*(f-247)+d+108,p=2),251<=f&&f<=254&&(v=256*-(f-251)-d-108,p=2),f==255&&(v=l.readInt(i,r+1)/65535,p=5),a.val=v??"o"+g,a.size=p},e.CFF.readCharString=function(i,r,a){for(var l=r+a,f=e._bin,d=[];r<l;){var p=i[r],g=i[r+1];i[r+2],i[r+3],i[r+4];var v=1,x=null,M=null;p<=20&&(x=p,v=1),p==12&&(x=100*p+g,v=2),p!=19&&p!=20||(x=p,v=2),21<=p&&p<=27&&(x=p,v=1),p==28&&(M=f.readShort(i,r+1),v=3),29<=p&&p<=31&&(x=p,v=1),32<=p&&p<=246&&(M=p-139,v=1),247<=p&&p<=250&&(M=256*(p-247)+g+108,v=2),251<=p&&p<=254&&(M=256*-(p-251)-g-108,v=2),p==255&&(M=f.readInt(i,r+1)/65535,v=5),d.push(M??"o"+x),r+=v}return d},e.CFF.readDict=function(i,r,a){for(var l=e._bin,f={},d=[];r<a;){var p=i[r],g=i[r+1];i[r+2],i[r+3],i[r+4];var v=1,x=null,M=null;if(p==28&&(M=l.readShort(i,r+1),v=3),p==29&&(M=l.readInt(i,r+1),v=5),32<=p&&p<=246&&(M=p-139,v=1),247<=p&&p<=250&&(M=256*(p-247)+g+108,v=2),251<=p&&p<=254&&(M=256*-(p-251)-g-108,v=2),p==255)throw M=l.readInt(i,r+1)/65535,v=5,"unknown number";if(p==30){var w=[];for(v=1;;){var S=i[r+v];v++;var C=S>>4,E=15&S;if(C!=15&&w.push(C),E!=15&&w.push(E),E==15)break}for(var A="",L=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],D=0;D<w.length;D++)A+=L[w[D]];M=parseFloat(A)}p<=21&&(x=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][p],v=1,p==12&&(x=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][g],v=2)),x!=null?(f[x]=d.length==1?d[0]:d,d=[]):d.push(M),r+=v}return f},e.cmap={},e.cmap.parse=function(i,r,a){i=new Uint8Array(i.buffer,r,a),r=0;var l=e._bin,f={};l.readUshort(i,r),r+=2;var d=l.readUshort(i,r);r+=2;var p=[];f.tables=[];for(var g=0;g<d;g++){var v=l.readUshort(i,r);r+=2;var x=l.readUshort(i,r);r+=2;var M=l.readUint(i,r);r+=4;var w="p"+v+"e"+x,S=p.indexOf(M);if(S==-1){var C;S=f.tables.length,p.push(M);var E=l.readUshort(i,M);E==0?C=e.cmap.parse0(i,M):E==4?C=e.cmap.parse4(i,M):E==6?C=e.cmap.parse6(i,M):E==12?C=e.cmap.parse12(i,M):console.debug("unknown format: "+E,v,x,M),f.tables.push(C)}if(f[w]!=null)throw"multiple tables for one platform+encoding";f[w]=S}return f},e.cmap.parse0=function(i,r){var a=e._bin,l={};l.format=a.readUshort(i,r),r+=2;var f=a.readUshort(i,r);r+=2,a.readUshort(i,r),r+=2,l.map=[];for(var d=0;d<f-6;d++)l.map.push(i[r+d]);return l},e.cmap.parse4=function(i,r){var a=e._bin,l=r,f={};f.format=a.readUshort(i,r),r+=2;var d=a.readUshort(i,r);r+=2,a.readUshort(i,r),r+=2;var p=a.readUshort(i,r);r+=2;var g=p/2;f.searchRange=a.readUshort(i,r),r+=2,f.entrySelector=a.readUshort(i,r),r+=2,f.rangeShift=a.readUshort(i,r),r+=2,f.endCount=a.readUshorts(i,r,g),r+=2*g,r+=2,f.startCount=a.readUshorts(i,r,g),r+=2*g,f.idDelta=[];for(var v=0;v<g;v++)f.idDelta.push(a.readShort(i,r)),r+=2;for(f.idRangeOffset=a.readUshorts(i,r,g),r+=2*g,f.glyphIdArray=[];r<l+d;)f.glyphIdArray.push(a.readUshort(i,r)),r+=2;return f},e.cmap.parse6=function(i,r){var a=e._bin,l={};l.format=a.readUshort(i,r),r+=2,a.readUshort(i,r),r+=2,a.readUshort(i,r),r+=2,l.firstCode=a.readUshort(i,r),r+=2;var f=a.readUshort(i,r);r+=2,l.glyphIdArray=[];for(var d=0;d<f;d++)l.glyphIdArray.push(a.readUshort(i,r)),r+=2;return l},e.cmap.parse12=function(i,r){var a=e._bin,l={};l.format=a.readUshort(i,r),r+=2,r+=2,a.readUint(i,r),r+=4,a.readUint(i,r),r+=4;var f=a.readUint(i,r);r+=4,l.groups=[];for(var d=0;d<f;d++){var p=r+12*d,g=a.readUint(i,p+0),v=a.readUint(i,p+4),x=a.readUint(i,p+8);l.groups.push([g,v,x])}return l},e.glyf={},e.glyf.parse=function(i,r,a,l){for(var f=[],d=0;d<l.maxp.numGlyphs;d++)f.push(null);return f},e.glyf._parseGlyf=function(i,r){var a=e._bin,l=i._data,f=e._tabOffset(l,"glyf",i._offset)+i.loca[r];if(i.loca[r]==i.loca[r+1])return null;var d={};if(d.noc=a.readShort(l,f),f+=2,d.xMin=a.readShort(l,f),f+=2,d.yMin=a.readShort(l,f),f+=2,d.xMax=a.readShort(l,f),f+=2,d.yMax=a.readShort(l,f),f+=2,d.xMin>=d.xMax||d.yMin>=d.yMax)return null;if(d.noc>0){d.endPts=[];for(var p=0;p<d.noc;p++)d.endPts.push(a.readUshort(l,f)),f+=2;var g=a.readUshort(l,f);if(f+=2,l.length-f<g)return null;d.instructions=a.readBytes(l,f,g),f+=g;var v=d.endPts[d.noc-1]+1;for(d.flags=[],p=0;p<v;p++){var x=l[f];if(f++,d.flags.push(x),(8&x)!=0){var M=l[f];f++;for(var w=0;w<M;w++)d.flags.push(x),p++}}for(d.xs=[],p=0;p<v;p++){var S=(2&d.flags[p])!=0,C=(16&d.flags[p])!=0;S?(d.xs.push(C?l[f]:-l[f]),f++):C?d.xs.push(0):(d.xs.push(a.readShort(l,f)),f+=2)}for(d.ys=[],p=0;p<v;p++)S=(4&d.flags[p])!=0,C=(32&d.flags[p])!=0,S?(d.ys.push(C?l[f]:-l[f]),f++):C?d.ys.push(0):(d.ys.push(a.readShort(l,f)),f+=2);var E=0,A=0;for(p=0;p<v;p++)E+=d.xs[p],A+=d.ys[p],d.xs[p]=E,d.ys[p]=A}else{var L;d.parts=[];do{L=a.readUshort(l,f),f+=2;var D={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(d.parts.push(D),D.glyphIndex=a.readUshort(l,f),f+=2,1&L){var F=a.readShort(l,f);f+=2;var B=a.readShort(l,f);f+=2}else F=a.readInt8(l,f),f++,B=a.readInt8(l,f),f++;2&L?(D.m.tx=F,D.m.ty=B):(D.p1=F,D.p2=B),8&L?(D.m.a=D.m.d=a.readF2dot14(l,f),f+=2):64&L?(D.m.a=a.readF2dot14(l,f),f+=2,D.m.d=a.readF2dot14(l,f),f+=2):128&L&&(D.m.a=a.readF2dot14(l,f),f+=2,D.m.b=a.readF2dot14(l,f),f+=2,D.m.c=a.readF2dot14(l,f),f+=2,D.m.d=a.readF2dot14(l,f),f+=2)}while(32&L);if(256&L){var I=a.readUshort(l,f);for(f+=2,d.instr=[],p=0;p<I;p++)d.instr.push(l[f]),f++}}return d},e.GPOS={},e.GPOS.parse=function(i,r,a,l){return e._lctf.parse(i,r,a,l,e.GPOS.subt)},e.GPOS.subt=function(i,r,a,l){var f=e._bin,d=a,p={};if(p.fmt=f.readUshort(i,a),a+=2,r==1||r==2||r==3||r==7||r==8&&p.fmt<=2){var g=f.readUshort(i,a);a+=2,p.coverage=e._lctf.readCoverage(i,g+d)}if(r==1&&p.fmt==1){var v=f.readUshort(i,a);a+=2;var x=e._lctf.numOfOnes(v);v!=0&&(p.pos=e.GPOS.readValueRecord(i,a,v))}else if(r==2&&p.fmt>=1&&p.fmt<=2){v=f.readUshort(i,a),a+=2;var M=f.readUshort(i,a);a+=2,x=e._lctf.numOfOnes(v);var w=e._lctf.numOfOnes(M);if(p.fmt==1){p.pairsets=[];var S=f.readUshort(i,a);a+=2;for(var C=0;C<S;C++){var E=d+f.readUshort(i,a);a+=2;var A=f.readUshort(i,E);E+=2;for(var L=[],D=0;D<A;D++){var F=f.readUshort(i,E);E+=2,v!=0&&(X=e.GPOS.readValueRecord(i,E,v),E+=2*x),M!=0&&(K=e.GPOS.readValueRecord(i,E,M),E+=2*w),L.push({gid2:F,val1:X,val2:K})}p.pairsets.push(L)}}if(p.fmt==2){var B=f.readUshort(i,a);a+=2;var I=f.readUshort(i,a);a+=2;var z=f.readUshort(i,a);a+=2;var V=f.readUshort(i,a);for(a+=2,p.classDef1=e._lctf.readClassDef(i,d+B),p.classDef2=e._lctf.readClassDef(i,d+I),p.matrix=[],C=0;C<z;C++){var te=[];for(D=0;D<V;D++){var X=null,K=null;v!=0&&(X=e.GPOS.readValueRecord(i,a,v),a+=2*x),M!=0&&(K=e.GPOS.readValueRecord(i,a,M),a+=2*w),te.push({val1:X,val2:K})}p.matrix.push(te)}}}else{if(r==9&&p.fmt==1){var q=f.readUshort(i,a);a+=2;var oe=f.readUint(i,a);if(a+=4,l.ltype==9)l.ltype=q;else if(l.ltype!=q)throw"invalid extension substitution";return e.GPOS.subt(i,l.ltype,d+oe)}console.debug("unsupported GPOS table LookupType",r,"format",p.fmt)}return p},e.GPOS.readValueRecord=function(i,r,a){var l=e._bin,f=[];return f.push(1&a?l.readShort(i,r):0),r+=1&a?2:0,f.push(2&a?l.readShort(i,r):0),r+=2&a?2:0,f.push(4&a?l.readShort(i,r):0),r+=4&a?2:0,f.push(8&a?l.readShort(i,r):0),r+=8&a?2:0,f},e.GSUB={},e.GSUB.parse=function(i,r,a,l){return e._lctf.parse(i,r,a,l,e.GSUB.subt)},e.GSUB.subt=function(i,r,a,l){var f=e._bin,d=a,p={};if(p.fmt=f.readUshort(i,a),a+=2,r!=1&&r!=4&&r!=5&&r!=6)return null;if(r==1||r==4||r==5&&p.fmt<=2||r==6&&p.fmt<=2){var g=f.readUshort(i,a);a+=2,p.coverage=e._lctf.readCoverage(i,d+g)}if(r==1&&p.fmt>=1&&p.fmt<=2){if(p.fmt==1)p.delta=f.readShort(i,a),a+=2;else if(p.fmt==2){var v=f.readUshort(i,a);a+=2,p.newg=f.readUshorts(i,a,v),a+=2*p.newg.length}}else if(r==4){p.vals=[],v=f.readUshort(i,a),a+=2;for(var x=0;x<v;x++){var M=f.readUshort(i,a);a+=2,p.vals.push(e.GSUB.readLigatureSet(i,d+M))}}else if(r==5&&p.fmt==2){if(p.fmt==2){var w=f.readUshort(i,a);a+=2,p.cDef=e._lctf.readClassDef(i,d+w),p.scset=[];var S=f.readUshort(i,a);for(a+=2,x=0;x<S;x++){var C=f.readUshort(i,a);a+=2,p.scset.push(C==0?null:e.GSUB.readSubClassSet(i,d+C))}}}else if(r==6&&p.fmt==3){if(p.fmt==3){for(x=0;x<3;x++){v=f.readUshort(i,a),a+=2;for(var E=[],A=0;A<v;A++)E.push(e._lctf.readCoverage(i,d+f.readUshort(i,a+2*A)));a+=2*v,x==0&&(p.backCvg=E),x==1&&(p.inptCvg=E),x==2&&(p.ahedCvg=E)}v=f.readUshort(i,a),a+=2,p.lookupRec=e.GSUB.readSubstLookupRecords(i,a,v)}}else{if(r==7&&p.fmt==1){var L=f.readUshort(i,a);a+=2;var D=f.readUint(i,a);if(a+=4,l.ltype==9)l.ltype=L;else if(l.ltype!=L)throw"invalid extension substitution";return e.GSUB.subt(i,l.ltype,d+D)}console.debug("unsupported GSUB table LookupType",r,"format",p.fmt)}return p},e.GSUB.readSubClassSet=function(i,r){var a=e._bin.readUshort,l=r,f=[],d=a(i,r);r+=2;for(var p=0;p<d;p++){var g=a(i,r);r+=2,f.push(e.GSUB.readSubClassRule(i,l+g))}return f},e.GSUB.readSubClassRule=function(i,r){var a=e._bin.readUshort,l={},f=a(i,r),d=a(i,r+=2);r+=2,l.input=[];for(var p=0;p<f-1;p++)l.input.push(a(i,r)),r+=2;return l.substLookupRecords=e.GSUB.readSubstLookupRecords(i,r,d),l},e.GSUB.readSubstLookupRecords=function(i,r,a){for(var l=e._bin.readUshort,f=[],d=0;d<a;d++)f.push(l(i,r),l(i,r+2)),r+=4;return f},e.GSUB.readChainSubClassSet=function(i,r){var a=e._bin,l=r,f=[],d=a.readUshort(i,r);r+=2;for(var p=0;p<d;p++){var g=a.readUshort(i,r);r+=2,f.push(e.GSUB.readChainSubClassRule(i,l+g))}return f},e.GSUB.readChainSubClassRule=function(i,r){for(var a=e._bin,l={},f=["backtrack","input","lookahead"],d=0;d<f.length;d++){var p=a.readUshort(i,r);r+=2,d==1&&p--,l[f[d]]=a.readUshorts(i,r,p),r+=2*l[f[d]].length}return p=a.readUshort(i,r),r+=2,l.subst=a.readUshorts(i,r,2*p),r+=2*l.subst.length,l},e.GSUB.readLigatureSet=function(i,r){var a=e._bin,l=r,f=[],d=a.readUshort(i,r);r+=2;for(var p=0;p<d;p++){var g=a.readUshort(i,r);r+=2,f.push(e.GSUB.readLigature(i,l+g))}return f},e.GSUB.readLigature=function(i,r){var a=e._bin,l={chain:[]};l.nglyph=a.readUshort(i,r),r+=2;var f=a.readUshort(i,r);r+=2;for(var d=0;d<f-1;d++)l.chain.push(a.readUshort(i,r)),r+=2;return l},e.head={},e.head.parse=function(i,r,a){var l=e._bin,f={};return l.readFixed(i,r),r+=4,f.fontRevision=l.readFixed(i,r),r+=4,l.readUint(i,r),r+=4,l.readUint(i,r),r+=4,f.flags=l.readUshort(i,r),r+=2,f.unitsPerEm=l.readUshort(i,r),r+=2,f.created=l.readUint64(i,r),r+=8,f.modified=l.readUint64(i,r),r+=8,f.xMin=l.readShort(i,r),r+=2,f.yMin=l.readShort(i,r),r+=2,f.xMax=l.readShort(i,r),r+=2,f.yMax=l.readShort(i,r),r+=2,f.macStyle=l.readUshort(i,r),r+=2,f.lowestRecPPEM=l.readUshort(i,r),r+=2,f.fontDirectionHint=l.readShort(i,r),r+=2,f.indexToLocFormat=l.readShort(i,r),r+=2,f.glyphDataFormat=l.readShort(i,r),r+=2,f},e.hhea={},e.hhea.parse=function(i,r,a){var l=e._bin,f={};return l.readFixed(i,r),r+=4,f.ascender=l.readShort(i,r),r+=2,f.descender=l.readShort(i,r),r+=2,f.lineGap=l.readShort(i,r),r+=2,f.advanceWidthMax=l.readUshort(i,r),r+=2,f.minLeftSideBearing=l.readShort(i,r),r+=2,f.minRightSideBearing=l.readShort(i,r),r+=2,f.xMaxExtent=l.readShort(i,r),r+=2,f.caretSlopeRise=l.readShort(i,r),r+=2,f.caretSlopeRun=l.readShort(i,r),r+=2,f.caretOffset=l.readShort(i,r),r+=2,r+=8,f.metricDataFormat=l.readShort(i,r),r+=2,f.numberOfHMetrics=l.readUshort(i,r),r+=2,f},e.hmtx={},e.hmtx.parse=function(i,r,a,l){for(var f=e._bin,d={aWidth:[],lsBearing:[]},p=0,g=0,v=0;v<l.maxp.numGlyphs;v++)v<l.hhea.numberOfHMetrics&&(p=f.readUshort(i,r),r+=2,g=f.readShort(i,r),r+=2),d.aWidth.push(p),d.lsBearing.push(g);return d},e.kern={},e.kern.parse=function(i,r,a,l){var f=e._bin,d=f.readUshort(i,r);if(r+=2,d==1)return e.kern.parseV1(i,r-2,a,l);var p=f.readUshort(i,r);r+=2;for(var g={glyph1:[],rval:[]},v=0;v<p;v++){r+=2,a=f.readUshort(i,r),r+=2;var x=f.readUshort(i,r);r+=2;var M=x>>>8;if((M&=15)!=0)throw"unknown kern table format: "+M;r=e.kern.readFormat0(i,r,g)}return g},e.kern.parseV1=function(i,r,a,l){var f=e._bin;f.readFixed(i,r),r+=4;var d=f.readUint(i,r);r+=4;for(var p={glyph1:[],rval:[]},g=0;g<d;g++){f.readUint(i,r),r+=4;var v=f.readUshort(i,r);r+=2,f.readUshort(i,r),r+=2;var x=v>>>8;if((x&=15)!=0)throw"unknown kern table format: "+x;r=e.kern.readFormat0(i,r,p)}return p},e.kern.readFormat0=function(i,r,a){var l=e._bin,f=-1,d=l.readUshort(i,r);r+=2,l.readUshort(i,r),r+=2,l.readUshort(i,r),r+=2,l.readUshort(i,r),r+=2;for(var p=0;p<d;p++){var g=l.readUshort(i,r);r+=2;var v=l.readUshort(i,r);r+=2;var x=l.readShort(i,r);r+=2,g!=f&&(a.glyph1.push(g),a.rval.push({glyph2:[],vals:[]}));var M=a.rval[a.rval.length-1];M.glyph2.push(v),M.vals.push(x),f=g}return r},e.loca={},e.loca.parse=function(i,r,a,l){var f=e._bin,d=[],p=l.head.indexToLocFormat,g=l.maxp.numGlyphs+1;if(p==0)for(var v=0;v<g;v++)d.push(f.readUshort(i,r+(v<<1))<<1);if(p==1)for(v=0;v<g;v++)d.push(f.readUint(i,r+(v<<2)));return d},e.maxp={},e.maxp.parse=function(i,r,a){var l=e._bin,f={},d=l.readUint(i,r);return r+=4,f.numGlyphs=l.readUshort(i,r),r+=2,d==65536&&(f.maxPoints=l.readUshort(i,r),r+=2,f.maxContours=l.readUshort(i,r),r+=2,f.maxCompositePoints=l.readUshort(i,r),r+=2,f.maxCompositeContours=l.readUshort(i,r),r+=2,f.maxZones=l.readUshort(i,r),r+=2,f.maxTwilightPoints=l.readUshort(i,r),r+=2,f.maxStorage=l.readUshort(i,r),r+=2,f.maxFunctionDefs=l.readUshort(i,r),r+=2,f.maxInstructionDefs=l.readUshort(i,r),r+=2,f.maxStackElements=l.readUshort(i,r),r+=2,f.maxSizeOfInstructions=l.readUshort(i,r),r+=2,f.maxComponentElements=l.readUshort(i,r),r+=2,f.maxComponentDepth=l.readUshort(i,r),r+=2),f},e.name={},e.name.parse=function(i,r,a){var l=e._bin,f={};l.readUshort(i,r),r+=2;var d=l.readUshort(i,r);r+=2,l.readUshort(i,r);for(var p,g=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],v=r+=2,x=0;x<d;x++){var M=l.readUshort(i,r);r+=2;var w=l.readUshort(i,r);r+=2;var S=l.readUshort(i,r);r+=2;var C=l.readUshort(i,r);r+=2;var E=l.readUshort(i,r);r+=2;var A=l.readUshort(i,r);r+=2;var L,D=g[C],F=v+12*d+A;if(M==0)L=l.readUnicode(i,F,E/2);else if(M==3&&w==0)L=l.readUnicode(i,F,E/2);else if(w==0)L=l.readASCII(i,F,E);else if(w==1)L=l.readUnicode(i,F,E/2);else if(w==3)L=l.readUnicode(i,F,E/2);else{if(M!=1)throw"unknown encoding "+w+", platformID: "+M;L=l.readASCII(i,F,E),console.debug("reading unknown MAC encoding "+w+" as ASCII")}var B="p"+M+","+S.toString(16);f[B]==null&&(f[B]={}),f[B][D!==void 0?D:C]=L,f[B]._lang=S}for(var I in f)if(f[I].postScriptName!=null&&f[I]._lang==1033)return f[I];for(var I in f)if(f[I].postScriptName!=null&&f[I]._lang==0)return f[I];for(var I in f)if(f[I].postScriptName!=null&&f[I]._lang==3084)return f[I];for(var I in f)if(f[I].postScriptName!=null)return f[I];for(var I in f){p=I;break}return console.debug("returning name table with languageID "+f[p]._lang),f[p]},e["OS/2"]={},e["OS/2"].parse=function(i,r,a){var l=e._bin.readUshort(i,r);r+=2;var f={};if(l==0)e["OS/2"].version0(i,r,f);else if(l==1)e["OS/2"].version1(i,r,f);else if(l==2||l==3||l==4)e["OS/2"].version2(i,r,f);else{if(l!=5)throw"unknown OS/2 table version: "+l;e["OS/2"].version5(i,r,f)}return f},e["OS/2"].version0=function(i,r,a){var l=e._bin;return a.xAvgCharWidth=l.readShort(i,r),r+=2,a.usWeightClass=l.readUshort(i,r),r+=2,a.usWidthClass=l.readUshort(i,r),r+=2,a.fsType=l.readUshort(i,r),r+=2,a.ySubscriptXSize=l.readShort(i,r),r+=2,a.ySubscriptYSize=l.readShort(i,r),r+=2,a.ySubscriptXOffset=l.readShort(i,r),r+=2,a.ySubscriptYOffset=l.readShort(i,r),r+=2,a.ySuperscriptXSize=l.readShort(i,r),r+=2,a.ySuperscriptYSize=l.readShort(i,r),r+=2,a.ySuperscriptXOffset=l.readShort(i,r),r+=2,a.ySuperscriptYOffset=l.readShort(i,r),r+=2,a.yStrikeoutSize=l.readShort(i,r),r+=2,a.yStrikeoutPosition=l.readShort(i,r),r+=2,a.sFamilyClass=l.readShort(i,r),r+=2,a.panose=l.readBytes(i,r,10),r+=10,a.ulUnicodeRange1=l.readUint(i,r),r+=4,a.ulUnicodeRange2=l.readUint(i,r),r+=4,a.ulUnicodeRange3=l.readUint(i,r),r+=4,a.ulUnicodeRange4=l.readUint(i,r),r+=4,a.achVendID=[l.readInt8(i,r),l.readInt8(i,r+1),l.readInt8(i,r+2),l.readInt8(i,r+3)],r+=4,a.fsSelection=l.readUshort(i,r),r+=2,a.usFirstCharIndex=l.readUshort(i,r),r+=2,a.usLastCharIndex=l.readUshort(i,r),r+=2,a.sTypoAscender=l.readShort(i,r),r+=2,a.sTypoDescender=l.readShort(i,r),r+=2,a.sTypoLineGap=l.readShort(i,r),r+=2,a.usWinAscent=l.readUshort(i,r),r+=2,a.usWinDescent=l.readUshort(i,r),r+=2},e["OS/2"].version1=function(i,r,a){var l=e._bin;return r=e["OS/2"].version0(i,r,a),a.ulCodePageRange1=l.readUint(i,r),r+=4,a.ulCodePageRange2=l.readUint(i,r),r+=4},e["OS/2"].version2=function(i,r,a){var l=e._bin;return r=e["OS/2"].version1(i,r,a),a.sxHeight=l.readShort(i,r),r+=2,a.sCapHeight=l.readShort(i,r),r+=2,a.usDefault=l.readUshort(i,r),r+=2,a.usBreak=l.readUshort(i,r),r+=2,a.usMaxContext=l.readUshort(i,r),r+=2},e["OS/2"].version5=function(i,r,a){var l=e._bin;return r=e["OS/2"].version2(i,r,a),a.usLowerOpticalPointSize=l.readUshort(i,r),r+=2,a.usUpperOpticalPointSize=l.readUshort(i,r),r+=2},e.post={},e.post.parse=function(i,r,a){var l=e._bin,f={};return f.version=l.readFixed(i,r),r+=4,f.italicAngle=l.readFixed(i,r),r+=4,f.underlinePosition=l.readShort(i,r),r+=2,f.underlineThickness=l.readShort(i,r),r+=2,f},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,r){var a=i.cmap,l=-1;if(a.p0e4!=null?l=a.p0e4:a.p3e1!=null?l=a.p3e1:a.p1e0!=null?l=a.p1e0:a.p0e3!=null&&(l=a.p0e3),l==-1)throw"no familiar platform and encoding!";var f=a.tables[l];if(f.format==0)return r>=f.map.length?0:f.map[r];if(f.format==4){for(var d=-1,p=0;p<f.endCount.length;p++)if(r<=f.endCount[p]){d=p;break}return d==-1||f.startCount[d]>r?0:65535&(f.idRangeOffset[d]!=0?f.glyphIdArray[r-f.startCount[d]+(f.idRangeOffset[d]>>1)-(f.idRangeOffset.length-d)]:r+f.idDelta[d])}if(f.format==12){if(r>f.groups[f.groups.length-1][1])return 0;for(p=0;p<f.groups.length;p++){var g=f.groups[p];if(g[0]<=r&&r<=g[1])return g[2]+(r-g[0])}return 0}throw"unknown cmap table format "+f.format},e.U.glyphToPath=function(i,r){var a={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[r]){var l=i.SVG.entries[r];return l==null?a:(typeof l=="string"&&(l=e.SVG.toPath(l),i.SVG.entries[r]=l),l)}if(i.CFF){var f={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},d=i.CFF,p=i.CFF.Private;if(d.ROS){for(var g=0;d.FDSelect[g+2]<=r;)g+=2;p=d.FDArray[d.FDSelect[g+1]].Private}e.U._drawCFF(i.CFF.CharStrings[r],f,d,p,a)}else i.glyf&&e.U._drawGlyf(r,i,a);return a},e.U._drawGlyf=function(i,r,a){var l=r.glyf[i];l==null&&(l=r.glyf[i]=e.glyf._parseGlyf(r,i)),l!=null&&(l.noc>-1?e.U._simpleGlyph(l,a):e.U._compoGlyph(l,r,a))},e.U._simpleGlyph=function(i,r){for(var a=0;a<i.noc;a++){for(var l=a==0?0:i.endPts[a-1]+1,f=i.endPts[a],d=l;d<=f;d++){var p=d==l?f:d-1,g=d==f?l:d+1,v=1&i.flags[d],x=1&i.flags[p],M=1&i.flags[g],w=i.xs[d],S=i.ys[d];if(d==l)if(v){if(!x){e.U.P.moveTo(r,w,S);continue}e.U.P.moveTo(r,i.xs[p],i.ys[p])}else x?e.U.P.moveTo(r,i.xs[p],i.ys[p]):e.U.P.moveTo(r,(i.xs[p]+w)/2,(i.ys[p]+S)/2);v?x&&e.U.P.lineTo(r,w,S):M?e.U.P.qcurveTo(r,w,S,i.xs[g],i.ys[g]):e.U.P.qcurveTo(r,w,S,(w+i.xs[g])/2,(S+i.ys[g])/2)}e.U.P.closePath(r)}},e.U._compoGlyph=function(i,r,a){for(var l=0;l<i.parts.length;l++){var f={cmds:[],crds:[]},d=i.parts[l];e.U._drawGlyf(d.glyphIndex,r,f);for(var p=d.m,g=0;g<f.crds.length;g+=2){var v=f.crds[g],x=f.crds[g+1];a.crds.push(v*p.a+x*p.b+p.tx),a.crds.push(v*p.c+x*p.d+p.ty)}for(g=0;g<f.cmds.length;g++)a.cmds.push(f.cmds[g])}},e.U._getGlyphClass=function(i,r){var a=e._lctf.getInterval(r,i);return a==-1?0:r[a+2]},e.U.getPairAdjustment=function(i,r,a){var l=!1;if(i.GPOS)for(var f=i.GPOS,d=f.lookupList,p=f.featureList,g=[],v=0;v<p.length;v++){var x=p[v];if(x.tag=="kern"){l=!0;for(var M=0;M<x.tab.length;M++)if(!g[x.tab[M]]){g[x.tab[M]]=!0;for(var w=d[x.tab[M]],S=0;S<w.tabs.length;S++)if(w.tabs[S]!=null){var C,E=w.tabs[S];if((!E.coverage||(C=e._lctf.coverageIndex(E.coverage,r))!=-1)&&w.ltype!=1){if(w.ltype==2){var A=null;if(E.fmt==1){var L=E.pairsets[C];for(v=0;v<L.length;v++)L[v].gid2==a&&(A=L[v])}else if(E.fmt==2){var D=e.U._getGlyphClass(r,E.classDef1),F=e.U._getGlyphClass(a,E.classDef2);A=E.matrix[D][F]}if(A){var B=0;return A.val1&&A.val1[2]&&(B+=A.val1[2]),A.val2&&A.val2[0]&&(B+=A.val2[0]),B}}}}}}}if(i.kern&&!l){var I=i.kern.glyph1.indexOf(r);if(I!=-1){var z=i.kern.rval[I].glyph2.indexOf(a);if(z!=-1)return i.kern.rval[I].vals[z]}}return 0},e.U._applySubs=function(i,r,a,l){for(var f=i.length-r-1,d=0;d<a.tabs.length;d++)if(a.tabs[d]!=null){var p,g=a.tabs[d];if(!g.coverage||(p=e._lctf.coverageIndex(g.coverage,i[r]))!=-1){if(a.ltype==1)i[r],g.fmt==1?i[r]=i[r]+g.delta:i[r]=g.newg[p];else if(a.ltype==4)for(var v=g.vals[p],x=0;x<v.length;x++){var M=v[x],w=M.chain.length;if(!(w>f)){for(var S=!0,C=0,E=0;E<w;E++){for(;i[r+C+(1+E)]==-1;)C++;M.chain[E]!=i[r+C+(1+E)]&&(S=!1)}if(S){for(i[r]=M.nglyph,E=0;E<w+C;E++)i[r+E+1]=-1;break}}}else if(a.ltype==5&&g.fmt==2)for(var A=e._lctf.getInterval(g.cDef,i[r]),L=g.cDef[A+2],D=g.scset[L],F=0;F<D.length;F++){var B=D[F],I=B.input;if(!(I.length>f)){for(S=!0,E=0;E<I.length;E++){var z=e._lctf.getInterval(g.cDef,i[r+1+E]);if(A==-1&&g.cDef[z+2]!=I[E]){S=!1;break}}if(S){var V=B.substLookupRecords;for(x=0;x<V.length;x+=2)V[x],V[x+1]}}}else if(a.ltype==6&&g.fmt==3){if(!e.U._glsCovered(i,g.backCvg,r-g.backCvg.length)||!e.U._glsCovered(i,g.inptCvg,r)||!e.U._glsCovered(i,g.ahedCvg,r+g.inptCvg.length))continue;var te=g.lookupRec;for(F=0;F<te.length;F+=2){A=te[F];var X=l[te[F+1]];e.U._applySubs(i,r+A,X,l)}}}}},e.U._glsCovered=function(i,r,a){for(var l=0;l<r.length;l++)if(e._lctf.coverageIndex(r[l],i[a+l])==-1)return!1;return!0},e.U.glyphsToPath=function(i,r,a){for(var l={cmds:[],crds:[]},f=0,d=0;d<r.length;d++){var p=r[d];if(p!=-1){for(var g=d<r.length-1&&r[d+1]!=-1?r[d+1]:0,v=e.U.glyphToPath(i,p),x=0;x<v.crds.length;x+=2)l.crds.push(v.crds[x]+f),l.crds.push(v.crds[x+1]);for(a&&l.cmds.push(a),x=0;x<v.cmds.length;x++)l.cmds.push(v.cmds[x]);a&&l.cmds.push("X"),f+=i.hmtx.aWidth[p],d<r.length-1&&(f+=e.U.getPairAdjustment(i,p,g))}}return l},e.U.P={},e.U.P.moveTo=function(i,r,a){i.cmds.push("M"),i.crds.push(r,a)},e.U.P.lineTo=function(i,r,a){i.cmds.push("L"),i.crds.push(r,a)},e.U.P.curveTo=function(i,r,a,l,f,d,p){i.cmds.push("C"),i.crds.push(r,a,l,f,d,p)},e.U.P.qcurveTo=function(i,r,a,l,f){i.cmds.push("Q"),i.crds.push(r,a,l,f)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,r,a,l,f){for(var d=r.stack,p=r.nStems,g=r.haveWidth,v=r.width,x=r.open,M=0,w=r.x,S=r.y,C=0,E=0,A=0,L=0,D=0,F=0,B=0,I=0,z=0,V=0,te={val:0,size:0};M<i.length;){e.CFF.getCharString(i,M,te);var X=te.val;if(M+=te.size,X=="o1"||X=="o18")d.length%2!=0&&!g&&(v=d.shift()+l.nominalWidthX),p+=d.length>>1,d.length=0,g=!0;else if(X=="o3"||X=="o23")d.length%2!=0&&!g&&(v=d.shift()+l.nominalWidthX),p+=d.length>>1,d.length=0,g=!0;else if(X=="o4")d.length>1&&!g&&(v=d.shift()+l.nominalWidthX,g=!0),x&&e.U.P.closePath(f),S+=d.pop(),e.U.P.moveTo(f,w,S),x=!0;else if(X=="o5")for(;d.length>0;)w+=d.shift(),S+=d.shift(),e.U.P.lineTo(f,w,S);else if(X=="o6"||X=="o7")for(var K=d.length,q=X=="o6",oe=0;oe<K;oe++){var ce=d.shift();q?w+=ce:S+=ce,q=!q,e.U.P.lineTo(f,w,S)}else if(X=="o8"||X=="o24"){K=d.length;for(var ye=0;ye+6<=K;)C=w+d.shift(),E=S+d.shift(),A=C+d.shift(),L=E+d.shift(),w=A+d.shift(),S=L+d.shift(),e.U.P.curveTo(f,C,E,A,L,w,S),ye+=6;X=="o24"&&(w+=d.shift(),S+=d.shift(),e.U.P.lineTo(f,w,S))}else{if(X=="o11")break;if(X=="o1234"||X=="o1235"||X=="o1236"||X=="o1237")X=="o1234"&&(E=S,A=(C=w+d.shift())+d.shift(),V=L=E+d.shift(),F=L,I=S,w=(B=(D=(z=A+d.shift())+d.shift())+d.shift())+d.shift(),e.U.P.curveTo(f,C,E,A,L,z,V),e.U.P.curveTo(f,D,F,B,I,w,S)),X=="o1235"&&(C=w+d.shift(),E=S+d.shift(),A=C+d.shift(),L=E+d.shift(),z=A+d.shift(),V=L+d.shift(),D=z+d.shift(),F=V+d.shift(),B=D+d.shift(),I=F+d.shift(),w=B+d.shift(),S=I+d.shift(),d.shift(),e.U.P.curveTo(f,C,E,A,L,z,V),e.U.P.curveTo(f,D,F,B,I,w,S)),X=="o1236"&&(C=w+d.shift(),E=S+d.shift(),A=C+d.shift(),V=L=E+d.shift(),F=L,B=(D=(z=A+d.shift())+d.shift())+d.shift(),I=F+d.shift(),w=B+d.shift(),e.U.P.curveTo(f,C,E,A,L,z,V),e.U.P.curveTo(f,D,F,B,I,w,S)),X=="o1237"&&(C=w+d.shift(),E=S+d.shift(),A=C+d.shift(),L=E+d.shift(),z=A+d.shift(),V=L+d.shift(),D=z+d.shift(),F=V+d.shift(),B=D+d.shift(),I=F+d.shift(),Math.abs(B-w)>Math.abs(I-S)?w=B+d.shift():S=I+d.shift(),e.U.P.curveTo(f,C,E,A,L,z,V),e.U.P.curveTo(f,D,F,B,I,w,S));else if(X=="o14"){if(d.length>0&&!g&&(v=d.shift()+a.nominalWidthX,g=!0),d.length==4){var H=d.shift(),Q=d.shift(),Y=d.shift(),N=d.shift(),O=e.CFF.glyphBySE(a,Y),re=e.CFF.glyphBySE(a,N);e.U._drawCFF(a.CharStrings[O],r,a,l,f),r.x=H,r.y=Q,e.U._drawCFF(a.CharStrings[re],r,a,l,f)}x&&(e.U.P.closePath(f),x=!1)}else if(X=="o19"||X=="o20")d.length%2!=0&&!g&&(v=d.shift()+l.nominalWidthX),p+=d.length>>1,d.length=0,g=!0,M+=p+7>>3;else if(X=="o21")d.length>2&&!g&&(v=d.shift()+l.nominalWidthX,g=!0),S+=d.pop(),w+=d.pop(),x&&e.U.P.closePath(f),e.U.P.moveTo(f,w,S),x=!0;else if(X=="o22")d.length>1&&!g&&(v=d.shift()+l.nominalWidthX,g=!0),w+=d.pop(),x&&e.U.P.closePath(f),e.U.P.moveTo(f,w,S),x=!0;else if(X=="o25"){for(;d.length>6;)w+=d.shift(),S+=d.shift(),e.U.P.lineTo(f,w,S);C=w+d.shift(),E=S+d.shift(),A=C+d.shift(),L=E+d.shift(),w=A+d.shift(),S=L+d.shift(),e.U.P.curveTo(f,C,E,A,L,w,S)}else if(X=="o26")for(d.length%2&&(w+=d.shift());d.length>0;)C=w,E=S+d.shift(),w=A=C+d.shift(),S=(L=E+d.shift())+d.shift(),e.U.P.curveTo(f,C,E,A,L,w,S);else if(X=="o27")for(d.length%2&&(S+=d.shift());d.length>0;)E=S,A=(C=w+d.shift())+d.shift(),L=E+d.shift(),w=A+d.shift(),S=L,e.U.P.curveTo(f,C,E,A,L,w,S);else if(X=="o10"||X=="o29"){var se=X=="o10"?l:a;if(d.length==0)console.debug("error: empty stack");else{var Z=d.pop(),he=se.Subrs[Z+se.Bias];r.x=w,r.y=S,r.nStems=p,r.haveWidth=g,r.width=v,r.open=x,e.U._drawCFF(he,r,a,l,f),w=r.x,S=r.y,p=r.nStems,g=r.haveWidth,v=r.width,x=r.open}}else if(X=="o30"||X=="o31"){var ue=d.length,me=(ye=0,X=="o31");for(ye+=ue-(K=-3&ue);ye<K;)me?(E=S,A=(C=w+d.shift())+d.shift(),S=(L=E+d.shift())+d.shift(),K-ye==5?(w=A+d.shift(),ye++):w=A,me=!1):(C=w,E=S+d.shift(),A=C+d.shift(),L=E+d.shift(),w=A+d.shift(),K-ye==5?(S=L+d.shift(),ye++):S=L,me=!0),e.U.P.curveTo(f,C,E,A,L,w,S),ye+=4}else{if((X+"").charAt(0)=="o")throw console.debug("Unknown operation: "+X,i),X;d.push(X)}}}r.x=w,r.y=S,r.nStems=p,r.haveWidth=g,r.width=v,r.open=x};var t=e,n={Typr:t};return o.Typr=t,o.default=n,Object.defineProperty(o,"__esModule",{value:!0}),o}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function wk(){return function(o){var e=Uint8Array,t=Uint16Array,n=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(X,K){for(var q=new t(31),oe=0;oe<31;++oe)q[oe]=K+=1<<X[oe-1];var ce=new n(q[30]);for(oe=1;oe<30;++oe)for(var ye=q[oe];ye<q[oe+1];++ye)ce[ye]=ye-q[oe]<<5|oe;return[q,ce]},f=l(i,2),d=f[0],p=f[1];d[28]=258,p[258]=28;for(var g=l(r,0)[0],v=new t(32768),x=0;x<32768;++x){var M=(43690&x)>>>1|(21845&x)<<1;M=(61680&(M=(52428&M)>>>2|(13107&M)<<2))>>>4|(3855&M)<<4,v[x]=((65280&M)>>>8|(255&M)<<8)>>>1}var w=function(X,K,q){for(var oe=X.length,ce=0,ye=new t(K);ce<oe;++ce)++ye[X[ce]-1];var H,Q=new t(K);for(ce=0;ce<K;++ce)Q[ce]=Q[ce-1]+ye[ce-1]<<1;{H=new t(1<<K);var Y=15-K;for(ce=0;ce<oe;++ce)if(X[ce])for(var N=ce<<4|X[ce],O=K-X[ce],re=Q[X[ce]-1]++<<O,se=re|(1<<O)-1;re<=se;++re)H[v[re]>>>Y]=N}return H},S=new e(288);for(x=0;x<144;++x)S[x]=8;for(x=144;x<256;++x)S[x]=9;for(x=256;x<280;++x)S[x]=7;for(x=280;x<288;++x)S[x]=8;var C=new e(32);for(x=0;x<32;++x)C[x]=5;var E=w(S,9),A=w(C,5),L=function(X){for(var K=X[0],q=1;q<X.length;++q)X[q]>K&&(K=X[q]);return K},D=function(X,K,q){var oe=K/8|0;return(X[oe]|X[oe+1]<<8)>>(7&K)&q},F=function(X,K){var q=K/8|0;return(X[q]|X[q+1]<<8|X[q+2]<<16)>>(7&K)},B=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(X,K,q){var oe=new Error(K||B[X]);if(oe.code=X,Error.captureStackTrace&&Error.captureStackTrace(oe,I),!q)throw oe;return oe},z=function(X,K,q){var oe=X.length;if(!oe||q&&!q.l&&oe<5)return K||new e(0);var ce=!K||q,ye=!q||q.i;q||(q={}),K||(K=new e(3*oe));var H,Q=function(Ze){var ie=K.length;if(Ze>ie){var Fe=new e(Math.max(2*ie,Ze));Fe.set(K),K=Fe}},Y=q.f||0,N=q.p||0,O=q.b||0,re=q.l,se=q.d,Z=q.m,he=q.n,ue=8*oe;do{if(!re){q.f=Y=D(X,N,1);var me=D(X,N+1,3);if(N+=3,!me){var we=X[(tt=((H=N)/8|0)+(7&H&&1)+4)-4]|X[tt-3]<<8,Oe=tt+we;if(Oe>oe){ye&&I(0);break}ce&&Q(O+we),K.set(X.subarray(tt,Oe),O),q.b=O+=we,q.p=N=8*Oe;continue}if(me==1)re=E,se=A,Z=9,he=5;else if(me==2){var ke=D(X,N,31)+257,ae=D(X,N+10,15)+4,be=ke+D(X,N+5,31)+1;N+=14;for(var Ge=new e(be),He=new e(19),Ue=0;Ue<ae;++Ue)He[a[Ue]]=D(X,N+3*Ue,7);N+=3*ae;var ut=L(He),Ie=(1<<ut)-1,Qe=w(He,ut);for(Ue=0;Ue<be;){var tt,Re=Qe[D(X,N,Ie)];if(N+=15&Re,(tt=Re>>>4)<16)Ge[Ue++]=tt;else{var W=0,G=0;for(tt==16?(G=3+D(X,N,3),N+=2,W=Ge[Ue-1]):tt==17?(G=3+D(X,N,7),N+=3):tt==18&&(G=11+D(X,N,127),N+=7);G--;)Ge[Ue++]=W}}var fe=Ge.subarray(0,ke),Te=Ge.subarray(ke);Z=L(fe),he=L(Te),re=w(fe,Z),se=w(Te,he)}else I(1);if(N>ue){ye&&I(0);break}}ce&&Q(O+131072);for(var je=(1<<Z)-1,Ye=(1<<he)-1,qe=N;;qe=N){var Ke=(W=re[F(X,N)&je])>>>4;if((N+=15&W)>ue){ye&&I(0);break}if(W||I(2),Ke<256)K[O++]=Ke;else{if(Ke==256){qe=N,re=null;break}var Le=Ke-254;if(Ke>264){var lt=i[Ue=Ke-257];Le=D(X,N,(1<<lt)-1)+d[Ue],N+=lt}var Je=se[F(X,N)&Ye],ct=Je>>>4;if(Je||I(3),N+=15&Je,Te=g[ct],ct>3&&(lt=r[ct],Te+=F(X,N)&(1<<lt)-1,N+=lt),N>ue){ye&&I(0);break}ce&&Q(O+131072);for(var et=O+Le;O<et;O+=4)K[O]=K[O-Te],K[O+1]=K[O+1-Te],K[O+2]=K[O+2-Te],K[O+3]=K[O+3-Te];O=et}}q.l=re,q.p=qe,q.b=O,re&&(Y=1,q.m=Z,q.d=se,q.n=he)}while(!Y);return O==K.length?K:function(Ze,ie,Fe){(Fe==null||Fe>Ze.length)&&(Fe=Ze.length);var st=new(Ze instanceof t?t:Ze instanceof n?n:e)(Fe-ie);return st.set(Ze.subarray(ie,Fe)),st}(K,0,O)},V=new e(0),te=typeof TextDecoder<"u"&&new TextDecoder;try{te.decode(V,{stream:!0})}catch{}return o.convert_streams=function(X){var K=new DataView(X),q=0;function oe(){var ke=K.getUint16(q);return q+=2,ke}function ce(){var ke=K.getUint32(q);return q+=4,ke}function ye(ke){we.setUint16(Oe,ke),Oe+=2}function H(ke){we.setUint32(Oe,ke),Oe+=4}for(var Q={signature:ce(),flavor:ce(),length:ce(),numTables:oe(),reserved:oe(),totalSfntSize:ce(),majorVersion:oe(),minorVersion:oe(),metaOffset:ce(),metaLength:ce(),metaOrigLength:ce(),privOffset:ce(),privLength:ce()},Y=0;Math.pow(2,Y)<=Q.numTables;)Y++;Y--;for(var N=16*Math.pow(2,Y),O=16*Q.numTables-N,re=12,se=[],Z=0;Z<Q.numTables;Z++)se.push({tag:ce(),offset:ce(),compLength:ce(),origLength:ce(),origChecksum:ce()}),re+=16;var he,ue=new Uint8Array(12+16*se.length+se.reduce(function(ke,ae){return ke+ae.origLength+4},0)),me=ue.buffer,we=new DataView(me),Oe=0;return H(Q.flavor),ye(Q.numTables),ye(N),ye(Y),ye(O),se.forEach(function(ke){H(ke.tag),H(ke.origChecksum),H(re),H(ke.origLength),ke.outOffset=re,(re+=ke.origLength)%4!=0&&(re+=4-re%4)}),se.forEach(function(ke){var ae,be=X.slice(ke.offset,ke.offset+ke.compLength);if(ke.compLength!=ke.origLength){var Ge=new Uint8Array(ke.origLength);ae=new Uint8Array(be,2),z(ae,Ge)}else Ge=new Uint8Array(be);ue.set(Ge,ke.outOffset);var He=0;(re=ke.outOffset+ke.origLength)%4!=0&&(He=4-re%4),ue.set(new Uint8Array(He).buffer,ke.outOffset+ke.origLength),he=re+He}),me.slice(0,he)},Object.defineProperty(o,"__esModule",{value:!0}),o}({}).convert_streams}function Mk(o,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,r=2,a=4,l=8,f=16,d=32;let p;function g(D){if(!p){const F={R:r,L:i,D:a,C:f,U:d,T:l};p=new Map;for(let B in n){let I=0;n[B].split(",").forEach(z=>{let[V,te]=z.split("+");V=parseInt(V,36),te=te?parseInt(te,36):0,p.set(I+=V,F[B]);for(let X=te;X--;)p.set(++I,F[B])})}}return p.get(D)||d}const v=1,x=2,M=3,w=4,S=[null,"isol","init","fina","medi"];function C(D){const F=new Uint8Array(D.length);let B=d,I=v,z=-1;for(let V=0;V<D.length;V++){const te=D.codePointAt(V);let X=g(te)|0,K=v;X&l||(B&(i|a|f)?X&(r|a|f)?(K=M,(I===v||I===M)&&F[z]++):X&(i|d)&&(I===x||I===w)&&F[z]--:B&(r|d)&&(I===x||I===w)&&F[z]--,I=F[V]=K,B=X,z=V,te>65535&&V++)}return F}function E(D,F){const B=[];for(let z=0;z<F.length;z++){const V=F.codePointAt(z);V>65535&&z++,B.push(o.U.codeToGlyph(D,V))}const I=D.GSUB;if(I){const{lookupList:z,featureList:V}=I;let te;const X=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,K=[];V.forEach(q=>{if(X.test(q.tag))for(let oe=0;oe<q.tab.length;oe++){if(K[q.tab[oe]])continue;K[q.tab[oe]]=!0;const ce=z[q.tab[oe]],ye=/^(isol|init|fina|medi)$/.test(q.tag);ye&&!te&&(te=C(F));for(let H=0;H<B.length;H++)(!te||!ye||S[te[H]]===q.tag)&&o.U._applySubs(B,H,ce,z)}})}return B}function A(...D){for(let F=0;F<D.length;F++)if(typeof D[F]=="number")return D[F]}function L(D){const F=Object.create(null),B=D["OS/2"],I=D.hhea,z=D.head.unitsPerEm,V=A(B&&B.sTypoAscender,I&&I.ascender,z),te={unitsPerEm:z,ascender:V,descender:A(B&&B.sTypoDescender,I&&I.descender,0),capHeight:A(B&&B.sCapHeight,V),xHeight:A(B&&B.sxHeight,V),lineGap:A(B&&B.sTypoLineGap,I&&I.lineGap),forEachGlyph(X,K,q,oe){let ce=0;const ye=1/te.unitsPerEm*K,H=E(D,X);let Q=0,Y=-1;return H.forEach((N,O)=>{if(N!==-1){let re=F[N];if(!re){const{cmds:se,crds:Z}=o.U.glyphToPath(D,N);let he="",ue=0;for(let ae=0,be=se.length;ae<be;ae++){const Ge=t[se[ae]];he+=se[ae];for(let He=1;He<=Ge;He++)he+=(He>1?",":"")+Z[ue++]}let me,we,Oe,ke;if(Z.length){me=we=1/0,Oe=ke=-1/0;for(let ae=0,be=Z.length;ae<be;ae+=2){let Ge=Z[ae],He=Z[ae+1];Ge<me&&(me=Ge),He<we&&(we=He),Ge>Oe&&(Oe=Ge),He>ke&&(ke=He)}}else me=Oe=we=ke=0;re=F[N]={index:N,advanceWidth:D.hmtx.aWidth[N],xMin:me,yMin:we,xMax:Oe,yMax:ke,path:he,pathCommandCount:se.length}}Y!==-1&&(ce+=o.U.getPairAdjustment(D,Y,N)*ye),oe.call(null,re,ce,Q),re.advanceWidth&&(ce+=re.advanceWidth*ye),q&&(ce+=q*K),Y=N}Q+=X.codePointAt(Q)>65535?2:1}),ce}};return te}return function(F){const B=new Uint8Array(F,0,4),I=o._bin.readASCII(B,0,4);if(I==="wOFF")F=e(F);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return L(o.parse(F)[0])}}const bk=op({name:"Typr Font Parser",dependencies:[Sk,wk,Mk],init(o,e,t){const n=o(),i=e();return t(n,i)}}),Af={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Ek=new vt;function _f(){return(self.performance||Date).now()}const IS=Object.create(null);function z2(o,e){o=Ak({},o);const t=_f();if(o.font=Pk(o.font||Af.defaultFontURL),o.text=""+o.text,o.sdfGlyphSize=o.sdfGlyphSize||Af.sdfGlyphSize,o.colorRanges!=null){let g={};for(let v in o.colorRanges)if(o.colorRanges.hasOwnProperty(v)){let x=o.colorRanges[v];typeof x!="number"&&(x=Ek.set(x).getHex()),g[v]=x}o.colorRanges=g}Object.freeze(o);const{textureWidth:n,sdfExponent:i}=Af,{sdfGlyphSize:r}=o,a=n/r*4;let l=IS[r];if(!l){const g=document.createElement("canvas");g.width=n,g.height=r*256/a,l=IS[r]={glyphCount:0,sdfGlyphSize:r,sdfCanvas:g,sdfTexture:new Jn(g,void 0,void 0,void 0,qn,qn),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,Tk(l)}const{sdfTexture:f,sdfCanvas:d}=l;let p=l.glyphsByFont.get(o.font);p||l.glyphsByFont.set(o.font,p=new Map),Rk(o).then(g=>{const{glyphIds:v,glyphPositions:x,fontSize:M,unitsPerEm:w,timings:S}=g,C=[],E=new Float32Array(v.length*4),A=M/w;let L=0,D=0;const F=_f();v.forEach((te,X)=>{let K=p.get(te);if(!K){const{path:ye,pathBounds:H}=g.glyphData[te],Q=Math.max(H[2]-H[0],H[3]-H[1])/r*(Af.sdfMargin*r+.5),Y=l.glyphCount++,N=[H[0]-Q,H[1]-Q,H[2]+Q,H[3]+Q];p.set(te,K={path:ye,atlasIndex:Y,sdfViewBox:N}),C.push(K)}const{sdfViewBox:q}=K,oe=x[D++],ce=x[D++];E[L++]=oe+q[0]*A,E[L++]=ce+q[1]*A,E[L++]=oe+q[2]*A,E[L++]=ce+q[3]*A,v[X]=K.atlasIndex}),S.quads=(S.quads||0)+(_f()-F);const B=_f();S.sdf={};const I=d.height,z=Math.ceil(l.glyphCount/a),V=Math.pow(2,Math.ceil(Math.log2(z*r)));V>I&&(console.info(`Increasing SDF texture size ${I}->${V}`),_k(d,n,V),f.dispose()),Promise.all(C.map(te=>U2(te,l,o.gpuAccelerateSDF).then(({timing:X})=>{S.sdf[te.atlasIndex]=X}))).then(()=>{C.length&&!l.contextLost&&(B2(l),f.needsUpdate=!0),S.sdfTotal=_f()-B,S.total=_f()-t,e(Object.freeze({parameters:o,sdfTexture:f,sdfGlyphSize:r,sdfExponent:i,glyphBounds:E,glyphAtlasIndices:v,glyphColors:g.glyphColors,caretPositions:g.caretPositions,caretHeight:g.caretHeight,chunkedBounds:g.chunkedBounds,ascender:g.ascender,descender:g.descender,lineHeight:g.lineHeight,capHeight:g.capHeight,xHeight:g.xHeight,topBaseline:g.topBaseline,blockBounds:g.blockBounds,visibleBounds:g.visibleBounds,timings:g.timings}))})}),Promise.resolve().then(()=>{l.contextLost||xk(d)})}function U2({path:o,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:i,contextLost:r},a){if(r)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:f}=Af,d=Math.max(t[2]-t[0],t[3]-t[1]),p=Math.floor(e/4),g=p%(l/n)*n,v=Math.floor(p/(l/n))*n,x=e%4;return dk(n,n,o,t,d,f,i,g,v,x,a)}function Tk(o){const e=o.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),o.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),o.contextLost=!1;const n=[];o.glyphsByFont.forEach(i=>{i.forEach(r=>{n.push(U2(r,o,!0))})}),Promise.all(n).then(()=>{B2(o),o.sdfTexture.needsUpdate=!0})})}function Ck({font:o,characters:e,sdfGlyphSize:t},n){let i=Array.isArray(e)?e.join(`
`):""+e;z2({font:o,sdfGlyphSize:t,text:i},n)}function Ak(o,e){for(let t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}let Vm;function Pk(o){return Vm||(Vm=typeof document>"u"?{}:document.createElement("a")),Vm.href=o,Vm.href}function B2(o){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=o,{width:n,height:i}=e,r=o.sdfCanvas.getContext("webgl");let a=t.image.data;(!a||a.length!==n*i*4)&&(a=new Uint8Array(n*i*4),t.image={width:n,height:i,data:a},t.flipY=!1,t.isDataTexture=!0),r.readPixels(0,0,n,i,r.RGBA,r.UNSIGNED_BYTE,a)}}const Lk=op({name:"Typesetter",dependencies:[Af,bk,hk,rk],init(o,e,t,n){const{defaultFontURL:i}=o;return t(e,n(),{defaultFontURL:i})}}),Rk=op({name:"Typesetter",dependencies:[Lk],init(o){return function(e){return new Promise(t=>{o.typeset(e,t)})}},getTransferables(o){const e=[o.glyphPositions.buffer,o.glyphIds.buffer];return o.caretPositions&&e.push(o.caretPositions.buffer),o.glyphColors&&e.push(o.glyphColors.buffer),e}}),DS={};function Ik(o){let e=DS[o];if(!e){const t=new Va(1,1,o,o),n=t.clone(),i=t.attributes,r=n.attributes,a=new $t,l=i.uv.count;for(let f=0;f<l;f++)r.position.array[f*3]*=-1,r.normal.array[f*3+2]*=-1;["position","normal","uv"].forEach(f=>{a.setAttribute(f,new bt([...i[f].array,...r[f].array],i[f].itemSize))}),a.setIndex([...t.index.array,...n.index.array.map(f=>f+l)]),a.translate(.5,.5,0),e=DS[o]=a}return e}const Dk="aTroikaGlyphBounds",kS="aTroikaGlyphIndex",kk="aTroikaGlyphColor";class Fk extends ex{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Wl,this.boundingBox=new Vl}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Or?t/2:0,e===go?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=Ik(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,i,r){yv(this,Dk,e,4),yv(this,kS,t,1),yv(this,kk,r,3),this._blockBounds=n,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:i,floor:r,min:a,max:l,sin:f,cos:d}=Math,p=i/2,g=i*2,v=Math.abs(t),x=e[0]/v,M=e[2]/v,w=r((x+p)/g)!==r((M+p)/g)?-v:a(f(x)*v,f(M)*v),S=r((x-p)/g)!==r((M-p)/g)?v:l(f(x)*v,f(M)*v),C=r((x+i)/g)!==r((M+i)/g)?v*2:l(v-d(x)*v,v-d(M)*v);n.min.set(w,e[1],t<0?-C:0),n.max.set(S,e[3],t<0?0:C)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(kS).count,n=this._chunkedBounds;if(n)for(let i=n.length;i--;){t=n[i].end;let r=n[i].rect;if(r[1]<e.w&&r[3]>e.y&&r[0]<e.z&&r[2]>e.x)break}this.instanceCount=t}}function yv(o,e,t,n){const i=o.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(o.setAttribute(e,new ec(t,n)),delete o._maxInstanceCount,o.dispose()):i&&o.deleteAttribute(e)}const Nk=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Ok=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,zk=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Uk=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Bk(o){const e=_y(o,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ve},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new gn(0,0,0,0)},uTroikaClipRect:{value:new gn(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ve},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new vt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new ji},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Nk,vertexTransform:Ok,fragmentDefs:zk,fragmentColorTransform:Uk,customRewriter({vertexShader:t,fragmentShader:n}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(N2,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const bx=new Ga({color:16777215,side:go,transparent:!0}),FS=8421504,NS=new Jt,Wm=new J,xv=new J,id=[],Gk=new J,_v="+x+y";function OS(o){return Array.isArray(o)?o[0]:o}let G2=()=>{const o=new bi(new Va(1,1),bx);return G2=()=>o,o},V2=()=>{const o=new bi(new Va(1,1,32,1),bx);return V2=()=>o,o};const Vk={type:"syncstart"},Wk={type:"synccomplete"},W2=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Hk=W2.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let H2=class extends bi{constructor(){const e=new Fk;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=FS,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=_v,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(Vk),z2({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(i=>i&&i())})),this.dispatchEvent(Wk),e&&e()})))}onBeforeRender(e,t,n,i,r,a){this.sync(),r.isTroikaTextMaterial&&this._prepareForRender(r),r._hadOwnSide=r.hasOwnProperty("side"),this.geometry.setSide(r._actualSide=r.side),r.side=Xo}onAfterRender(e,t,n,i,r,a){r._hadOwnSide?r.side=r._actualSide:delete r.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=bx.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=Bk(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return OS(this.material).getDepthMaterial()}get customDistanceMaterial(){return OS(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:l,blockBounds:f}=i;n.uTroikaSDFTexture.value=l,n.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),n.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,n.uTroikaSDFExponent.value=i.sdfExponent,n.uTroikaTotalBounds.value.fromArray(f),n.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let d=0,p=0,g=0,v,x,M,w=0,S=0;if(t){let{outlineWidth:E,outlineOffsetX:A,outlineOffsetY:L,outlineBlur:D,outlineOpacity:F}=this;d=this._parsePercent(E)||0,p=Math.max(0,this._parsePercent(D)||0),v=F,w=this._parsePercent(A)||0,S=this._parsePercent(L)||0}else g=Math.max(0,this._parsePercent(this.strokeWidth)||0),g&&(M=this.strokeColor,n.uTroikaStrokeColor.value.set(M??FS),x=this.strokeOpacity,x==null&&(x=1)),v=this.fillOpacity;n.uTroikaDistanceOffset.value=d,n.uTroikaPositionOffset.value.set(w,S),n.uTroikaBlurRadius.value=p,n.uTroikaStrokeWidth.value=g,n.uTroikaStrokeOpacity.value=x,n.uTroikaFillOpacity.value=v??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let C=this.clipRect;if(C&&Array.isArray(C)&&C.length===4)n.uTroikaClipRect.value.fromArray(C);else{const E=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(f[0]-E,f[1]-E,f[2]+E,f[3]+E)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const r=t?this.outlineColor||0:this.color;if(r==null)delete e.color;else{const l=e.hasOwnProperty("color")?e.color:e.color=new vt;(r!==l._input||typeof r=="object")&&l.set(l._input=r)}let a=this.orientation||_v;if(a!==e._orientation){let l=n.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let f=a!==_v&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(f){let[,d,p,g,v]=f;Wm.set(0,0,0)[p]=d==="-"?1:-1,xv.set(0,0,0)[v]=g==="-"?-1:1,NS.lookAt(Gk,Wm.cross(xv),xv),l.setFromMatrix4(NS)}else l.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Ve){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new Ve){return Wm.copy(e),this.localPositionToTextCoords(this.worldToLocal(Wm),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:i}=this;if(n){const r=n.blockBounds,a=i?V2():G2(),l=a.geometry,{position:f,uv:d}=l.attributes;for(let p=0;p<d.count;p++){let g=r[0]+d.getX(p)*(r[2]-r[0]);const v=r[1]+d.getY(p)*(r[3]-r[1]);let x=0;i&&(x=i-Math.cos(g/i)*i,g=Math.sin(g/i)*i),f.setXYZ(p,g,v,x)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,id.length=0,a.raycast(e,id);for(let p=0;p<id.length;p++)id[p].object=this,t.push(id[p])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,Hk.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};W2.forEach(o=>{const e="_private_"+o;Object.defineProperty(H2.prototype,o,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const Il=We.forwardRef(({sdfGlyphSize:o=64,anchorX:e="center",anchorY:t="middle",font:n,fontSize:i=1,children:r,characters:a,onSync:l,...f},d)=>{const p=La(({invalidate:M})=>M),[g]=We.useState(()=>new H2),[v,x]=We.useMemo(()=>{const M=[];let w="";return We.Children.forEach(r,S=>{typeof S=="string"||typeof S=="number"?w+=S:M.push(S)}),[M,w]},[r]);return qR(()=>new Promise(M=>Ck({font:n,characters:a},M)),["troika-text",n,a]),We.useLayoutEffect(()=>void g.sync(()=>{p(),l&&l(g)})),We.useEffect(()=>()=>g.dispose(),[g]),We.createElement("primitive",Df({object:g,ref:d,font:n,text:x,anchorX:e,anchorY:t,fontSize:i,sdfGlyphSize:o},f),v)}),jk=We.forwardRef(({makeDefault:o,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:r=!1,onChange:a,onStart:l,onEnd:f,...d},p)=>{const g=La(F=>F.invalidate),v=La(F=>F.camera),x=La(F=>F.gl),M=La(F=>F.events),w=La(F=>F.setEvents),S=La(F=>F.set),C=La(F=>F.get),E=La(F=>F.performance),A=e||v,L=n||M.connected||x.domElement,D=We.useMemo(()=>new QD(A),[A]);return Dg(()=>{D.enabled&&D.update()},-1),We.useEffect(()=>(r&&D.connect(r===!0?L:r),D.connect(L),()=>void D.dispose()),[r,L,t,D,g]),We.useEffect(()=>{const F=z=>{g(),t&&E.regress(),a&&a(z)},B=z=>{l&&l(z)},I=z=>{f&&f(z)};return D.addEventListener("change",F),D.addEventListener("start",B),D.addEventListener("end",I),()=>{D.removeEventListener("start",B),D.removeEventListener("end",I),D.removeEventListener("change",F)}},[a,l,f,D,g,w]),We.useEffect(()=>{if(o){const F=C().controls;return S({controls:D}),()=>S({controls:F})}},[o,D]),We.createElement("primitive",Df({ref:p,object:D,enableDamping:i},d))}),Xk=({position:o,label:e,type:t="number",onClick:n,width:i=.6,height:r=.6})=>{const[a,l]=We.useState(!1),[f,d]=We.useState(!1),p=We.useRef(null);let g="#555555",v=.08,x=.22;const M="white",w=[i,r];switch(t){case"equals":g="#2196f3",v=.1;break;case"operator":g="#ff9800",x=.22;break;case"clear":g="#f44336",x=.2;break;case"decimal":g="#607d8b";break;case"memory":g="#4a148c",x=.2;break}return Dg(()=>{if(!p.current)return;const S=new J(o[0],o[1],o[2]);f&&(S.z-=.03),p.current.position.lerp(S,.15);const C=a&&!f?1.05:1;p.current.scale.x=p.current.scale.x*.8+C*.2,p.current.scale.y=p.current.scale.y*.8+C*.2}),Ae.jsxs("mesh",{ref:p,position:o,onPointerOver:()=>l(!0),onPointerOut:()=>{l(!1),d(!1)},onPointerDown:()=>{d(!0)},onPointerUp:()=>{d(!1),n()},castShadow:!0,receiveShadow:!0,children:[Ae.jsx("boxGeometry",{args:[w[0],w[1],v]}),Ae.jsx("meshStandardMaterial",{color:a?"#ffffff":g,roughness:.7,metalness:.1}),Ae.jsx(Il,{position:[0,0,v/2+.01],color:M,fontSize:x,anchorX:"center",anchorY:"middle",rotation:[0,0,0],children:e})]})},Yk=({position:o,value:e})=>{const t=We.useRef(null),n=We.useRef(null),i=We.useRef(null),r=e.length>10?e.slice(0,10):e;return Dg(()=>{if(n.current&&n.current.material){const a=.8+Math.sin(Date.now()*.002)*.1;n.current.material.color.setRGB(0,a,0)}if(i.current&&i.current.material){const a=.05+Math.sin(Date.now()*.0015)*.025;i.current.material.emissiveIntensity=a}}),Ae.jsxs("group",{position:o,children:[Ae.jsxs("mesh",{position:[0,0,-.02],receiveShadow:!0,children:[Ae.jsx("boxGeometry",{args:[2.8,.7,.06]}),Ae.jsx("meshStandardMaterial",{color:"#111111",metalness:.2,roughness:.5})]}),Ae.jsxs("mesh",{ref:t,position:[0,0,0],receiveShadow:!0,children:[Ae.jsx("boxGeometry",{args:[2.65,.55,.02]}),Ae.jsx("meshStandardMaterial",{color:"#0a0a0a",metalness:.2,roughness:.3})]}),Ae.jsxs("mesh",{ref:i,position:[0,0,.01],receiveShadow:!0,children:[Ae.jsx("boxGeometry",{args:[2.6,.5,.01]}),Ae.jsx("meshStandardMaterial",{color:"#152215",emissive:"#00ff00",emissiveIntensity:.05,metalness:.1,roughness:.3,opacity:.9,transparent:!0})]}),Ae.jsx(Il,{ref:n,position:[.9,0,.025],color:"green",fontSize:.35,anchorX:"right",anchorY:"middle",maxWidth:2.4,textAlign:"right",rotation:[0,0,0],children:r}),Ae.jsxs("group",{position:[0,0,0],children:[Ae.jsxs("mesh",{position:[-1.25,.15,.025],scale:.05,children:[Ae.jsx("boxGeometry",{args:[.8,.5,.01]}),Ae.jsx("meshBasicMaterial",{color:"#222222"})]}),Ae.jsx(Il,{position:[-1.2,.15,.03],color:"#333333",fontSize:.05,anchorX:"left",children:"M"}),Ae.jsxs("mesh",{position:[-1.25,0,.025],scale:.05,children:[Ae.jsx("boxGeometry",{args:[.8,.5,.01]}),Ae.jsx("meshBasicMaterial",{color:"#222222"})]}),Ae.jsx(Il,{position:[-1.2,0,.03],color:"#333333",fontSize:.05,anchorX:"left",children:"E"}),Ae.jsxs("mesh",{position:[-1.25,-.15,.025],scale:.05,children:[Ae.jsx("boxGeometry",{args:[.8,.5,.01]}),Ae.jsx("meshBasicMaterial",{color:"#113311"})]}),Ae.jsx(Il,{position:[-1.2,-.15,.03],color:"#1a7a1a",fontSize:.05,anchorX:"left",children:"ON"})]})]})},qk=[{position:[-1.15,-1.75,.1],label:"0",type:"number",width:.5},{position:[-.55,-1.75,.1],label:".",type:"decimal",width:.5},{position:[.05,-1.75,.1],label:"",type:"operator",width:.5},{position:[.95,-1.75,.1],label:"=",type:"equals",width:1.1,height:.5},{position:[-1.15,-1.15,.1],label:"7",type:"number",width:.5},{position:[-.55,-1.15,.1],label:"8",type:"number",width:.5},{position:[.05,-1.15,.1],label:"9",type:"number",width:.5},{position:[.65,-1.15,.1],label:"",type:"operator",width:.5},{position:[1.25,-1.15,.1],label:"",type:"operator",width:.5},{position:[-1.15,-.55,.1],label:"4",type:"number",width:.5},{position:[-.55,-.55,.1],label:"5",type:"number",width:.5},{position:[.05,-.55,.1],label:"6",type:"number",width:.5},{position:[.65,-.55,.1],label:"+",type:"operator",width:.5},{position:[1.25,-.55,.1],label:"-",type:"operator",width:.5},{position:[-1.15,.05,.1],label:"1",type:"number",width:.5},{position:[-.55,.05,.1],label:"2",type:"number",width:.5},{position:[.05,.05,.1],label:"3",type:"number",width:.5},{position:[.65,.05,.1],label:"DEL",type:"clear",width:.5},{position:[1.25,.05,.1],label:"AC",type:"clear",width:.5},{position:[-1.15,.65,.1],label:"MR",type:"memory",width:.5},{position:[-.55,.65,.1],label:"M+",type:"memory",width:.5},{position:[.05,.65,.1],label:"M-",type:"memory",width:.5},{position:[.65,.65,.1],label:"MC",type:"memory",width:.5},{position:[1.25,.65,.1],label:"%",type:"operator",width:.5}],Zk=()=>{const[o,e]=We.useState("0"),[t,n]=We.useState(null),[i,r]=We.useState(null),[a,l]=We.useState(null),[f,d]=We.useState(!1),[p,g]=We.useState(!1),[v,x]=We.useState(!0),M=We.useRef(null),w=S=>{if(x(!1),setTimeout(()=>x(!0),100),S==="MR"&&i!==null){e(i.toString()),d(!1);return}else if(S==="M+"){const C=parseFloat(o);r(E=>E!==null?E+C:C),d(!0);return}else if(S==="M-"){const C=parseFloat(o);r(E=>E!==null?E-C:-C),d(!0);return}else if(S==="MC"){r(null);return}if(S==="AC"){e("0"),n(null),l(null),d(!1),g(!1);return}else if(S==="DEL"){p?(e("0"),g(!1)):o.length>1?e(o.slice(0,-1)):e("0");return}if(p){e("0"),g(!1),d(!1);return}if(S===""){e(C=>C.startsWith("-")?C.substring(1):`-${C}`);return}if(S==="%"){const C=parseFloat(o);e((C/100).toString());return}if(["+","-","","","="].includes(S)){let C=S;if(S===""&&(C="*"),S===""&&(C="/"),S==="="){if(t!==null&&a){const E=parseFloat(o);let A;try{switch(a){case"+":A=t+E;break;case"-":A=t-E;break;case"*":A=t*E;break;case"/":if(E===0)throw new Error("Division by zero");A=t/E;break;default:A=E}if(!isFinite(A))throw new Error("Invalid operation");const L=A.toString();e(L.length>10?A.toExponential(4):L)}catch{e("Error"),g(!0)}n(null),l(null),d(!0)}}else l(C),n(parseFloat(o)),d(!0)}else S==="."?f?(e("0."),d(!1)):o.includes(".")||e(o+"."):f?(e(S),d(!1)):o.replace(".","").length<10&&e(o==="0"?S:o+S)};return Ae.jsxs("group",{ref:M,position:[.5,.08,-.3],rotation:[-Math.PI/2,0,-Math.PI/24],children:[Ae.jsxs("mesh",{position:[0,-.45,-.1],receiveShadow:!0,castShadow:!0,children:[Ae.jsx("boxGeometry",{args:[3.3,4,.25]}),Ae.jsx("meshStandardMaterial",{color:"#323232",roughness:.6})]}),Ae.jsxs("mesh",{position:[0,-.45,.04],receiveShadow:!0,castShadow:!0,children:[Ae.jsx("boxGeometry",{args:[3.05,3.75,.15]}),Ae.jsx("meshStandardMaterial",{color:"#3a3a3a",roughness:.7})]}),Ae.jsxs("mesh",{position:[0,1,.06],receiveShadow:!0,children:[Ae.jsx("boxGeometry",{args:[3.05,.05,.15]}),Ae.jsx("meshStandardMaterial",{color:"#222222",roughness:.5})]}),Ae.jsxs("mesh",{position:[-.95,1.4,.06],receiveShadow:!0,children:[Ae.jsx("boxGeometry",{args:[1,.3,.01]}),Ae.jsx("meshStandardMaterial",{color:v?"#1a1a1a":"#0c0c0c",roughness:.2,metalness:.8})]}),Ae.jsxs("mesh",{position:[.95,1.4,.07],children:[Ae.jsx("planeGeometry",{args:[.9,.2]}),Ae.jsx("meshStandardMaterial",{color:"#222222",transparent:!0,opacity:0})]}),Ae.jsx(Il,{position:[.95,1.4,.1],color:"#888888",fontSize:.18,anchorX:"center",anchorY:"middle",children:"CASIO"}),Ae.jsx(Il,{position:[.95,1.25,.1],color:"#666666",fontSize:.1,anchorX:"center",anchorY:"middle",children:"fx-115ES PLUS"}),Ae.jsxs("group",{position:[0,1.75,0],children:[Ae.jsxs("mesh",{position:[0,0,.05],receiveShadow:!0,children:[Ae.jsx("boxGeometry",{args:[2.9,1,.03]}),Ae.jsx("meshStandardMaterial",{color:"#111111",metalness:.1,roughness:.8})]}),Ae.jsx(Yk,{position:[0,0,.06],value:o})]}),qk.map((S,C)=>Ae.jsx(Xk,{position:S.position,label:S.label,type:S.type,width:S.width,height:S.height||.5,onClick:()=>w(S.label)},C)),Ae.jsxs("mesh",{position:[0,-.45,.08],receiveShadow:!0,children:[Ae.jsx("boxGeometry",{args:[3,3.6,.01]}),Ae.jsx("meshStandardMaterial",{color:"#2a2a2a",roughness:.7})]})]})},Jk=()=>{const[o,e]=We.useState(!0),[t,n]=We.useState(!1),i=We.useRef(null),{buttonColor:r,buttonY:a}=xS({buttonColor:t?"#cc0000":o?"#880000":"#550000",buttonY:t?.03:.02,config:{tension:300,friction:20}}),{intensity:l,emissiveIntensity:f}=xS({intensity:o?3:0,emissiveIntensity:o?1.2:0,config:{tension:100,friction:20}});return Dg(({clock:d})=>{i.current&&(i.current.rotation.z=Math.sin(d.getElapsedTime()*.2)*.004,i.current.rotation.x=Math.sin(d.getElapsedTime()*.3)*.003)}),Ae.jsxs("group",{children:[Ae.jsxs("mesh",{position:[0,0,0],rotation:[-Math.PI/2,0,0],receiveShadow:!0,castShadow:!0,children:[Ae.jsx("boxGeometry",{args:[10,8,.1]}),Ae.jsx("meshStandardMaterial",{color:"#6d432c",roughness:.8,metalness:.1})]}),[[-4.5,-.75,-3.5],[4.5,-.75,-3.5],[-4.5,-.75,3.5],[4.5,-.75,3.5]].map((d,p)=>Ae.jsxs("mesh",{position:d,receiveShadow:!0,castShadow:!0,children:[Ae.jsx("boxGeometry",{args:[.5,1.5,.5]}),Ae.jsx("meshStandardMaterial",{color:"#3d2b1c",roughness:.8,metalness:.1})]},p)),Ae.jsxs("group",{position:[-4,.05,3],rotation:[0,Math.PI/4,0],ref:i,scale:1.5,children:[Ae.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[Ae.jsx("cylinderGeometry",{args:[.42,.5,.08,32]}),Ae.jsx("meshStandardMaterial",{color:"#1a1a1a",metalness:.6,roughness:.5})]}),Ae.jsxs("mesh",{position:[0,.05,0],castShadow:!0,children:[Ae.jsx("torusGeometry",{args:[.45,.02,16,32]}),Ae.jsx("meshStandardMaterial",{color:"#272727",metalness:.7,roughness:.3})]}),Ae.jsxs(xf.group,{"position-y":a,onClick:()=>e(!o),onPointerOver:()=>n(!0),onPointerOut:()=>n(!1),children:[Ae.jsxs(xf.mesh,{position:[-.3,.01,.3],castShadow:!0,children:[Ae.jsx("cylinderGeometry",{args:[.04,.045,.025,16]}),Ae.jsx(xf.meshStandardMaterial,{color:r,metalness:.5,roughness:.4})]}),Ae.jsx(Il,{position:[-.3,.035,.3],rotation:[-Math.PI/2,0,0],fontSize:.02,color:"#ffffff",anchorX:"center",anchorY:"middle",children:""})]}),Ae.jsx("group",{position:[.2,-.01,-.3],rotation:[Math.PI/2,0,Math.PI/3],children:Ae.jsxs("mesh",{castShadow:!0,children:[Ae.jsx("cylinderGeometry",{args:[.015,.015,.6,8]}),Ae.jsx("meshStandardMaterial",{color:"#111111",roughness:.9})]})}),Ae.jsxs("group",{position:[0,.04,0],children:[Ae.jsxs("mesh",{position:[0,.15,0],castShadow:!0,children:[Ae.jsx("cylinderGeometry",{args:[.06,.08,.3,16]}),Ae.jsx("meshStandardMaterial",{color:"#333333",metalness:.6,roughness:.4})]}),Ae.jsxs("group",{position:[0,.3,0],children:[Ae.jsxs("mesh",{castShadow:!0,children:[Ae.jsx("sphereGeometry",{args:[.07,16,16]}),Ae.jsx("meshStandardMaterial",{color:"#333333",metalness:.7,roughness:.3})]}),Ae.jsxs("group",{rotation:[0,0,Math.PI*.15],children:[Ae.jsxs("mesh",{position:[.25,.4,0],rotation:[0,0,Math.PI*.5],castShadow:!0,children:[Ae.jsx("cylinderGeometry",{args:[.04,.04,.7,12]}),Ae.jsx("meshStandardMaterial",{color:"#444444",metalness:.6,roughness:.4})]}),Ae.jsxs("mesh",{position:[.25,.4,0],rotation:[0,0,Math.PI*.5],children:[Ae.jsx("torusGeometry",{args:[.06,.01,8,32,Math.PI*1.8]}),Ae.jsx("meshStandardMaterial",{color:"#222222",metalness:.7,roughness:.4})]}),Ae.jsxs("group",{position:[.6,.5,0],children:[Ae.jsxs("mesh",{castShadow:!0,children:[Ae.jsx("sphereGeometry",{args:[.06,16,16]}),Ae.jsx("meshStandardMaterial",{color:"#333333",metalness:.7,roughness:.3})]}),Ae.jsxs("group",{rotation:[0,0,-Math.PI*.25],children:[Ae.jsxs("mesh",{position:[.35,.15,0],rotation:[0,0,Math.PI*.5],castShadow:!0,children:[Ae.jsx("cylinderGeometry",{args:[.035,.035,.8,12]}),Ae.jsx("meshStandardMaterial",{color:"#444444",metalness:.6,roughness:.4})]}),Ae.jsxs("group",{position:[.7,.25,0],children:[Ae.jsxs("mesh",{castShadow:!0,children:[Ae.jsx("sphereGeometry",{args:[.05,16,16]}),Ae.jsx("meshStandardMaterial",{color:"#333333",metalness:.7,roughness:.3})]}),Ae.jsxs("group",{rotation:[Math.PI*.18,Math.PI*.15,Math.PI*.08],children:[Ae.jsxs("mesh",{position:[0,.1,0],castShadow:!0,children:[Ae.jsx("cylinderGeometry",{args:[.03,.04,.2,12]}),Ae.jsx("meshStandardMaterial",{color:"#444444",metalness:.6,roughness:.4})]}),Ae.jsxs("group",{position:[0,.25,0],rotation:[0,0,0],children:[Ae.jsxs("mesh",{castShadow:!0,children:[Ae.jsx("coneGeometry",{args:[.28,.35,32,1,!0]}),Ae.jsx("meshStandardMaterial",{color:"#232323",metalness:.4,roughness:.6,side:2})]}),Ae.jsxs("mesh",{position:[0,-.01,0],children:[Ae.jsx("coneGeometry",{args:[.265,.33,32,1,!0]}),Ae.jsx(xf.meshStandardMaterial,{color:"#f8f8f8",metalness:.8,roughness:.2,emissive:"#ffcc88",emissiveIntensity:f,side:2})]}),[...Array(8)].map((d,p)=>Ae.jsxs("mesh",{position:[Math.sin(p/8*Math.PI*2)*.25,.16,Math.cos(p/8*Math.PI*2)*.25],scale:.03,children:[Ae.jsx("sphereGeometry",{args:[1,8,8]}),Ae.jsx("meshStandardMaterial",{color:"#111111",transparent:!0,opacity:.8})]},p)),Ae.jsxs("group",{position:[0,-.12,0],children:[Ae.jsxs("mesh",{children:[Ae.jsx("sphereGeometry",{args:[.09,16,16]}),Ae.jsx(xf.meshStandardMaterial,{color:"#ffffff",emissive:"#ffe0bd",emissiveIntensity:f,transparent:!0,opacity:.9})]}),Ae.jsxs("mesh",{position:[0,.07,0],children:[Ae.jsx("cylinderGeometry",{args:[.025,.04,.06,12]}),Ae.jsx("meshStandardMaterial",{color:"#b3b3b3",metalness:.7,roughness:.3})]}),Ae.jsx(xf.pointLight,{intensity:l,color:"#ffe0bd",distance:15,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-bias":-.001})]}),Ae.jsxs("mesh",{position:[0,.175,0],children:[Ae.jsx("cylinderGeometry",{args:[.04,.04,.03,16]}),Ae.jsx("meshStandardMaterial",{color:"#444444",metalness:.7,roughness:.3})]})]})]})]})]})]})]})]})]})]}),Ae.jsxs("mesh",{position:[0,-1.5,0],rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[Ae.jsx("planeGeometry",{args:[20,20]}),Ae.jsx("meshStandardMaterial",{color:"#e0e0e0",roughness:.8})]}),Ae.jsxs("mesh",{position:[0,2,-7],receiveShadow:!0,children:[Ae.jsx("planeGeometry",{args:[20,8]}),Ae.jsx("meshStandardMaterial",{color:"#f8f8f8",roughness:.95})]}),Ae.jsxs("mesh",{position:[-7,2,0],rotation:[0,Math.PI/2,0],receiveShadow:!0,children:[Ae.jsx("planeGeometry",{args:[14,8]}),Ae.jsx("meshStandardMaterial",{color:"#f5f5f5",roughness:.95})]})]})};function Qk(){return Ae.jsx("div",{style:{width:"100vw",height:"100vh",overflow:"hidden"},children:Ae.jsxs(RI,{camera:{position:[3,5,6],fov:50,up:[0,1,0]},shadows:!0,children:[Ae.jsx("color",{attach:"background",args:["#0a0a0a"]})," ",Ae.jsx("ambientLight",{intensity:.05,color:"#555555"}),Ae.jsx("directionalLight",{intensity:.02,position:[0,10,0],color:"#444",castShadow:!0}),Ae.jsx(Jk,{}),Ae.jsx(Zk,{}),Ae.jsx(jk,{enableZoom:!0,maxDistance:20,minDistance:3,enablePan:!0,maxPolarAngle:Math.PI/1.5,target:[0,.5,0]})]})})}const j2=document.getElementById("root");if(!j2)throw new Error("Failed to find root element");E3.createRoot(j2).render(Ae.jsx(Qk,{}));
